From MAILER-DAEMON Mon Oct  2 01:56:00 2006
Return-Path: 
 <hadoop-dev-return-4048-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74343 invoked from network); 2 Oct 2006 01:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 01:56:00 -0000
Received: (qmail 39385 invoked by uid 500); 2 Oct 2006 01:55:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39354 invoked by uid 500); 2 Oct 2006 01:55:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39342 invoked by uid 99); 2 Oct 2006 01:55:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 18:55:59 -0700
X-ASF-Spam-Status: No,
 hits=3.5 required=5.0 tests=HTML_MESSAGE,MIME_BASE64_TEXT
Received: from [220.95.234.208] ([220.95.234.208:2488]
 helo=ileikr01.nhncorp.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1A/6C-05102-AA170254 for <hadoop-dev@lucene.apache.org>;
 Sun, 01 Oct 2006 18:55:56 -0700
Received: from mailkr01.nhncorp.com ([220.95.234.206])
          by ileikr01.nhncorp.com (Lotus Domino Release 6.5.4FP1)
          with ESMTP id 2006100210554982-3812 ;
          Mon, 2 Oct 2006 10:55:49 +0900
Subject: maximum number of files on 1GB heap memory?
X-Priority: 3 (Normal)
From: =?EUC-KR?B?sejH/MHY?= <jindolk@nhncorp.com>
To: hadoop-dev@lucene.apache.org
Message-ID: 
 <OF66E07FAE.961C1856-ON492571FB.000A9A9F-492571FB.000A9AA0@nhncorp.com>
Date: Mon, 2 Oct 2006 10:55:49 +0900
X-MIMETrack: Itemize by Notes Server on MAILKR01/NHNCORP(Release 6.5.4FP3
 HF89|May 26, 2006) at
 2006-10-02 =?EUC-KR?B?v8DA/CAxMDo1NTo0OQ==?=,
	Serialize by Router on MAILKR01/NHNCORP(Release 6.5.4FP3 HF89|May 26,
 2006) at
 2006-10-02 =?EUC-KR?B?v8DA/CAxMDo1NTo0OQ==?=,
	Serialize complete at 2006-10-02 =?EUC-KR?B?v8DA/CAxMDo1NTo0OQ==?=,
	Itemize by SMTP Server on ILEIKR01/NHNCORP(Release 6.5.4FP1|June 19, 2005) at
 2006-10-02 =?EUC-KR?B?v8DA/CAxMDo1NTo0OQ==?=,
	Serialize by Router on ILEIKR01/NHNCORP(Release 6.5.4FP1|June 19, 2005) at
 2006-10-02 =?EUC-KR?B?v8DA/CAxMDo1NTo1Ng==?=,
	Serialize complete at 2006-10-02 =?EUC-KR?B?v8DA/CAxMDo1NTo1Ng==?=
MIME-Version: 1.0
X-Mailer: BoraWord ActiveX Control 1.6.5.1020
Content-Type: multipart/alternative;
 	boundary="----=_NextPart_000_33F3_DE121168.F448FF54"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_33F3_DE121168.F448FF54
Content-Transfer-Encoding: base64
Content-Type: text/plain;
	charset="us-ascii"

DQpJIG1lYXN1cmVkIGlub2RlIG1lbW9yeSB1c2FnZS4NCkl0IHVzZXMgYWJvdXQgNzAgfiAxMDBi
eXRlIHBlciBvbmUgZmlsZS4NClRoaXMgbWVhbnMgdGhhdCBOYW1lTm9kZSBjYW4gc2VydmUgb25s
eSAxMCBtaWxsaW9uIGZpbGVzLg0KKDFHQiBtZW1vcnkgLyAxMDAgYnl0ZXMgPSAxMCw3MzcsNDE4
IGZpbGVzKQ0KIA0KSW4gZ2VuZXJhbCwgV2ViIHNlYXJjaCBlbmdpbmUgaGFzIG92ZXIgMTAwIG1p
bGxpb24gZmlsZXMuDQpJcyB0aGVyZSBhbnkgb3RoZXIgd2F5IGhhbmRsaW5nIG1hbnkgZmlsZXM/
DQog

------=_NextPart_000_33F3_DE121168.F448FF54--

From MAILER-DAEMON Mon Oct  2 06:29:29 2006
Return-Path: 
 <hadoop-dev-return-4049-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9338 invoked from network); 2 Oct 2006 06:29:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 06:29:29 -0000
Received: (qmail 80072 invoked by uid 500); 2 Oct 2006 06:29:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80026 invoked by uid 500); 2 Oct 2006 06:29:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80017 invoked by uid 99); 2 Oct 2006 06:29:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 23:29:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56006]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B8/B0-16031-6C1B0254 for <hadoop-dev@lucene.apache.org>;
 Sun, 01 Oct 2006 23:29:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23B7E714312
	for <hadoop-dev@lucene.apache.org>; Sun,  1 Oct 2006 23:29:20 -0700 (PDT)
Message-ID: <6834643.1159770560143.JavaMail.root@brutus>
Date: Sun, 1 Oct 2006 23:29:20 -0700 (PDT)
From: "Lee (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-566) CLONE -the hadoop-daemons.sh fails
 with "no such file or directory" when used from a relative symlinked path
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

CLONE -the hadoop-daemons.sh fails with "no such file or directory" when used from a relative symlinked path
------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-566
                 URL: http://issues.apache.org/jira/browse/HADOOP-566
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.5.0
            Reporter: Lee
         Assigned To: Owen O'Malley
             Fix For: 0.5.0


The new shell scripts fail with a relative directory:

% current/bin/hadoop-daemons.sh start datanode
node1: current/bin/..: No such file or directory
node2: current/bin/..: No such file or directory

The problem is that HADOOP_HOME is set to a relative directory and hadoop-daemons does a cd, breaking the other scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 06:31:33 2006
Return-Path: 
 <hadoop-dev-return-4050-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9828 invoked from network); 2 Oct 2006 06:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 06:31:33 -0000
Received: (qmail 84296 invoked by uid 500); 2 Oct 2006 06:31:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84259 invoked by uid 500); 2 Oct 2006 06:31:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84195 invoked by uid 99); 2 Oct 2006 06:31:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 23:31:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45491]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6B/C0-16031-242B0254 for <hadoop-dev@lucene.apache.org>;
 Sun, 01 Oct 2006 23:31:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5BEE9714313
	for <hadoop-dev@lucene.apache.org>; Sun,  1 Oct 2006 23:31:23 -0700 (PDT)
Message-ID: <5566376.1159770683373.JavaMail.root@brutus>
Date: Sun, 1 Oct 2006 23:31:23 -0700 (PDT)
From: "Lee (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-566) CLONE -the hadoop-daemons.sh fails
 with "no such file or directory" when used from a relative symlinked path
In-Reply-To: <6834643.1159770560143.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-566?page=all ]

Lee updated HADOOP-566:
-----------------------

    Attachment: config.patch

Patch to move the conversion of relative path to absolute path after symlink following

> CLONE -the hadoop-daemons.sh fails with "no such file or directory" when used from a relative symlinked path
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-566
>                 URL: http://issues.apache.org/jira/browse/HADOOP-566
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Lee
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: config.patch
>
>
> The new shell scripts fail with a relative directory:
> % current/bin/hadoop-daemons.sh start datanode
> node1: current/bin/..: No such file or directory
> node2: current/bin/..: No such file or directory
> The problem is that HADOOP_HOME is set to a relative directory and hadoop-daemons does a cd, breaking the other scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 06:33:29 2006
Return-Path: 
 <hadoop-dev-return-4051-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10174 invoked from network); 2 Oct 2006 06:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 06:33:29 -0000
Received: (qmail 85702 invoked by uid 500); 2 Oct 2006 06:33:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85512 invoked by uid 500); 2 Oct 2006 06:33:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85503 invoked by uid 99); 2 Oct 2006 06:33:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 23:33:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45512]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2B/D0-16031-7B2B0254 for <hadoop-dev@lucene.apache.org>;
 Sun, 01 Oct 2006 23:33:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2F79D714310
	for <hadoop-dev@lucene.apache.org>; Sun,  1 Oct 2006 23:33:21 -0700 (PDT)
Message-ID: <15401497.1159770801191.JavaMail.root@brutus>
Date: Sun, 1 Oct 2006 23:33:21 -0700 (PDT)
From: "Lee (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-566) CLONE -the hadoop-daemons.sh fails
 with "no such file or directory" when used from a relative symlinked path
In-Reply-To: <6834643.1159770560143.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-566?page=comments#action_12439050 ] 
            
Lee commented on HADOOP-566:
----------------------------

An earlier issue was fixed with the hadoop-config.sh to convert a relative HADOOP_HOME path into an absolute one.  However the code in the hadoop-config.sh that follows symlinks can still return a relative path after following the symlinks.  The attached patch just moves the relative to absolute path conversion code to after the symlink following code.

> CLONE -the hadoop-daemons.sh fails with "no such file or directory" when used from a relative symlinked path
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-566
>                 URL: http://issues.apache.org/jira/browse/HADOOP-566
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Lee
>         Assigned To: Owen O'Malley
>             Fix For: 0.5.0
>
>         Attachments: config.patch
>
>
> The new shell scripts fail with a relative directory:
> % current/bin/hadoop-daemons.sh start datanode
> node1: current/bin/..: No such file or directory
> node2: current/bin/..: No such file or directory
> The problem is that HADOOP_HOME is set to a relative directory and hadoop-daemons does a cd, breaking the other scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 07:04:27 2006
Return-Path: 
 <hadoop-dev-return-4052-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14023 invoked from network); 2 Oct 2006 07:04:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 07:04:27 -0000
Received: (qmail 98069 invoked by uid 500); 2 Oct 2006 07:04:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98038 invoked by uid 500); 2 Oct 2006 07:04:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98029 invoked by uid 99); 2 Oct 2006 07:04:27 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 00:04:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36619]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 48/A1-16031-AF9B0254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 00:04:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 91B5C71430E
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 00:04:19 -0700 (PDT)
Message-ID: <28945636.1159772659594.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 00:04:19 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-567) The build script should record the
 Hadoop version into the build
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The build script should record the Hadoop version into the build
----------------------------------------------------------------

                 Key: HADOOP-567
                 URL: http://issues.apache.org/jira/browse/HADOOP-567
             Project: Hadoop
          Issue Type: New Feature
          Components: util
    Affects Versions: 0.6.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.7.0


It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 

The web/ui would display the version for each of the server home page.

I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 07:32:30 2006
Return-Path: 
 <hadoop-dev-return-4053-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26774 invoked from network); 2 Oct 2006 07:32:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 07:32:30 -0000
Received: (qmail 18389 invoked by uid 500); 2 Oct 2006 07:32:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18354 invoked by uid 500); 2 Oct 2006 07:32:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18345 invoked by uid 99); 2 Oct 2006 07:32:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 00:32:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49640]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 58/00-16499-B80C0254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 00:32:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA34D71430E
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 00:32:20 -0700 (PDT)
Message-ID: <31525731.1159774340760.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 00:32:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-567?page=all ]

Owen O'Malley updated HADOOP-567:
---------------------------------

    Attachment: version.patch

This patch:
  1. creates a new script src/makeBuildStamp that creates a java source file in build/src that records the hadoop version, subversion revision of the root directory, the compilation time, and the user doing the compilation.
  2. adds a new class in hadoop.util.VersionInfo that finds the BuildStamp class using reflection to make sure there are never any compilation problems.
  3. adds a call to the makeBuildStamp in the build.xml. By using "sh" as the program, it works under both cygwin and unix.
  4. updates the job tracker, task tracker, and the name node to report version information on their home pages.
  5. add another switch for cli users so that "hadoop version" prints the version in the jar.

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 08:13:32 2006
Return-Path: 
 <hadoop-dev-return-4054-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39344 invoked from network); 2 Oct 2006 08:13:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 08:13:32 -0000
Received: (qmail 67218 invoked by uid 500); 2 Oct 2006 08:13:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67090 invoked by uid 500); 2 Oct 2006 08:13:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67081 invoked by uid 99); 2 Oct 2006 08:13:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 01:13:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54710]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 07/51-16499-62AC0254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 01:13:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7815714312
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 01:13:19 -0700 (PDT)
Message-ID: <15754487.1159776799748.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 01:13:19 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-568) small jobs benchmark fails: task is
 UNASSIGNED
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

small jobs benchmark fails: task is UNASSIGNED
----------------------------------------------

                 Key: HADOOP-568
                 URL: http://issues.apache.org/jira/browse/HADOOP-568
             Project: Hadoop
          Issue Type: Bug
            Reporter: Yoram Arnon


the small jobs benchmark consistently failes when executed a sufficient number of iterations.
It's just a matter of time before one of the jobs gets stuck, with one map task (out of a 100) simply doesn't get executed.
Looking at the map list, the task is UNASSIGNED.
Restarting the affected task tracker releases the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 16:23:16 2006
Return-Path: 
 <hadoop-dev-return-4055-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40713 invoked from network); 2 Oct 2006 16:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 16:23:16 -0000
Received: (qmail 66968 invoked by uid 500); 2 Oct 2006 16:23:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66826 invoked by uid 500); 2 Oct 2006 16:23:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66780 invoked by uid 99); 2 Oct 2006 16:23:08 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 09:23:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:41573]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 33/60-24395-AEC31254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 09:23:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 93272714315
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 09:22:59 -0700 (PDT)
Message-ID: <20925614.1159806179599.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 09:22:59 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-567?page=all ]

Owen O'Malley updated HADOOP-567:
---------------------------------

    Status: Patch Available  (was: Open)

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 16:36:28 2006
Return-Path: 
 <hadoop-dev-return-4056-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45928 invoked from network); 2 Oct 2006 16:36:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 16:36:28 -0000
Received: (qmail 94493 invoked by uid 500); 2 Oct 2006 16:36:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94360 invoked by uid 500); 2 Oct 2006 16:36:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94278 invoked by uid 99); 2 Oct 2006 16:36:27 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 09:36:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53511]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FB/C0-24395-A0041254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 09:36:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8AC787142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 09:36:19 -0700 (PDT)
Message-ID: <1061528.1159806979565.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 09:36:19 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-569) Hadoop should allow the user to
 dynamically change the number of times to re-try failed tasks before
 declaring the job fail
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hadoop should allow the user to dynamically change the number of times to re-try failed tasks before declaring the job fail
---------------------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-569
                 URL: http://issues.apache.org/jira/browse/HADOOP-569
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Runping Qi



Hadoop has a built-in mechanism to fail a job if some tasks failed more than 3 times. This mechanism works fine in most scenarios. However, in some other cases, it is highly desirable for the user to change (increase) that number. My current running job demonstrates such a scenario: The job has run more than 2.5 days. It is close to complete (90+%). Everything indicates that it will finish eventually in a day, except for one potential danger: some of the tasks are in their 3rd try! 
It will be extremely helpful if I can change the maximun number of tries to 6 instead of 4!


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 17:16:10 2006
Return-Path: 
 <hadoop-dev-return-4057-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70547 invoked from network); 2 Oct 2006 17:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:16:10 -0000
Received: (qmail 86770 invoked by uid 500); 2 Oct 2006 17:16:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86563 invoked by uid 500); 2 Oct 2006 17:16:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86554 invoked by uid 99); 2 Oct 2006 17:16:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:16:09 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=arkady@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.149] ([207.126.228.149:34317]
 helo=rsmtp1.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DF/02-24395-75941254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 10:16:07 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k92HG20a001758;
	Mon, 2 Oct 2006 10:16:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=EoIYNe7qq7ekUYNz0WMI5isJeQoKkawpRK2sxm6Rxmb2vk5Yn5fQDkROCqnoNqWf
In-Reply-To: <1061528.1159806979565.JavaMail.root@brutus>
References: <1061528.1159806979565.JavaMail.root@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <423f0b5a0a48486f36ba715daa4ab3f7@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-569) Hadoop should allow the user to
 dynamically change the number of times to re-try failed tasks before
 declaring the job fail
Date: Mon, 2 Oct 2006 10:15:58 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

While "dynamically change the number of times to re-try" may be a  
useful feature, the underlying problem may be also addressed be
-- Speculative execution (once we have only few tasks remaining, run  
several instances on them on different nodes and use the output of the  
one that completes first). -- I guess there is a H-issue on this.
-- speculative execution with re-splitting -- rather than running  
additional instances of the same "slow task", split its input into  
several "sub-splits" and run "speculative tasks" on the sub-splits.   
I'd invest into this.

On Oct 2, 2006, at 9:36 AM, Runping Qi (JIRA) wrote:

> Hadoop should allow the user to dynamically change the number of times  
> to re-try failed tasks before declaring the job fail
> ----------------------------------------------------------------------- 
> ----------------------------------------------------
>
>                  Key: HADOOP-569
>                  URL: http://issues.apache.org/jira/browse/HADOOP-569
>              Project: Hadoop
>           Issue Type: Improvement
>           Components: mapred
>             Reporter: Runping Qi
>
>
>
> Hadoop has a built-in mechanism to fail a job if some tasks failed  
> more than 3 times. This mechanism works fine in most scenarios.  
> However, in some other cases, it is highly desirable for the user to  
> change (increase) that number. My current running job demonstrates  
> such a scenario: The job has run more than 2.5 days. It is close to  
> complete (90+%). Everything indicates that it will finish eventually  
> in a day, except for one potential danger: some of the tasks are in  
> their 3rd try!
> It will be extremely helpful if I can change the maximun number of  
> tries to 6 instead of 4!
>
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Mon Oct  2 17:26:30 2006
Return-Path: 
 <hadoop-dev-return-4058-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75605 invoked from network); 2 Oct 2006 17:26:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:26:30 -0000
Received: (qmail 16450 invoked by uid 500); 2 Oct 2006 17:26:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16426 invoked by uid 500); 2 Oct 2006 17:26:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16417 invoked by uid 99); 2 Oct 2006 17:26:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:26:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46714]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9D/62-24395-4CB41254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 10:26:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A67967142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 10:26:20 -0700 (PDT)
Message-ID: <24402639.1159809980679.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 10:26:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-568) small jobs benchmark fails: task is
 UNASSIGNED
In-Reply-To: <15754487.1159776799748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-568?page=all ]

Owen O'Malley updated HADOOP-568:
---------------------------------

    Attachment: unassigned-state.patch

I started seeing this last week and I think fundamentally it is caused my some of the new code in localizeJob. However, the error handling is broken in that if something goes wrong in localizeJob, it prints an error message into the log and doesn't report the failure back to the job tracker. This patch should fix that problem.

> small jobs benchmark fails: task is UNASSIGNED
> ----------------------------------------------
>
>                 Key: HADOOP-568
>                 URL: http://issues.apache.org/jira/browse/HADOOP-568
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Yoram Arnon
>         Attachments: unassigned-state.patch
>
>
> the small jobs benchmark consistently failes when executed a sufficient number of iterations.
> It's just a matter of time before one of the jobs gets stuck, with one map task (out of a 100) simply doesn't get executed.
> Looking at the map list, the task is UNASSIGNED.
> Restarting the affected task tracker releases the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 17:26:36 2006
Return-Path: 
 <hadoop-dev-return-4059-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75856 invoked from network); 2 Oct 2006 17:26:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:26:36 -0000
Received: (qmail 17414 invoked by uid 500); 2 Oct 2006 17:26:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17389 invoked by uid 500); 2 Oct 2006 17:26:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17380 invoked by uid 99); 2 Oct 2006 17:26:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:26:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46722]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6E/62-24395-ACB41254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 10:26:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7A936714313
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 10:26:22 -0700 (PDT)
Message-ID: <4815355.1159809982499.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 10:26:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-568) small jobs benchmark fails: task is
 UNASSIGNED
In-Reply-To: <15754487.1159776799748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-568?page=all ]

Owen O'Malley reassigned HADOOP-568:
------------------------------------

    Assignee: Owen O'Malley

> small jobs benchmark fails: task is UNASSIGNED
> ----------------------------------------------
>
>                 Key: HADOOP-568
>                 URL: http://issues.apache.org/jira/browse/HADOOP-568
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>         Attachments: unassigned-state.patch
>
>
> the small jobs benchmark consistently failes when executed a sufficient number of iterations.
> It's just a matter of time before one of the jobs gets stuck, with one map task (out of a 100) simply doesn't get executed.
> Looking at the map list, the task is UNASSIGNED.
> Restarting the affected task tracker releases the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 17:30:30 2006
Return-Path: 
 <hadoop-dev-return-4060-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79354 invoked from network); 2 Oct 2006 17:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:30:30 -0000
Received: (qmail 23451 invoked by uid 500); 2 Oct 2006 17:30:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23243 invoked by uid 500); 2 Oct 2006 17:30:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23234 invoked by uid 99); 2 Oct 2006 17:30:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:30:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:41331]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1A/82-24395-4BC41254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 10:30:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D4C171430E
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 10:30:21 -0700 (PDT)
Message-ID: <11840323.1159810221182.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 10:30:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-568) small jobs benchmark fails: task is
 UNASSIGNED
In-Reply-To: <15754487.1159776799748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-568?page=all ]

Owen O'Malley updated HADOOP-568:
---------------------------------

    Status: Patch Available  (was: Open)

> small jobs benchmark fails: task is UNASSIGNED
> ----------------------------------------------
>
>                 Key: HADOOP-568
>                 URL: http://issues.apache.org/jira/browse/HADOOP-568
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>         Attachments: unassigned-state.patch
>
>
> the small jobs benchmark consistently failes when executed a sufficient number of iterations.
> It's just a matter of time before one of the jobs gets stuck, with one map task (out of a 100) simply doesn't get executed.
> Looking at the map list, the task is UNASSIGNED.
> Restarting the affected task tracker releases the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 17:38:29 2006
Return-Path: 
 <hadoop-dev-return-4061-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88143 invoked from network); 2 Oct 2006 17:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:38:29 -0000
Received: (qmail 56592 invoked by uid 500); 2 Oct 2006 17:38:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56568 invoked by uid 500); 2 Oct 2006 17:38:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56557 invoked by uid 99); 2 Oct 2006 17:38:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:38:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:57995]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id ED/D2-24395-39E41254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 10:38:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B57E171430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 10:38:19 -0700 (PDT)
Message-ID: <21081187.1159810699740.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 10:38:19 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-570) Map tasks may fail due to out of
 memory, if the number of reducers are moderately big
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Map tasks may fail due to out of memory, if the number of reducers are moderately big
-------------------------------------------------------------------------------------

                 Key: HADOOP-570
                 URL: http://issues.apache.org/jira/browse/HADOOP-570
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Runping Qi



Map tasks may fail due to out of memory, if the number of reducers are moderately big. 
In my case, I set child task heap size to 1GB, turned on compression for the mapoutput files. 
The average size of input records is about 30K (I don't know the variation though). 
A lot of map tasks failed due to out of memory when the number of reducers was at 400 and higher.
The number of reducers can be somewhat higher (as high as 800) if the compression for the mapoutput files was off).
This problem will impose a hard limit on the scalability of map/reduce clusters.

One possible solution to this problem is to let the mapper to write out single map output file, 
and then to perform sort/partition as a separate phrase. 
his will also make it unnecessary for  the reducers to perform sort on individual portions from mappers. 
Rather, the reducers should just perform merge operations on the map output files directly. 
This may even allow the possibility of dynamically collect some statistics of  the map outputs and 
use the stats to drive the partition on the mapper side, and obtain the optimal merge plan on the reducer side!
 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 17:57:32 2006
Return-Path: 
 <hadoop-dev-return-4062-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98667 invoked from network); 2 Oct 2006 17:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:57:32 -0000
Received: (qmail 8196 invoked by uid 500); 2 Oct 2006 17:57:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8174 invoked by uid 500); 2 Oct 2006 17:57:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8065 invoked by uid 99); 2 Oct 2006 17:57:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:57:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45851]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9A/73-24395-80351254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 10:57:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD5B871430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 10:57:20 -0700 (PDT)
Message-ID: <19780869.1159811840707.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 10:57:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-522) MapFile should support block
 compression
In-Reply-To: <3893251.1158016342663.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-522?page=all ]

Doug Cutting updated HADOOP-522:
--------------------------------

    Attachment:     (was: block-compress-map-file.patch)

> MapFile should support block compression
> ----------------------------------------
>
>                 Key: HADOOP-522
>                 URL: http://issues.apache.org/jira/browse/HADOOP-522
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>
> MapFile is layered on SequenceFile and permits random-access to sorted data files (typically reduce output) through a parallel index file.  This is used widely in Nutch (e.g. at search time for displaying cached pages, incoming links, etc).  Such sorted data should benefit from block compression, but the current MapFile API does not support specification of block compression.  Also, even if it did, the semantics of SequenceFile methods like seek() and getPosition() are changed under block compression so that MapFile may not work.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 18:08:31 2006
Return-Path: 
 <hadoop-dev-return-4063-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3218 invoked from network); 2 Oct 2006 18:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:08:31 -0000
Received: (qmail 31022 invoked by uid 500); 2 Oct 2006 18:08:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30815 invoked by uid 500); 2 Oct 2006 18:08:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30806 invoked by uid 99); 2 Oct 2006 18:08:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:08:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:41429]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 07/D3-24395-C9551254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 11:08:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A0F0F71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 11:08:20 -0700 (PDT)
Message-ID: <6158951.1159812500656.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 11:08:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-522) MapFile should support block
 compression
In-Reply-To: <3893251.1158016342663.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-522?page=all ]

Doug Cutting updated HADOOP-522:
--------------------------------

    Attachment: block-compress-map-file.patch

Here's a candidate patch.  It:

1. Adds MapFile and SetFile constructors to specify compression type.
2. Fixes MapFile to work correctly with block compression.
3. Fixes SequenceFile to permit random accesses.
4. Cleans up some awkward code in SequenceFile#Reader#readBuffer().
5. Adds some javadoc clarifying a few API assumptions.
5. Extends the SetFile unit test to use block compression.

Can someone familiar with SequenceFile please review this?  Thanks!


> MapFile should support block compression
> ----------------------------------------
>
>                 Key: HADOOP-522
>                 URL: http://issues.apache.org/jira/browse/HADOOP-522
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>         Attachments: block-compress-map-file.patch
>
>
> MapFile is layered on SequenceFile and permits random-access to sorted data files (typically reduce output) through a parallel index file.  This is used widely in Nutch (e.g. at search time for displaying cached pages, incoming links, etc).  Such sorted data should benefit from block compression, but the current MapFile API does not support specification of block compression.  Also, even if it did, the semantics of SequenceFile methods like seek() and getPosition() are changed under block compression so that MapFile may not work.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 18:18:42 2006
Return-Path: 
 <hadoop-dev-return-4064-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8414 invoked from network); 2 Oct 2006 18:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:18:42 -0000
Received: (qmail 55500 invoked by uid 500); 2 Oct 2006 18:18:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55400 invoked by uid 500); 2 Oct 2006 18:18:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55230 invoked by uid 99); 2 Oct 2006 18:18:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:18:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49563]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E1/24-24395-8F751254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 11:18:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2990714315
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 11:18:24 -0700 (PDT)
Message-ID: <3212056.1159813104860.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 11:18:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-552) getMapOutput doesn't reliably detect
 errors and throw to the caller
In-Reply-To: <32889729.1158769702347.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-552?page=all ]

Doug Cutting updated HADOOP-552:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> getMapOutput doesn't reliably detect errors and throw to the caller
> -------------------------------------------------------------------
>
>                 Key: HADOOP-552
>                 URL: http://issues.apache.org/jira/browse/HADOOP-552
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: size-check.patch
>
>
> getMapOutput does not reliabily detect errors in transmission, which usually ends up with an EOFException in the reduce's sort:
> java.io.EOFException
> 	at java.io.DataInputStream.readFully(DataInputStream.java:178)
> 	at java.io.DataInputStream.readFully(DataInputStream.java:152)
> 	at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:952)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:937)
> 	at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:928)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$SortPass.run(SequenceFile.java:1594)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sortPass(SequenceFile.java:1523)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1496)
> 	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1173)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 18:20:33 2006
Return-Path: 
 <hadoop-dev-return-4065-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10185 invoked from network); 2 Oct 2006 18:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:20:33 -0000
Received: (qmail 60629 invoked by uid 500); 2 Oct 2006 18:20:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60613 invoked by uid 500); 2 Oct 2006 18:20:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60604 invoked by uid 99); 2 Oct 2006 18:20:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:20:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44389]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 20/34-24395-C6851254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 11:20:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C9AE77142E0
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 11:20:20 -0700 (PDT)
Message-ID: <12020419.1159813220823.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 11:20:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Doug Cutting updated HADOOP-519:
--------------------------------

    Status: Open  (was: Patch Available)

You use an array of Object to return multiple values.  Wouldn't this be a lot cleaner with a small, private, static inner class?

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 18:27:18 2006
Return-Path: 
 <hadoop-dev-return-4066-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15762 invoked from network); 2 Oct 2006 18:27:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:27:18 -0000
Received: (qmail 72039 invoked by uid 500); 2 Oct 2006 18:27:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72020 invoked by uid 500); 2 Oct 2006 18:27:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72007 invoked by uid 99); 2 Oct 2006 18:27:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:27:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [216.148.227.154] ([216.148.227.154:46925]
 helo=rwcrmhc14.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 92/64-24395-10A51254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 11:27:13 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20061002182710m14003rcske>; Mon, 2 Oct 2006 18:27:10 +0000
Message-ID: <452159FE.1090200@apache.org>
Date: Mon, 02 Oct 2006 11:27:10 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: maximum number of files on 1GB heap memory?
References: 
 <OF66E07FAE.961C1856-ON492571FB.000A9A9F-492571FB.000A9AA0@nhncorp.com>
In-Reply-To: 
 <OF66E07FAE.961C1856-ON492571FB.000A9A9F-492571FB.000A9AA0@nhncorp.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

김형준 wrote:
> I measured inode memory usage.
> It uses about 70 ~ 100byte per one file.
> This means that NameNode can serve only 10 million files.
> (1GB memory / 100 bytes = 10,737,418 files)

If files averaged 1G, then this would permit 100 petabytes, right? 
That's a pretty big filesystem!

> In general, Web search engine has over 100 million files.
> Is there any other way handling many files?

A web search engine might need to support billions of pages, but 
typically pages are not stored one-per-file, but rather in larger files 
each containing many thousands of pages.

Doug

From MAILER-DAEMON Mon Oct  2 18:36:30 2006
Return-Path: 
 <hadoop-dev-return-4067-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24617 invoked from network); 2 Oct 2006 18:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:36:30 -0000
Received: (qmail 1473 invoked by uid 500); 2 Oct 2006 18:36:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1444 invoked by uid 500); 2 Oct 2006 18:36:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1435 invoked by uid 99); 2 Oct 2006 18:36:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:36:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42965]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 84/B4-24395-C2C51254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 11:36:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 460527142E0
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 11:36:21 -0700 (PDT)
Message-ID: <3951047.1159814181284.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 11:36:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-566) CLONE -the hadoop-daemons.sh fails
 with "no such file or directory" when used from a relative symlinked path
In-Reply-To: <6834643.1159770560143.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-566?page=all ]

Doug Cutting resolved HADOOP-566.
---------------------------------

    Fix Version/s: 0.7.0
                       (was: 0.5.0)
       Resolution: Fixed
         Assignee: Doug Cutting  (was: Owen O'Malley)

I just committed this.  Thanks, Lee!

> CLONE -the hadoop-daemons.sh fails with "no such file or directory" when used from a relative symlinked path
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-566
>                 URL: http://issues.apache.org/jira/browse/HADOOP-566
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.5.0
>            Reporter: Lee Faris
>         Assigned To: Doug Cutting
>             Fix For: 0.7.0
>
>         Attachments: config.patch
>
>
> The new shell scripts fail with a relative directory:
> % current/bin/hadoop-daemons.sh start datanode
> node1: current/bin/..: No such file or directory
> node2: current/bin/..: No such file or directory
> The problem is that HADOOP_HOME is set to a relative directory and hadoop-daemons does a cd, breaking the other scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 18:38:34 2006
Return-Path: 
 <hadoop-dev-return-4068-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25285 invoked from network); 2 Oct 2006 18:38:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:38:34 -0000
Received: (qmail 3502 invoked by uid 500); 2 Oct 2006 18:38:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3471 invoked by uid 500); 2 Oct 2006 18:38:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3462 invoked by uid 99); 2 Oct 2006 18:38:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:38:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42979]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DF/B4-24395-8AC51254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 11:38:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2220371430E
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 11:38:25 -0700 (PDT)
Message-ID: <15625945.1159814305137.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 11:38:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-566) hadoop-daemons.sh fails with "no such
 file or directory" when used from a relative symlinked path
In-Reply-To: <6834643.1159770560143.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-566?page=all ]

Doug Cutting updated HADOOP-566:
--------------------------------

    Component/s: scripts
        Summary: hadoop-daemons.sh fails with "no such file or directory" when used from a relative symlinked path  (was: CLONE -the hadoop-daemons.sh fails with "no such file or directory" when used from a relative symlinked path)

> hadoop-daemons.sh fails with "no such file or directory" when used from a relative symlinked path
> -------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-566
>                 URL: http://issues.apache.org/jira/browse/HADOOP-566
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>    Affects Versions: 0.5.0
>            Reporter: Lee Faris
>         Assigned To: Doug Cutting
>             Fix For: 0.7.0
>
>         Attachments: config.patch
>
>
> The new shell scripts fail with a relative directory:
> % current/bin/hadoop-daemons.sh start datanode
> node1: current/bin/..: No such file or directory
> node2: current/bin/..: No such file or directory
> The problem is that HADOOP_HOME is set to a relative directory and hadoop-daemons does a cd, breaking the other scripts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 18:38:39 2006
Return-Path: 
 <hadoop-dev-return-4069-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25342 invoked from network); 2 Oct 2006 18:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:38:39 -0000
Received: (qmail 3742 invoked by uid 500); 2 Oct 2006 18:38:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3719 invoked by uid 500); 2 Oct 2006 18:38:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3710 invoked by uid 99); 2 Oct 2006 18:38:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:38:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42982]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 60/C4-24395-AAC51254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 11:38:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF0CA714312
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 11:38:26 -0700 (PDT)
Message-ID: <21745200.1159814306911.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 11:38:26 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-568) small jobs benchmark fails: task is
 UNASSIGNED
In-Reply-To: <15754487.1159776799748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-568?page=all ]

Owen O'Malley updated HADOOP-568:
---------------------------------

    Status: Open  (was: Patch Available)

After more testing, this patch reports the problem, but doesn't succesfully report back to the job tracker.

> small jobs benchmark fails: task is UNASSIGNED
> ----------------------------------------------
>
>                 Key: HADOOP-568
>                 URL: http://issues.apache.org/jira/browse/HADOOP-568
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>         Attachments: unassigned-state.patch
>
>
> the small jobs benchmark consistently failes when executed a sufficient number of iterations.
> It's just a matter of time before one of the jobs gets stuck, with one map task (out of a 100) simply doesn't get executed.
> Looking at the map list, the task is UNASSIGNED.
> Restarting the affected task tracker releases the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 18:46:31 2006
Return-Path: 
 <hadoop-dev-return-4070-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27450 invoked from network); 2 Oct 2006 18:46:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:46:31 -0000
Received: (qmail 13956 invoked by uid 500); 2 Oct 2006 18:46:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13932 invoked by uid 500); 2 Oct 2006 18:46:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13923 invoked by uid 99); 2 Oct 2006 18:46:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:46:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49280]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 09/F4-24395-48E51254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 11:46:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D47477142E0
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 11:46:20 -0700 (PDT)
Message-ID: <4956266.1159814780867.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 11:46:20 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-519?page=comments#action_12439269 ] 
            
Milind Bhandarkar commented on HADOOP-519:
------------------------------------------

Indeed. I will resubmit the patch.


> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 19:01:33 2006
Return-Path: 
 <hadoop-dev-return-4071-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32750 invoked from network); 2 Oct 2006 19:01:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 19:01:33 -0000
Received: (qmail 48592 invoked by uid 500); 2 Oct 2006 19:01:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48499 invoked by uid 500); 2 Oct 2006 19:01:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48486 invoked by uid 99); 2 Oct 2006 19:01:31 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 12:01:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:38420]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4C/65-24395-90261254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 12:01:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9850A71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 12:01:21 -0700 (PDT)
Message-ID: <13294377.1159815681621.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 12:01:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-567?page=comments#action_12439273 ] 
            
Doug Cutting commented on HADOOP-567:
-------------------------------------

This is very cool!  +1

A few naming nits.  The script name should end with '.sh'.  And the field names in the generated class are 'static final' and hence their names should be all caps.  It would also be good to get some javadoc in that class.  And instead of BuildStamp, we might just call this Version or HadoopVersion, no?

Finally, I'm not sure why util.VersionInfo is needed.  Under what situations is this better than simply referencing the constants in the generated class?

Lucene does something related with:

http://lucene.apache.org/java/docs/api/org/apache/lucene/LucenePackage.html

The version is built into the jar manifest in the jar-core target of:

http://svn.apache.org/viewvc/lucene/java/trunk/common-build.xml?view=markup

Then it's accessed with:

http://svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucene/LucenePackage.java?view=markup

This does not have the subversion revision, which would be really nice.  Also, in addition to the revision, it would be good to have the repository URL.  Then one could always recreate the sources.

Do you think there'd be much of an advantage to use Java's Package stuff for this?

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 19:14:32 2006
Return-Path: 
 <hadoop-dev-return-4072-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37622 invoked from network); 2 Oct 2006 19:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 19:14:32 -0000
Received: (qmail 70807 invoked by uid 500); 2 Oct 2006 19:14:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70635 invoked by uid 500); 2 Oct 2006 19:14:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70625 invoked by uid 99); 2 Oct 2006 19:14:31 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 12:14:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46113]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C9/B5-24395-41561254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 12:14:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4F72714312
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 12:14:20 -0700 (PDT)
Message-ID: <16049312.1159816460804.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 12:14:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-570) Map tasks may fail due to out of
 memory, if the number of reducers are moderately big
In-Reply-To: <21081187.1159810699740.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-570?page=all ]

Doug Cutting resolved HADOOP-570.
---------------------------------

    Resolution: Duplicate

This is a duplicate of HADOOP-331.

> Map tasks may fail due to out of memory, if the number of reducers are moderately big
> -------------------------------------------------------------------------------------
>
>                 Key: HADOOP-570
>                 URL: http://issues.apache.org/jira/browse/HADOOP-570
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Runping Qi
>
> Map tasks may fail due to out of memory, if the number of reducers are moderately big. 
> In my case, I set child task heap size to 1GB, turned on compression for the mapoutput files. 
> The average size of input records is about 30K (I don't know the variation though). 
> A lot of map tasks failed due to out of memory when the number of reducers was at 400 and higher.
> The number of reducers can be somewhat higher (as high as 800) if the compression for the mapoutput files was off).
> This problem will impose a hard limit on the scalability of map/reduce clusters.
> One possible solution to this problem is to let the mapper to write out single map output file, 
> and then to perform sort/partition as a separate phrase. 
> his will also make it unnecessary for  the reducers to perform sort on individual portions from mappers. 
> Rather, the reducers should just perform merge operations on the map output files directly. 
> This may even allow the possibility of dynamically collect some statistics of  the map outputs and 
> use the stats to drive the partition on the mapper side, and obtain the optimal merge plan on the reducer side!
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 19:39:32 2006
Return-Path: 
 <hadoop-dev-return-4073-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50427 invoked from network); 2 Oct 2006 19:39:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 19:39:32 -0000
Received: (qmail 9516 invoked by uid 500); 2 Oct 2006 19:39:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9491 invoked by uid 500); 2 Oct 2006 19:39:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9475 invoked by uid 99); 2 Oct 2006 19:39:31 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 12:39:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33853]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 45/56-24395-1FA61254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 12:39:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A493E71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 12:39:20 -0700 (PDT)
Message-ID: <3032224.1159817960671.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 12:39:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-567?page=comments#action_12439291 ] 
            
Owen O'Malley commented on HADOOP-567:
--------------------------------------

I'll change the script name and the field names.

The point of util.VersionStamp is isolating the upstream code from the possiblity that the BuildStamp class wasn't generated. In particular, it makes that system compilable even if the script fails for some reason (or isn't called). A typical case that would be if someone is using eclipse or some other IDE without using the ant build script.

I hadn't really looked at the Java Package stuff, but it seems like serious overkill for this context.

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 20:14:34 2006
Return-Path: 
 <hadoop-dev-return-4074-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62007 invoked from network); 2 Oct 2006 20:14:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 20:14:34 -0000
Received: (qmail 64266 invoked by uid 500); 2 Oct 2006 20:14:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64242 invoked by uid 500); 2 Oct 2006 20:14:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64233 invoked by uid 99); 2 Oct 2006 20:14:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 13:14:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34898]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A8/17-24395-62371254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 13:14:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEA0F71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 13:14:20 -0700 (PDT)
Message-ID: <9507280.1159820060778.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 13:14:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-567?page=comments#action_12439303 ] 
            
Doug Cutting commented on HADOOP-567:
-------------------------------------

The point about the Package stuff, is that, without much complexity (Ant adds a manifest to the jar), we can use a standard API for this, and some folks might benefit from that.  We could include the same information (author, revision, etc.) but we'd encode it in the available fields, e.g., implementationVersion could be version+revision, vendor could be "Apache Software Foundation, built by <user>", etc.

Someday someone might reasonably suggest that the Hadoop jar should include a manifest containing its version.  (That's what happened with Lucene.)  Should we then have two mechanisms to stamp builds with the version?

It might sound like I feel strongly about this.  I don't.  Your approach has clear advantages over a Package-based solution: the values are more structured & can thus more easily be formatted as we wish.  I just wanted to raise the Package issue for consideration.  It's likely to arise again someday, so if we decide against it we should do so knowingly and have a rationale ready.  (Like Serializeable, RMI, & other wheels we reinvent.)

I'm also in general not very sympathetic to designing things for alternate build environments.  We have a single supported build environment, Ant.  If folks build things in other ways then it might not work.  Doesn't Eclipse use the Ant build?  Do we really need to support folks who've not configured their Eclipse environment to do so?  (Note that storing the version in the jar manifest also mostly avoids this issue.)  I feel slightly stronger about this one.

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 21:51:32 2006
Return-Path: 
 <hadoop-dev-return-4075-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89720 invoked from network); 2 Oct 2006 21:51:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 21:51:32 -0000
Received: (qmail 7484 invoked by uid 500); 2 Oct 2006 21:51:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7463 invoked by uid 500); 2 Oct 2006 21:51:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7454 invoked by uid 99); 2 Oct 2006 21:51:31 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 14:51:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:57690]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6B/19-24395-2E981254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 14:51:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9370171430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 14:51:19 -0700 (PDT)
Message-ID: <6678550.1159825879600.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 14:51:19 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-571) Path should use URI syntax
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Path should use URI syntax
--------------------------

                 Key: HADOOP-571
                 URL: http://issues.apache.org/jira/browse/HADOOP-571
             Project: Hadoop
          Issue Type: Improvement
          Components: fs
            Reporter: Doug Cutting


The following changes are proposed:
1. Add a factory/registry of FileSystem implementations.  Given a protocol, hostname and port, it should be possible to get a FileSystem implementation.
2. Path's constructor should accept URI-formatted strings & a configuration.
3. A new Path method should be added: FileSystem.getFileSystem().  This returns the filesystem named in the path or the default configured filesystem.
4. Most methods which currently take FileSystem and Path parameters can be changed to take only Path.
5. Many FileSystem operations (create, open, delete, list, etc.) can become convenience methods on Path.
6. A URLStreamHandler can be defined in terms of the FileSystem API, so that URLs for any protocol with a registered FileSystem implementation can be accessed with a java.net.URL, permitting FileSystem implementations to be used on the classpath, etc.

It is tempting to try to replace Path with java.net.URL, but URL's methods are insufficient for mapreduce.  We require directory listings, random access, location hints, etc., which are not supported by existing URLStreamHandler implementations.  But we can expose all FileSystem implementations for access with java.net.URL.

(From a brainstorm with Owen.)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 22:03:01 2006
Return-Path: 
 <hadoop-dev-return-4076-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93711 invoked from network); 2 Oct 2006 22:03:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 22:03:01 -0000
Received: (qmail 18283 invoked by uid 500); 2 Oct 2006 22:03:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18260 invoked by uid 500); 2 Oct 2006 22:03:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18251 invoked by uid 99); 2 Oct 2006 22:03:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 15:03:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54460]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B9/49-24395-78C81254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 15:02:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AEA8871430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 15:02:20 -0700 (PDT)
Message-ID: <31144012.1159826540712.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 15:02:20 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Milind Bhandarkar updated HADOOP-519:
-------------------------------------

    Attachment:     (was: pread.patch)

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 22:08:59 2006
Return-Path: 
 <hadoop-dev-return-4078-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97534 invoked from network); 2 Oct 2006 22:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 22:08:59 -0000
Received: (qmail 25058 invoked by uid 500); 2 Oct 2006 22:08:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24643 invoked by uid 500); 2 Oct 2006 22:08:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24623 invoked by uid 99); 2 Oct 2006 22:08:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 15:08:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56301]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 24/69-24395-2FD81254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 15:08:50 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B25647142E0
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 15:08:20 -0700 (PDT)
Message-ID: <2952150.1159826900727.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 15:08:20 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Milind Bhandarkar updated HADOOP-519:
-------------------------------------

    Attachment: pread.patch

Object[] returned pair is replaced by a private static class.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 22:08:58 2006
Return-Path: 
 <hadoop-dev-return-4077-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97524 invoked from network); 2 Oct 2006 22:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 22:08:58 -0000
Received: (qmail 25050 invoked by uid 500); 2 Oct 2006 22:08:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24641 invoked by uid 500); 2 Oct 2006 22:08:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24624 invoked by uid 99); 2 Oct 2006 22:08:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 15:08:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56303]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B3/69-24395-EED81254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 15:08:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DAB07714312
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 15:08:21 -0700 (PDT)
Message-ID: <18089554.1159826901893.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 15:08:21 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Milind Bhandarkar updated HADOOP-519:
-------------------------------------

    Status: Patch Available  (was: Open)

attached.

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  2 22:57:53 2006
Return-Path: 
 <hadoop-dev-return-4079-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8739 invoked from network); 2 Oct 2006 22:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 22:57:53 -0000
Received: (qmail 78363 invoked by uid 500); 2 Oct 2006 22:57:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78328 invoked by uid 500); 2 Oct 2006 22:57:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78314 invoked by uid 99); 2 Oct 2006 22:57:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 15:57:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [64.62.190.91] ([64.62.190.91:3639] helo=mcnabbs.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E3/1A-24395-D5991254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 15:57:35 -0700
Received: from mcbain.mcnabbs.org (c-24-10-162-63.hsd1.ut.comcast.net
 [24.10.162.63])
	by mcnabbs.org (Postfix) with ESMTP id 8AB47378A4
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 18:57:08 -0400 (EDT)
Received: by mcbain.mcnabbs.org (Postfix, from userid 1001)
	id 05872E7964; Mon,  2 Oct 2006 16:57:06 -0600 (MDT)
Date: Mon, 2 Oct 2006 16:57:06 -0600
To: hadoop-dev@lucene.apache.org
Subject: Task Tracker Status
Message-ID: <20061002225706.GD3202@mcnabbs.org>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="11Y7aswkeuHtSBEs"
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)
From: amcnabb@mcnabbs.org (Andrew McNabb)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--11Y7aswkeuHtSBEs
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On a number of machines, I went to the Task Tracker Status URL (e.g.
http://savant:50060/tasktracker.jsp) and ran into some strange error
messages.  The map tasks seem to be completing, but the error message is
a little confusing.


<h2>Running tasks</h2>

<center>
<table border=3D2 cellpadding=3D"5" cellspacing=3D"2">
<tr><td align=3D"center">Task Attempts</td><td>Status</td>
    <td>Progress</td><td>Errors</td></tr>

  <tr><td>task_0001_m_000179_0</td><td>RUNNING</td><td>0.00</td><td><pre>ja=
va.nio.charset.MalformedInputException: Input length =3D 9
	at org.apache.hadoop.io.Text.validateUTF8(Text.java:493)
	at org.apache.hadoop.io.Text.set(Text.java:196)
	at org.apache.hadoop.mapred.TextInputFormat$LineRecordReader$TextStuffer.w=
rite(TextInputFormat.java:55)
	at java.io.ByteArrayOutputStream.writeTo(ByteArrayOutputStream.java:112)
	at org.apache.hadoop.mapred.TextInputFormat$LineRecordReader.next(TextInpu=
tFormat.java:88)
	at org.apache.hadoop.mapred.MapTask$3.next(MapTask.java:198)
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:44)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:210)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)
</pre></td></tr>
<tr><td>task_0001_m_000181_0</td><td>RUNNING</td><td>0.00</td><td><pre>java=
=2Enio.charset.MalformedInputException: Input length =3D 6
	at org.apache.hadoop.io.Text.validateUTF8(Text.java:493)
	at org.apache.hadoop.io.Text.set(Text.java:196)
	at org.apache.hadoop.mapred.TextInputFormat$LineRecordReader$TextStuffer.w=
rite(TextInputFormat.java:55)
	at java.io.ByteArrayOutputStream.writeTo(ByteArrayOutputStream.java:112)
	at org.apache.hadoop.mapred.TextInputFormat$LineRecordReader.next(TextInpu=
tFormat.java:88)
	at org.apache.hadoop.mapred.MapTask$3.next(MapTask.java:198)
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:44)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:210)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

</pre></td></tr>



--=20
Andrew McNabb
http://www.mcnabbs.org/andrew/
PGP Fingerprint: 8A17 B57C 6879 1863 DE55  8012 AB4D 6098 8826 6868

--11Y7aswkeuHtSBEs
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQFFIZlCq01gmIgmaGgRAvxLAJ9jqyScL7zNMFSELFFdaSdCo/YtZQCfYNGc
7KUEeuPVKVTTAbS+oizemJc=
=Ixzg
-----END PGP SIGNATURE-----

--11Y7aswkeuHtSBEs--

From MAILER-DAEMON Mon Oct  2 23:01:25 2006
Return-Path: 
 <hadoop-dev-return-4080-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9117 invoked from network); 2 Oct 2006 23:01:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 23:01:25 -0000
Received: (qmail 80306 invoked by uid 500); 2 Oct 2006 23:01:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80097 invoked by uid 500); 2 Oct 2006 23:01:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79965 invoked by uid 99); 2 Oct 2006 23:01:23 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 16:01:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [64.62.190.91] ([64.62.190.91:3640] helo=mcnabbs.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E0/2A-24395-C3A91254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 16:01:19 -0700
Received: from mcbain.mcnabbs.org (c-24-10-162-63.hsd1.ut.comcast.net
 [24.10.162.63])
	by mcnabbs.org (Postfix) with ESMTP id AE012378A4
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 19:00:49 -0400 (EDT)
Received: by mcbain.mcnabbs.org (Postfix, from userid 1001)
	id 460DFE7964; Mon,  2 Oct 2006 17:00:48 -0600 (MDT)
Date: Mon, 2 Oct 2006 17:00:47 -0600
From: Andrew McNabb <amcnabb@mcnabbs.org>
To: hadoop-dev@lucene.apache.org
Subject: Re: Task Tracker Status
Message-ID: <20061002230047.GE3202@mcnabbs.org>
References: <20061002225706.GD3202@mcnabbs.org>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="kA1LkgxZ0NN7Mz3A"
Content-Disposition: inline
In-Reply-To: <20061002225706.GD3202@mcnabbs.org>
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--kA1LkgxZ0NN7Mz3A
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Mon, Oct 02, 2006 at 04:57:06PM -0600, Andrew McNabb wrote:
> On a number of machines, I went to the Task Tracker Status URL (e.g.
> http://savant:50060/tasktracker.jsp) and ran into some strange error
> messages.  The map tasks seem to be completing, but the error message is
> a little confusing.
>=20

Okay.  It actually looks like the job outright failed.  I'll look at
this a little more.



--=20
Andrew McNabb
http://www.mcnabbs.org/andrew/
PGP Fingerprint: 8A17 B57C 6879 1863 DE55  8012 AB4D 6098 8826 6868

--kA1LkgxZ0NN7Mz3A
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQFFIZofq01gmIgmaGgRAq3yAJ9Ns82d87cWtZvCVntCEUTUAVWuYACfcT9f
k9Lo+QSLgmb9yCzRboY2DOc=
=bquN
-----END PGP SIGNATURE-----

--kA1LkgxZ0NN7Mz3A--

From MAILER-DAEMON Tue Oct  3 01:55:29 2006
Return-Path: 
 <hadoop-dev-return-4081-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52226 invoked from network); 3 Oct 2006 01:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 01:55:29 -0000
Received: (qmail 28385 invoked by uid 500); 3 Oct 2006 01:55:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28173 invoked by uid 500); 3 Oct 2006 01:55:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28164 invoked by uid 99); 3 Oct 2006 01:55:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 18:55:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45593]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 66/13-29668-F03C1254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 18:55:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 869D471430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 18:55:19 -0700 (PDT)
Message-ID: <27006103.1159840519548.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 18:55:19 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-572) Chain reaction in a big cluster caused
 by simultaneous failure of only a few data-nodes.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chain reaction in a big cluster caused by simultaneous failure of only a few data-nodes.
----------------------------------------------------------------------------------------

                 Key: HADOOP-572
                 URL: http://issues.apache.org/jira/browse/HADOOP-572
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.6.2
         Environment: Large dfs cluster
            Reporter: Konstantin Shvachko


I've observed a cluster crash caused by simultaneous failure of only 3 data-nodes.
The crash is reproducable. In order to reproduce it you need a rather large cluster.
To simplify calculations I'll consider a 600 node cluster as an example.
The cluster should also contain a substantial amount of data.
We will need at least 3 data-nodes containing 10,000+ blocks each.
Now suppose that these 3 data-nodes fail at the same time, and the name-node
started replicating all missing blocks belonging to the nodes.
The name-node can replicate 50 blocks per second on average based on experimental data.
Meaning, it will take more than 10 minutes, which is the heartbeat expiration interval,
to replicates all 30,000+ blocks.

With the 3 second heartbeat interval there are 600 / 3 = 200 heartbeats hitting the name-node every second.
Under heavy replication load the name-node accepts about 50 heartbeats per second.
So at most 3/4 of all heartbeats remain unserved.

Each node SHOULD send 200 heartbeats during the 10 minute interval, and every time the probability
of the heartbeat being unserved is 3/4 or less.
So the probability of failing of all 200 heartbeats is (3/4) ** 200 = 0 from the practical standpoint.

IN FACT since current implementation sets the rpc timeout to 1 minute, a failed heartbeat takes
1 minute and 8 seconds to complete, and under this circumstances each data-node can send only
9 heartbeats during the 10 minute interval. Thus, the probability of failing of all 9 of them is 0.075,
which means that we will loose 45 nodes out of 600 at the end of the 10 minute interval.
>>From this point the name-node will be constantly replicating blocks and loosing more nodes, and
becomes effectively dysfunctional.

A map-reduce framework running on top of it makes things deteriorate even faster, because failing
tasks and jobs are trying to remove files and re-create them again increasing the overall load on
the name-node.

I see at least 2 problems that contribute to the chain reaction described above.
1. A heartbeat failure takes too long (1'8").
2. Name-node synchronized operations should be fine-grained.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 03:02:33 2006
Return-Path: 
 <hadoop-dev-return-4083-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61355 invoked from network); 3 Oct 2006 03:02:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 03:02:33 -0000
Received: (qmail 71604 invoked by uid 500); 3 Oct 2006 03:02:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71559 invoked by uid 500); 3 Oct 2006 03:02:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71531 invoked by uid 99); 3 Oct 2006 03:02:31 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 20:02:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49222]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 54/54-29668-6C2D1254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 20:02:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 986647142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 20:02:20 -0700 (PDT)
Message-ID: <33325427.1159844540621.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 20:02:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-572) Chain reaction in a big cluster
 caused by simultaneous failure of only a few data-nodes.
In-Reply-To: <27006103.1159840519548.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-572?page=comments#action_12439376 ] 
            
Doug Cutting commented on HADOOP-572:
-------------------------------------

A namenode that drops 75% of its requests for 10 minutes is a problem.  I think the first thing to do is to control the replication rate, so that fewer than 50 replications are attempted per second.  This is fairly simple to do, since the namenode controls the issuance of replication requests.  For example, it can limit the number of outstanding replications, which will effectively control the rate.

Think of it this way, the namenode's observed current capacity is 200 heartbeats per second and 50 block replications per second.  We're attempting in excess of 50 replications and still attempting 200 heartbeats, and the many of the heartbeats are failing to arrive in a timely manner (as are probably many of the replication reports, but those are less critical).  Retrying heartbeats sooner will just increase the load on the namenode, aggravating the problem.

The other thing to do is limit the heartbeat traffic.  Currently, heartbeat traffic is proportional to cluster size, which is not scalable.  As a simple measure, we can make the heartbeat interval configurable.  Longer term we can make it adaptive.  Longer-yet, we could even consider inverting the control, so that the namenode pings datanodes to check if they're alive and hand them work.

Another long-term fix would of course be to improve the namenode's performance and lessen its bottlenecks, so that it can handle more requests per second.  But no matter how much we do this, we still need to make sure that all request rates are limited, and do not increase linearly with cluster size.

> Chain reaction in a big cluster caused by simultaneous failure of only a few data-nodes.
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-572
>                 URL: http://issues.apache.org/jira/browse/HADOOP-572
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>         Environment: Large dfs cluster
>            Reporter: Konstantin Shvachko
>
> I've observed a cluster crash caused by simultaneous failure of only 3 data-nodes.
> The crash is reproducable. In order to reproduce it you need a rather large cluster.
> To simplify calculations I'll consider a 600 node cluster as an example.
> The cluster should also contain a substantial amount of data.
> We will need at least 3 data-nodes containing 10,000+ blocks each.
> Now suppose that these 3 data-nodes fail at the same time, and the name-node
> started replicating all missing blocks belonging to the nodes.
> The name-node can replicate 50 blocks per second on average based on experimental data.
> Meaning, it will take more than 10 minutes, which is the heartbeat expiration interval,
> to replicates all 30,000+ blocks.
> With the 3 second heartbeat interval there are 600 / 3 = 200 heartbeats hitting the name-node every second.
> Under heavy replication load the name-node accepts about 50 heartbeats per second.
> So at most 3/4 of all heartbeats remain unserved.
> Each node SHOULD send 200 heartbeats during the 10 minute interval, and every time the probability
> of the heartbeat being unserved is 3/4 or less.
> So the probability of failing of all 200 heartbeats is (3/4) ** 200 = 0 from the practical standpoint.
> IN FACT since current implementation sets the rpc timeout to 1 minute, a failed heartbeat takes
> 1 minute and 8 seconds to complete, and under this circumstances each data-node can send only
> 9 heartbeats during the 10 minute interval. Thus, the probability of failing of all 9 of them is 0.075,
> which means that we will loose 45 nodes out of 600 at the end of the 10 minute interval.
> From this point the name-node will be constantly replicating blocks and loosing more nodes, and
> becomes effectively dysfunctional.
> A map-reduce framework running on top of it makes things deteriorate even faster, because failing
> tasks and jobs are trying to remove files and re-create them again increasing the overall load on
> the name-node.
> I see at least 2 problems that contribute to the chain reaction described above.
> 1. A heartbeat failure takes too long (1'8").
> 2. Name-node synchronized operations should be fine-grained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 03:02:33 2006
Return-Path: 
 <hadoop-dev-return-4082-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61352 invoked from network); 3 Oct 2006 03:02:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 03:02:33 -0000
Received: (qmail 71599 invoked by uid 500); 3 Oct 2006 03:02:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71521 invoked by uid 500); 3 Oct 2006 03:02:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71490 invoked by uid 99); 3 Oct 2006 03:02:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 20:02:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:49224]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 44/54-29668-6C2D1254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 20:02:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C226E71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 20:02:21 -0700 (PDT)
Message-ID: <18214963.1159844541792.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 20:02:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-519) HDFS File API should be extended to
 include positional read
In-Reply-To: <7528490.1157757622361.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-519?page=all ]

Doug Cutting updated HADOOP-519:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I committed this.  Thanks, Milind!

> HDFS File API should be extended to include positional read
> -----------------------------------------------------------
>
>                 Key: HADOOP-519
>                 URL: http://issues.apache.org/jira/browse/HADOOP-519
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.6.0
>         Environment: All
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.0
>
>         Attachments: pread.patch
>
>
> HDFS Input streams should support positional read. Positional read (such as the pread syscall on linux) allows reading for a specified offset without affecting the current file offset. Since the underlying file state is not touched, pread can be used efficiently in multi-threaded programs.
> Here is how I plan to implement it.
> Provide PositionedReadable interface, with the following methods:
> int read(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer, int offset, int length);
> void readFully(long position, byte[] buffer);
> Abstract class FSInputStream would provide default implementation of the above methods using getPos(), seek() and read() methods. The default implementation is inefficient in multi-threaded programs since it locks the object while seeking, reading, and restoring to old state.
> DFSClient.DFSInputStream, which extends FSInputStream will provide an efficient non-synchronized implementation for above calls.
> In addition, FSDataInputStream, which is a wrapper around FSInputStream, will provide wrapper methods for above read methods as well.
> Patch forthcoming early next week.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 03:28:30 2006
Return-Path: 
 <hadoop-dev-return-4084-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65885 invoked from network); 3 Oct 2006 03:28:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 03:28:30 -0000
Received: (qmail 89322 invoked by uid 500); 3 Oct 2006 03:28:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89118 invoked by uid 500); 3 Oct 2006 03:28:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89109 invoked by uid 99); 3 Oct 2006 03:28:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 20:28:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53023]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A2/D4-29668-CD8D1254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 20:28:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FF4D71430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 20:28:20 -0700 (PDT)
Message-ID: <17281441.1159846100587.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 20:28:20 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-522) MapFile should support block
 compression
In-Reply-To: <3893251.1158016342663.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-522?page=comments#action_12439382 ] 
            
Arun C Murthy commented on HADOOP-522:
--------------------------------------

The changes to SequenceFile look good to me, the 'seek' is definitely better than reading those blocks - originally my bad.

Super-minor nit: There seems to be a small oversight in the javadoc for Writer#getLength, thanks.

> MapFile should support block compression
> ----------------------------------------
>
>                 Key: HADOOP-522
>                 URL: http://issues.apache.org/jira/browse/HADOOP-522
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>         Attachments: block-compress-map-file.patch
>
>
> MapFile is layered on SequenceFile and permits random-access to sorted data files (typically reduce output) through a parallel index file.  This is used widely in Nutch (e.g. at search time for displaying cached pages, incoming links, etc).  Such sorted data should benefit from block compression, but the current MapFile API does not support specification of block compression.  Also, even if it did, the semantics of SequenceFile methods like seek() and getPosition() are changed under block compression so that MapFile may not work.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 05:12:47 2006
Return-Path: 
 <hadoop-dev-return-4085-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97467 invoked from network); 3 Oct 2006 05:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 05:12:47 -0000
Received: (qmail 42308 invoked by uid 500); 3 Oct 2006 05:12:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42290 invoked by uid 500); 3 Oct 2006 05:12:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42281 invoked by uid 99); 3 Oct 2006 05:12:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 22:12:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:55591]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9E/57-29668-541F1254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 22:12:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90C9571430D
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 22:12:19 -0700 (PDT)
Message-ID: <30516684.1159852339589.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 22:12:19 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-573) Checksum error during sorting in
 reducer
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Checksum error during sorting in reducer
----------------------------------------

                 Key: HADOOP-573
                 URL: http://issues.apache.org/jira/browse/HADOOP-573
             Project: Hadoop
          Issue Type: Bug
            Reporter: Runping Qi



Many reduce tasks got killed due to checksum error. The strange thing is that the file was generated by the sort function, and was on a local disk. Here is the stack: 

Checksum error:  ../task_0011_r_000140_0/all.2.1 at 5342920704
	at org.apache.hadoop.fs.FSDataInputStream$Checker.verifySum(FSDataInputStream.java:134)
	at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:110)
	at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:170)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
	at java.io.DataInputStream.readFully(DataInputStream.java:176)
	at org.apache.hadoop.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:55)
	at org.apache.hadoop.io.DataOutputBuffer.write(DataOutputBuffer.java:89)
	at org.apache.hadoop.io.SequenceFile$Reader.readBuffer(SequenceFile.java:1061)
	at org.apache.hadoop.io.SequenceFile$Reader.seekToCurrentValue(SequenceFile.java:1126)
	at org.apache.hadoop.io.SequenceFile$Reader.nextRaw(SequenceFile.java:1354)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergeStream.next(SequenceFile.java:1880)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergeQueue.merge(SequenceFile.java:1938)
	at org.apache.hadoop.io.SequenceFile$Sorter$MergePass.run(SequenceFile.java:1802)
	at org.apache.hadoop.io.SequenceFile$Sorter.mergePass(SequenceFile.java:1749)
	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1494)
	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 05:52:58 2006
Return-Path: 
 <hadoop-dev-return-4086-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14879 invoked from network); 3 Oct 2006 05:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 05:52:58 -0000
Received: (qmail 61840 invoked by uid 500); 3 Oct 2006 05:52:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61817 invoked by uid 500); 3 Oct 2006 05:52:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61808 invoked by uid 99); 3 Oct 2006 05:52:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 22:52:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58165]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 29/28-29668-6BAF1254 for <hadoop-dev@lucene.apache.org>;
 Mon, 02 Oct 2006 22:52:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82C3B7142E1
	for <hadoop-dev@lucene.apache.org>; Mon,  2 Oct 2006 22:52:22 -0700 (PDT)
Message-ID: <4566163.1159854742532.JavaMail.root@brutus>
Date: Mon, 2 Oct 2006 22:52:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
In-Reply-To: <24887203.1157469982360.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-506?page=all ]

Sanjay Dahiya reassigned HADOOP-506:
------------------------------------

    Assignee: Sanjay Dahiya

> job tracker hangs on to dead task trackers "forever"
> ----------------------------------------------------
>
>                 Key: HADOOP-506
>                 URL: http://issues.apache.org/jira/browse/HADOOP-506
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
> that all makes sense.
> What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).
> there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 07:17:18 2006
Return-Path: 
 <hadoop-dev-return-4087-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30952 invoked from network); 3 Oct 2006 07:17:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 07:17:18 -0000
Received: (qmail 34609 invoked by uid 500); 3 Oct 2006 07:17:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34396 invoked by uid 500); 3 Oct 2006 07:17:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34387 invoked by uid 99); 3 Oct 2006 07:17:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 00:17:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC7AD7142E0
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 00:16:20 -0700 (PDT)
Message-ID: <27763552.1159859780769.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 00:16:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-567?page=all ]

Owen O'Malley updated HADOOP-567:
---------------------------------

    Attachment: version-2.patch

This patch uses package annotations instead of static finals, which has the nice property that if you use getPackage().getAnnotation(...) you can get the information.

I also set the hadoop version in the manifest, but since the manifest is only created when a jar is created, I also left the version information in the annotation, which is available regardless of whether it is being run from a jar or the developer's build directory.

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version-2.patch, version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 14:51:10 2006
Return-Path: 
 <hadoop-dev-return-4088-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14410 invoked from network); 3 Oct 2006 14:51:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 14:51:10 -0000
Received: (qmail 39725 invoked by uid 500); 3 Oct 2006 14:51:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39699 invoked by uid 500); 3 Oct 2006 14:51:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39676 invoked by uid 99); 3 Oct 2006 14:51:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 07:51:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54195]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 04/41-08153-AD872254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 07:51:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9E4EA714316
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 06:59:20 -0700 (PDT)
Message-ID: <30866623.1159883960645.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 06:59:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-567?page=all ]

Owen O'Malley updated HADOOP-567:
---------------------------------

    Status: Open  (was: Patch Available)

I guess it would be nicer to rename the annotation to org.apache.hadoop.HadoopVersion and move the static methods that I have in utils.VersionInfo into HadoopVersion.

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version-2.patch, version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 16:04:31 2006
Return-Path: 
 <hadoop-dev-return-4089-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42754 invoked from network); 3 Oct 2006 16:04:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 16:04:31 -0000
Received: (qmail 98647 invoked by uid 500); 3 Oct 2006 16:04:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98624 invoked by uid 500); 3 Oct 2006 16:04:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98615 invoked by uid 99); 3 Oct 2006 16:04:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 09:04:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59479]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7E/C3-08153-D0A82254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 09:04:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8F4137142E0
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 09:04:20 -0700 (PDT)
Message-ID: <14371898.1159891460584.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 09:04:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-567?page=comments#action_12439549 ] 
            
Owen O'Malley commented on HADOOP-567:
--------------------------------------

Well, phooey on Java. It won't let me add static stuff to the annotation class, so upto any complaints Doug has with naming, I think it is good to go.

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version-2.patch, version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 17:33:37 2006
Return-Path: 
 <hadoop-dev-return-4090-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72500 invoked from network); 3 Oct 2006 17:33:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 17:33:37 -0000
Received: (qmail 34193 invoked by uid 500); 3 Oct 2006 17:33:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34074 invoked by uid 500); 3 Oct 2006 17:33:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34065 invoked by uid 99); 3 Oct 2006 17:33:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 10:33:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47525]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 59/46-08153-AEE92254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 10:33:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8946E7142E0
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 10:33:21 -0700 (PDT)
Message-ID: <164486.1159896801559.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 10:33:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-573) Checksum error during sorting in
 reducer
In-Reply-To: <30516684.1159852339589.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-573?page=comments#action_12439567 ] 
            
Doug Cutting commented on HADOOP-573:
-------------------------------------

Sort is actually the place where most checksum errors have been reported.  I believe this is because sorting keeps data in memory longer than other operations, increasing the chance that it will be corrupted there.  Does this node have ECC memory?  If so, memory errors are unlikely.  Sorting also accounts for a large portion of the number of times data is written to disk, so the corruption could have happened there.  It would be worth examining the syslog on that node to see if any disk or memory errors are reported.

I assume the reduce was rescheduled and completed?  If so, then I will resolve this issue.


> Checksum error during sorting in reducer
> ----------------------------------------
>
>                 Key: HADOOP-573
>                 URL: http://issues.apache.org/jira/browse/HADOOP-573
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>
> Many reduce tasks got killed due to checksum error. The strange thing is that the file was generated by the sort function, and was on a local disk. Here is the stack: 
> Checksum error:  ../task_0011_r_000140_0/all.2.1 at 5342920704
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.verifySum(FSDataInputStream.java:134)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:110)
> 	at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:170)
> 	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
> 	at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
> 	at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
> 	at java.io.DataInputStream.readFully(DataInputStream.java:176)
> 	at org.apache.hadoop.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:55)
> 	at org.apache.hadoop.io.DataOutputBuffer.write(DataOutputBuffer.java:89)
> 	at org.apache.hadoop.io.SequenceFile$Reader.readBuffer(SequenceFile.java:1061)
> 	at org.apache.hadoop.io.SequenceFile$Reader.seekToCurrentValue(SequenceFile.java:1126)
> 	at org.apache.hadoop.io.SequenceFile$Reader.nextRaw(SequenceFile.java:1354)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergeStream.next(SequenceFile.java:1880)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergeQueue.merge(SequenceFile.java:1938)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergePass.run(SequenceFile.java:1802)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.mergePass(SequenceFile.java:1749)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1494)
> 	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 17:35:34 2006
Return-Path: 
 <hadoop-dev-return-4091-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73581 invoked from network); 3 Oct 2006 17:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 17:35:34 -0000
Received: (qmail 37466 invoked by uid 500); 3 Oct 2006 17:35:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37321 invoked by uid 500); 3 Oct 2006 17:35:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37308 invoked by uid 99); 3 Oct 2006 17:35:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 10:35:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40470]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 95/56-08153-36F92254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 10:35:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C0ED471430D
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 10:35:21 -0700 (PDT)
Message-ID: <19039481.1159896921787.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 10:35:21 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-572) Chain reaction in a big cluster
 caused by simultaneous failure of only a few data-nodes.
In-Reply-To: <27006103.1159840519548.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-572?page=comments#action_12439572 ] 
            
Konstantin Shvachko commented on HADOOP-572:
--------------------------------------------

I think the main problem with the heartbeats right now is the 1 minute timeout before they fail.
Reducing the timeout to say 3 seconds (or may be 0 seconds we will need to experimant with that)
could be an easy short term solution.
First of all, this will randomize data-nodes' access to the name-node, and give them equal chances to
acknowledge their existence within the 10 minute interval.
Secondly, we will let other requests, the most often of which are leases extensions, to go through
and succeed, which eventually will reduce the failure rate of map-reduce tasks.

IMO, this will not increase the load on the name-node, because the name-node does nothing to reject
timed out requests. I expect the name-node replication rate to drop automatically since it will be
processing other requests between individual block replications, which is desirable. The data-nodes
will have to leave with higher rate of TimeoutExceptions, which is acceptable.

I like the idea of self-adjusting heartbeats. Why not, if a data-node observes a consistent 30%
rate of timed out heartbeats it should increase the heartbeat interval by 30%. And making the adjusted
parameters persistent is a good alternative to configuring.

I agree the request rates should not increase linearly with the cluster size. This makes self-adjustments
even more important, since optimizing configurations for different cluster sizes becomes a non-trivial task.


> Chain reaction in a big cluster caused by simultaneous failure of only a few data-nodes.
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-572
>                 URL: http://issues.apache.org/jira/browse/HADOOP-572
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>         Environment: Large dfs cluster
>            Reporter: Konstantin Shvachko
>
> I've observed a cluster crash caused by simultaneous failure of only 3 data-nodes.
> The crash is reproducable. In order to reproduce it you need a rather large cluster.
> To simplify calculations I'll consider a 600 node cluster as an example.
> The cluster should also contain a substantial amount of data.
> We will need at least 3 data-nodes containing 10,000+ blocks each.
> Now suppose that these 3 data-nodes fail at the same time, and the name-node
> started replicating all missing blocks belonging to the nodes.
> The name-node can replicate 50 blocks per second on average based on experimental data.
> Meaning, it will take more than 10 minutes, which is the heartbeat expiration interval,
> to replicates all 30,000+ blocks.
> With the 3 second heartbeat interval there are 600 / 3 = 200 heartbeats hitting the name-node every second.
> Under heavy replication load the name-node accepts about 50 heartbeats per second.
> So at most 3/4 of all heartbeats remain unserved.
> Each node SHOULD send 200 heartbeats during the 10 minute interval, and every time the probability
> of the heartbeat being unserved is 3/4 or less.
> So the probability of failing of all 200 heartbeats is (3/4) ** 200 = 0 from the practical standpoint.
> IN FACT since current implementation sets the rpc timeout to 1 minute, a failed heartbeat takes
> 1 minute and 8 seconds to complete, and under this circumstances each data-node can send only
> 9 heartbeats during the 10 minute interval. Thus, the probability of failing of all 9 of them is 0.075,
> which means that we will loose 45 nodes out of 600 at the end of the 10 minute interval.
> From this point the name-node will be constantly replicating blocks and loosing more nodes, and
> becomes effectively dysfunctional.
> A map-reduce framework running on top of it makes things deteriorate even faster, because failing
> tasks and jobs are trying to remove files and re-create them again increasing the overall load on
> the name-node.
> I see at least 2 problems that contribute to the chain reaction described above.
> 1. A heartbeat failure takes too long (1'8").
> 2. Name-node synchronized operations should be fine-grained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 17:57:38 2006
Return-Path: 
 <hadoop-dev-return-4092-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82712 invoked from network); 3 Oct 2006 17:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 17:57:38 -0000
Received: (qmail 90615 invoked by uid 500); 3 Oct 2006 17:57:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90579 invoked by uid 500); 3 Oct 2006 17:57:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90529 invoked by uid 99); 3 Oct 2006 17:57:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 10:57:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44482]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AC/F6-08153-D84A2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 10:57:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 397517142DA
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 10:57:24 -0700 (PDT)
Message-ID: <10860973.1159898244232.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 10:57:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-572) Chain reaction in a big cluster
 caused by simultaneous failure of only a few data-nodes.
In-Reply-To: <27006103.1159840519548.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-572?page=comments#action_12439593 ] 
            
Doug Cutting commented on HADOOP-572:
-------------------------------------

> IMO, this will not increase the load on the name-node ...

It depends on where the bottlenecks are in the namenode.  For example, if heartbeats are already using 75% of its capacity, and we want replications to use the last 25%, then vastly increasing the heartbeat rate will starve the replications.  To my thinking, we should design things so that we don't see timeouts in normal operation (except when trying to contact nodes that are malfunctioning).  In particular, we shouldn't use timeouts as a primary control mechanism.

Also note that there are different kinds of timeouts.  There are connect timeouts, which mean that the server never saw the request.  Response timeouts, however, usually mean that the server has recieved the request and will eventually respond to it, but just not in the time you're willing to wait.  In the latter case, the server won't notice that the client has timed out until *after* the response has been computed.  So, if you're going to retry sooner, you should only do so after a connect timeout, and even then I'd argue that this is a poor solution.


> Chain reaction in a big cluster caused by simultaneous failure of only a few data-nodes.
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-572
>                 URL: http://issues.apache.org/jira/browse/HADOOP-572
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>         Environment: Large dfs cluster
>            Reporter: Konstantin Shvachko
>
> I've observed a cluster crash caused by simultaneous failure of only 3 data-nodes.
> The crash is reproducable. In order to reproduce it you need a rather large cluster.
> To simplify calculations I'll consider a 600 node cluster as an example.
> The cluster should also contain a substantial amount of data.
> We will need at least 3 data-nodes containing 10,000+ blocks each.
> Now suppose that these 3 data-nodes fail at the same time, and the name-node
> started replicating all missing blocks belonging to the nodes.
> The name-node can replicate 50 blocks per second on average based on experimental data.
> Meaning, it will take more than 10 minutes, which is the heartbeat expiration interval,
> to replicates all 30,000+ blocks.
> With the 3 second heartbeat interval there are 600 / 3 = 200 heartbeats hitting the name-node every second.
> Under heavy replication load the name-node accepts about 50 heartbeats per second.
> So at most 3/4 of all heartbeats remain unserved.
> Each node SHOULD send 200 heartbeats during the 10 minute interval, and every time the probability
> of the heartbeat being unserved is 3/4 or less.
> So the probability of failing of all 200 heartbeats is (3/4) ** 200 = 0 from the practical standpoint.
> IN FACT since current implementation sets the rpc timeout to 1 minute, a failed heartbeat takes
> 1 minute and 8 seconds to complete, and under this circumstances each data-node can send only
> 9 heartbeats during the 10 minute interval. Thus, the probability of failing of all 9 of them is 0.075,
> which means that we will loose 45 nodes out of 600 at the end of the 10 minute interval.
> From this point the name-node will be constantly replicating blocks and loosing more nodes, and
> becomes effectively dysfunctional.
> A map-reduce framework running on top of it makes things deteriorate even faster, because failing
> tasks and jobs are trying to remove files and re-create them again increasing the overall load on
> the name-node.
> I see at least 2 problems that contribute to the chain reaction described above.
> 1. A heartbeat failure takes too long (1'8").
> 2. Name-node synchronized operations should be fine-grained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 18:17:38 2006
Return-Path: 
 <hadoop-dev-return-4093-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94295 invoked from network); 3 Oct 2006 18:17:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 18:17:38 -0000
Received: (qmail 46852 invoked by uid 500); 3 Oct 2006 18:17:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46779 invoked by uid 500); 3 Oct 2006 18:17:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46742 invoked by uid 99); 3 Oct 2006 18:17:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 11:17:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:57107]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8D/A7-08153-D39A2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 11:17:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 85AD67142E0
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 11:17:24 -0700 (PDT)
Message-ID: <11169707.1159899444544.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 11:17:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-568) small jobs benchmark fails: task is
 UNASSIGNED
In-Reply-To: <15754487.1159776799748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-568?page=all ]

Owen O'Malley updated HADOOP-568:
---------------------------------

    Attachment: unassigned-state-2.patch

Ok, this patch also extends the killTask method to handle the unassigned task by setting it to failed/killed.

> small jobs benchmark fails: task is UNASSIGNED
> ----------------------------------------------
>
>                 Key: HADOOP-568
>                 URL: http://issues.apache.org/jira/browse/HADOOP-568
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>         Attachments: unassigned-state-2.patch, unassigned-state.patch
>
>
> the small jobs benchmark consistently failes when executed a sufficient number of iterations.
> It's just a matter of time before one of the jobs gets stuck, with one map task (out of a 100) simply doesn't get executed.
> Looking at the map list, the task is UNASSIGNED.
> Restarting the affected task tracker releases the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 18:17:39 2006
Return-Path: 
 <hadoop-dev-return-4094-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94343 invoked from network); 3 Oct 2006 18:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 18:17:39 -0000
Received: (qmail 47547 invoked by uid 500); 3 Oct 2006 18:17:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47527 invoked by uid 500); 3 Oct 2006 18:17:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47517 invoked by uid 99); 3 Oct 2006 18:17:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 11:17:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:57110]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DD/A7-08153-F39A2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 11:17:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4CEE271430D
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 11:17:26 -0700 (PDT)
Message-ID: <20976938.1159899446312.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 11:17:26 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-568) small jobs benchmark fails: task is
 UNASSIGNED
In-Reply-To: <15754487.1159776799748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-568?page=all ]

Owen O'Malley updated HADOOP-568:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2

> small jobs benchmark fails: task is UNASSIGNED
> ----------------------------------------------
>
>                 Key: HADOOP-568
>                 URL: http://issues.apache.org/jira/browse/HADOOP-568
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: unassigned-state-2.patch, unassigned-state.patch
>
>
> the small jobs benchmark consistently failes when executed a sufficient number of iterations.
> It's just a matter of time before one of the jobs gets stuck, with one map task (out of a 100) simply doesn't get executed.
> Looking at the map list, the task is UNASSIGNED.
> Restarting the affected task tracker releases the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 18:34:07 2006
Return-Path: 
 <hadoop-dev-return-4095-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99905 invoked from network); 3 Oct 2006 18:34:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 18:34:07 -0000
Received: (qmail 69933 invoked by uid 500); 3 Oct 2006 18:34:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69897 invoked by uid 500); 3 Oct 2006 18:34:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69888 invoked by uid 99); 3 Oct 2006 18:34:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 11:34:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [68.230.241.38] ([68.230.241.38:45780]
 helo=fed1rmmtao01.cox.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8F/08-08153-A1DA2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 11:34:03 -0700
Received: from fed1rmimpo02.cox.net ([70.169.32.72])
          by fed1rmmtao01.cox.net
          (InterMail vM.6.01.06.01 201-2131-130-101-20060113) with ESMTP
          id
 <20061003183359.QNEC6077.fed1rmmtao01.cox.net@fed1rmimpo02.cox.net>;
          Tue, 3 Oct 2006 14:33:59 -0400
Received: from [192.168.1.103] ([70.181.87.35])
	by fed1rmimpo02.cox.net with bizsmtp
	id Vua11V00i0ll8Vy0000000
	Tue, 03 Oct 2006 14:34:01 -0400
Message-ID: <4522AD16.4040601@pagesmiths.com>
Date: Tue, 03 Oct 2006 11:33:58 -0700
From: Jim White <jim@pagesmiths.com>
User-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US;
 rv:1.7.11) Gecko/20050727
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: OCJUG - Orange County Java User's Group <ocjug@ocjug.org>,
 LAJUG - Los Angeles Java User's Group <lajug@lajug.org>
Subject: Now *that* is a programming contest!
X-Enigmail-Version: 0.93.0.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Netflix is offering $1 million for a 10% improvement in the quality of
their suggestion software:

http://blog.eweek.com/blogs/bizbytes/archive/2006/10/02/13548.aspx

Jim White


From MAILER-DAEMON Tue Oct  3 18:52:31 2006
Return-Path: 
 <hadoop-dev-return-4096-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12358 invoked from network); 3 Oct 2006 18:52:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 18:52:31 -0000
Received: (qmail 7479 invoked by uid 500); 3 Oct 2006 18:52:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7457 invoked by uid 500); 3 Oct 2006 18:52:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7448 invoked by uid 99); 3 Oct 2006 18:52:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 11:52:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47857]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C2/88-08153-D61B2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 11:52:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 91E13714312
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 11:52:20 -0700 (PDT)
Message-ID: <17588278.1159901540594.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 11:52:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-522) MapFile should support block
 compression
In-Reply-To: <3893251.1158016342663.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-522?page=comments#action_12439621 ] 
            
Owen O'Malley commented on HADOOP-522:
--------------------------------------

It looks good other than Arun's nit about the getLength javadoc being for the wrong method. 

> MapFile should support block compression
> ----------------------------------------
>
>                 Key: HADOOP-522
>                 URL: http://issues.apache.org/jira/browse/HADOOP-522
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>         Attachments: block-compress-map-file.patch
>
>
> MapFile is layered on SequenceFile and permits random-access to sorted data files (typically reduce output) through a parallel index file.  This is used widely in Nutch (e.g. at search time for displaying cached pages, incoming links, etc).  Such sorted data should benefit from block compression, but the current MapFile API does not support specification of block compression.  Also, even if it did, the semantics of SequenceFile methods like seek() and getPosition() are changed under block compression so that MapFile may not work.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 20:07:41 2006
Return-Path: 
 <hadoop-dev-return-4097-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46434 invoked from network); 3 Oct 2006 20:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 20:07:41 -0000
Received: (qmail 50702 invoked by uid 500); 3 Oct 2006 20:07:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50682 invoked by uid 500); 3 Oct 2006 20:07:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50673 invoked by uid 99); 3 Oct 2006 20:07:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 13:07:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53213]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CD/E0-00170-B03C2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 13:07:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 851FA7142DA
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 13:07:25 -0700 (PDT)
Message-ID: <1782059.1159906045542.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 13:07:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-372) should allow to specify different
 inputformat classes for different input dirs for Map/Reduce jobs
In-Reply-To: <23897633.1153332195926.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-372?page=comments#action_12439647 ] 
            
Doug Cutting commented on HADOOP-372:
-------------------------------------

A thought: instead of altering existing interfaces, we might create new interfaces and support both for a time.  That would keep things back-compatible.  How much more pain would it be to implement that way?

> should allow to specify different inputformat classes for different input dirs for Map/Reduce jobs
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-372
>                 URL: http://issues.apache.org/jira/browse/HADOOP-372
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>    Affects Versions: 0.4.0
>         Environment: all
>            Reporter: Runping Qi
>         Assigned To: Owen O'Malley
>
> Right now, the user can specify multiple input directories for a map reduce job. 
> However, the files under all the directories are assumed to be in the same format, 
> with the same key/value classes. This proves to be  a serious limit in many situations. 
> Here is an example. Suppose I have three simple tables: 
> one has URLs and their rank values (page ranks), 
> another has URLs and their classification values, 
> and the third one has the URL meta data such as crawl status, last crawl time, etc. 
> Suppose now I need a job to generate a list of URLs to be crawled next. 
> The decision depends on the info in all the three tables.
> Right now, there is no easy way to accomplish this.
> However, this job can be done if the framework allows to specify different inputformats for different input dirs.
> Suppose my three tables are in the following directory respectively: rankTable, classificationTable. and metaDataTable. 
> If we extend JobConf class with the following method (as Owen suggested to me):
>     addInputPath(aPath, anInputFormatClass, anInputKeyClass, anInputValueClass)
> Then I can specify my job as follows:
>     addInputPath(rankTable, SequenceFileInputFormat.class, UTF8.class, DoubleWritable.class)
>     addInputPath(classificationTable, TextInputFormat.class, UTF8,class, UTF8.class)
>     addInputPath(metaDataTable, SequenceFileInputFormat.class, UTF8.class, MyRecord.class)
> If an input directory is added through the current API, it will have the same meaning as it is now. 
> Thus this extension will not affect any applications that do not need this new feature.
> It is relatively easy for the M/R framework to create an appropriate record reader for a map task based on the above information.
> And that is the only change needed for supporting this extension.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 21:10:38 2006
Return-Path: 
 <hadoop-dev-return-4098-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64108 invoked from network); 3 Oct 2006 21:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 21:10:38 -0000
Received: (qmail 33846 invoked by uid 500); 3 Oct 2006 21:10:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33700 invoked by uid 500); 3 Oct 2006 21:10:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33414 invoked by uid 99); 3 Oct 2006 21:10:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 14:10:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58029]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 23/42-00170-6C1D2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 14:10:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A0897142D1
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 14:10:20 -0700 (PDT)
Message-ID: <23855537.1159909820628.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 14:10:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-522) MapFile should support block
 compression
In-Reply-To: <3893251.1158016342663.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-522?page=all ]

Doug Cutting resolved HADOOP-522.
---------------------------------

    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.

> MapFile should support block compression
> ----------------------------------------
>
>                 Key: HADOOP-522
>                 URL: http://issues.apache.org/jira/browse/HADOOP-522
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.7.0
>
>         Attachments: block-compress-map-file.patch
>
>
> MapFile is layered on SequenceFile and permits random-access to sorted data files (typically reduce output) through a parallel index file.  This is used widely in Nutch (e.g. at search time for displaying cached pages, incoming links, etc).  Such sorted data should benefit from block compression, but the current MapFile API does not support specification of block compression.  Also, even if it did, the semantics of SequenceFile methods like seek() and getPosition() are changed under block compression so that MapFile may not work.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 21:32:33 2006
Return-Path: 
 <hadoop-dev-return-4099-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70588 invoked from network); 3 Oct 2006 21:32:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 21:32:33 -0000
Received: (qmail 61542 invoked by uid 500); 3 Oct 2006 21:32:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61458 invoked by uid 500); 3 Oct 2006 21:32:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61449 invoked by uid 99); 3 Oct 2006 21:32:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 14:32:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:44069]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EB/B2-00170-FE6D2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 14:32:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 713757142E0
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 14:32:22 -0700 (PDT)
Message-ID: <18978001.1159911142461.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 14:32:22 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-567) The build script should record the
 Hadoop version into the build
In-Reply-To: <28945636.1159772659594.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-567?page=all ]

Doug Cutting resolved HADOOP-567.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen!

> The build script should record the Hadoop version into the build
> ----------------------------------------------------------------
>
>                 Key: HADOOP-567
>                 URL: http://issues.apache.org/jira/browse/HADOOP-567
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: util
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: version-2.patch, version.patch
>
>
> It would be good to compile the Hadoop version, subversion revision, and compilation date into the hadoop.jar file. 
> The web/ui would display the version for each of the server home page.
> I'd also add "bin/hadoop version" to print the version information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 21:55:43 2006
Return-Path: 
 <hadoop-dev-return-4100-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76240 invoked from network); 3 Oct 2006 21:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 21:55:43 -0000
Received: (qmail 87444 invoked by uid 500); 3 Oct 2006 21:55:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87412 invoked by uid 500); 3 Oct 2006 21:55:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87388 invoked by uid 99); 3 Oct 2006 21:55:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 14:55:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:35742]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7B/23-00170-25CD2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 14:55:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8D1F77142D1
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 14:55:20 -0700 (PDT)
Message-ID: <7036746.1159912520575.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 14:55:20 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-573) Checksum error during sorting in
 reducer
In-Reply-To: <30516684.1159852339589.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-573?page=comments#action_12439670 ] 
            
Runping Qi commented on HADOOP-573:
-----------------------------------


Yes, the task was rescheduled and finished successfully. That is the good news. 
The syslog does not have any error reports.

I think it is possible that the problem is due to a software bug. Thus, it is better to leave it open for tracking purpose.





> Checksum error during sorting in reducer
> ----------------------------------------
>
>                 Key: HADOOP-573
>                 URL: http://issues.apache.org/jira/browse/HADOOP-573
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>
> Many reduce tasks got killed due to checksum error. The strange thing is that the file was generated by the sort function, and was on a local disk. Here is the stack: 
> Checksum error:  ../task_0011_r_000140_0/all.2.1 at 5342920704
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.verifySum(FSDataInputStream.java:134)
> 	at org.apache.hadoop.fs.FSDataInputStream$Checker.read(FSDataInputStream.java:110)
> 	at org.apache.hadoop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:170)
> 	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
> 	at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
> 	at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
> 	at java.io.DataInputStream.readFully(DataInputStream.java:176)
> 	at org.apache.hadoop.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:55)
> 	at org.apache.hadoop.io.DataOutputBuffer.write(DataOutputBuffer.java:89)
> 	at org.apache.hadoop.io.SequenceFile$Reader.readBuffer(SequenceFile.java:1061)
> 	at org.apache.hadoop.io.SequenceFile$Reader.seekToCurrentValue(SequenceFile.java:1126)
> 	at org.apache.hadoop.io.SequenceFile$Reader.nextRaw(SequenceFile.java:1354)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergeStream.next(SequenceFile.java:1880)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergeQueue.merge(SequenceFile.java:1938)
> 	at org.apache.hadoop.io.SequenceFile$Sorter$MergePass.run(SequenceFile.java:1802)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.mergePass(SequenceFile.java:1749)
> 	at org.apache.hadoop.io.SequenceFile$Sorter.sort(SequenceFile.java:1494)
> 	at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:240)
> 	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1066)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct  3 21:57:34 2006
Return-Path: 
 <hadoop-dev-return-4101-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76961 invoked from network); 3 Oct 2006 21:57:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 21:57:34 -0000
Received: (qmail 92035 invoked by uid 500); 3 Oct 2006 21:57:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92015 invoked by uid 500); 3 Oct 2006 21:57:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92006 invoked by uid 99); 3 Oct 2006 21:57:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 14:57:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:35779]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D8/33-00170-CCCD2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 14:57:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2C0D37142A7
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 14:57:23 -0700 (PDT)
Message-ID: <8076810.1159912643177.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 14:57:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-568) small jobs benchmark fails: task is
 UNASSIGNED
In-Reply-To: <15754487.1159776799748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-568?page=all ]

Doug Cutting updated HADOOP-568:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> small jobs benchmark fails: task is UNASSIGNED
> ----------------------------------------------
>
>                 Key: HADOOP-568
>                 URL: http://issues.apache.org/jira/browse/HADOOP-568
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: unassigned-state-2.patch, unassigned-state.patch
>
>
> the small jobs benchmark consistently failes when executed a sufficient number of iterations.
> It's just a matter of time before one of the jobs gets stuck, with one map task (out of a 100) simply doesn't get executed.
> Looking at the map list, the task is UNASSIGNED.
> Restarting the affected task tracker releases the job.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 02:58:46 2006
Return-Path: 
 <hadoop-dev-return-4104-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36646 invoked from network); 4 Oct 2006 02:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 02:58:46 -0000
Received: (qmail 37074 invoked by uid 500); 4 Oct 2006 02:58:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37053 invoked by uid 500); 4 Oct 2006 02:58:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37043 invoked by uid 99); 4 Oct 2006 02:58:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 19:58:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [64.62.190.91] ([64.62.190.91:1561] helo=mcnabbs.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 35/19-00170-46323254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 19:58:44 -0700
Received: from maude.mcnabbs.org (c-24-10-162-63.hsd1.ut.comcast.net
 [24.10.162.63])
	by mcnabbs.org (Postfix) with ESMTP id 73DE53794D
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 22:58:39 -0400 (EDT)
Received: by maude.mcnabbs.org (Postfix, from userid 501)
	id 4DC3A708F6E; Tue,  3 Oct 2006 16:07:12 -0600 (MDT)
Date: Tue, 3 Oct 2006 16:07:11 -0600
From: Andrew McNabb <amcnabb@mcnabbs.org>
To: hadoop-dev@lucene.apache.org
Subject: Re: Task Tracker Status
Message-ID: <20061003220711.GA15397@mcnabbs.org>
References: <20061002225706.GD3202@mcnabbs.org>
 <20061002230047.GE3202@mcnabbs.org>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="+QahgC5+KEYLbs62"
Content-Disposition: inline
In-Reply-To: <20061002230047.GE3202@mcnabbs.org>
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--+QahgC5+KEYLbs62
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Mon, Oct 02, 2006 at 05:00:47PM -0600, Andrew McNabb wrote:
>=20
> Okay.  It actually looks like the job outright failed.  I'll look at
> this a little more.
>=20

I've looked into this a little bit more.  There are some errors that
appear in the job status page under failures.  For these jobs, it's easy
to see the exception that caused the problem.  However, there are other
jobs that fail, leaving Error blank.  When I go to the tasktracker log
file, I can see the exception:

INFO org.apache.hadoop.mapred.TaskRunner: task_0002_m_000000_0
java.nio.charset.MalformedInputException: Input length =3D 14
at org.apache.hadoop.io.Text.validateUTF8(Text.java:477)

It's funny that some failures show the full error on the jobfailures
page, while others leave a blank field.

Anyway, I thought I should bring this to your attention.

Thanks for everything.


--=20
Andrew McNabb
http://www.mcnabbs.org/andrew/
PGP Fingerprint: 8A17 B57C 6879 1863 DE55  8012 AB4D 6098 8826 6868

--+QahgC5+KEYLbs62
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (Darwin)

iD8DBQFFIt8Pq01gmIgmaGgRAgOiAJ4lJ79I18EKKF/XFIWU3qs287H9MQCeLW8d
QCaWd1hZpwxakspXF8TajL4=
=ow/l
-----END PGP SIGNATURE-----

--+QahgC5+KEYLbs62--

From MAILER-DAEMON Tue Oct  3 22:31:15 2006
Return-Path: 
 <hadoop-dev-return-4102-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86414 invoked from network); 3 Oct 2006 22:31:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 22:31:15 -0000
Received: (qmail 22882 invoked by uid 500); 3 Oct 2006 22:31:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22675 invoked by uid 500); 3 Oct 2006 22:31:14 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22666 invoked by uid 99); 3 Oct 2006 22:31:14 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 15:31:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [216.148.227.152] ([216.148.227.152:63948]
 helo=rwcrmhc12.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A0/D3-00170-0B4E2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 15:31:12 -0700
Received: from [192.168.168.18]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20061003223109m1200ou1s8e>; Tue, 3 Oct 2006 22:31:09 +0000
Message-ID: <4522E4AE.2090002@apache.org>
Date: Tue, 03 Oct 2006 15:31:10 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: hadoop 0.7.0 release Friday?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm currently planning to make this month's Hadoop release, 0.7.0, on 
Friday.  If there are changes you'd like to see in this release, please 
have them submitted Thursday at the latest.

Doug

From MAILER-DAEMON Tue Oct  3 23:42:49 2006
Return-Path: 
 <hadoop-dev-return-4103-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 608 invoked from network); 3 Oct 2006 23:42:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 23:42:49 -0000
Received: (qmail 5429 invoked by uid 500); 3 Oct 2006 23:42:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5279 invoked by uid 500); 3 Oct 2006 23:42:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5270 invoked by uid 99); 3 Oct 2006 23:42:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 16:42:48 -0700
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
Received: from [202.46.19.91] ([202.46.19.91:22261]
 helo=mailsrv.bangalore.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 04/25-00170-375F2254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 16:42:46 -0700
Received: from [192.168.1.102] (dsl-kk-dynamic-005.35.22.125.touchtelindia.net
 [125.22.35.5] (may be forged))
	by mailsrv.bangalore.corp.yahoo.com (8.13.6/8.13.6/pop-in) with ESMTP id
 k93Ng4hg092379
	for <hadoop-dev@lucene.apache.org>; Wed, 4 Oct 2006 05:12:05 +0530 (IST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4522E4AE.2090002@apache.org>
References: <4522E4AE.2090002@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <093EE105-4F08-4065-A26B-BF84B8F35614@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Sanjay Dahiya <sanjayd@yahoo-inc.com>
Subject: Re: hadoop 0.7.0 release Friday?
Date: Wed, 4 Oct 2006 05:12:34 +0530
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug,

HADOOP-239 is Patch Available, please take a look if it can be  
committed.

thanks
Sanjay


On 04-Oct-06, at 4:01 AM, Doug Cutting wrote:

> I'm currently planning to make this month's Hadoop release, 0.7.0,  
> on Friday.  If there are changes you'd like to see in this release,  
> please have them submitted Thursday at the latest.
>
> Doug
>
>


From MAILER-DAEMON Wed Oct  4 04:21:41 2006
Return-Path: 
 <hadoop-dev-return-4105-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49949 invoked from network); 4 Oct 2006 04:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 04:21:41 -0000
Received: (qmail 20279 invoked by uid 500); 4 Oct 2006 04:21:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20104 invoked by uid 500); 4 Oct 2006 04:21:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19964 invoked by uid 99); 4 Oct 2006 04:21:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 21:21:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39422]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7A/FA-00170-9B633254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 21:21:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 913917142D1
	for <hadoop-dev@lucene.apache.org>; Tue,  3 Oct 2006 21:19:20 -0700 (PDT)
Message-ID: <31746226.1159935560592.JavaMail.root@brutus>
Date: Tue, 3 Oct 2006 21:19:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-569) Hadoop should allow the user to
 dynamically change the number of times to re-try failed tasks before
 declaring the job fail
In-Reply-To: <1061528.1159806979565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-569?page=comments#action_12439720 ] 
            
Owen O'Malley commented on HADOOP-569:
--------------------------------------

One part that should be changed before this is considered is to remove the generation of all of the possible task names for a job at job creation. With 4 tasks/tip, it is lame, but not that harmful. If someone set the number of tasks/tip to 10000, it would be a big problem. 

Additionally, changing the number dynamically is a big jump from the current model. It would be much more consistent to allow the user to set it in the JobConf at job submission time. What is the advantage of changing it dynamically?


> Hadoop should allow the user to dynamically change the number of times to re-try failed tasks before declaring the job fail
> ---------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-569
>                 URL: http://issues.apache.org/jira/browse/HADOOP-569
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>
> Hadoop has a built-in mechanism to fail a job if some tasks failed more than 3 times. This mechanism works fine in most scenarios. However, in some other cases, it is highly desirable for the user to change (increase) that number. My current running job demonstrates such a scenario: The job has run more than 2.5 days. It is close to complete (90+%). Everything indicates that it will finish eventually in a day, except for one potential danger: some of the tasks are in their 3rd try! 
> It will be extremely helpful if I can change the maximun number of tries to 6 instead of 4!

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 06:02:00 2006
Return-Path: 
 <hadoop-dev-return-4106-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78389 invoked from network); 4 Oct 2006 06:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 06:02:00 -0000
Received: (qmail 28953 invoked by uid 500); 4 Oct 2006 06:01:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28929 invoked by uid 500); 4 Oct 2006 06:01:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28920 invoked by uid 99); 4 Oct 2006 06:01:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 23:01:58 -0700
X-ASF-Spam-Status: No,
 hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,RCVD_IN_BL_SPAMCOP_NET
Received: from [209.151.94.5] ([209.151.94.5:55526] helo=megs8.100mwh.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4F/FD-00170-15E43254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 23:01:55 -0700
Received: from snv-global1.corp.yahoo.com ([216.145.49.15] helo=[10.0.0.106])
	by megs8.100mwh.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.52)
	id 1GUzpI-0007JY-Hq
	for hadoop-dev@lucene.apache.org; Wed, 04 Oct 2006 00:01:52 -0600
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20061003220711.GA15397@mcnabbs.org>
References: <20061002225706.GD3202@mcnabbs.org>
 <20061002230047.GE3202@mcnabbs.org> <20061003220711.GA15397@mcnabbs.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <026818A2-3751-43F9-8A10-E83842FB7938@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Owen O'Malley <owen@yahoo-inc.com>
Subject: Re: Task Tracker Status
Date: Tue, 3 Oct 2006 23:01:44 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - megs8.100mwh.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - yahoo-inc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 3, 2006, at 3:07 PM, Andrew McNabb wrote:

> On Mon, Oct 02, 2006 at 05:00:47PM -0600, Andrew McNabb wrote:
>>
>> Okay.  It actually looks like the job outright failed.  I'll look at
>> this a little more.
>>
>
> I've looked into this a little bit more.  There are some errors that
> appear in the job status page under failures.  For these jobs, it's  
> easy
> to see the exception that caused the problem.  However, there are  
> other
> jobs that fail, leaving Error blank.  When I go to the tasktracker log
> file, I can see the exception:
>
> INFO org.apache.hadoop.mapred.TaskRunner: task_0002_m_000000_0
> java.nio.charset.MalformedInputException: Input length = 14
> at org.apache.hadoop.io.Text.validateUTF8(Text.java:477)
>
> It's funny that some failures show the full error on the jobfailures
> page, while others leave a blank field.
>
> Anyway, I thought I should bring this to your attention.

This is likely fixed by the patch for HADOOP-293, if you aren't  
running the current subversion head. If you find other cases where  
the log has an exception and the web ui doesn't, please file a bug on  
it and include the call stack from the log.

Thanks,
    Owen

From MAILER-DAEMON Wed Oct  4 06:11:11 2006
Return-Path: 
 <hadoop-dev-return-4107-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79531 invoked from network); 4 Oct 2006 06:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 06:11:11 -0000
Received: (qmail 34814 invoked by uid 500); 4 Oct 2006 06:11:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34587 invoked by uid 500); 4 Oct 2006 06:11:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34578 invoked by uid 99); 4 Oct 2006 06:11:08 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 23:11:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [64.62.190.91] ([64.62.190.91:3674] helo=mcnabbs.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B9/4E-00170-77053254 for <hadoop-dev@lucene.apache.org>;
 Tue, 03 Oct 2006 23:11:05 -0700
Received: from maude.mcnabbs.org (c-24-10-162-63.hsd1.ut.comcast.net
 [24.10.162.63])
	by mcnabbs.org (Postfix) with ESMTP id 93A483794D
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 02:11:00 -0400 (EDT)
Received: by maude.mcnabbs.org (Postfix, from userid 501)
	id E98F470947D; Wed,  4 Oct 2006 00:11:34 -0600 (MDT)
Date: Wed, 4 Oct 2006 00:11:34 -0600
From: Andrew McNabb <amcnabb@mcnabbs.org>
To: hadoop-dev@lucene.apache.org
Subject: Re: Task Tracker Status
Message-ID: <20061004061134.GD836@mcnabbs.org>
References: <20061002225706.GD3202@mcnabbs.org>
 <20061002230047.GE3202@mcnabbs.org> <20061003220711.GA15397@mcnabbs.org>
 <026818A2-3751-43F9-8A10-E83842FB7938@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="jRHKVT23PllUwdXP"
Content-Disposition: inline
In-Reply-To: <026818A2-3751-43F9-8A10-E83842FB7938@yahoo-inc.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--jRHKVT23PllUwdXP
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Tue, Oct 03, 2006 at 11:01:44PM -0700, Owen O'Malley wrote:
>=20
> This is likely fixed by the patch for HADOOP-293, if you aren't
> running the current subversion head. If you find other cases where
> the log has an exception and the web ui doesn't, please file a bug on
> it and include the call stack from the log.
>=20

This is on hadoop-0.6.2.  I saw that 0.7 is coming out this week, so
I'll give it a try then, and I'll let you know if there are still
problems.  Thanks.

--=20
Andrew McNabb
http://www.mcnabbs.org/andrew/
PGP Fingerprint: 8A17 B57C 6879 1863 DE55  8012 AB4D 6098 8826 6868

--jRHKVT23PllUwdXP
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (Darwin)

iD8DBQFFI1CWq01gmIgmaGgRAiviAJ9GwO2JPO7vomHCxZBwTc17BbOy5gCffF6Z
wHdh9mHGR++/vMuLYiCo6Yg=
=IsJT
-----END PGP SIGNATURE-----

--jRHKVT23PllUwdXP--

From MAILER-DAEMON Wed Oct  4 14:38:31 2006
Return-Path: 
 <hadoop-dev-return-4108-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69648 invoked from network); 4 Oct 2006 14:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 14:38:31 -0000
Received: (qmail 80607 invoked by uid 500); 4 Oct 2006 14:38:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80481 invoked by uid 500); 4 Oct 2006 14:38:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80350 invoked by uid 99); 4 Oct 2006 14:38:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 07:38:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56778]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 05/D6-00170-657C3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 07:38:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3595F7142E0
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 07:37:21 -0700 (PDT)
Message-ID: <13851691.1159972641216.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 07:37:21 -0700 (PDT)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-258) Cannot obtain block errors
In-Reply-To: <27132555.1148714249850.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-258?page=3Dcomments#actio=
n_12439844 ]=20
           =20
Chris Schneider commented on HADOOP-258:
----------------------------------------

Just FYI, I recently integrated hadoop 0.5 into my copy of the source, rebu=
it and installed. I ran into similar "Could not obtain block" errors until =
I realized that I hadn't deployed the (new in hadoop 0.5) .../webapps/datan=
ode/ servlet on my cluster.

> Cannot obtain block errors
> --------------------------
>
>                 Key: HADOOP-258
>                 URL: http://issues.apache.org/jira/browse/HADOOP-258
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.3.0
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.6.0
>
>
> I've been seeing a lot of errors from dfs for the last couple days. The e=
xception that I see is:
> java.io.IOException: Could not obtain block: blk_2867431916903738534 file=
=3D/user/oom/big-rand/part000271 offset=3D0 at org.apache.hadoop.dfs.DFSCli=
ent$DFSInputStream.blockSeekTo(DFSClient.java:532) at org.apache.hadoop.dfs=
.DFSClient$DFSInputStream.read(DFSClient.java:641) at org.apache.hadoop.fs.=
FSDataInputStream$Checker.read(FSDataInputStream.java:83) at org.apache.had=
oop.fs.FSDataInputStream$PositionCache.read(FSDataInputStream.java:158) at =
java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.B=
ufferedInputStream.read1(BufferedInputStream.java:256) at java.io.BufferedI=
nputStream.read(BufferedInputStream.java:313) at java.io.DataInputStream.re=
adFully(DataInputStream.java:176) at java.io.DataInputStream.readFully(Data=
InputStream.java:152) at org.apache.hadoop.io.SequenceFile$Reader.init(Sequ=
enceFile.java:264) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFil=
e.java:248) at org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:=
238) at org.apache.hadoop.mapred.SequenceFileRecordReader.(SequenceFileReco=
rdReader.java:36) at org.apache.hadoop.mapred.SequenceFileInputFormat.getRe=
cordReader(SequenceFileInputFormat.java:53) at org.apache.hadoop.mapred.Map=
Task.run(MapTask.java:105) at org.apache.hadoop.mapred.TaskTracker$Child.ma=
in(TaskTracker.java:866)
> I haven't had my fingers in that code recently, does it ring any bells fo=
r anyone?

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Wed Oct  4 14:40:20 2006
Return-Path: 
 <hadoop-dev-return-4109-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70185 invoked from network); 4 Oct 2006 14:40:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 14:40:20 -0000
Received: (qmail 84491 invoked by uid 500); 4 Oct 2006 14:40:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84469 invoked by uid 500); 4 Oct 2006 14:40:19 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84460 invoked by uid 99); 4 Oct 2006 14:40:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 07:40:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CADC97142E0
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 07:39:20 -0700 (PDT)
Message-ID: <21616765.1159972760828.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 07:39:20 -0700 (PDT)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-457) Unable to create file in dfs in code
 run on machine not in the cluster.
In-Reply-To: <3617793.1155825857179.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-457?page=comments#action_12439845 ] 
            
Chris Schneider commented on HADOOP-457:
----------------------------------------

Just FYI, I recently integrated hadoop 0.5 into my copy of the source, rebuit and installed. I ran into similar "target-length is 0, below MIN_REPLICATION" errors until I realized that I hadn't deployed the (new in hadoop 0.5) .../webapps/datanode/ servlet on my cluster.

> Unable to create file in dfs in code run on machine not in the cluster.
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-457
>                 URL: http://issues.apache.org/jira/browse/HADOOP-457
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.5.0
>            Reporter: Johan Oskarson
>
> I've got a tiny hadoop cluster and one machine that's not in the cluster that rsync the latest version off the namenode/jobtracker machine. The machine that's not in the cluster is then responsible for starting a few jobs here and there.
> However, the latest trunk is unable to create files in the dfs from my code.
> I'm using a simple new OutputStreamWriter(fs.create(file))); and the file creation looks like it's going ok but then this gets thrown:
> org.apache.hadoop.ipc.RemoteException: java.io.IOException: failed to create file /user/hadoop/submissions/1150000000/1152000000/1152440000/.1155824015.negsub.crc on client "servernotincluster" because target-length is 0, below MIN_REPLICATION (1)
>         at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:410)
>         at org.apache.hadoop.dfs.NameNode.create(NameNode.java:202)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:332)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:468)
>         at org.apache.hadoop.ipc.Client$Connection.run(Client.java:159)
> If I add that machine to the conf/slaves it works fine. Note that it's trying to create that file on the server that's not in the cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 16:08:43 2006
Return-Path: 
 <hadoop-dev-return-4110-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5282 invoked from network); 4 Oct 2006 16:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:08:43 -0000
Received: (qmail 73477 invoked by uid 500); 4 Oct 2006 16:08:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73447 invoked by uid 500); 4 Oct 2006 16:08:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73438 invoked by uid 99); 4 Oct 2006 16:08:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:08:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:60818]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 49/41-17684-98CD3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 09:08:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 104397142D6
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 09:08:26 -0700 (PDT)
Message-ID: <22374204.1159978106063.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 09:08:26 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-550) Text constructure can throw exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-550?page=all ]

Mahadev konar updated HADOOP-550:
---------------------------------

    Attachment: text_junit.patch

I have added a junit test and also made the set method throw runtimeexception. The junit test takes a static byte array of non utf8 characters and creates a text object and then get the bytes back using text.getBytes() and compares these bytes. Since we are not replcaing non UTF8 characters then I just compare to see if the initial and the final byte array are the same. 

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>            Reporter: Bryan Pendleton
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: text.patch, text_junit.patch
>
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 16:33:33 2006
Return-Path: 
 <hadoop-dev-return-4111-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14488 invoked from network); 4 Oct 2006 16:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:33:33 -0000
Received: (qmail 16893 invoked by uid 500); 4 Oct 2006 16:33:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16861 invoked by uid 500); 4 Oct 2006 16:33:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16852 invoked by uid 99); 4 Oct 2006 16:33:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:33:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56251]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D7/F1-17684-C52E3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 09:33:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 68C7E7142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 09:33:21 -0700 (PDT)
Message-ID: <23259762.1159979601426.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 09:33:21 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-343) In case of dead task tracker, the
 copy mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-343?page=all ]

Sameer Paranjpye reassigned HADOOP-343:
---------------------------------------

    Assignee: Sameer Paranjpye  (was: Mahadev konar)

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-343
>                 URL: http://issues.apache.org/jira/browse/HADOOP-343
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>         Attachments: bugfix.patch
>
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 16:33:36 2006
Return-Path: 
 <hadoop-dev-return-4112-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14612 invoked from network); 4 Oct 2006 16:33:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:33:36 -0000
Received: (qmail 17194 invoked by uid 500); 4 Oct 2006 16:33:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17175 invoked by uid 500); 4 Oct 2006 16:33:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17166 invoked by uid 99); 4 Oct 2006 16:33:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:33:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56253]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E7/F1-17684-E52E3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 09:33:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47DB87142E0
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 09:33:23 -0700 (PDT)
Message-ID: <28610665.1159979603292.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 09:33:23 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-343) In case of dead task tracker, the
 copy mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-343?page=all ]

Work on HADOOP-343 started by Sameer Paranjpye.

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-343
>                 URL: http://issues.apache.org/jira/browse/HADOOP-343
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>         Attachments: bugfix.patch
>
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 16:39:35 2006
Return-Path: 
 <hadoop-dev-return-4113-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17287 invoked from network); 4 Oct 2006 16:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:39:35 -0000
Received: (qmail 30634 invoked by uid 500); 4 Oct 2006 16:39:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30609 invoked by uid 500); 4 Oct 2006 16:39:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30600 invoked by uid 99); 4 Oct 2006 16:39:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:39:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:47389]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 93/22-17684-4C3E3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 09:39:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 410757142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 09:39:21 -0700 (PDT)
Message-ID: <7031750.1159979961263.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 09:39:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-239?page=comments#action_12439893 ] 
            
Owen O'Malley commented on HADOOP-239:
--------------------------------------

This is looking good, but the enum class names are all caps when they should be CamelCase. (So Keys instead of KEYS and Values instead of VALUES.)

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch, Hadoop-239_2.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 16:45:33 2006
Return-Path: 
 <hadoop-dev-return-4114-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18910 invoked from network); 4 Oct 2006 16:45:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:45:33 -0000
Received: (qmail 41029 invoked by uid 500); 4 Oct 2006 16:45:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41006 invoked by uid 500); 4 Oct 2006 16:45:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40997 invoked by uid 99); 4 Oct 2006 16:45:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:45:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40785]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 70/52-17684-A25E3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 09:45:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9518C7142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 09:45:19 -0700 (PDT)
Message-ID: <21744554.1159980319607.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 09:45:19 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-574) want FileSystem implementation for
 Amazon S3
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

want FileSystem implementation for Amazon S3
--------------------------------------------

                 Key: HADOOP-574
                 URL: http://issues.apache.org/jira/browse/HADOOP-574
             Project: Hadoop
          Issue Type: New Feature
          Components: fs
            Reporter: Doug Cutting


An S3-based Hadoop FileSystem would make a great addition to Hadoop.

It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:

http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html

This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 16:59:35 2006
Return-Path: 
 <hadoop-dev-return-4115-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24193 invoked from network); 4 Oct 2006 16:59:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:59:35 -0000
Received: (qmail 65399 invoked by uid 500); 4 Oct 2006 16:59:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65377 invoked by uid 500); 4 Oct 2006 16:59:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65353 invoked by uid 99); 4 Oct 2006 16:59:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:59:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33357]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8B/B2-17684-578E3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 09:59:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2690A7142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 09:59:23 -0700 (PDT)
Message-ID: <11631569.1159981163155.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 09:59:23 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-343) In case of dead task tracker, the
 copy mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-343?page=comments#action_12439897 ] 
            
Sameer Paranjpye commented on HADOOP-343:
-----------------------------------------

This patch addresses the concern raised. If a map output transfer from a particular tasktracker fails, other output locations from the tasktracker that are present in the cache are removed. This addresses the problem of repeated attempts and backoffs from a lost tasktracker, which is particularly bad towards the end of a shuffle. Copies can, of course, fail for other reasons, in these cases also output locations are removed. The cost of this removal is fairly low. This is because the number of output locations cached for a specific tasktracker is usually small (3-4), and removing these (multiple times even) results in a handful of extra polls of the jobtracker.

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-343
>                 URL: http://issues.apache.org/jira/browse/HADOOP-343
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: bugfix.patch, cache-purge.txt
>
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 16:59:37 2006
Return-Path: 
 <hadoop-dev-return-4116-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24229 invoked from network); 4 Oct 2006 16:59:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:59:37 -0000
Received: (qmail 65728 invoked by uid 500); 4 Oct 2006 16:59:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65689 invoked by uid 500); 4 Oct 2006 16:59:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65680 invoked by uid 99); 4 Oct 2006 16:59:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:59:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33360]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DB/B2-17684-778E3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 09:59:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D54C47142E0
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 09:59:24 -0700 (PDT)
Message-ID: <4582623.1159981164871.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 09:59:24 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-343) In case of dead task tracker, the copy
 mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-343?page=all ]

Sameer Paranjpye updated HADOOP-343:
------------------------------------

               Status: Patch Available  (was: In Progress)
        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2
                           (was: 0.5.0)

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-343
>                 URL: http://issues.apache.org/jira/browse/HADOOP-343
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: bugfix.patch, cache-purge.txt
>
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 16:59:39 2006
Return-Path: 
 <hadoop-dev-return-4117-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24265 invoked from network); 4 Oct 2006 16:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:59:39 -0000
Received: (qmail 65944 invoked by uid 500); 4 Oct 2006 16:59:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65923 invoked by uid 500); 4 Oct 2006 16:59:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65914 invoked by uid 99); 4 Oct 2006 16:59:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:59:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33363]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3C/B2-17684-978E3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 09:59:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90BA47142A7
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 09:59:26 -0700 (PDT)
Message-ID: <256353.1159981166590.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 09:59:26 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-343) In case of dead task tracker, the copy
 mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-343?page=all ]

Sameer Paranjpye updated HADOOP-343:
------------------------------------

    Attachment: cache-purge.txt

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-343
>                 URL: http://issues.apache.org/jira/browse/HADOOP-343
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: bugfix.patch, cache-purge.txt
>
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 17:06:30 2006
Return-Path: 
 <hadoop-dev-return-4118-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28755 invoked from network); 4 Oct 2006 17:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 17:06:30 -0000
Received: (qmail 73813 invoked by uid 500); 4 Oct 2006 17:06:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73793 invoked by uid 500); 4 Oct 2006 17:06:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73784 invoked by uid 99); 4 Oct 2006 17:06:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 10:06:29 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=arkady@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.149] ([207.126.228.149:47366]
 helo=rsmtp1.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 53/E2-17684-21AE3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 10:06:28 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k94H6LIY016747;
	Wed, 4 Oct 2006 10:06:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:cc:
	from:subject:date:to:x-mailer;
	b=YhzqUDLdVUJSLfusoUGtnQdb2jkJaxMAJmLIhwHb2V9z6E6fT/WkpYv0cgeYZZkS
In-Reply-To: <4523E777.7030008@yahoo-inc.com>
References: 
 <1F07FFA5839DD34393CD1B1458A63CCE0D5F39FC@SNV-XCHMAIL.xch.corp.yahoo.com>
 <4523E777.7030008@yahoo-inc.com>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: multipart/alternative; boundary=Apple-Mail-8--861733612
Message-Id: <b592650414bae76a4081e6e290753c2d@yahoo-inc.com>
Cc: hadoop-dev@lucene.apache.org, Farzin Maghoul <fmaghoul@yahoo-inc.com>
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: Link to live image search
Date: Wed, 4 Oct 2006 10:06:16 -0700
To: Richard Kasperski <rkasper@yahoo-inc.com>
X-Mailer: Apple Mail (2.624)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-8--861733612
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

Richard,

Should we move it to a more accessible place?
Or it is supposed to be hidden?

-- ab

On Oct 4, 2006, at 9:55 AM, Richard Kasperski wrote:

>  Eckart,
>  =A0=A0=A0 This is hosted on a dev machine which isn't generally =
available =20
> from all internal yahoo ip's. For me it works with both the latest =20
> production Firefox release and the current beta of the next version of =
=20
> firefox. Can you ping nlparchive.yst.corp.yahoo.com. If not the =20
> difference might be that I usually access the internet using a proxy =20=

> as described here except using socks-proxy-internal.yahoo.com.
>
>  Eckart Walther wrote:thanks for sending... somehow i cant get this to =
=20
> work.. what browser am i supposed to use? fwiw, i am running IE 6 and =20=

> mozilla 1.5 (behind the times, but had a disk crash and now running =20=

> only the stable versions)...
>>
>> From: Hadar Shemtov
>> Sent: Tuesday, October 03, 2006 8:10 PM
>> To: ARKADY BORKOVSKY; Tim Mayer; Eckart Walther
>> Cc: Richard Kasperski; Farzin Maghoul
>> Subject: Re: Link to live image search
>>
>> http://nlparchive.yst.corp.yahoo.com/%7Erkasper/haiku/?&amp;=20
>> port=3D9988#q=3D&amp;i=3D0
>>
>>
>>  On 10/3/06 6:00 PM, "Arkady Borkovsky" <arkady@yahoo-inc.com> wrote:
>>
>>> Eckart, Tim:
>>>
>>>  =A0Here is a link to the partial matching image search haiku. =A0
>>>
>>>  Richard has put together a variation of HiQu (Eureka, Livesearch) =20=

>>> for images.
>>>  As Farzin predicted it, works better for images than for regular =20=

>>> search
>>>
>>>  In my view, it is amazing!
>>>  By virtue of providing multiple query variations, it is so much =20
>>> easier to get to the query that gives the right images.
>>>  The effect is more dramatic that in text search, as a human =20
>>> evaluates relevance of images much faster than that of text. =A0This =
=20
>>> makes scrolling through queries for images so attractive.
>>>
>>>  Please look at it.
>>>
>>>  Note that you do not need to complete words:
>>>
>>> run chee =A0=A0=A0=A0=A0=A0=A0=A0=A0gives you pictures of beatuful =
cats, while
>>> run hor =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0show horses
>>> jagu =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0cats and =
cars -- just scroll though choices
>>>
>>>  --ab
>>
>

--Apple-Mail-8--861733612--


From MAILER-DAEMON Wed Oct  4 17:13:41 2006
Return-Path: 
 <hadoop-dev-return-4119-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30448 invoked from network); 4 Oct 2006 17:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 17:13:41 -0000
Received: (qmail 84285 invoked by uid 500); 4 Oct 2006 17:13:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84208 invoked by uid 500); 4 Oct 2006 17:13:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84180 invoked by uid 99); 4 Oct 2006 17:13:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 10:13:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39845]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3C/03-17684-ABBE3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 10:13:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FB3D7142D6
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 10:13:19 -0700 (PDT)
Message-ID: <29925123.1159981999585.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 10:13:19 -0700 (PDT)
From: "Paul Malolepsy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-575) StatusHttpServer is failing if trying
 to use hadoop as a standalone jar
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

StatusHttpServer is failing if trying to use hadoop as a standalone jar
-----------------------------------------------------------------------

                 Key: HADOOP-575
                 URL: http://issues.apache.org/jira/browse/HADOOP-575
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.6.2
         Environment: WinXP
            Reporter: Paul Malolepsy
            Priority: Blocker


I just recently tried to upgrade from hadoop .2 and I am getting an error during the startup of StatusHttpServer.  I did set my hadoop.log.dir, but there are still errros.  Here is my stack below.

java.io.FileNotFoundException: E:\projects\marzen\file:\E:\projects\marzen\web\WEB-INF\lib\hadoop.jar!\webapps\datanode
	at org.mortbay.jetty.servlet.WebApplicationContext.resolveWebApp(WebApplicationContext.java:266)
	at org.mortbay.jetty.servlet.WebApplicationContext.doStart(WebApplicationContext.java:449)
	at org.mortbay.util.Container.start(Container.java:72)
	at org.mortbay.http.HttpServer.doStart(HttpServer.java:753)
	at org.mortbay.util.Container.start(Container.java:72)
	at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:177)
	at org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:167)
	at org.apache.hadoop.dfs.DataNode.makeInstance(DataNode.java:1069)
	at org.apache.hadoop.dfs.DataNode.run(DataNode.java:1003)
	...rest of stack removed...

The root of the issues seems to be in StatusHttpServer.getWebAppsPath().  Its possible that I am using hadoop differently than most people (as a standalone jar in another web app), but I'm not sure how this function could ever work if you were just using hadoop packaged as a standalone jar.  Its trying to get the webapps path using this line: 

URL url = StatusHttpServer.class.getClassLoader().getResource("webapps");

Which is returning the following path.  This is a path within the hadoop jar:   file:\E:\projects\marzen\web\WEB-INF\lib\hadoop.jar!\webapps

It then tries to return the canonical path of that wich returns this path:  E:\projects\marzen\file:\E:\projects\marzen\web\WEB-INF\lib\hadoop.jar!\webapps

I don't even think that is a valid path, and the Jetty server certainly doesn't like it.  Is there something I'm doing wrong?  Is it possible nobody else is using hadoop as a standalone jar?  Is this a windows specific bug?  








-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 17:27:35 2006
Return-Path: 
 <hadoop-dev-return-4120-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33445 invoked from network); 4 Oct 2006 17:27:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 17:27:35 -0000
Received: (qmail 4989 invoked by uid 500); 4 Oct 2006 17:27:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4767 invoked by uid 500); 4 Oct 2006 17:27:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4758 invoked by uid 99); 4 Oct 2006 17:27:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 10:27:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46126]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CB/63-17684-40FE3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 10:27:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 518C47142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 10:27:21 -0700 (PDT)
Message-ID: <16644767.1159982841331.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 10:27:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-343) In case of dead task tracker, the copy
 mapouts try copying all mapoutputs from this tasktracker
In-Reply-To: <21351816.1152122969991.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-343?page=all ]

Doug Cutting updated HADOOP-343:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Sameer!

> In case of dead task tracker, the copy mapouts try copying all mapoutputs from this tasktracker
> -----------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-343
>                 URL: http://issues.apache.org/jira/browse/HADOOP-343
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Mahadev konar
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: bugfix.patch, cache-purge.txt
>
>
> In case of a dead task tracker, the reduces which do not have the updated map out locations try copygin files from this node and since there are failures on copying, this leads to backoff and slowing down of the copy pahse.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 17:27:37 2006
Return-Path: 
 <hadoop-dev-return-4121-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33477 invoked from network); 4 Oct 2006 17:27:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 17:27:37 -0000
Received: (qmail 5216 invoked by uid 500); 4 Oct 2006 17:27:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5011 invoked by uid 500); 4 Oct 2006 17:27:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5002 invoked by uid 99); 4 Oct 2006 17:27:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 10:27:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:46130]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1C/63-17684-70FE3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 10:27:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3A3C7142A7
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 10:27:23 -0700 (PDT)
Message-ID: <11397806.1159982843668.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 10:27:23 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-550) Text constructure can throw exception
In-Reply-To: <6747780.1158701362340.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-550?page=all ]

Doug Cutting updated HADOOP-550:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Hairong & Mahadev!

> Text constructure can throw exception
> -------------------------------------
>
>                 Key: HADOOP-550
>                 URL: http://issues.apache.org/jira/browse/HADOOP-550
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>            Reporter: Bryan Pendleton
>         Assigned To: Hairong Kuang
>             Fix For: 0.7.0
>
>         Attachments: text.patch, text_junit.patch
>
>
> I finally got back around to moving my working code to using Text objects.
> And, once again, switching to Text (from UTF8) means my jobs are failing. This time, its better defined - constructing a Text from a string extracted from Real World data makes the Text object constructor throw a CharacterCodingException. This may be legit - I don't actually understand UTF well enough to understand what's wrong with the supplied string. I'm assembling a series of strings, some of which are user-supplied, and something causes the Text constructor to barf.
> However, this is still completely unacceptable. If I need to stuff textual data someplace - I need the container to *do* it. If user-supplied inputs can't be stored as a "UTF" aware text value, then another container needs to be brought into existence. Sure, I can use a BytesWritable, but, as its name implies - Text should handle "text". If Text is supposed to == "StringWritable", then, well, it doesn't, yet.
> I admit to being a few weeks' back in the bleeding edge at this point, so maybe my particluar Text bug has been fixed, though the only fixes to Text I see are adopting it into more of the internals of Hadoop. This argument goes double in that case - if we're using Text objects internally, it should really be a totally solid object - construct one from a String, get one back, but _never_  throw a content-related Exception. Or, if Text is not the right object because its data-sensitive, then I argue we shouldn't use it in any case where data might kill it - internal, or anywhere else (by default).
> Please, don't remove UTF8, for now.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 17:57:33 2006
Return-Path: 
 <hadoop-dev-return-4122-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42996 invoked from network); 4 Oct 2006 17:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 17:57:33 -0000
Received: (qmail 62852 invoked by uid 500); 4 Oct 2006 17:57:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62712 invoked by uid 500); 4 Oct 2006 17:57:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62703 invoked by uid 99); 4 Oct 2006 17:57:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 10:57:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53733]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A0/34-17684-C06F3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 10:57:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 437F17142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 10:57:21 -0700 (PDT)
Message-ID: <7496015.1159984641273.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 10:57:21 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Sanjay Dahiya updated HADOOP-239:
---------------------------------

    Attachment: Hadoop-239_3.patch

thanks Owen
I changed the casing for enums, here is the updated patch, 

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch, Hadoop-239_2.patch, Hadoop-239_3.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 17:59:34 2006
Return-Path: 
 <hadoop-dev-return-4123-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43430 invoked from network); 4 Oct 2006 17:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 17:59:34 -0000
Received: (qmail 64681 invoked by uid 500); 4 Oct 2006 17:59:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64660 invoked by uid 500); 4 Oct 2006 17:59:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64651 invoked by uid 99); 4 Oct 2006 17:59:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 10:59:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:33849]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7C/34-17684-386F3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 10:59:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 915787142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 10:59:20 -0700 (PDT)
Message-ID: <22393979.1159984760592.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 10:59:20 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-572) Chain reaction in a big cluster
 caused by simultaneous failure of only a few data-nodes.
In-Reply-To: <27006103.1159840519548.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-572?page=comments#action_12439923 ] 
            
Devaraj Das commented on HADOOP-572:
------------------------------------

How about this approach:
* The DataNodes register once with the NameNode after the latter comes up (and registers just once - no heartbeats).
* Whenever the NameNode requires the services of a DataNode (to store/delete blocks), it pings the chosen DataNode to see whether it is indeed alive. As a response to the "ping", the DataNode sends its latest status (block report, free disk space, etc.). The response can also be controlled - if the DataNode sent its status once in the last 30 secs, it doesn't send it again.
* For each DataNode, the NameNode maintains a list of the blocks it hosts.
* A separate thread in the NameNode pings the set of known DataNodes and whenever it is not able to ping a particular DataNode, it issues the replication requests of the blocks that were there in that datanode (for this it takes the help of the inverse mapping from a "block" to the set of DataNodes containing that block).

A directory walk may also be a thing to look at - the NameNode walks the file system hierarchy and for each file it pings the set of all DataNodes containing the blocks of that file but in this case, we will end up pinging the same DataNode multiple times. To avoid this, the (DataNode->{blocks}) mapping can be used.

> Chain reaction in a big cluster caused by simultaneous failure of only a few data-nodes.
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-572
>                 URL: http://issues.apache.org/jira/browse/HADOOP-572
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>         Environment: Large dfs cluster
>            Reporter: Konstantin Shvachko
>
> I've observed a cluster crash caused by simultaneous failure of only 3 data-nodes.
> The crash is reproducable. In order to reproduce it you need a rather large cluster.
> To simplify calculations I'll consider a 600 node cluster as an example.
> The cluster should also contain a substantial amount of data.
> We will need at least 3 data-nodes containing 10,000+ blocks each.
> Now suppose that these 3 data-nodes fail at the same time, and the name-node
> started replicating all missing blocks belonging to the nodes.
> The name-node can replicate 50 blocks per second on average based on experimental data.
> Meaning, it will take more than 10 minutes, which is the heartbeat expiration interval,
> to replicates all 30,000+ blocks.
> With the 3 second heartbeat interval there are 600 / 3 = 200 heartbeats hitting the name-node every second.
> Under heavy replication load the name-node accepts about 50 heartbeats per second.
> So at most 3/4 of all heartbeats remain unserved.
> Each node SHOULD send 200 heartbeats during the 10 minute interval, and every time the probability
> of the heartbeat being unserved is 3/4 or less.
> So the probability of failing of all 200 heartbeats is (3/4) ** 200 = 0 from the practical standpoint.
> IN FACT since current implementation sets the rpc timeout to 1 minute, a failed heartbeat takes
> 1 minute and 8 seconds to complete, and under this circumstances each data-node can send only
> 9 heartbeats during the 10 minute interval. Thus, the probability of failing of all 9 of them is 0.075,
> which means that we will loose 45 nodes out of 600 at the end of the 10 minute interval.
> From this point the name-node will be constantly replicating blocks and loosing more nodes, and
> becomes effectively dysfunctional.
> A map-reduce framework running on top of it makes things deteriorate even faster, because failing
> tasks and jobs are trying to remove files and re-create them again increasing the overall load on
> the name-node.
> I see at least 2 problems that contribute to the chain reaction described above.
> 1. A heartbeat failure takes too long (1'8").
> 2. Name-node synchronized operations should be fine-grained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 18:07:40 2006
Return-Path: 
 <hadoop-dev-return-4124-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45978 invoked from network); 4 Oct 2006 18:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 18:07:40 -0000
Received: (qmail 80031 invoked by uid 500); 4 Oct 2006 18:07:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80006 invoked by uid 500); 4 Oct 2006 18:07:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79995 invoked by uid 99); 4 Oct 2006 18:07:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 11:07:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:42756]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 86/00-20288-568F3254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 11:07:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D36347142D7
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 11:07:22 -0700 (PDT)
Message-ID: <27612019.1159985242847.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 11:07:22 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-572) Chain reaction in a big cluster
 caused by simultaneous failure of only a few data-nodes.
In-Reply-To: <27006103.1159840519548.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-572?page=comments#action_12439925 ] 
            
Doug Cutting commented on HADOOP-572:
-------------------------------------

Devaraj: I think your proposal is part of the long-term solution.  A short-term fix will simply be to control the rate of replication and increase the heartbeat interval.  Longer-term we should consider the sort of inverted control you propose.

> Chain reaction in a big cluster caused by simultaneous failure of only a few data-nodes.
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-572
>                 URL: http://issues.apache.org/jira/browse/HADOOP-572
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.6.2
>         Environment: Large dfs cluster
>            Reporter: Konstantin Shvachko
>
> I've observed a cluster crash caused by simultaneous failure of only 3 data-nodes.
> The crash is reproducable. In order to reproduce it you need a rather large cluster.
> To simplify calculations I'll consider a 600 node cluster as an example.
> The cluster should also contain a substantial amount of data.
> We will need at least 3 data-nodes containing 10,000+ blocks each.
> Now suppose that these 3 data-nodes fail at the same time, and the name-node
> started replicating all missing blocks belonging to the nodes.
> The name-node can replicate 50 blocks per second on average based on experimental data.
> Meaning, it will take more than 10 minutes, which is the heartbeat expiration interval,
> to replicates all 30,000+ blocks.
> With the 3 second heartbeat interval there are 600 / 3 = 200 heartbeats hitting the name-node every second.
> Under heavy replication load the name-node accepts about 50 heartbeats per second.
> So at most 3/4 of all heartbeats remain unserved.
> Each node SHOULD send 200 heartbeats during the 10 minute interval, and every time the probability
> of the heartbeat being unserved is 3/4 or less.
> So the probability of failing of all 200 heartbeats is (3/4) ** 200 = 0 from the practical standpoint.
> IN FACT since current implementation sets the rpc timeout to 1 minute, a failed heartbeat takes
> 1 minute and 8 seconds to complete, and under this circumstances each data-node can send only
> 9 heartbeats during the 10 minute interval. Thus, the probability of failing of all 9 of them is 0.075,
> which means that we will loose 45 nodes out of 600 at the end of the 10 minute interval.
> From this point the name-node will be constantly replicating blocks and loosing more nodes, and
> becomes effectively dysfunctional.
> A map-reduce framework running on top of it makes things deteriorate even faster, because failing
> tasks and jobs are trying to remove files and re-create them again increasing the overall load on
> the name-node.
> I see at least 2 problems that contribute to the chain reaction described above.
> 1. A heartbeat failure takes too long (1'8").
> 2. Name-node synchronized operations should be fine-grained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 21:39:32 2006
Return-Path: 
 <hadoop-dev-return-4125-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20113 invoked from network); 4 Oct 2006 21:39:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 21:39:32 -0000
Received: (qmail 37365 invoked by uid 500); 4 Oct 2006 21:39:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37336 invoked by uid 500); 4 Oct 2006 21:39:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37327 invoked by uid 99); 4 Oct 2006 21:39:31 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 14:39:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34706]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 37/E4-20288-21A24254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 14:39:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 83D837142D6
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 14:39:19 -0700 (PDT)
Message-ID: <17355410.1159997959537.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 14:39:19 -0700 (PDT)
From: "Michel Tourn (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-576) Enhance streaming to use the new
 caching feature
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Enhance streaming to use the new caching feature
------------------------------------------------

                 Key: HADOOP-576
                 URL: http://issues.apache.org/jira/browse/HADOOP-576
             Project: Hadoop
          Issue Type: Improvement
          Components: contrib/streaming
            Reporter: Michel Tourn


Design proposal to expose filecache access to Hadoop streaming.

The main difference with the pure-Java filecache code is:
1. As part of job launch (in hadoopStreaming client) we validate presence of
cached archives/files in DFS.
2. As part of Task initialization, a symbolic link to cached files/unarchived
directories is created in the Task working directory.


C1. New command-line options (example)
-cachearchive dfs:/user/me/big.zip#big_1 
-cachefile dfs:/user/other/big.zip#big_2 
-cachearchive dfs:/user/me/bang.zip

This maps to API calls to static methods:
DistributedCache.addCacheArchive(URI uri, Configuration conf)
DistributedCache.addCacheFile(URI uri, Configuration conf)
This is done in class StreamJob methods parseArgv() and setJobConf().
The code should be similar to the way "-file" is handled.

One difference is that we now require a FileSystem instance to VALIDATE the DFS
paths in -cachefile and -cachearchive. The FileSystem instance should not be
accessed before the filesystem is set by this: setUserJobConfProps(true);

If FileSystem instance is "local" and there are -cachearchive/-cachefile
options , then fail: this is not supported.

Else this should return true:
fs_.isFile(Path) for each -cachearchive/-cachefile option.
Only in verbose mode: show the isFile status of each option.
In any verbosity mode: show the first failed isFile() status and abort using
method StreamJob.fail().


C2. Task initialization
The symlinks are called:
Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
Workingdir/big_2 (points to file: /cache/user/other/big.zip)
Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)


This will require hadoopStreaming to create symbolic links.
Hadoop should have code to do this in a portable way.
Although this may not be supported on non-Unix platforms. 
Cross-platform support is harder than for hard-links. 
Cygwin soft links are not a solution: they only work for applications compiled with
cygwin1.dll)
Symbolic links make JUnit tests less portable.
So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)


The parameters after -cachearchive and -cachefile have the following
properties:

A. you can optionally give a name to your symlink (after #)
B. the default name is the leaf name (big.zip, big.zip, bang.zip)
C. if the same leaf name appears more than once you MUST give a name. Otherwise
streaming client aborts and complains. For example with this, Streaming client
should complain:
-cachearchive dfs:/user/me/big.zip 
-cachefile dfs:/user/other/big.zip
This complains because multiple occurrences of "big.zip" are not disambiguated
with #big_1, #big_2.
Ideally the Streaming client error message should then generate an example on
how to fix the parameters:
-cachearchive dfs:/user/me/big.zip#1
-cachefile dfs:/user/other/big.zip#2

---------

hadoop-Client note:
Currently argv parsing is position-independant. i.e. changing the order of
arguments never impacts the behaviour of hadoopStreaming. It would be good to
keep this behaviour.


URI notes:
scheme is "dfs:" for consistency with current state of Hadoop code.
However there is a proposal to change the scheme to "hdfs:"

Using a URI fragment to give a local name to the resource is unusual. The main
constraint is that the URI should remain parsable by java.net.URI(String). And
encoding attributes in the fragment is standard (like CGI parameters in an HTTP
GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 22:03:34 2006
Return-Path: 
 <hadoop-dev-return-4126-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25393 invoked from network); 4 Oct 2006 22:03:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 22:03:34 -0000
Received: (qmail 75819 invoked by uid 500); 4 Oct 2006 22:03:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75600 invoked by uid 500); 4 Oct 2006 22:03:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75569 invoked by uid 99); 4 Oct 2006 22:03:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 15:03:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:59369]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A2/65-20288-4BF24254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 15:03:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B6C97142A7
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 15:03:21 -0700 (PDT)
Message-ID: <5509211.1159999401175.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 15:03:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-239) job tracker WI drops jobs after 24
 hours
In-Reply-To: <7996228.1148318969883.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-239?page=all ]

Doug Cutting updated HADOOP-239:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> job tracker WI drops jobs after 24 hours
> ----------------------------------------
>
>                 Key: HADOOP-239
>                 URL: http://issues.apache.org/jira/browse/HADOOP-239
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: Hadoop-239.patch, Hadoop-239_1.patch, Hadoop-239_2.patch, Hadoop-239_3.patch
>
>
> The jobtracker's WI, keeps track of jobs executed in the past 24 hours.
> if the cluster was idle for a day (say Sunday) it drops all its history.
> Monday morning, the page is empty.
> Better would be to store a fixed number of jobs (say 10 each of succeeded and failed jobs).
> Also, if the job tracker is restarted, it loses all its history.
> The history should be persistent, withstanding restarts and upgrades.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 23:08:36 2006
Return-Path: 
 <hadoop-dev-return-4127-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38579 invoked from network); 4 Oct 2006 23:08:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 23:08:36 -0000
Received: (qmail 36082 invoked by uid 500); 4 Oct 2006 23:08:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35872 invoked by uid 500); 4 Oct 2006 23:08:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35863 invoked by uid 99); 4 Oct 2006 23:08:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 16:08:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:36878]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 75/76-20288-1FE34254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 16:08:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1B217142D6
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 16:08:21 -0700 (PDT)
Message-ID: <10812976.1160003301856.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 16:08:21 -0700 (PDT)
From: "Chris Schneider (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-406) Tasks launched by tasktracker in
 separate JVM can't generate log output
In-Reply-To: <3656443.1154449453917.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-406?page=comments#action_12439994 ] 
            
Chris Schneider commented on HADOOP-406:
----------------------------------------

Sorry it took me so long to get back to this. I have just integrated Hadoop 0.5 and was about to back out my changes and install a more standard configuration when I noticed what I believe is the problem. The log4j.properties file we use doesn't default to the console logger like the standard log4j.properties does.

Our log4j.properties file:

  # RootLogger - DailyRollingFileAppender
  log4j.rootLogger=INFO,DRFA

Vanilla log4j.properties file:

  hadoop.root.logger=INFO,console

Thus, when the child JVM is launched, it's going to try to use our DRFA logger, not send its log output to standard output. Note that before Owen fixed HADOOP-279, running without the hadoop script broke logging (probably in a similar way), and the child JVM is launched without the hadoop script.

Owen should probably comment on this, but it seems that the "child processes log to standard output, and standard output is logged by the parent process" design requires that every log4j.properties file must have console in its hadoop.root.logger.

> Tasks launched by tasktracker in separate JVM can't generate log output
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-406
>                 URL: http://issues.apache.org/jira/browse/HADOOP-406
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.4.0
>            Reporter: Chris Schneider
>         Attachments: HADOOP-406.patch
>
>
> Child JVM's don't have access to logging config system properties. When the child JVM gets launched, it doesn't inherit the Java system properties hadoop.log.dir and hadoop.log.file (which are actually based on the Bash environment variables $HADOOP_LOG_DIR and $HADOOP_LOGFILE). This means that you get no log messages from the actual map/reduce tasks that are executing.
> Stefan Groschupf reported this problem a while back:
> -------------------------------------------------------------------------
> To: hadoop-dev@lucene.apache.org
> From: Stefan Groschupf <sg@media-style.com>
> Subject: tasks can't log bug?
> Date: Tue, 25 Jul 2006 19:26:17 -0700
> X-Virus-Checked: Checked by ClamAV on apache.org
> Hi Hadoop developers,
> I'm confused about the way logging works within map or reduce tasks.
> Since tasks are launched in a new JVM  the java system properties "hadoop.log.dir" and "hadoop.log.file" are not passed to the new JVM.
> This prevents the child process from logging properly. In fact you get:
>  java.io.FileNotFoundException: / (Is a directory)
>   at java.io.FileOutputStream.openAppend(Native Method)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
>   at java.io.FileOutputStream.<init>(FileOutputStream.java:102)
>   at org.apache.log4j.FileAppender.setFile(FileAppender.java:289)
>   at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:165)
>   at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:163)
>   at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:256)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:132)
>   at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:96)
>   at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:654)
>   at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
>   at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.j
> 2006-07-25 15:59:07,553 INFO  mapred.TaskTracker (TaskTracker.java:main(993)) - Child
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
>   at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
>   at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:4
>   at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
>   at org.apache.log4j.Logger.getLogger(Logger.java:104)
>   at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:229)
>   at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:65)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImp
>   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAcc
>   at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>   at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529
>   at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235
>   at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)
>   at org.apache.hadoop.mapred.TaskTracker.<clinit>(TaskTracker.java:44)
>   at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:993)
> We see several ways to solve this problem. First retrieve the properties "hadoop.log.dir" and "hadoop.log.file" from the mother JVM and then pass them to the child JVM as within the args parameter.
> Second would be to  access the environment variables "$HADOOP_LOG_DIR" and "$HADOOP_LOGFILE" using System.getEnv (java 1.5).
> Third there would be a more general solution. Taskrunner would resolve any environment variables it found in "mapred.child.java.opts" by lookup the value using System.getEnv().
> Eg:
> unix:
> export MAX_MEMORY = 200
> hadoop-site.xml:
> <name>mapred.child.java.opts</name>
> <value>-Xmx${MAX_MEMORY}</value>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct  4 23:29:41 2006
Return-Path: 
 <hadoop-dev-return-4128-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44400 invoked from network); 4 Oct 2006 23:29:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 23:29:41 -0000
Received: (qmail 53921 invoked by uid 500); 4 Oct 2006 23:29:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53895 invoked by uid 500); 4 Oct 2006 23:29:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53886 invoked by uid 99); 4 Oct 2006 23:29:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 16:29:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:45813]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2A/C6-20288-CD344254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 16:29:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4DD3F7142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 16:29:21 -0700 (PDT)
Message-ID: <13133629.1160004561316.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 16:29:21 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538_20061005.tgz

Here is an updated patch incorporating the following:
* Completely integrated with GNU autotools (autoconf, automake, libtool) to ease building of native-hadoop on a wide-variety of platforms.
* Use GNU libtool to create the actual native-hadoop library to ensure platform specfic builds and also uses java.lang.System.loadLibrary consistently to handle platform specific mappings.
* The 'fallback' feature and libhadoop-linux-i386.so provided by default as discussed here.
* Complete integration with build.xml and autotools. I have put in 3 new targets: compile-native, clean-native and package-native which need to be called explicitly. 
* I have also ensured that no 'generated files' are ever placed in src/native directory; only in build/ to ensure 'ant clean' works as of today. This is accomplished via 'vpath' tweaks to the Makefiles.
* Uses -Djava.library.path (in both bin/hadoop and build.xml) to help find the native hadoop library.

I'd appreciate any feedback on any of the above; particularly since I'm a autotools n00bie...

I haven't tested this on cygwin yet; on my todo list. 

Doug - 
* Could you please copy the attached libhadoop-linux-i386.so in trunk/lib/native first before attempting to build native-hadoop?
* Also, please treat this as 'almost complete' again and hold off committing it? I feel we should skip this patch for release 0.7... thanks!

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.7.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 06:13:44 2006
Return-Path: 
 <hadoop-dev-return-4129-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32043 invoked from network); 5 Oct 2006 06:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 06:13:44 -0000
Received: (qmail 51461 invoked by uid 500); 5 Oct 2006 06:13:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51248 invoked by uid 500); 5 Oct 2006 06:13:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51239 invoked by uid 99); 5 Oct 2006 06:13:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 23:13:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54190]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0F/FE-20288-392A4254 for <hadoop-dev@lucene.apache.org>;
 Wed, 04 Oct 2006 23:13:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D6177142D1
	for <hadoop-dev@lucene.apache.org>; Wed,  4 Oct 2006 23:13:23 -0700 (PDT)
Message-ID: <5514921.1160028803052.JavaMail.root@brutus>
Date: Wed, 4 Oct 2006 23:13:23 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12440036 ] 
            
eric baldeschwieler commented on HADOOP-489:
--------------------------------------------

I don't know exactly what is proposed here.
How many files are there, etc.
Perhaps you could combine this into a twiki page or an attached spec?

Are you writing a file per task?  Where?

Hours duration on output might work or not.  I can imagine cases where you would like to be able to lease these files until they are safely copied into DFS.  Might add that.

If you store the head of the log, you don't store the failure, that doesn't sound right.  Perhaps we can roll the output logs every 25% of target size or so and keep the last 4-5?

I like sameer's idea of having a stable jobtracker URL that just redirects to the right task tracker.  This would be easy to do with a job in progress, harder with a completed one.


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 07:04:57 2006
Return-Path: 
 <hadoop-dev-return-4130-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40802 invoked from network); 5 Oct 2006 07:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 07:04:57 -0000
Received: (qmail 5859 invoked by uid 500); 5 Oct 2006 07:04:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5648 invoked by uid 500); 5 Oct 2006 07:04:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5639 invoked by uid 99); 5 Oct 2006 07:04:56 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 00:04:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58554]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 26/00-20288-B8EA4254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 00:04:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 666A071429F
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 00:04:21 -0700 (PDT)
Message-ID: <12863867.1160031861416.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 00:04:21 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
In-Reply-To: <24887203.1157469982360.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-506?page=all ]

Work on HADOOP-506 started by Sanjay Dahiya.

> job tracker hangs on to dead task trackers "forever"
> ----------------------------------------------------
>
>                 Key: HADOOP-506
>                 URL: http://issues.apache.org/jira/browse/HADOOP-506
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
> that all makes sense.
> What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).
> there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 16:47:35 2006
Return-Path: 
 <hadoop-dev-return-4131-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46713 invoked from network); 5 Oct 2006 16:47:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 16:47:35 -0000
Received: (qmail 31335 invoked by uid 500); 5 Oct 2006 16:47:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31170 invoked by uid 500); 5 Oct 2006 16:47:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31161 invoked by uid 99); 5 Oct 2006 16:47:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 09:47:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34659]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EC/B2-04543-42735254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 09:47:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7F65C7141D1
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 09:47:19 -0700 (PDT)
Message-ID: <19177174.1160066839519.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 09:47:19 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-577) Job tracker should collect detailed
 information about tasks and return it to the client
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Job tracker should collect detailed information about tasks and return it to the client
---------------------------------------------------------------------------------------

                 Key: HADOOP-577
                 URL: http://issues.apache.org/jira/browse/HADOOP-577
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
         Environment: all
            Reporter: arkady borkovsky


Mapreduce driver should get detailed information about task execution -- at least at the end of the job so that it can be repoted to the user (stored in a "normal" or HDFS file, printed to the stdout, whatever).
This information should include, at least:
-- task execution start and end
-- the number of record read and written
-- the number of butes read and written
for each task  (for each attempt)

It would also be nice to have this infromation while the job is running, updated at least when a task is started or ended.
However, this is just "nice to have", while the final report is quite essential.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 17:57:59 2006
Return-Path: 
 <hadoop-dev-return-4133-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65730 invoked from network); 5 Oct 2006 17:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 17:57:59 -0000
Received: (qmail 56172 invoked by uid 500); 5 Oct 2006 17:57:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56154 invoked by uid 500); 5 Oct 2006 17:57:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56145 invoked by uid 99); 5 Oct 2006 17:57:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 10:57:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40703]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2E/36-04543-F9745254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 10:57:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9063E7142D1
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 10:24:19 -0700 (PDT)
Message-ID: <21547759.1160069059588.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 10:24:19 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-578) Failed tasks should not be put at the
 end of the job tracker's queue
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Failed tasks should not be put at the end of the job tracker's queue
--------------------------------------------------------------------

                 Key: HADOOP-578
                 URL: http://issues.apache.org/jira/browse/HADOOP-578
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.6.2
            Reporter: Owen O'Malley


This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 17:33:03 2006
Return-Path: 
 <hadoop-dev-return-4132-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58067 invoked from network); 5 Oct 2006 17:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 17:33:03 -0000
Received: (qmail 6298 invoked by uid 500); 5 Oct 2006 17:33:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6231 invoked by uid 500); 5 Oct 2006 17:33:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6194 invoked by uid 99); 5 Oct 2006 17:33:01 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 10:33:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:58268]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 89/E4-04543-75145254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 10:31:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB4B37142E2
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 10:30:22 -0700 (PDT)
Message-ID: <3927195.1160069422830.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 10:30:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-577) Job tracker should collect detailed
 information about tasks and return it to the client
In-Reply-To: <19177174.1160066839519.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-577?page=comments#action_12440187 ] 
            
Sanjay Dahiya commented on HADOOP-577:
--------------------------------------

Does it make sense to use JobTracker history mechanism ( HADOOP-239) to include this information as well ? I think it does. 

> Job tracker should collect detailed information about tasks and return it to the client
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-577
>                 URL: http://issues.apache.org/jira/browse/HADOOP-577
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: all
>            Reporter: arkady borkovsky
>
> Mapreduce driver should get detailed information about task execution -- at least at the end of the job so that it can be repoted to the user (stored in a "normal" or HDFS file, printed to the stdout, whatever).
> This information should include, at least:
> -- task execution start and end
> -- the number of record read and written
> -- the number of butes read and written
> for each task  (for each attempt)
> It would also be nice to have this infromation while the job is running, updated at least when a task is started or ended.
> However, this is just "nice to have", while the final report is quite essential.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 18:46:39 2006
Return-Path: 
 <hadoop-dev-return-4134-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80184 invoked from network); 5 Oct 2006 18:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 18:46:39 -0000
Received: (qmail 34371 invoked by uid 500); 5 Oct 2006 18:46:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34270 invoked by uid 500); 5 Oct 2006 18:46:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34228 invoked by uid 99); 5 Oct 2006 18:46:37 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 11:46:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37396]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 17/87-04543-D0355254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 11:46:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 85F3B7142F7
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 11:46:19 -0700 (PDT)
Message-ID: <5876879.1160073979545.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 11:46:19 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-579) When a HDFS client fails to read a
 block (due to server failure) the namenode should log this
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When a HDFS client fails to read a block (due to server failure) the namenode should log this
---------------------------------------------------------------------------------------------

                 Key: HADOOP-579
                 URL: http://issues.apache.org/jira/browse/HADOOP-579
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: eric baldeschwieler


Right now only client debugging info is available.  The fact that the client node needed to execute a failure mitigation strategy should be logged centrally so we can do analysis.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 19:02:42 2006
Return-Path: 
 <hadoop-dev-return-4135-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94081 invoked from network); 5 Oct 2006 19:02:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 19:02:42 -0000
Received: (qmail 72523 invoked by uid 500); 5 Oct 2006 19:02:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72496 invoked by uid 500); 5 Oct 2006 19:02:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72487 invoked by uid 99); 5 Oct 2006 19:02:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 12:02:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39345]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 72/F7-04543-DC655254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 12:02:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD7937142F8
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 12:02:24 -0700 (PDT)
Message-ID: <17219254.1160074944707.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 12:02:24 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
In-Reply-To: <24887203.1157469982360.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-506?page=comments#action_12440217 ] 
            
Sanjay Dahiya commented on HADOOP-506:
--------------------------------------

One case in which I am able to reproduce this repeatedly is that job tracker restarts when tasktrackers are still running. basically UNKNOWN_TASKTRACKER status messages are not handled properly in job tracker. 

here is what happens in that case - 

synchronized (taskTrackers) {
    synchronized (trackerExpiryQueue) {
        boolean seenBefore = updateTaskTrackerStatus(trackerName,
                                                     trackerStatus);
        if (initialContact) {		                                        <<<<==== This is false 
            // If it's first contact, then clear out any state hanging around
            if (seenBefore) {		
                lostTaskTracker(trackerName, trackerStatus.getHost());
            }
        } else {
            // If not first contact, there should be some record of the tracker
            if (!seenBefore) {
                return InterTrackerProtocol.UNKNOWN_TASKTRACKER;    
                                                  <<<<=== returns this, but TT already in tasktrackers and not in expiryQueue
            }
        }

        if (initialContact) {
            trackerExpiryQueue.add(trackerStatus);	                         <<<<==== not called 
        }
    }
}


in updateTaskTrackerStatus if (oldStatus == null && initialContact == false ) then its a rogue status and should not be added to tasktrackers map in job tracker. 

I am investigating if this can happen in some other condition as well.


> job tracker hangs on to dead task trackers "forever"
> ----------------------------------------------------
>
>                 Key: HADOOP-506
>                 URL: http://issues.apache.org/jira/browse/HADOOP-506
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>
> I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
> that all makes sense.
> What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).
> there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 20:12:41 2006
Return-Path: 
 <hadoop-dev-return-4136-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32391 invoked from network); 5 Oct 2006 20:12:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 20:12:41 -0000
Received: (qmail 29602 invoked by uid 500); 5 Oct 2006 20:12:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29569 invoked by uid 500); 5 Oct 2006 20:12:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29553 invoked by uid 99); 5 Oct 2006 20:12:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 13:12:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:38304]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B3/E9-04543-43765254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 13:12:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F89871408D
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 13:12:21 -0700 (PDT)
Message-ID: <32481189.1160079141388.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 13:12:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-255) Client Calls are not cancelled after
 a call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-255?page=all ]

Owen O'Malley reassigned HADOOP-255:
------------------------------------

    Assignee: Owen O'Malley

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 20:46:36 2006
Return-Path: 
 <hadoop-dev-return-4137-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51109 invoked from network); 5 Oct 2006 20:46:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 20:46:36 -0000
Received: (qmail 2403 invoked by uid 500); 5 Oct 2006 20:46:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2190 invoked by uid 500); 5 Oct 2006 20:46:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2181 invoked by uid 99); 5 Oct 2006 20:46:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 13:46:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39235]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6E/AA-04543-A2F65254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 13:46:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3A6047141B8
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 13:46:21 -0700 (PDT)
Message-ID: <2044071.1160081181236.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 13:46:21 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
In-Reply-To: <24887203.1157469982360.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-506?page=all ]

Sanjay Dahiya updated HADOOP-506:
---------------------------------

    Attachment: Hadoop-506.patch

This patch removes tasktracker from Map maintained by JobTracker if its a UNKNOWN_TASKTRACKER tracker. 


> job tracker hangs on to dead task trackers "forever"
> ----------------------------------------------------
>
>                 Key: HADOOP-506
>                 URL: http://issues.apache.org/jira/browse/HADOOP-506
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-506.patch
>
>
> I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
> that all makes sense.
> What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).
> there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 20:48:35 2006
Return-Path: 
 <hadoop-dev-return-4138-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51343 invoked from network); 5 Oct 2006 20:48:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 20:48:35 -0000
Received: (qmail 3179 invoked by uid 500); 5 Oct 2006 20:48:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3142 invoked by uid 500); 5 Oct 2006 20:48:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3125 invoked by uid 99); 5 Oct 2006 20:48:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 13:48:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39248]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 46/BA-04543-2AF65254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 13:48:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A6AB7141F2
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 13:48:21 -0700 (PDT)
Message-ID: <2939528.1160081301367.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 13:48:21 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
In-Reply-To: <24887203.1157469982360.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-506?page=all ]

Sanjay Dahiya updated HADOOP-506:
---------------------------------

           Status: Patch Available  (was: In Progress)
    Fix Version/s: 0.7.0

> job tracker hangs on to dead task trackers "forever"
> ----------------------------------------------------
>
>                 Key: HADOOP-506
>                 URL: http://issues.apache.org/jira/browse/HADOOP-506
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: Hadoop-506.patch
>
>
> I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
> that all makes sense.
> What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).
> there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 21:33:36 2006
Return-Path: 
 <hadoop-dev-return-4139-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62592 invoked from network); 5 Oct 2006 21:33:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 21:33:36 -0000
Received: (qmail 69154 invoked by uid 500); 5 Oct 2006 21:33:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69124 invoked by uid 500); 5 Oct 2006 21:33:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69115 invoked by uid 99); 5 Oct 2006 21:33:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 14:33:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:50998]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4A/9B-04543-E2A75254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 14:33:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8019F71414C
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 14:33:21 -0700 (PDT)
Message-ID: <11792948.1160084001522.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 14:33:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
In-Reply-To: <24887203.1157469982360.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-506?page=comments#action_12440267 ] 
            
Doug Cutting commented on HADOOP-506:
-------------------------------------

I just committed this.  Thanks, Sanjay!

> job tracker hangs on to dead task trackers "forever"
> ----------------------------------------------------
>
>                 Key: HADOOP-506
>                 URL: http://issues.apache.org/jira/browse/HADOOP-506
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: Hadoop-506.patch
>
>
> I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
> that all makes sense.
> What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).
> there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 22:41:43 2006
Return-Path: 
 <hadoop-dev-return-4140-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77681 invoked from network); 5 Oct 2006 22:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 22:41:43 -0000
Received: (qmail 52280 invoked by uid 500); 5 Oct 2006 22:41:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52063 invoked by uid 500); 5 Oct 2006 22:41:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52054 invoked by uid 99); 5 Oct 2006 22:41:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 15:41:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34318]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F5/EC-04543-22A85254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 15:41:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 869F97141B8
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 15:41:19 -0700 (PDT)
Message-ID: <1636000.1160088079548.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 15:41:19 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-580) Job setup and take down on Nodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Job setup and take down on Nodes
--------------------------------

                 Key: HADOOP-580
                 URL: http://issues.apache.org/jira/browse/HADOOP-580
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
            Reporter: Benjamin Reed


It would be nice if there was a hook for doing job provisioning and cleanup on compute nodes. The TaskTracker implicitly knows when a job starts (a task for the job is received) and pollForTaskWithClosedJob() will explicitly say that a job is finished if a Map task has been run (If only Reduce tasks have run and are finished I don't think pollForTaskWithClosedJob() will return anything will it?), but child Tasks do not get this information.

It would be nice if there was a hook so that programmers could do some provisioning when a job starts and cleanup when a job ends. Caching addresses some of the provisioning, but in some cases a helper daemon may need to be started or the results of queries need to be retrieved and having startJob(), finishJob() callbacks that happen exactly once for each node that runs part of the job would be wonderful.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 22:45:37 2006
Return-Path: 
 <hadoop-dev-return-4141-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78562 invoked from network); 5 Oct 2006 22:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 22:45:37 -0000
Received: (qmail 55696 invoked by uid 500); 5 Oct 2006 22:45:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55670 invoked by uid 500); 5 Oct 2006 22:45:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55661 invoked by uid 99); 5 Oct 2006 22:45:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 15:45:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34827]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 64/FC-04543-E0B85254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 15:45:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 31FEA7141D1
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 15:45:21 -0700 (PDT)
Message-ID: <13197470.1160088321202.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 15:45:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-255) Client Calls are not cancelled after
 a call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-255?page=comments#action_12440279 ] 
            
Owen O'Malley commented on HADOOP-255:
--------------------------------------

I'm going to hijack this bug. Clearly the original context was fixed by moving from the rpc getMapOutput to a jetty servlet. However, we are seeing cases where the dfs servers have trouble keeping up with the rpc calls. 

Therefore, I propose that we define a fraction of the ipc.timeout that is the maximum time the rpc calls can take before they are given to the handler.

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 22:47:36 2006
Return-Path: 
 <hadoop-dev-return-4142-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78945 invoked from network); 5 Oct 2006 22:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 22:47:36 -0000
Received: (qmail 59071 invoked by uid 500); 5 Oct 2006 22:47:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59036 invoked by uid 500); 5 Oct 2006 22:47:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59027 invoked by uid 99); 5 Oct 2006 22:47:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 15:47:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34853]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6E/FC-04543-68B85254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 15:47:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 364A57141D1
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 15:47:21 -0700 (PDT)
Message-ID: <15847612.1160088441219.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 15:47:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-255) Client Calls are not cancelled after a
 call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-255?page=all ]

Owen O'Malley updated HADOOP-255:
---------------------------------

    Attachment: rpc-timeout.patch

This patch has the rpc server handlers discard any call that is older than 60% of the ipc.timeout.


> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>         Attachments: rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct  5 23:33:38 2006
Return-Path: 
 <hadoop-dev-return-4143-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96567 invoked from network); 5 Oct 2006 23:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 23:33:38 -0000
Received: (qmail 4191 invoked by uid 500); 5 Oct 2006 23:33:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4173 invoked by uid 500); 5 Oct 2006 23:33:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4164 invoked by uid 99); 5 Oct 2006 23:33:37 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 16:33:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:50027]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 99/CD-04543-05695254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 16:33:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F3B607141B8
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 16:33:22 -0700 (PDT)
Message-ID: <15056985.1160091202995.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 16:33:22 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-576?page=all ]

Mahadev konar updated HADOOP-576:
---------------------------------

    Assignee: Mahadev konar

> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 02:26:39 2006
Return-Path: 
 <hadoop-dev-return-4144-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40515 invoked from network); 6 Oct 2006 02:26:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 02:26:39 -0000
Received: (qmail 28132 invoked by uid 500); 6 Oct 2006 02:26:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27978 invoked by uid 500); 6 Oct 2006 02:26:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27969 invoked by uid 99); 6 Oct 2006 02:26:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 19:26:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37253]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8F/F0-04543-ADEB5254 for <hadoop-dev@lucene.apache.org>;
 Thu, 05 Oct 2006 19:26:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BCEF57141D1
	for <hadoop-dev@lucene.apache.org>; Thu,  5 Oct 2006 19:26:19 -0700 (PDT)
Message-ID: <943322.1160101579770.JavaMail.root@brutus>
Date: Thu, 5 Oct 2006 19:26:19 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-581) Datanode's offerService does not
 handle rpc timeouts
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Datanode's offerService does not handle rpc timeouts
----------------------------------------------------

                 Key: HADOOP-581
                 URL: http://issues.apache.org/jira/browse/HADOOP-581
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Owen O'Malley
         Assigned To: Sameer Paranjpye


The Datanode's offerService routine needs to protect itself (with log & ignore) from IOExceptions (especially RPC timeouts) in the offer service method.

Currently, if a heartbeat times out, the Datanode will "reset" itself, which means that the full block report must be sent again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 16:14:39 2006
Return-Path: 
 <hadoop-dev-return-4145-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 78614 invoked from network); 6 Oct 2006 16:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 16:14:39 -0000
Received: (qmail 26622 invoked by uid 500); 6 Oct 2006 16:14:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26586 invoked by uid 500); 6 Oct 2006 16:14:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26577 invoked by uid 99); 6 Oct 2006 16:14:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 09:14:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:40237]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AB/25-24193-CE086254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 09:14:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD7B17141B8
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 09:14:20 -0700 (PDT)
Message-ID: <2320694.1160151260708.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 09:14:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-580) Job setup and take down on Nodes
In-Reply-To: <1636000.1160088079548.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-580?page=comments#action_12440501 ] 
            
Doug Cutting commented on HADOOP-580:
-------------------------------------

It sounds like you want to run user code in the TaskTracker.  Right now, user code only runs in per-task child processes.  We also run some in the JobTracker, but would like to get rid of that, so that no long-running daemons run user code, as discussed in the following thread:

http://www.mail-archive.com/hadoop-dev%40lucene.apache.org/msg03967.html



> Job setup and take down on Nodes
> --------------------------------
>
>                 Key: HADOOP-580
>                 URL: http://issues.apache.org/jira/browse/HADOOP-580
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: Benjamin Reed
>
> It would be nice if there was a hook for doing job provisioning and cleanup on compute nodes. The TaskTracker implicitly knows when a job starts (a task for the job is received) and pollForTaskWithClosedJob() will explicitly say that a job is finished if a Map task has been run (If only Reduce tasks have run and are finished I don't think pollForTaskWithClosedJob() will return anything will it?), but child Tasks do not get this information.
> It would be nice if there was a hook so that programmers could do some provisioning when a job starts and cleanup when a job ends. Caching addresses some of the provisioning, but in some cases a helper daemon may need to be started or the results of queries need to be retrieved and having startJob(), finishJob() callbacks that happen exactly once for each node that runs part of the job would be wonderful.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 16:51:42 2006
Return-Path: 
 <hadoop-dev-return-4146-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91101 invoked from network); 6 Oct 2006 16:51:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 16:51:42 -0000
Received: (qmail 4637 invoked by uid 500); 6 Oct 2006 16:51:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4606 invoked by uid 500); 6 Oct 2006 16:51:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4597 invoked by uid 99); 6 Oct 2006 16:51:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 09:51:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54317]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6A/26-24193-C9986254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 09:51:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E83157142A1
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 09:51:25 -0700 (PDT)
Message-ID: <27487521.1160153485948.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 09:51:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-255) Client Calls are not cancelled after
 a call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-255?page=comments#action_12440526 ] 
            
Doug Cutting commented on HADOOP-255:
-------------------------------------

I worry about letting the queued calls grow without bound.  If a synchronized server implementation spends a long time on a single request, while lots of other requests are coming in from other clients, then the queue could end up exhausting memory.  So perhaps we should discard stale requests as new requests are queued rather than when they're dequeued, so that we can limit the size of the queue?

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>         Attachments: rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 17:49:46 2006
Return-Path: 
 <hadoop-dev-return-4147-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12075 invoked from network); 6 Oct 2006 17:49:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 17:49:46 -0000
Received: (qmail 2525 invoked by uid 500); 6 Oct 2006 17:49:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2497 invoked by uid 500); 6 Oct 2006 17:49:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2416 invoked by uid 99); 6 Oct 2006 17:49:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 10:49:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:50786]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 72/C7-24193-03796254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 10:49:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FACD7141D1
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 10:49:22 -0700 (PDT)
Message-ID: <30184018.1160156962192.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 10:49:22 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-580) Job setup and take down on Nodes
In-Reply-To: <1636000.1160088079548.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-580?page=comments#action_12440557 ] 
            
Benjamin Reed commented on HADOOP-580:
--------------------------------------

No. I'm very against running code in the Trackers (as my mail indicates :). The idea would be that you would spawn off a child process at the beginning of a job and kill it at the end. (Or some variation on that theme.)

> Job setup and take down on Nodes
> --------------------------------
>
>                 Key: HADOOP-580
>                 URL: http://issues.apache.org/jira/browse/HADOOP-580
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: Benjamin Reed
>
> It would be nice if there was a hook for doing job provisioning and cleanup on compute nodes. The TaskTracker implicitly knows when a job starts (a task for the job is received) and pollForTaskWithClosedJob() will explicitly say that a job is finished if a Map task has been run (If only Reduce tasks have run and are finished I don't think pollForTaskWithClosedJob() will return anything will it?), but child Tasks do not get this information.
> It would be nice if there was a hook so that programmers could do some provisioning when a job starts and cleanup when a job ends. Caching addresses some of the provisioning, but in some cases a helper daemon may need to be started or the results of queries need to be retrieved and having startJob(), finishJob() callbacks that happen exactly once for each node that runs part of the job would be wonderful.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 18:03:39 2006
Return-Path: 
 <hadoop-dev-return-4148-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16601 invoked from network); 6 Oct 2006 18:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 18:03:39 -0000
Received: (qmail 26428 invoked by uid 500); 6 Oct 2006 18:03:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26208 invoked by uid 500); 6 Oct 2006 18:03:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26199 invoked by uid 99); 6 Oct 2006 18:03:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 11:03:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:43674]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D7/18-24193-77A96254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 11:03:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 408D27141F2
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 11:03:21 -0700 (PDT)
Message-ID: <1734925.1160157801261.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 11:03:21 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-255) Client Calls are not cancelled after
 a call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-255?page=comments#action_12440568 ] 
            
Sameer Paranjpye commented on HADOOP-255:
-----------------------------------------

+1 for Dougs comment

The thread populating the call queue should add calls to the end of the queue. Then examine calls at the front for staleness and discard calls that are too old.



> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>         Attachments: rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 20:50:38 2006
Return-Path: 
 <hadoop-dev-return-4149-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84220 invoked from network); 6 Oct 2006 20:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 20:50:38 -0000
Received: (qmail 76627 invoked by uid 500); 6 Oct 2006 20:50:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76608 invoked by uid 500); 6 Oct 2006 20:50:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76599 invoked by uid 99); 6 Oct 2006 20:50:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 13:50:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34944]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DA/BB-24193-B91C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 13:50:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E7337141F5
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 13:50:21 -0700 (PDT)
Message-ID: <8823077.1160167821253.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 13:50:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-581) Datanode's offerService does not
 handle rpc timeouts
In-Reply-To: <943322.1160101579770.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-581?page=all ]

Owen O'Malley updated HADOOP-581:
---------------------------------

    Attachment: dfs.patch

This patch adds a catch for IOException in the Datanode's offerService loop. It also moves clearing the blockReceived list until the call to the name node completes.

> Datanode's offerService does not handle rpc timeouts
> ----------------------------------------------------
>
>                 Key: HADOOP-581
>                 URL: http://issues.apache.org/jira/browse/HADOOP-581
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sameer Paranjpye
>             Fix For: 0.7.0
>
>         Attachments: dfs.patch
>
>
> The Datanode's offerService routine needs to protect itself (with log & ignore) from IOExceptions (especially RPC timeouts) in the offer service method.
> Currently, if a heartbeat times out, the Datanode will "reset" itself, which means that the full block report must be sent again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 20:50:39 2006
Return-Path: 
 <hadoop-dev-return-4150-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84260 invoked from network); 6 Oct 2006 20:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 20:50:39 -0000
Received: (qmail 76880 invoked by uid 500); 6 Oct 2006 20:50:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76847 invoked by uid 500); 6 Oct 2006 20:50:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76838 invoked by uid 99); 6 Oct 2006 20:50:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 13:50:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34946]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1B/BB-24193-D91C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 13:50:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 67BBA714201
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 13:50:22 -0700 (PDT)
Message-ID: <11968771.1160167822422.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 13:50:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-581) Datanode's offerService does not
 handle rpc timeouts
In-Reply-To: <943322.1160101579770.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-581?page=all ]

Owen O'Malley updated HADOOP-581:
---------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.7.0
    Affects Version/s: 0.6.2
             Assignee: Owen O'Malley  (was: Sameer Paranjpye)

> Datanode's offerService does not handle rpc timeouts
> ----------------------------------------------------
>
>                 Key: HADOOP-581
>                 URL: http://issues.apache.org/jira/browse/HADOOP-581
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: dfs.patch
>
>
> The Datanode's offerService routine needs to protect itself (with log & ignore) from IOExceptions (especially RPC timeouts) in the offer service method.
> Currently, if a heartbeat times out, the Datanode will "reset" itself, which means that the full block report must be sent again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 20:52:45 2006
Return-Path: 
 <hadoop-dev-return-4152-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84538 invoked from network); 6 Oct 2006 20:52:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 20:52:45 -0000
Received: (qmail 78518 invoked by uid 500); 6 Oct 2006 20:52:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78494 invoked by uid 500); 6 Oct 2006 20:52:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78485 invoked by uid 99); 6 Oct 2006 20:52:44 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 13:52:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34983]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 85/CB-24193-712C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 13:52:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 518E57141F7
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 13:52:21 -0700 (PDT)
Message-ID: <23324028.1160167941330.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 13:52:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-255) Client Calls are not cancelled after a
 call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-255?page=all ]

Owen O'Malley updated HADOOP-255:
---------------------------------

    Attachment: rpc-timeout-2.patch

This patch adds a fixed size limit to the number of calls in the rpc server's queue. If the queue is full, the oldest is discarded to make room for the new one.

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: rpc-timeout-2.patch, rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 20:52:41 2006
Return-Path: 
 <hadoop-dev-return-4151-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84493 invoked from network); 6 Oct 2006 20:52:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 20:52:41 -0000
Received: (qmail 78308 invoked by uid 500); 6 Oct 2006 20:52:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78257 invoked by uid 500); 6 Oct 2006 20:52:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78248 invoked by uid 99); 6 Oct 2006 20:52:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 13:52:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34987]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 75/CB-24193-612C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 13:52:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 31C327141F2
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 13:52:23 -0700 (PDT)
Message-ID: <990715.1160167943201.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 13:52:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-255) Client Calls are not cancelled after a
 call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-255?page=all ]

Owen O'Malley updated HADOOP-255:
---------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.7.0

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: rpc-timeout-2.patch, rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 21:08:38 2006
Return-Path: 
 <hadoop-dev-return-4153-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92129 invoked from network); 6 Oct 2006 21:08:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:08:38 -0000
Received: (qmail 5319 invoked by uid 500); 6 Oct 2006 21:08:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5295 invoked by uid 500); 6 Oct 2006 21:08:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5286 invoked by uid 99); 6 Oct 2006 21:08:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:08:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:39073]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BE/1C-24193-2D5C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:08:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B9DF27141F7
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:08:19 -0700 (PDT)
Message-ID: <24262268.1160168899758.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:08:19 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-582) Block reports should be processed
 offline
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Block reports should be processed offline
-----------------------------------------

                 Key: HADOOP-582
                 URL: http://issues.apache.org/jira/browse/HADOOP-582
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.0
            Reporter: Owen O'Malley
         Assigned To: Sameer Paranjpye


The namenode's handling of block reports should be done from a batch queue instead of while the rpc call from the client is waiting. I'd propose:

 void blockReport(DataNodeRegistration, Block[]) throws IOException;

instead of passing back obsolete blocks they can be handed back on later heartbeat.

The blockReport calls should just queue the registration and list of blocks and there should be a thread that processes the block reports when possible. 

The goal is to prevent rpc timeouts and therefore retransmissions of the block lists.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 21:16:39 2006
Return-Path: 
 <hadoop-dev-return-4154-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97665 invoked from network); 6 Oct 2006 21:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:16:39 -0000
Received: (qmail 20598 invoked by uid 500); 6 Oct 2006 21:16:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20579 invoked by uid 500); 6 Oct 2006 21:16:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20570 invoked by uid 99); 6 Oct 2006 21:16:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:16:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:56605]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id ED/4C-24193-4B7C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:16:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 363897141F7
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:16:21 -0700 (PDT)
Message-ID: <1987816.1160169381219.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:16:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-255) Client Calls are not cancelled after a
 call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-255?page=all ]

Doug Cutting updated HADOOP-255:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: rpc-timeout-2.patch, rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 21:22:50 2006
Return-Path: 
 <hadoop-dev-return-4155-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 943 invoked from network); 6 Oct 2006 21:22:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:22:50 -0000
Received: (qmail 30768 invoked by uid 500); 6 Oct 2006 21:22:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30550 invoked by uid 500); 6 Oct 2006 21:22:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30537 invoked by uid 99); 6 Oct 2006 21:22:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:22:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:53494]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E0/7C-24193-029C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:22:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A0B2B7141F5
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:22:20 -0700 (PDT)
Message-ID: <25152969.1160169740655.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:22:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-581) Datanode's offerService does not
 handle rpc timeouts
In-Reply-To: <943322.1160101579770.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-581?page=all ]

Doug Cutting updated HADOOP-581:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Datanode's offerService does not handle rpc timeouts
> ----------------------------------------------------
>
>                 Key: HADOOP-581
>                 URL: http://issues.apache.org/jira/browse/HADOOP-581
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: dfs.patch
>
>
> The Datanode's offerService routine needs to protect itself (with log & ignore) from IOExceptions (especially RPC timeouts) in the offer service method.
> Currently, if a heartbeat times out, the Datanode will "reset" itself, which means that the full block report must be sent again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 21:24:38 2006
Return-Path: 
 <hadoop-dev-return-4156-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1510 invoked from network); 6 Oct 2006 21:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:24:38 -0000
Received: (qmail 32473 invoked by uid 500); 6 Oct 2006 21:24:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32258 invoked by uid 500); 6 Oct 2006 21:24:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32249 invoked by uid 99); 6 Oct 2006 21:24:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:24:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37523]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6C/7C-24193-499C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:24:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B77E7141F5
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:24:21 -0700 (PDT)
Message-ID: <26189963.1160169861437.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:24:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Doug Cutting updated HADOOP-538:
--------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.0)

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 21:24:40 2006
Return-Path: 
 <hadoop-dev-return-4157-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1544 invoked from network); 6 Oct 2006 21:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:24:40 -0000
Received: (qmail 32532 invoked by uid 500); 6 Oct 2006 21:24:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32500 invoked by uid 500); 6 Oct 2006 21:24:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32491 invoked by uid 99); 6 Oct 2006 21:24:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:24:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37524]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7C/7C-24193-599C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:24:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 93E97714201
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:24:22 -0700 (PDT)
Message-ID: <25849651.1160169862603.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:24:22 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-528) Some hadoop distcp task fails with
 dfs.client.buffer.dir not found error while the property exists.
In-Reply-To: <1678861.1158149962316.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-528?page=3Dall ]

Doug Cutting updated HADOOP-528:
--------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.0)

> Some hadoop distcp task fails with dfs.client.buffer.dir not found error =
while the property exists.
> -------------------------------------------------------------------------=
--------------------------
>
>                 Key: HADOOP-528
>                 URL: http://issues.apache.org/jira/browse/HADOOP-528
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.0
>            Reporter: Sanjay Dahiya
>             Fix For: 0.8.0
>
>
> On some nodes hadoop distcp fails with folowing error. The property dfs.c=
lient.buffer.dir is defined in hadoop-site.xml and the corresponding direct=
ory is also created on the node by framework. Same configuration works on a=
ll other nodes.=20
> It could be a timing issue where someone is trying to read the dir before=
 its created on local disk, I am not sure of the cause.=20
> java.io.IOException: No valid local directories in property: dfs.client.b=
uffer.dir at org.apache.hadoop.conf.Configuration.getFile(Configuration.jav=
a:405) at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.newBackupFile(DFS=
Client.java:780) at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.(DFSCli=
ent.java:770) at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:276)=
 at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSy=
stem.java:104) at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDataOut=
putStream.java:56) at org.apache.hadoop.fs.FSDataOutputStream$Summer.(FSDat=
aOutputStream.java:45) at org.apache.hadoop.fs.FSDataOutputStream.(FSDataOu=
tputStream.java:146) at org.apache.hadoop.fs.FileSystem.create(FileSystem.j=
ava:270) at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:177) at =
org.apache.hadoop.util.CopyFiles$DFSCopyFilesMapper.copy(CopyFiles.java:186=
) at org.apache.hadoop.util.CopyFiles$DFSCopyFilesMapper.map(CopyFiles.java=
:391) at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:46) at org.a=
pache.hadoop.mapred.MapTask.run(MapTask.java:210) at org.apache.hadoop.mapr=
ed.TaskTracker$Child.main(TaskTracker.java:1066)

--=20
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: htt=
p://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

       

From MAILER-DAEMON Fri Oct  6 21:24:42 2006
Return-Path: 
 <hadoop-dev-return-4158-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1576 invoked from network); 6 Oct 2006 21:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:24:42 -0000
Received: (qmail 32792 invoked by uid 500); 6 Oct 2006 21:24:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32768 invoked by uid 500); 6 Oct 2006 21:24:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32759 invoked by uid 99); 6 Oct 2006 21:24:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:24:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37527]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9C/7C-24193-799C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:24:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7AE087141F2
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:24:24 -0700 (PDT)
Message-ID: <31537302.1160169864500.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:24:24 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Doug Cutting updated HADOOP-525:
--------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.0)

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.8.0
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 21:24:43 2006
Return-Path: 
 <hadoop-dev-return-4159-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1613 invoked from network); 6 Oct 2006 21:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:24:43 -0000
Received: (qmail 33039 invoked by uid 500); 6 Oct 2006 21:24:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33002 invoked by uid 500); 6 Oct 2006 21:24:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32993 invoked by uid 99); 6 Oct 2006 21:24:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:24:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37530]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AC/7C-24193-999C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:24:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6FCE7141F5
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:24:25 -0700 (PDT)
Message-ID: <13096924.1160169865747.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:24:25 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-524) Contrib documentation does not appear
 in Javadoc
In-Reply-To: <16008182.1158100882356.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-524?page=all ]

Doug Cutting updated HADOOP-524:
--------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.0)

> Contrib documentation does not appear in Javadoc
> ------------------------------------------------
>
>                 Key: HADOOP-524
>                 URL: http://issues.apache.org/jira/browse/HADOOP-524
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: documentation
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>            Priority: Minor
>             Fix For: 0.8.0
>
>
> Documentation for contrib modules like streaming and the small jobs benchmark does not appear in the Javadoc.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 21:24:44 2006
Return-Path: 
 <hadoop-dev-return-4160-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1645 invoked from network); 6 Oct 2006 21:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:24:44 -0000
Received: (qmail 33260 invoked by uid 500); 6 Oct 2006 21:24:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33237 invoked by uid 500); 6 Oct 2006 21:24:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33228 invoked by uid 99); 6 Oct 2006 21:24:43 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:24:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37534]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EC/7C-24193-A99C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:24:42 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7EB92714201
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:24:27 -0700 (PDT)
Message-ID: <32520624.1160169867516.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:24:27 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
In-Reply-To: <24887203.1157469982360.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-506?page=all ]

Doug Cutting updated HADOOP-506:
--------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.0)

> job tracker hangs on to dead task trackers "forever"
> ----------------------------------------------------
>
>                 Key: HADOOP-506
>                 URL: http://issues.apache.org/jira/browse/HADOOP-506
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: Hadoop-506.patch
>
>
> I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
> that all makes sense.
> What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).
> there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 21:24:47 2006
Return-Path: 
 <hadoop-dev-return-4161-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1693 invoked from network); 6 Oct 2006 21:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:24:47 -0000
Received: (qmail 33510 invoked by uid 500); 6 Oct 2006 21:24:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33482 invoked by uid 500); 6 Oct 2006 21:24:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33473 invoked by uid 99); 6 Oct 2006 21:24:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:24:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:37538]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5D/7C-24193-C99C6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 14:24:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A8237141F7
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 14:24:29 -0700 (PDT)
Message-ID: <22115178.1160169869302.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 14:24:29 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-255) Client Calls are not cancelled after a
 call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-255?page=all ]

Doug Cutting updated HADOOP-255:
--------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.0)

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>         Attachments: rpc-timeout-2.patch, rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 23:09:41 2006
Return-Path: 
 <hadoop-dev-return-4162-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33749 invoked from network); 6 Oct 2006 23:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 23:09:41 -0000
Received: (qmail 33522 invoked by uid 500); 6 Oct 2006 23:09:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33497 invoked by uid 500); 6 Oct 2006 23:09:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33461 invoked by uid 99); 6 Oct 2006 23:09:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 16:09:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:32865]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 67/1E-24193-232E6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 16:09:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F1027142A1
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 16:09:23 -0700 (PDT)
Message-ID: <5544293.1160176163321.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 16:09:23 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-583) DFSClient should use debug level to
 log missing data-node.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFSClient should use debug level to log missing data-node.
----------------------------------------------------------

                 Key: HADOOP-583
                 URL: http://issues.apache.org/jira/browse/HADOOP-583
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.7.0
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko
            Priority: Minor


When DFSClient cannot read a block replica it logs a message saying
"Failed to connect to <target> ..." + exception
and then tries other replicas. If the client succeeds with another replica this
is only record that the log will contain. This seems to be confusing for users.
So I propose to use debug logging level here.
I also stringified exceptions.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 23:11:37 2006
Return-Path: 
 <hadoop-dev-return-4163-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34132 invoked from network); 6 Oct 2006 23:11:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 23:11:37 -0000
Received: (qmail 35816 invoked by uid 500); 6 Oct 2006 23:11:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35606 invoked by uid 500); 6 Oct 2006 23:11:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35597 invoked by uid 99); 6 Oct 2006 23:11:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 16:11:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:32880]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AF/1E-24193-7A2E6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 16:11:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96B477141F5
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 16:11:20 -0700 (PDT)
Message-ID: <18822547.1160176280614.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 16:11:20 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-583) DFSClient should use debug level to
 log missing data-node.
In-Reply-To: <5544293.1160176163321.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-583?page=all ]

Konstantin Shvachko updated HADOOP-583:
---------------------------------------

    Attachment: ClientLog.patch

> DFSClient should use debug level to log missing data-node.
> ----------------------------------------------------------
>
>                 Key: HADOOP-583
>                 URL: http://issues.apache.org/jira/browse/HADOOP-583
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>         Attachments: ClientLog.patch
>
>
> When DFSClient cannot read a block replica it logs a message saying
> "Failed to connect to <target> ..." + exception
> and then tries other replicas. If the client succeeds with another replica this
> is only record that the log will contain. This seems to be confusing for users.
> So I propose to use debug logging level here.
> I also stringified exceptions.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct  6 23:11:39 2006
Return-Path: 
 <hadoop-dev-return-4164-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34170 invoked from network); 6 Oct 2006 23:11:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 23:11:39 -0000
Received: (qmail 35885 invoked by uid 500); 6 Oct 2006 23:11:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35849 invoked by uid 500); 6 Oct 2006 23:11:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35838 invoked by uid 99); 6 Oct 2006 23:11:37 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 16:11:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:32882]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CF/1E-24193-8A2E6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 16:11:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4F4B7141F2
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 16:11:21 -0700 (PDT)
Message-ID: <15938807.1160176281804.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 16:11:21 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-583) DFSClient should use debug level to
 log missing data-node.
In-Reply-To: <5544293.1160176163321.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-583?page=all ]

Konstantin Shvachko updated HADOOP-583:
---------------------------------------

    Status: Patch Available  (was: Open)

> DFSClient should use debug level to log missing data-node.
> ----------------------------------------------------------
>
>                 Key: HADOOP-583
>                 URL: http://issues.apache.org/jira/browse/HADOOP-583
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>         Attachments: ClientLog.patch
>
>
> When DFSClient cannot read a block replica it logs a message saying
> "Failed to connect to <target> ..." + exception
> and then tries other replicas. If the client succeeds with another replica this
> is only record that the log will contain. This seems to be confusing for users.
> So I propose to use debug logging level here.
> I also stringified exceptions.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct  7 00:58:29 2006
Return-Path: 
 <hadoop-dev-return-4166-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53597 invoked from network); 7 Oct 2006 00:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Oct 2006 00:58:29 -0000
Received: (qmail 880 invoked by uid 500); 7 Oct 2006 00:58:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 865 invoked by uid 500); 7 Oct 2006 00:58:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Delivered-To: moderator for hadoop-dev@lucene.apache.org
Received: (qmail 77135 invoked by uid 99); 7 Oct 2006 00:21:33 -0000
X-ASF-Spam-Status: No,
 hits=1.5 required=5.0 tests=MSGID_FROM_MTA_ID,NO_REAL_NAME
Message-Id: <200610070017.k970Hu9D014257@lucene.zones.apache.org>
Date: Sat, 07 Oct 2006 00:17:56 +0000
Subject: Hadoop nightly build failure
From: hadoop-dev@lucene.apache.org
To: hadoop-dev@lucene.apache.org
X-Mailer: org.apache.tools.mail.MailMessage (ant.apache.org)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


init:
    [mkdir] Created dir: /tmp/hadoop-nightly/build
    [mkdir] Created dir: /tmp/hadoop-nightly/build/classes
    [mkdir] Created dir: /tmp/hadoop-nightly/build/src
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/task/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/job/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/dfs/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/webapps/datanode/WEB-INF
    [mkdir] Created dir: /tmp/hadoop-nightly/build/examples
    [mkdir] Created dir: /tmp/hadoop-nightly/build/minimr
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/classes
     [copy] Copying 4 files to /tmp/hadoop-nightly/build/webapps
     [copy] Copying 4 files to /tmp/hadoop-nightly/conf
     [copy] Copying /tmp/hadoop-nightly/conf/slaves.template to /tmp/hadoop-nightly/conf/slaves
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-site.xml.template to /tmp/hadoop-nightly/conf/hadoop-site.xml
     [copy] Copying /tmp/hadoop-nightly/conf/mapred-default.xml.template to /tmp/hadoop-nightly/conf/mapred-default.xml
     [copy] Copying /tmp/hadoop-nightly/conf/hadoop-env.sh.template to /tmp/hadoop-nightly/conf/hadoop-env.sh
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: svn: not found
     [exec] src/saveVersion.sh: whoami: not found

record-parser:

compile-core:
    [javac] Compiling 242 source files to /tmp/hadoop-nightly/build/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-examples:
    [javac] Compiling 7 source files to /tmp/hadoop-nightly/build/examples
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

compile-core-test:
    [javac] Compiling 59 source files to /tmp/hadoop-nightly/build/test/classes
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
      [jar] Building jar: /tmp/hadoop-nightly/build/hadoop-nightly-test.jar
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache
     [copy] Copying 1 file to /tmp/hadoop-nightly/build/test/cache

test-core:
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/data
    [mkdir] Created dir: /tmp/hadoop-nightly/build/test/logs
    [junit] Running org.apache.hadoop.conf.TestConfiguration
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.276 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSMkdirs
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.744 sec
    [junit] Running org.apache.hadoop.dfs.TestDFSShellGenericOptions
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 10.444 sec
    [junit] Running org.apache.hadoop.dfs.TestLocalDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.408 sec
    [junit] Running org.apache.hadoop.dfs.TestPread
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 4.376 sec
    [junit] Running org.apache.hadoop.dfs.TestSeekBug
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 4.454 sec
    [junit] Running org.apache.hadoop.fs.TestCopyFiles
    [junit] Running org.apache.hadoop.fs.TestDFSIO
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.877 sec
    [junit] Running org.apache.hadoop.fs.TestFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.85 sec
    [junit] Running org.apache.hadoop.fs.TestGlobPaths
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 4.258 sec
    [junit] Running org.apache.hadoop.fs.TestLocalFileSystem
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.222 sec
    [junit] Running org.apache.hadoop.fs.TestPath
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.011 sec
    [junit] Running org.apache.hadoop.io.TestArrayFile
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 2.378 sec
    [junit] Running org.apache.hadoop.io.TestBytesWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.012 sec
    [junit] Running org.apache.hadoop.io.TestMD5Hash
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.262 sec
    [junit] Running org.apache.hadoop.io.TestSequenceFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 16.672 sec
    [junit] Running org.apache.hadoop.io.TestSetFile
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.802 sec
    [junit] Running org.apache.hadoop.io.TestText
    [junit] Tests run: 7, Failures: 0, Errors: 0, Time elapsed: 0.573 sec
    [junit] Running org.apache.hadoop.io.TestTextNonUTF8
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.111 sec
    [junit] Running org.apache.hadoop.io.TestUTF8
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.131 sec
    [junit] Running org.apache.hadoop.io.TestVersionedWritable
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.042 sec
    [junit] Running org.apache.hadoop.io.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.008 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodec
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.674 sec
    [junit] Running org.apache.hadoop.io.compress.TestCodecFactory
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.261 sec
    [junit] Running org.apache.hadoop.ipc.TestIPC
    [junit] Tests run: 2, Failures: 0, Errors: 1, Time elapsed: 0.235 sec
    [junit] Test org.apache.hadoop.ipc.TestIPC FAILED
    [junit] Running org.apache.hadoop.ipc.TestRPC
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.132 sec
    [junit] Running org.apache.hadoop.mapred.TestEmptyJobWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 11.761 sec
    [junit] Running org.apache.hadoop.mapred.TestMapRed
    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 12.375 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRBringup
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.616 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRDFSCaching
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 24.362 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRLocalFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 58.429 sec
    [junit] Running org.apache.hadoop.mapred.TestMiniMRWithDFS
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 78.715 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFilter
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 2.917 sec
    [junit] Running org.apache.hadoop.mapred.TestSequenceFileInputFormat
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.539 sec
    [junit] Running org.apache.hadoop.mapred.TestTextInputFormat
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 4.23 sec
    [junit] Running org.apache.hadoop.mapred.jobcontrol.TestJobControl
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 65.636 sec
    [junit] Running org.apache.hadoop.record.test.TestMapRed
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3.791 sec
    [junit] Running org.apache.hadoop.record.test.TestRecordIO
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.175 sec
    [junit] Running org.apache.hadoop.record.test.TestWritable
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.8 sec

BUILD FAILED
/tmp/hadoop-nightly/build.xml:329: Tests failed!

Total time: 6 minutes 16 seconds



From MAILER-DAEMON Sat Oct  7 00:20:42 2006
Return-Path: 
 <hadoop-dev-return-4165-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47408 invoked from network); 7 Oct 2006 00:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Oct 2006 00:20:42 -0000
Received: (qmail 76059 invoked by uid 500); 7 Oct 2006 00:20:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76034 invoked by uid 500); 7 Oct 2006 00:20:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76025 invoked by uid 99); 7 Oct 2006 00:20:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 17:20:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:34289]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 20/3F-24193-7D2F6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 17:20:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 87FFE7141F5
	for <hadoop-dev@lucene.apache.org>; Fri,  6 Oct 2006 17:20:19 -0700 (PDT)
Message-ID: <16860241.1160180419554.JavaMail.root@brutus>
Date: Fri, 6 Oct 2006 17:20:19 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-584) Calling shell scripts from build.xml
 discriminates Windows user minority.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Calling shell scripts from build.xml discriminates Windows user minority.
-------------------------------------------------------------------------

                 Key: HADOOP-584
                 URL: http://issues.apache.org/jira/browse/HADOOP-584
             Project: Hadoop
          Issue Type: Bug
          Components: scripts
    Affects Versions: 0.7.0
         Environment: Windows
            Reporter: Konstantin Shvachko


This is introduced by HADOOP-567.
The problem is that now I cannot even build hadoop in Eclipse under Windows unless I run it under Cygwin. 
This is in a way the same as calling make in build.xml, which was recently fixed HADOOP-537.
I think we should not introducing more dependencies on Cygwin just in order to show something in Web UI.
I also don't remember we claimed that Cygwin or anything else except for Ant is required for Hadoop builds. 
Is there another way of solving this?
build.xml defines "version" property, Ant has "user.name" property. URL is not changing very often.
Or may be the web ui should obtain these properties in run-time.
Or may be the Packaging is a better solution, as you guys discussed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct  7 01:12:02 2006
Return-Path: 
 <hadoop-dev-return-4167-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56372 invoked from network); 7 Oct 2006 01:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Oct 2006 01:12:02 -0000
Received: (qmail 9948 invoked by uid 500); 7 Oct 2006 01:12:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9921 invoked by uid 500); 7 Oct 2006 01:12:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9912 invoked by uid 99); 7 Oct 2006 01:12:01 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 18:12:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [204.127.192.85] ([204.127.192.85:50148]
 helo=rwcrmhc15.comcast.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9B/FF-24193-CDEF6254 for <hadoop-dev@lucene.apache.org>;
 Fri, 06 Oct 2006 18:12:00 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20061007011149m15009h0sse>; Sat, 7 Oct 2006 01:11:49 +0000
Message-ID: <4526FED5.8010305@apache.org>
Date: Fri, 06 Oct 2006 18:11:49 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Hadoop nightly build failure
References: <200610070017.k970Hu9D014257@lucene.zones.apache.org>
In-Reply-To: <200610070017.k970Hu9D014257@lucene.zones.apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop-dev@lucene.apache.org wrote:
>     [junit] Running org.apache.hadoop.ipc.TestIPC
>     [junit] Tests run: 2, Failures: 0, Errors: 1, Time elapsed: 0.235 sec
>     [junit] Test org.apache.hadoop.ipc.TestIPC FAILED

I looked into this and the problem was that a bind failed because the 
port was already in use, presumably from a prior unit test.  I re-ran 
the nightly build manually and it succeeded.  Is there anything we can 
do to make sure that ports are freed more promptly?

Doug

From MAILER-DAEMON Sat Oct  7 23:42:56 2006
Return-Path: 
 <hadoop-dev-return-4168-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73694 invoked from network); 7 Oct 2006 23:42:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Oct 2006 23:42:56 -0000
Received: (qmail 51153 invoked by uid 500); 7 Oct 2006 23:42:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51122 invoked by uid 500); 7 Oct 2006 23:42:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51113 invoked by uid 99); 7 Oct 2006 23:42:55 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Oct 2006 16:42:55 -0700
Authentication-Results: idunn.apache.osuosl.org
 header.from=arkady@yahoo-inc.com; domainkeys=good
X-ASF-Spam-Status: No,
 hits=-13.6 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,USER_IN_DEF_WHITELIST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing
 draft-delany-domainkeys-base-01
Received: from [207.126.228.150] ([207.126.228.150:46430]
 helo=rsmtp2.corp.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CD/53-11753-D7B38254 for <hadoop-dev@lucene.apache.org>;
 Sat, 07 Oct 2006 16:42:54 -0700
Received: from [192.168.1.66] (smcvpn-c34.santamonica.corp.yahoo.com
 [172.21.163.34])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k97NgkNl099575
	for <hadoop-dev@lucene.apache.org>; Sat, 7 Oct 2006 16:42:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=2bN5xEoSj1SFYn1UpQGLLIx3Q2zDD/7paaI7wzZSGSK+MVq4omUnBWvEtdOU24wd
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <30184018.1160156962192.JavaMail.root@brutus>
References: <30184018.1160156962192.JavaMail.root@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <406812e83daf6ae6d3387c4ea1df3818@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-580) Job setup and take down on Nodes
Date: Sat, 7 Oct 2006 16:42:45 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It would be good to have this process to be an arbitrary executable,  
not necessarily a Java program.

On Oct 6, 2006, at 10:49 AM, Benjamin Reed (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-580? 
> page=comments#action_12440557 ]
>
> Benjamin Reed commented on HADOOP-580:
> --------------------------------------
>
> No. I'm very against running code in the Trackers (as my mail  
> indicates :). The idea would be that you would spawn off a child  
> process at the beginning of a job and kill it at the end. (Or some  
> variation on that theme.)
>
>> Job setup and take down on Nodes
>> --------------------------------
>>
>>                 Key: HADOOP-580
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-580
>>             Project: Hadoop
>>          Issue Type: New Feature
>>          Components: mapred
>>            Reporter: Benjamin Reed
>>
>> It would be nice if there was a hook for doing job provisioning and  
>> cleanup on compute nodes. The TaskTracker implicitly knows when a job  
>> starts (a task for the job is received) and  
>> pollForTaskWithClosedJob() will explicitly say that a job is finished  
>> if a Map task has been run (If only Reduce tasks have run and are  
>> finished I don't think pollForTaskWithClosedJob() will return  
>> anything will it?), but child Tasks do not get this information.
>> It would be nice if there was a hook so that programmers could do  
>> some provisioning when a job starts and cleanup when a job ends.  
>> Caching addresses some of the provisioning, but in some cases a  
>> helper daemon may need to be started or the results of queries need  
>> to be retrieved and having startJob(), finishJob() callbacks that  
>> happen exactly once for each node that runs part of the job would be  
>> wonderful.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Sun Oct  8 04:25:40 2006
Return-Path: 
 <hadoop-dev-return-4169-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6152 invoked from network); 8 Oct 2006 04:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 04:25:40 -0000
Received: (qmail 84619 invoked by uid 500); 8 Oct 2006 04:25:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84597 invoked by uid 500); 8 Oct 2006 04:25:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84587 invoked by uid 99); 8 Oct 2006 04:25:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Oct 2006 21:25:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:54728]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CA/A8-11753-1CD78254 for <hadoop-dev@lucene.apache.org>;
 Sat, 07 Oct 2006 21:25:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 951C97141F2
	for <hadoop-dev@lucene.apache.org>; Sat,  7 Oct 2006 21:25:20 -0700 (PDT)
Message-ID: <19231193.1160281520607.JavaMail.root@brutus>
Date: Sat, 7 Oct 2006 21:25:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-584) Calling shell scripts from build.xml
 discriminates Windows user minority.
In-Reply-To: <16860241.1160180419554.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-584?page=comments#action_12440730 ] 
            
Owen O'Malley commented on HADOOP-584:
--------------------------------------

I don't see this as a bug. If you have cygwin installed it should run fine. 

And cygwin is explicitly required in the documentation:

=====================================
Requirements

   1. Java 1.4.x, preferably from Sun Set JAVA_HOME to the root of your Java installation.
   2. ssh must be installed and sshd must be running to use Hadoop's scripts to manage remote Hadoop daemons. On Ubuntu, this may done with
      sudo apt-get install ssh
   3. rsync must be installed to use Hadoop's scripts to manage remote Hadoop installations. On Ubuntu, this may done with
      sudo apt-get install rsync.
   4. On Win32, cygwin, for shell support. To use Subversion on Win32, select the subversion package when you install, in the "Devel" category. Distributed operation has not been well tested on Win32, so this should primarily be considered a development platform at this point, not a production platform.
=====================================

This should be updated to say that Java 1.5 is required.

The new saveVersion.sh script should probably detect and handle internally if svn is not installed/found. Although it is hard to imagine a case where I wanted to build Hadoop and not have svn installed.

> Calling shell scripts from build.xml discriminates Windows user minority.
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-584
>                 URL: http://issues.apache.org/jira/browse/HADOOP-584
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>    Affects Versions: 0.7.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>
> This is introduced by HADOOP-567.
> The problem is that now I cannot even build hadoop in Eclipse under Windows unless I run it under Cygwin. 
> This is in a way the same as calling make in build.xml, which was recently fixed HADOOP-537.
> I think we should not introducing more dependencies on Cygwin just in order to show something in Web UI.
> I also don't remember we claimed that Cygwin or anything else except for Ant is required for Hadoop builds. 
> Is there another way of solving this?
> build.xml defines "version" property, Ant has "user.name" property. URL is not changing very often.
> Or may be the web ui should obtain these properties in run-time.
> Or may be the Packaging is a better solution, as you guys discussed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  9 03:25:06 2006
Return-Path: 
 <hadoop-dev-return-4171-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5679 invoked from network); 9 Oct 2006 03:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 03:25:06 -0000
Received: (qmail 15177 invoked by uid 500); 9 Oct 2006 03:25:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15135 invoked by uid 500); 9 Oct 2006 03:25:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15120 invoked by uid 99); 9 Oct 2006 03:25:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org)
 (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 20:25:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.237.227.198] ([209.237.227.198:38871]
 helo=brutus.apache.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3D/65-03466-2D8A9254 for <hadoop-dev@lucene.apache.org>;
 Sun, 08 Oct 2006 18:41:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8B35D7142D6
	for <hadoop-dev@lucene.apache.org>; Sun,  8 Oct 2006 18:41:19 -0700 (PDT)
Message-ID: <24142248.1160358079567.JavaMail.root@brutus>
Date: Sun, 8 Oct 2006 18:41:19 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-585) hadoop command should have an option
 to print it's version information
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hadoop command should have an option to print it's version information
----------------------------------------------------------------------

                 Key: HADOOP-585
                 URL: http://issues.apache.org/jira/browse/HADOOP-585
             Project: Hadoop
          Issue Type: Improvement
            Reporter: arkady borkovsky




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  9 04:03:28 2006
Return-Path: 
 <hadoop-dev-return-4172-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13008 invoked from network); 9 Oct 2006 04:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 04:03:28 -0000
Received: (qmail 63997 invoked by uid 500); 9 Oct 2006 04:03:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63973 invoked by uid 500); 9 Oct 2006 04:03:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63964 invoked by uid 99); 9 Oct 2006 04:03:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 21:03:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B82207141B8
	for <hadoop-dev@lucene.apache.org>; Sun,  8 Oct 2006 21:02:20 -0700 (PDT)
Message-ID: <2561365.1160366540751.JavaMail.root@brutus>
Date: Sun, 8 Oct 2006 21:02:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-585) hadoop command should have an option
 to print it's version information
In-Reply-To: <24142248.1160358079567.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-585?page=all ]

Owen O'Malley resolved HADOOP-585.
----------------------------------

    Fix Version/s: 0.7.0
       Resolution: Duplicate

I implemented this in HADOOP-567. The syntax is:

bin/hadoop version

and it responds with:

Hadoop 0.7.1-dev
Subversion http://svn.apache.org/repos/asf/lucene/hadoop/trunk -r 453780
Compiled by oom on Sun Oct  8 20:59:38 PDT 2006


> hadoop command should have an option to print it's version information
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-585
>                 URL: http://issues.apache.org/jira/browse/HADOOP-585
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: arkady borkovsky
>             Fix For: 0.7.0
>
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  9 08:37:58 2006
Return-Path: 
 <hadoop-dev-return-4173-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28387 invoked from network); 9 Oct 2006 08:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 08:37:58 -0000
Received: (qmail 36032 invoked by uid 500); 9 Oct 2006 08:37:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36005 invoked by uid 500); 9 Oct 2006 08:37:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35989 invoked by uid 99); 9 Oct 2006 08:37:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:37:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:37:56 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 92F987142D2
	for <hadoop-dev@lucene.apache.org>; Mon,  9 Oct 2006 01:37:19 -0700 (PDT)
Message-ID: <3307070.1160383039599.JavaMail.root@brutus>
Date: Mon, 9 Oct 2006 01:37:19 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-586) Job Name should not ben empty, if its
 is not given bu user, Hadoop should use original Jar name as the job name.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Job Name should not ben empty, if its is not given bu user, Hadoop should use original Jar name as the job name. 
-----------------------------------------------------------------------------------------------------------------

                 Key: HADOOP-586
                 URL: http://issues.apache.org/jira/browse/HADOOP-586
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.7.0
            Reporter: Sanjay Dahiya
         Assigned To: Sanjay Dahiya
            Priority: Trivial
             Fix For: 0.7.1


JobTracker UI and JobTracker history UI have job name column empty for jobs that don't have a name. It would be good to have some identification of the job there even if user doesn't give it a name. Name of the user jar file is a good candidate. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  9 08:42:58 2006
Return-Path: 
 <hadoop-dev-return-4174-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30489 invoked from network); 9 Oct 2006 08:42:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 08:42:58 -0000
Received: (qmail 44202 invoked by uid 500); 9 Oct 2006 08:42:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44177 invoked by uid 500); 9 Oct 2006 08:42:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44168 invoked by uid 99); 9 Oct 2006 08:42:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:42:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:42:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0BE77141B8
	for <hadoop-dev@lucene.apache.org>; Mon,  9 Oct 2006 01:42:20 -0700 (PDT)
Message-ID: <27584169.1160383340917.JavaMail.root@brutus>
Date: Mon, 9 Oct 2006 01:42:20 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-586) Job Name should not ben empty, if its
 is not given bu user, Hadoop should use original Jar name as the job name.
In-Reply-To: <3307070.1160383039599.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-586?page=all ]

Sanjay Dahiya updated HADOOP-586:
---------------------------------

    Attachment: Hadoop-586.patch

This patch changes JobClient to set Jar file name as job name if later is not set. 

> Job Name should not ben empty, if its is not given bu user, Hadoop should use original Jar name as the job name.
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-586
>                 URL: http://issues.apache.org/jira/browse/HADOOP-586
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>             Fix For: 0.7.1
>
>         Attachments: Hadoop-586.patch
>
>
> JobTracker UI and JobTracker history UI have job name column empty for jobs that don't have a name. It would be good to have some identification of the job there even if user doesn't give it a name. Name of the user jar file is a good candidate. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  9 08:43:01 2006
Return-Path: 
 <hadoop-dev-return-4175-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30545 invoked from network); 9 Oct 2006 08:43:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 08:43:01 -0000
Received: (qmail 44720 invoked by uid 500); 9 Oct 2006 08:43:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44618 invoked by uid 500); 9 Oct 2006 08:43:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44467 invoked by uid 99); 9 Oct 2006 08:42:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:42:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:42:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 282F47142D2
	for <hadoop-dev@lucene.apache.org>; Mon,  9 Oct 2006 01:42:22 -0700 (PDT)
Message-ID: <22197427.1160383342162.JavaMail.root@brutus>
Date: Mon, 9 Oct 2006 01:42:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-586) Job Name should not ben empty, if its
 is not given bu user, Hadoop should use original Jar name as the job name.
In-Reply-To: <3307070.1160383039599.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-586?page=all ]

Sanjay Dahiya updated HADOOP-586:
---------------------------------

    Status: Patch Available  (was: Open)

> Job Name should not ben empty, if its is not given bu user, Hadoop should use original Jar name as the job name.
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-586
>                 URL: http://issues.apache.org/jira/browse/HADOOP-586
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>             Fix For: 0.7.1
>
>         Attachments: Hadoop-586.patch
>
>
> JobTracker UI and JobTracker history UI have job name column empty for jobs that don't have a name. It would be good to have some identification of the job there even if user doesn't give it a name. Name of the user jar file is a good candidate. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  9 17:31:59 2006
Return-Path: 
 <hadoop-dev-return-4176-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12749 invoked from network); 9 Oct 2006 17:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 17:31:59 -0000
Received: (qmail 64427 invoked by uid 500); 9 Oct 2006 17:31:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64210 invoked by uid 500); 9 Oct 2006 17:31:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64200 invoked by uid 99); 9 Oct 2006 17:31:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 10:31:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 10:31:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39F637142DB
	for <hadoop-dev@lucene.apache.org>; Mon,  9 Oct 2006 10:31:20 -0700 (PDT)
Message-ID: <21604252.1160415080234.JavaMail.root@brutus>
Date: Mon, 9 Oct 2006 10:31:20 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-587) SequenceFile sort should use quicksort
 instead of merge sort for sorting runs.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SequenceFile sort should use quicksort instead of merge sort for sorting runs.
------------------------------------------------------------------------------

                 Key: HADOOP-587
                 URL: http://issues.apache.org/jira/browse/HADOOP-587
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Runping Qi
            Priority: Minor



I noticed that Hadoop uses mergesort for sorting the runs in the sequence file SortPass class. 
I think quicksort should be faster and should be used instead. 
I also noticed that Java's Arrays.sort() static functions for non-primitive element types also use merge sort. 

Are there any subtle reasons why not to use quicksort?

If no, we should implement out quicksort. Otherwise, we should use Java's sort, unless we believe our mergesort is better.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  9 18:06:59 2006
Return-Path: 
 <hadoop-dev-return-4177-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27795 invoked from network); 9 Oct 2006 18:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 18:06:59 -0000
Received: (qmail 18057 invoked by uid 500); 9 Oct 2006 18:06:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17850 invoked by uid 500); 9 Oct 2006 18:06:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17841 invoked by uid 99); 9 Oct 2006 18:06:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 11:06:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 11:06:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8EB687142D8
	for <hadoop-dev@lucene.apache.org>; Mon,  9 Oct 2006 11:06:20 -0700 (PDT)
Message-ID: <26588083.1160417180582.JavaMail.root@brutus>
Date: Mon, 9 Oct 2006 11:06:20 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-587) SequenceFile sort should use
 quicksort instead of merge sort for sorting runs.
In-Reply-To: <21604252.1160415080234.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-587?page=comments#action_12440951 ] 
            
Benjamin Reed commented on HADOOP-587:
--------------------------------------

This is a duplicate of HADOOP-287

> SequenceFile sort should use quicksort instead of merge sort for sorting runs.
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-587
>                 URL: http://issues.apache.org/jira/browse/HADOOP-587
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>            Priority: Minor
>
> I noticed that Hadoop uses mergesort for sorting the runs in the sequence file SortPass class. 
> I think quicksort should be faster and should be used instead. 
> I also noticed that Java's Arrays.sort() static functions for non-primitive element types also use merge sort. 
> Are there any subtle reasons why not to use quicksort?
> If no, we should implement out quicksort. Otherwise, we should use Java's sort, unless we believe our mergesort is better.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct  9 23:14:56 2006
Return-Path: 
 <hadoop-dev-return-4178-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63839 invoked from network); 9 Oct 2006 23:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 23:14:56 -0000
Received: (qmail 83920 invoked by uid 500); 9 Oct 2006 23:14:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83900 invoked by uid 500); 9 Oct 2006 23:14:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83891 invoked by uid 99); 9 Oct 2006 23:14:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 16:14:55 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 16:14:55 -0700
Received: from [192.168.1.66] (snvvpn2-10-72-76-c110.corp.yahoo.com
 [10.72.76.110])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k99NEXnb003758;
	Mon, 9 Oct 2006 16:14:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=in-reply-to:references:mime-version:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=YDoGqVxYkMFQAKsxAWUcqHoqsoQYXbHjXNTHNu0PHi+A3750+IROpyzeOjDY6WCC
In-Reply-To: <26588083.1160417180582.JavaMail.root@brutus>
References: <26588083.1160417180582.JavaMail.root@brutus>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9b51ea76d0586c63346a65c7318da958@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Commented: (HADOOP-587) SequenceFile sort should use
 quicksort instead of merge sort for sorting runs.
Date: Mon, 9 Oct 2006 16:11:16 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This need to be done with some caution as
quicksort may take quadratic time when there are too few keys with  
uneven distribution.
At least this used to be true for libc when I used it.
Merge sort is guaranteed N log(N).

-- ab

On Oct 9, 2006, at 11:06 AM, Benjamin Reed (JIRA) wrote:

>     [  
> http://issues.apache.org/jira/browse/HADOOP-587? 
> page=comments#action_12440951 ]
>
> Benjamin Reed commented on HADOOP-587:
> --------------------------------------
>
> This is a duplicate of HADOOP-287
>
>> SequenceFile sort should use quicksort instead of merge sort for  
>> sorting runs.
>> ---------------------------------------------------------------------- 
>> --------
>>
>>                 Key: HADOOP-587
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-587
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>            Reporter: Runping Qi
>>            Priority: Minor
>>
>> I noticed that Hadoop uses mergesort for sorting the runs in the  
>> sequence file SortPass class.
>> I think quicksort should be faster and should be used instead.
>> I also noticed that Java's Arrays.sort() static functions for  
>> non-primitive element types also use merge sort.
>> Are there any subtle reasons why not to use quicksort?
>> If no, we should implement out quicksort. Otherwise, we should use  
>> Java's sort, unless we believe our mergesort is better.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Tue Oct 10 00:39:00 2006
Return-Path: 
 <hadoop-dev-return-4179-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86335 invoked from network); 10 Oct 2006 00:39:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 00:39:00 -0000
Received: (qmail 78355 invoked by uid 500); 10 Oct 2006 00:38:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 78328 invoked by uid 500); 10 Oct 2006 00:38:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 78319 invoked by uid 99); 10 Oct 2006 00:38:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 17:38:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 17:38:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 95D1E7142D6
	for <hadoop-dev@lucene.apache.org>; Mon,  9 Oct 2006 17:38:20 -0700 (PDT)
Message-ID: <21665993.1160440700611.JavaMail.root@brutus>
Date: Mon, 9 Oct 2006 17:38:20 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-584) Calling shell scripts from build.xml
 discriminates Windows user minority.
In-Reply-To: <16860241.1160180419554.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-584?page=comments#action_12441023 ] 
            
Konstantin Shvachko commented on HADOOP-584:
--------------------------------------------

Yes, under cygwin it builds fine. But it does not if you build in a stand alone eclipse.
Which it did before the patch, and that is why I'm saying it imposes more depenecies.
I think it should not.

Here is a practical advice that solved the problem for me:
Include "C:\cygwin\bin" and "C:\Program Files\Subversion\bin" into the Path.
cygwin\bin contains sh.exe, and Subversion\bin has svn.exe, which are now
required to build hadoop.


> Calling shell scripts from build.xml discriminates Windows user minority.
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-584
>                 URL: http://issues.apache.org/jira/browse/HADOOP-584
>             Project: Hadoop
>          Issue Type: Bug
>          Components: scripts
>    Affects Versions: 0.7.0
>         Environment: Windows
>            Reporter: Konstantin Shvachko
>
> This is introduced by HADOOP-567.
> The problem is that now I cannot even build hadoop in Eclipse under Windows unless I run it under Cygwin. 
> This is in a way the same as calling make in build.xml, which was recently fixed HADOOP-537.
> I think we should not introducing more dependencies on Cygwin just in order to show something in Web UI.
> I also don't remember we claimed that Cygwin or anything else except for Ant is required for Hadoop builds. 
> Is there another way of solving this?
> build.xml defines "version" property, Ant has "user.name" property. URL is not changing very often.
> Or may be the web ui should obtain these properties in run-time.
> Or may be the Packaging is a better solution, as you guys discussed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 08:18:02 2006
Return-Path: 
 <hadoop-dev-return-4180-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16421 invoked from network); 10 Oct 2006 08:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 08:18:02 -0000
Received: (qmail 34259 invoked by uid 500); 10 Oct 2006 08:18:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34225 invoked by uid 500); 10 Oct 2006 08:18:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34176 invoked by uid 99); 10 Oct 2006 08:18:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 01:18:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 01:17:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 62A947142DB
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 01:17:21 -0700 (PDT)
Message-ID: <2570477.1160468241401.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 01:17:21 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-588) JobTracker History bug - kill() ed
 tasks are logged wrongly as finished.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobTracker History bug - kill() ed tasks are logged wrongly as finished. 
-------------------------------------------------------------------------

                 Key: HADOOP-588
                 URL: http://issues.apache.org/jira/browse/HADOOP-588
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.0
            Reporter: Sanjay Dahiya
         Assigned To: Sanjay Dahiya
             Fix For: 0.7.1


JobInProgress.kill() logs jobs as finished in jobtracker history, whereas they should be logged as failed. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 08:24:03 2006
Return-Path: 
 <hadoop-dev-return-4181-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18059 invoked from network); 10 Oct 2006 08:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 08:24:03 -0000
Received: (qmail 47380 invoked by uid 500); 10 Oct 2006 08:23:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47361 invoked by uid 500); 10 Oct 2006 08:23:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47349 invoked by uid 99); 10 Oct 2006 08:23:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 01:23:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 01:23:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1ED07142D8
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 01:23:20 -0700 (PDT)
Message-ID: <3486043.1160468600660.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 01:23:20 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-588) JobTracker History bug - kill() ed
 tasks are logged wrongly as finished.
In-Reply-To: <2570477.1160468241401.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-588?page=all ]

Sanjay Dahiya updated HADOOP-588:
---------------------------------

    Attachment: Hadoop-588.patch

This patch fixes 2 issues with jobtracker history logging. 
1. JobInProgress.kill() now logs jobs as failed instead of finished. 
2. For failed task attempts, the failure is not propagated to Task page until the taskAttempts fails max(4) no of times. Earlier the failed task attempt's error would be visible on task page even when a subsequent task attempt succeeded, which was confusing. 


> JobTracker History bug - kill() ed tasks are logged wrongly as finished.
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-588
>                 URL: http://issues.apache.org/jira/browse/HADOOP-588
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.7.1
>
>         Attachments: Hadoop-588.patch
>
>
> JobInProgress.kill() logs jobs as finished in jobtracker history, whereas they should be logged as failed. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 08:24:04 2006
Return-Path: 
 <hadoop-dev-return-4182-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18092 invoked from network); 10 Oct 2006 08:24:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 08:24:04 -0000
Received: (qmail 47667 invoked by uid 500); 10 Oct 2006 08:24:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47640 invoked by uid 500); 10 Oct 2006 08:24:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47626 invoked by uid 99); 10 Oct 2006 08:24:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 01:24:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 01:24:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D0A507142D6
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 01:23:21 -0700 (PDT)
Message-ID: <16118406.1160468601852.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 01:23:21 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-588) JobTracker History bug - kill() ed
 tasks are logged wrongly as finished.
In-Reply-To: <2570477.1160468241401.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-588?page=all ]

Sanjay Dahiya updated HADOOP-588:
---------------------------------

    Status: Patch Available  (was: Open)

> JobTracker History bug - kill() ed tasks are logged wrongly as finished.
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-588
>                 URL: http://issues.apache.org/jira/browse/HADOOP-588
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.7.1
>
>         Attachments: Hadoop-588.patch
>
>
> JobInProgress.kill() logs jobs as finished in jobtracker history, whereas they should be logged as failed. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 14:23:01 2006
Return-Path: 
 <hadoop-dev-return-4183-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39215 invoked from network); 10 Oct 2006 14:23:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 14:23:01 -0000
Received: (qmail 59693 invoked by uid 500); 10 Oct 2006 14:22:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59664 invoked by uid 500); 10 Oct 2006 14:22:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59655 invoked by uid 99); 10 Oct 2006 14:22:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 07:22:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 07:22:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94CE27142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 07:22:19 -0700 (PDT)
Message-ID: <910497.1160490139607.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 07:22:19 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-589) Locality hints for Reduce
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Locality hints for Reduce
-------------------------

                 Key: HADOOP-589
                 URL: http://issues.apache.org/jira/browse/HADOOP-589
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
            Reporter: Benjamin Reed


It would be nice if we could add method to OutputFormat that would allow a job to indicate where a reducer for a given partition should should run. This is similar to the getSplits() method on InputFormat. In our application the reducer is using other data in addition to the map outputs during processing and data accesses could be made more efficient if the JobTracker scheduled the reducers to run on specific hosts.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 16:15:12 2006
Return-Path: 
 <hadoop-dev-return-4184-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85853 invoked from network); 10 Oct 2006 16:15:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 16:15:12 -0000
Received: (qmail 28782 invoked by uid 500); 10 Oct 2006 16:15:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28710 invoked by uid 500); 10 Oct 2006 16:15:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28637 invoked by uid 99); 10 Oct 2006 16:15:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 09:15:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 09:15:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DD3D97142EF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 09:14:25 -0700 (PDT)
Message-ID: <23301538.1160496865903.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 09:14:25 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy reassigned HADOOP-489:
------------------------------------

    Assignee: Arun C Murthy  (was: Owen O'Malley)

I'll take a stab at a reasonable set of requirements for a first-cut:

a) One log file per task
b) Define a limit on the logFileSize and roll-over the logs after every 20/25 percent of limit is hit to the a file on local-disk. Maintain last 4/5 spills? (Or all of them? - will be suspectible to rogue tasks with large log files)
c) On completion of job - concatenate all existing spills into a single file on dfs (optional? maybe for second-cut?)
d) Provide links to jsps which serve the log-spills from the job-tracker UI.

Thoughts? Anything more/less?


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 16:42:00 2006
Return-Path: 
 <hadoop-dev-return-4185-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96249 invoked from network); 10 Oct 2006 16:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 16:42:00 -0000
Received: (qmail 91669 invoked by uid 500); 10 Oct 2006 16:41:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91454 invoked by uid 500); 10 Oct 2006 16:41:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91445 invoked by uid 99); 10 Oct 2006 16:41:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 09:41:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 09:41:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8C1FA7142E1
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 09:41:19 -0700 (PDT)
Message-ID: <28649553.1160498479570.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 09:41:19 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-590) Reducer's pass merger should utilize
 temporary directories on different disks
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Reducer's pass merger should utilize temporary directories on different disks 
------------------------------------------------------------------------------

                 Key: HADOOP-590
                 URL: http://issues.apache.org/jira/browse/HADOOP-590
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Runping Qi



The current implementation of pass merge of SequenceFile class uses the same temp directory for the in/out files of the pass merger class, even though when multiple temp dirs are available. Thus, it cannot fully utlize the advantage of multiple disks during sort.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 16:52:03 2006
Return-Path: 
 <hadoop-dev-return-4186-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 465 invoked from network); 10 Oct 2006 16:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 16:52:03 -0000
Received: (qmail 17357 invoked by uid 500); 10 Oct 2006 16:52:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17227 invoked by uid 500); 10 Oct 2006 16:52:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17218 invoked by uid 99); 10 Oct 2006 16:52:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 09:52:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 09:52:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 047937142E1
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 09:51:23 -0700 (PDT)
Message-ID: <32079314.1160499083015.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 09:51:23 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441197 ] 
            
Yoram Arnon commented on HADOOP-489:
------------------------------------

seems that one log file per tasktracker, per job is better than one file per task, no?
logs of rogue tasks should be limited. IMO, the ideal is a configurable cap on the total size per job, with a default, and an override in the jobconf. Divide by the number of nodes for the limit per tasktracker.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 17:11:03 2006
Return-Path: 
 <hadoop-dev-return-4187-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9131 invoked from network); 10 Oct 2006 17:11:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 17:11:03 -0000
Received: (qmail 58355 invoked by uid 500); 10 Oct 2006 17:11:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58328 invoked by uid 500); 10 Oct 2006 17:11:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58319 invoked by uid 99); 10 Oct 2006 17:11:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:11:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:11:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 118F97142EF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 10:10:23 -0700 (PDT)
Message-ID: <18982832.1160500223069.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 10:10:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441208 ] 
            
Arun C Murthy commented on HADOOP-489:
--------------------------------------

> seems that one log file per tasktracker, per job is better than one file per task, no? 
Sorry, my bad, that's what I had in mind... 

To clarify: it will be one file per job per tasktracker (and rolled-over after 20/25 percent of logFileSize).

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 17:17:00 2006
Return-Path: 
 <hadoop-dev-return-4188-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11797 invoked from network); 10 Oct 2006 17:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 17:17:00 -0000
Received: (qmail 68300 invoked by uid 500); 10 Oct 2006 17:16:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 68263 invoked by uid 500); 10 Oct 2006 17:16:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 68254 invoked by uid 99); 10 Oct 2006 17:16:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:16:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:16:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC5A17142F3
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 10:16:19 -0700 (PDT)
Message-ID: <31534512.1160500579703.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 10:16:19 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-591) Reducer sort should even out the pass
 factors in merging different pass
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Reducer sort should even out the pass factors in merging different pass
-----------------------------------------------------------------------

                 Key: HADOOP-591
                 URL: http://issues.apache.org/jira/browse/HADOOP-591
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
            Reporter: Runping Qi



When multiple pass merging is needed during sort, the current sort implementation in SequenceFile class uses a simple "greedy" way to select pass factors, resulting uneven pass factor in different passes. For example, if the factor pass is 100 (the default), and there are 101 segments to be merged. The current implementation will first merge the first 100 segments into one and then merge the big output file with the last segment with pass factor 2. It will be better off to use pass factors 11 in the first pass and pass factor 10 in the second pass.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 17:19:07 2006
Return-Path: 
 <hadoop-dev-return-4189-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12867 invoked from network); 10 Oct 2006 17:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 17:19:07 -0000
Received: (qmail 70002 invoked by uid 500); 10 Oct 2006 17:19:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69987 invoked by uid 500); 10 Oct 2006 17:19:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69716 invoked by uid 99); 10 Oct 2006 17:19:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:19:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:19:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E5BCF7142EF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 10:18:22 -0700 (PDT)
Message-ID: <32077147.1160500702938.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 10:18:22 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441214 ] 
            
Sameer Paranjpye commented on HADOOP-489:
-----------------------------------------

A global cap on the log size is feasible, but dividing by the number of nodes doesn't look right. Some nodes are always slow and runs fewer tasks, others run more than their 'fair' share. Also, some jobs are bigger than others, jobs running on 500 nodes produce a lot more log output than those running on 20 nodes. I'd vote a per task cap.



> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 17:41:06 2006
Return-Path: 
 <hadoop-dev-return-4190-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23616 invoked from network); 10 Oct 2006 17:41:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 17:41:06 -0000
Received: (qmail 6541 invoked by uid 500); 10 Oct 2006 17:41:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6512 invoked by uid 500); 10 Oct 2006 17:41:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6503 invoked by uid 99); 10 Oct 2006 17:41:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:41:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:41:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 95B6D7142EF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 10:40:20 -0700 (PDT)
Message-ID: <22191279.1160502020610.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 10:40:20 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-590) Reducer's pass merger should utilize
 temporary directories on different disks
In-Reply-To: <28649553.1160498479570.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-590?page=comments#action_12441219 ] 
            
Runping Qi commented on HADOOP-590:
-----------------------------------


I observed from my current running job that the throughput for the sortPass (sort map output files into runs) is a bit faster than mergePass. I believe two factors contribute that: one is that the mergePass reads from one disk and the sortPass reads from 4 disks; another is that the mergePass reads from/writes to the same disk; the third is that the pass factor  for mergePass is 400, which may be too high.


Instead of writing the intermediate files into one big file on one disk, if sortPass and mergePass (other than the last pass) write d files, where d is the number of usable disks, then the next pass will be able to fully utilize the available disks.



> Reducer's pass merger should utilize temporary directories on different disks
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-590
>                 URL: http://issues.apache.org/jira/browse/HADOOP-590
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>
> The current implementation of pass merge of SequenceFile class uses the same temp directory for the in/out files of the pass merger class, even though when multiple temp dirs are available. Thus, it cannot fully utlize the advantage of multiple disks during sort.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 17:51:07 2006
Return-Path: 
 <hadoop-dev-return-4191-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29661 invoked from network); 10 Oct 2006 17:51:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 17:51:07 -0000
Received: (qmail 26494 invoked by uid 500); 10 Oct 2006 17:51:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26472 invoked by uid 500); 10 Oct 2006 17:51:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26463 invoked by uid 99); 10 Oct 2006 17:51:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:51:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:51:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 329957142EF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 10:50:26 -0700 (PDT)
Message-ID: <16006377.1160502626204.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 10:50:26 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441225 ] 
            
Yoram Arnon commented on HADOOP-489:
------------------------------------

that's reasonable.
so the cap is defined per job, with a default that can be overriden in the jobconf, and the cap per task is computed by dividing into the number of tasks.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 17:55:16 2006
Return-Path: 
 <hadoop-dev-return-4192-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32109 invoked from network); 10 Oct 2006 17:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 17:55:16 -0000
Received: (qmail 34562 invoked by uid 500); 10 Oct 2006 17:55:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34538 invoked by uid 500); 10 Oct 2006 17:55:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34480 invoked by uid 99); 10 Oct 2006 17:55:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:55:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 10:55:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 74A367142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 10:54:24 -0700 (PDT)
Message-ID: <12361622.1160502864475.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 10:54:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441230 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

I'm confused by your proposal in that a and b sound like alterantives. I think we should do:

1. write the user logs to a file until it reaches 25% of the limit and then roll.
2. maintain the last 4 spills
3. when the task completes, it is concatenated onto the local job log on local disk. the job log should have an index from the tasks to the offset where they start
4. the jetty servlet on the task tracker serves up the task logs regardless of whether it is in the still running state or complete.
5. the task tracker cleans up the storage after N hours after the job completes.

I'd leave the save to dfs for a second pass, and it can only be done once the job is complete. I'd still leave the job log fragmented by the task tracker the tasks ran on.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 18:11:00 2006
Return-Path: 
 <hadoop-dev-return-4193-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41210 invoked from network); 10 Oct 2006 18:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 18:11:00 -0000
Received: (qmail 57681 invoked by uid 500); 10 Oct 2006 18:10:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57659 invoked by uid 500); 10 Oct 2006 18:10:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57646 invoked by uid 99); 10 Oct 2006 18:10:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:10:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:10:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ADDC77142F3
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 11:10:19 -0700 (PDT)
Message-ID: <17915790.1160503819709.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 11:10:19 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-592) NullPointerException in toString for
 RPC connection objects
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

NullPointerException in toString for RPC connection objects
-----------------------------------------------------------

                 Key: HADOOP-592
                 URL: http://issues.apache.org/jira/browse/HADOOP-592
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.7.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
            Priority: Minor
             Fix For: 0.7.1


If the socket is closed when the log message is generated, the toString method gets a NullPointerException.

The exception is caught and logged, but happens often enough that administrators will worry about it. It also loses useful debugging information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 18:26:04 2006
Return-Path: 
 <hadoop-dev-return-4194-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47820 invoked from network); 10 Oct 2006 18:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 18:26:04 -0000
Received: (qmail 85015 invoked by uid 500); 10 Oct 2006 18:26:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84987 invoked by uid 500); 10 Oct 2006 18:26:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84950 invoked by uid 99); 10 Oct 2006 18:26:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:26:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:26:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 88E947142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 11:25:22 -0700 (PDT)
Message-ID: <3742632.1160504722557.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 11:25:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-592) NullPointerException in toString for
 RPC connection objects
In-Reply-To: <17915790.1160503819709.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-592?page=all ]

Owen O'Malley updated HADOOP-592:
---------------------------------

    Attachment: connection-null-ptr.patch

This patch grabs the inet address when the connection is formed so that we don't get a null pointer exception when trying to print it out after the connection is closed.

> NullPointerException in toString for RPC connection objects
> -----------------------------------------------------------
>
>                 Key: HADOOP-592
>                 URL: http://issues.apache.org/jira/browse/HADOOP-592
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.7.1
>
>         Attachments: connection-null-ptr.patch
>
>
> If the socket is closed when the log message is generated, the toString method gets a NullPointerException.
> The exception is caught and logged, but happens often enough that administrators will worry about it. It also loses useful debugging information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 19:02:03 2006
Return-Path: 
 <hadoop-dev-return-4195-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59892 invoked from network); 10 Oct 2006 19:02:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 19:02:03 -0000
Received: (qmail 55211 invoked by uid 500); 10 Oct 2006 19:02:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54994 invoked by uid 500); 10 Oct 2006 19:02:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54980 invoked by uid 99); 10 Oct 2006 19:02:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:02:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:02:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CA7187142E2
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 12:01:21 -0700 (PDT)
Message-ID: <19327807.1160506881826.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 12:01:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-593) NullPointerException in JobTracker's
 ExireTaskTracker thread
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

NullPointerException in JobTracker's ExireTaskTracker thread
------------------------------------------------------------

                 Key: HADOOP-593
                 URL: http://issues.apache.org/jira/browse/HADOOP-593
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
            Priority: Critical
             Fix For: 0.7.1


The JobTracker's thread that finds dead task trackers is getting a NullPointerException:

Exception in thread "Thread-19" java.lang.NullPointerException
        at org.apache.hadoop.mapred.JobInProgress.failedTask(JobInProgress.java:614)
        at org.apache.hadoop.mapred.JobInProgress.updateTaskStatus(JobInProgress.java:291)
        at org.apache.hadoop.mapred.JobInProgress.failedTask(JobInProgress.java:674)
        at org.apache.hadoop.mapred.JobTracker.lostTaskTracker(JobTracker.java:1204)
        at org.apache.hadoop.mapred.JobTracker$ExpireTrackers.run(JobTracker.java:225)
        at java.lang.Thread.run(Thread.java:595)

Which kills the thread and prevents any other task trackers from being killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 21:21:05 2006
Return-Path: 
 <hadoop-dev-return-4196-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32555 invoked from network); 10 Oct 2006 21:21:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 21:21:05 -0000
Received: (qmail 8084 invoked by uid 500); 10 Oct 2006 21:21:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8059 invoked by uid 500); 10 Oct 2006 21:21:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8045 invoked by uid 99); 10 Oct 2006 21:21:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:21:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:21:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 66F237142DF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 14:20:23 -0700 (PDT)
Message-ID: <4322113.1160515223419.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 14:20:23 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-593) NullPointerException in JobTracker's
 ExireTaskTracker thread
In-Reply-To: <19327807.1160506881826.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-593?page=all ]

Owen O'Malley updated HADOOP-593:
---------------------------------

    Attachment: catch-exceptions-in-jt.patch

This patch:
  1. replaces the host name in the persistent job log with the task tracker name
      (for lost task trackers, the host name is no longer available and was getting a null pointer)
  2. adds try/catch blocks around the job tracker's main threads to catch similar problems, log the error and continue.

> NullPointerException in JobTracker's ExireTaskTracker thread
> ------------------------------------------------------------
>
>                 Key: HADOOP-593
>                 URL: http://issues.apache.org/jira/browse/HADOOP-593
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Critical
>             Fix For: 0.7.1
>
>         Attachments: catch-exceptions-in-jt.patch
>
>
> The JobTracker's thread that finds dead task trackers is getting a NullPointerException:
> Exception in thread "Thread-19" java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobInProgress.failedTask(JobInProgress.java:614)
>         at org.apache.hadoop.mapred.JobInProgress.updateTaskStatus(JobInProgress.java:291)
>         at org.apache.hadoop.mapred.JobInProgress.failedTask(JobInProgress.java:674)
>         at org.apache.hadoop.mapred.JobTracker.lostTaskTracker(JobTracker.java:1204)
>         at org.apache.hadoop.mapred.JobTracker$ExpireTrackers.run(JobTracker.java:225)
>         at java.lang.Thread.run(Thread.java:595)
> Which kills the thread and prevents any other task trackers from being killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 21:21:10 2006
Return-Path: 
 <hadoop-dev-return-4197-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32590 invoked from network); 10 Oct 2006 21:21:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 21:21:10 -0000
Received: (qmail 8345 invoked by uid 500); 10 Oct 2006 21:21:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8317 invoked by uid 500); 10 Oct 2006 21:21:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8304 invoked by uid 99); 10 Oct 2006 21:21:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:21:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:21:09 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BD1717142EF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 14:20:24 -0700 (PDT)
Message-ID: <4786612.1160515224772.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 14:20:24 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-593) NullPointerException in JobTracker's
 ExireTaskTracker thread
In-Reply-To: <19327807.1160506881826.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-593?page=all ]

Owen O'Malley updated HADOOP-593:
---------------------------------

    Status: Patch Available  (was: Open)

> NullPointerException in JobTracker's ExireTaskTracker thread
> ------------------------------------------------------------
>
>                 Key: HADOOP-593
>                 URL: http://issues.apache.org/jira/browse/HADOOP-593
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Critical
>             Fix For: 0.7.1
>
>         Attachments: catch-exceptions-in-jt.patch
>
>
> The JobTracker's thread that finds dead task trackers is getting a NullPointerException:
> Exception in thread "Thread-19" java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobInProgress.failedTask(JobInProgress.java:614)
>         at org.apache.hadoop.mapred.JobInProgress.updateTaskStatus(JobInProgress.java:291)
>         at org.apache.hadoop.mapred.JobInProgress.failedTask(JobInProgress.java:674)
>         at org.apache.hadoop.mapred.JobTracker.lostTaskTracker(JobTracker.java:1204)
>         at org.apache.hadoop.mapred.JobTracker$ExpireTrackers.run(JobTracker.java:225)
>         at java.lang.Thread.run(Thread.java:595)
> Which kills the thread and prevents any other task trackers from being killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 21:23:06 2006
Return-Path: 
 <hadoop-dev-return-4198-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33317 invoked from network); 10 Oct 2006 21:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 21:23:06 -0000
Received: (qmail 12916 invoked by uid 500); 10 Oct 2006 21:23:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12887 invoked by uid 500); 10 Oct 2006 21:23:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12878 invoked by uid 99); 10 Oct 2006 21:23:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:23:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:23:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96ED87142DD
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 14:22:20 -0700 (PDT)
Message-ID: <4952447.1160515340615.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 14:22:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-592) NullPointerException in toString for
 RPC connection objects
In-Reply-To: <17915790.1160503819709.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-592?page=all ]

Owen O'Malley updated HADOOP-592:
---------------------------------

    Status: Patch Available  (was: Open)

> NullPointerException in toString for RPC connection objects
> -----------------------------------------------------------
>
>                 Key: HADOOP-592
>                 URL: http://issues.apache.org/jira/browse/HADOOP-592
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.7.1
>
>         Attachments: connection-null-ptr.patch
>
>
> If the socket is closed when the log message is generated, the toString method gets a NullPointerException.
> The exception is caught and logged, but happens often enough that administrators will worry about it. It also loses useful debugging information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 21:25:03 2006
Return-Path: 
 <hadoop-dev-return-4199-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33927 invoked from network); 10 Oct 2006 21:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 21:25:03 -0000
Received: (qmail 15650 invoked by uid 500); 10 Oct 2006 21:25:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15628 invoked by uid 500); 10 Oct 2006 21:25:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15606 invoked by uid 99); 10 Oct 2006 21:25:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:25:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:25:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 07DBA7142DF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 14:24:22 -0700 (PDT)
Message-ID: <31595279.1160515462029.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 14:24:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-586) Job Name should not ben empty, if its
 is not given bu user, Hadoop should use original Jar name as the job name.
In-Reply-To: <3307070.1160383039599.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-586?page=all ]

Owen O'Malley updated HADOOP-586:
---------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.1)

> Job Name should not ben empty, if its is not given bu user, Hadoop should use original Jar name as the job name.
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-586
>                 URL: http://issues.apache.org/jira/browse/HADOOP-586
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>             Fix For: 0.8.0
>
>         Attachments: Hadoop-586.patch
>
>
> JobTracker UI and JobTracker history UI have job name column empty for jobs that don't have a name. It would be good to have some identification of the job there even if user doesn't give it a name. Name of the user jar file is a good candidate. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 22:52:02 2006
Return-Path: 
 <hadoop-dev-return-4200-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69944 invoked from network); 10 Oct 2006 22:52:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 22:52:02 -0000
Received: (qmail 14726 invoked by uid 500); 10 Oct 2006 22:52:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14702 invoked by uid 500); 10 Oct 2006 22:52:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14692 invoked by uid 99); 10 Oct 2006 22:52:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:52:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:52:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5C80A7142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 15:51:21 -0700 (PDT)
Message-ID: <16508417.1160520681376.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 15:51:21 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-498) fsck should execute faster
In-Reply-To: <16510954.1157010324263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-498?page=all ]

Milind Bhandarkar updated HADOOP-498:
-------------------------------------

    Attachment: fsck.patch

Attached patch. fsck functionality is moved into namenode aand made available as a servlet. This avoids multiple roundtrips from dfs client to the namenode. The commandline interface for fsck on the client now uses http to do fsck. Also added a test for fsck. Also, fixed the copyFiles test to actually run instead of exiting.


> fsck should execute faster
> --------------------------
>
>                 Key: HADOOP-498
>                 URL: http://issues.apache.org/jira/browse/HADOOP-498
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.1
>
>         Attachments: fsck.patch
>
>
> on a good size dfs, with a few 100000 blocks, fsck takes around 30 minutes, while dfs -du takes only a couple of seconds.
> fsck should take seconds, rather than minutes. It should be a namenode operation, not a client program.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 22:52:04 2006
Return-Path: 
 <hadoop-dev-return-4201-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69974 invoked from network); 10 Oct 2006 22:52:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 22:52:04 -0000
Received: (qmail 14975 invoked by uid 500); 10 Oct 2006 22:52:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14954 invoked by uid 500); 10 Oct 2006 22:52:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14945 invoked by uid 99); 10 Oct 2006 22:52:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:52:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:52:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2514A7142DD
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 15:51:23 -0700 (PDT)
Message-ID: <25066237.1160520683149.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 15:51:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-498) fsck should execute faster
In-Reply-To: <16510954.1157010324263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-498?page=all ]

Milind Bhandarkar updated HADOOP-498:
-------------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.7.1
    Affects Version/s: 0.7.0

Fixed. Fsck executes much faster now.

> fsck should execute faster
> --------------------------
>
>                 Key: HADOOP-498
>                 URL: http://issues.apache.org/jira/browse/HADOOP-498
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.7.1
>
>         Attachments: fsck.patch
>
>
> on a good size dfs, with a few 100000 blocks, fsck takes around 30 minutes, while dfs -du takes only a couple of seconds.
> fsck should take seconds, rather than minutes. It should be a namenode operation, not a client program.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 22:54:02 2006
Return-Path: 
 <hadoop-dev-return-4202-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70504 invoked from network); 10 Oct 2006 22:54:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 22:54:02 -0000
Received: (qmail 17929 invoked by uid 500); 10 Oct 2006 22:54:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17911 invoked by uid 500); 10 Oct 2006 22:54:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17902 invoked by uid 99); 10 Oct 2006 22:54:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:54:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:54:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4CE277142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 15:53:21 -0700 (PDT)
Message-ID: <10677039.1160520801312.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 15:53:21 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-514) namenode heartbeat interval should be
 configurable
In-Reply-To: <17229842.1157594543761.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-514?page=all ]

Milind Bhandarkar reassigned HADOOP-514:
----------------------------------------

    Assignee: Milind Bhandarkar

> namenode heartbeat interval should be configurable
> --------------------------------------------------
>
>                 Key: HADOOP-514
>                 URL: http://issues.apache.org/jira/browse/HADOOP-514
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Wendy Chien
>         Assigned To: Milind Bhandarkar
>
> The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 22:54:04 2006
Return-Path: 
 <hadoop-dev-return-4203-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70537 invoked from network); 10 Oct 2006 22:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 22:54:04 -0000
Received: (qmail 18184 invoked by uid 500); 10 Oct 2006 22:54:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18159 invoked by uid 500); 10 Oct 2006 22:54:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18150 invoked by uid 99); 10 Oct 2006 22:54:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:54:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:54:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6DBD77142DF
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 15:53:23 -0700 (PDT)
Message-ID: <23831976.1160520803447.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 15:53:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-514) namenode heartbeat interval should
 be configurable
In-Reply-To: <17229842.1157594543761.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-514?page=comments#action_12441304 ] 
            
Milind Bhandarkar commented on HADOOP-514:
------------------------------------------

Work started by milind.

> namenode heartbeat interval should be configurable
> --------------------------------------------------
>
>                 Key: HADOOP-514
>                 URL: http://issues.apache.org/jira/browse/HADOOP-514
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Wendy Chien
>         Assigned To: Milind Bhandarkar
>
> The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 10 23:37:07 2006
Return-Path: 
 <hadoop-dev-return-4204-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84354 invoked from network); 10 Oct 2006 23:37:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 23:37:07 -0000
Received: (qmail 67215 invoked by uid 500); 10 Oct 2006 23:37:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67193 invoked by uid 500); 10 Oct 2006 23:37:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67184 invoked by uid 99); 10 Oct 2006 23:37:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 16:37:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 16:37:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B0027142D8
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 16:36:21 -0700 (PDT)
Message-ID: <8061595.1160523381304.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 16:36:21 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-498) fsck should execute faster
In-Reply-To: <16510954.1157010324263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-498?page=all ]

Owen O'Malley updated HADOOP-498:
---------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.1)

> fsck should execute faster
> --------------------------
>
>                 Key: HADOOP-498
>                 URL: http://issues.apache.org/jira/browse/HADOOP-498
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: fsck.patch
>
>
> on a good size dfs, with a few 100000 blocks, fsck takes around 30 minutes, while dfs -du takes only a couple of seconds.
> fsck should take seconds, rather than minutes. It should be a namenode operation, not a client program.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 00:53:00 2006
Return-Path: 
 <hadoop-dev-return-4205-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94341 invoked from network); 11 Oct 2006 00:53:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 00:53:00 -0000
Received: (qmail 23955 invoked by uid 500); 11 Oct 2006 00:53:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23924 invoked by uid 500); 11 Oct 2006 00:53:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23915 invoked by uid 99); 11 Oct 2006 00:52:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 17:52:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 17:52:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A0AC17142DB
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 17:52:19 -0700 (PDT)
Message-ID: <11970307.1160527939653.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 17:52:19 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-594) Safemode default threshold should be
 0.999
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Safemode default threshold should be 0.999
------------------------------------------

                 Key: HADOOP-594
                 URL: http://issues.apache.org/jira/browse/HADOOP-594
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Konstantin Shvachko
         Attachments: DefaultThreshold.patch

We want all blocks reported before we leave safemode, except for just a few that might be missing or corrupted.
So it's effectively 1.0 but not quite.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 00:53:02 2006
Return-Path: 
 <hadoop-dev-return-4206-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94371 invoked from network); 11 Oct 2006 00:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 00:53:02 -0000
Received: (qmail 24376 invoked by uid 500); 11 Oct 2006 00:53:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24165 invoked by uid 500); 11 Oct 2006 00:53:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24156 invoked by uid 99); 11 Oct 2006 00:53:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 17:53:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 17:53:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E49317142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 17:52:20 -0700 (PDT)
Message-ID: <18218348.1160527940934.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 17:52:20 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-594) Safemode default threshold should be
 0.999
In-Reply-To: <11970307.1160527939653.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-594?page=all ]

Konstantin Shvachko reassigned HADOOP-594:
------------------------------------------

    Assignee: Konstantin Shvachko

> Safemode default threshold should be 0.999
> ------------------------------------------
>
>                 Key: HADOOP-594
>                 URL: http://issues.apache.org/jira/browse/HADOOP-594
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: DefaultThreshold.patch
>
>
> We want all blocks reported before we leave safemode, except for just a few that might be missing or corrupted.
> So it's effectively 1.0 but not quite.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 00:53:03 2006
Return-Path: 
 <hadoop-dev-return-4207-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94406 invoked from network); 11 Oct 2006 00:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 00:53:03 -0000
Received: (qmail 24539 invoked by uid 500); 11 Oct 2006 00:53:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24401 invoked by uid 500); 11 Oct 2006 00:53:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24392 invoked by uid 99); 11 Oct 2006 00:53:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 17:53:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 17:53:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 262617142D8
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 17:52:22 -0700 (PDT)
Message-ID: <15813094.1160527942152.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 17:52:22 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-594) Safemode default threshold should be
 0.999
In-Reply-To: <11970307.1160527939653.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-594?page=all ]

Konstantin Shvachko updated HADOOP-594:
---------------------------------------

    Attachment: DefaultThreshold.patch

> Safemode default threshold should be 0.999
> ------------------------------------------
>
>                 Key: HADOOP-594
>                 URL: http://issues.apache.org/jira/browse/HADOOP-594
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: DefaultThreshold.patch
>
>
> We want all blocks reported before we leave safemode, except for just a few that might be missing or corrupted.
> So it's effectively 1.0 but not quite.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 00:55:11 2006
Return-Path: 
 <hadoop-dev-return-4208-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94581 invoked from network); 11 Oct 2006 00:55:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 00:55:11 -0000
Received: (qmail 25068 invoked by uid 500); 11 Oct 2006 00:55:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25042 invoked by uid 500); 11 Oct 2006 00:55:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25033 invoked by uid 99); 11 Oct 2006 00:55:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 17:55:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 17:55:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8F3217142D2
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 17:54:20 -0700 (PDT)
Message-ID: <689967.1160528060584.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 17:54:20 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-594) Safemode default threshold should be
 0.999
In-Reply-To: <11970307.1160527939653.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-594?page=all ]

Konstantin Shvachko updated HADOOP-594:
---------------------------------------

    Status: Patch Available  (was: Open)

I changed the default.

> Safemode default threshold should be 0.999
> ------------------------------------------
>
>                 Key: HADOOP-594
>                 URL: http://issues.apache.org/jira/browse/HADOOP-594
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: DefaultThreshold.patch
>
>
> We want all blocks reported before we leave safemode, except for just a few that might be missing or corrupted.
> So it's effectively 1.0 but not quite.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 02:46:02 2006
Return-Path: 
 <hadoop-dev-return-4209-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26398 invoked from network); 11 Oct 2006 02:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 02:46:02 -0000
Received: (qmail 33917 invoked by uid 500); 11 Oct 2006 02:46:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33896 invoked by uid 500); 11 Oct 2006 02:46:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33887 invoked by uid 99); 11 Oct 2006 02:46:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 19:46:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 19:46:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A04B7142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 19:45:21 -0700 (PDT)
Message-ID: <4536100.1160534721300.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 19:45:21 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-514) namenode heartbeat interval should be
 configurable
In-Reply-To: <17229842.1157594543761.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-514?page=all ]

Milind Bhandarkar updated HADOOP-514:
-------------------------------------

    Attachment: heartbeat.patch

Mde heartbeat configurable, in seconds, though.

> namenode heartbeat interval should be configurable
> --------------------------------------------------
>
>                 Key: HADOOP-514
>                 URL: http://issues.apache.org/jira/browse/HADOOP-514
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Wendy Chien
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: heartbeat.patch
>
>
> The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 02:46:09 2006
Return-Path: 
 <hadoop-dev-return-4210-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26434 invoked from network); 11 Oct 2006 02:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 02:46:09 -0000
Received: (qmail 34163 invoked by uid 500); 11 Oct 2006 02:46:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34133 invoked by uid 500); 11 Oct 2006 02:46:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34124 invoked by uid 99); 11 Oct 2006 02:46:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 19:46:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 19:46:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 12E147141E3
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 19:45:23 -0700 (PDT)
Message-ID: <11236655.1160534723075.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 19:45:23 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-514) namenode heartbeat interval should be
 configurable
In-Reply-To: <17229842.1157594543761.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-514?page=all ]

Milind Bhandarkar updated HADOOP-514:
-------------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.8.0
    Affects Version/s: 0.7.0

Attached patch.

> namenode heartbeat interval should be configurable
> --------------------------------------------------
>
>                 Key: HADOOP-514
>                 URL: http://issues.apache.org/jira/browse/HADOOP-514
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Wendy Chien
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: heartbeat.patch
>
>
> The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 03:21:10 2006
Return-Path: 
 <hadoop-dev-return-4211-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33120 invoked from network); 11 Oct 2006 03:21:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 03:21:10 -0000
Received: (qmail 64518 invoked by uid 500); 11 Oct 2006 03:21:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64502 invoked by uid 500); 11 Oct 2006 03:21:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64491 invoked by uid 99); 11 Oct 2006 03:21:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 20:21:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 20:21:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1D127142E1
	for <hadoop-dev@lucene.apache.org>; Tue, 10 Oct 2006 20:20:23 -0700 (PDT)
Message-ID: <24984027.1160536823660.JavaMail.root@brutus>
Date: Tue, 10 Oct 2006 20:20:23 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441336 ] 
            
Arun C Murthy commented on HADOOP-489:
--------------------------------------

I meant a) conceptually with b) being the actual implementation ... and yes, I was proposing exactly what you have in mind. We're on the same page now.

> I'd leave the save to dfs for a second pass, and it can only be done once the job is complete. 
Makes sense... 

How about just leaving the spills as they are on the task-tracker? Do we need to do concatenate them to a single job-log? It does make serving the files of a completed job simpler... we can explore concatenating 'all' spills into dfs in the second pass.



> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 10:56:01 2006
Return-Path: 
 <hadoop-dev-return-4212-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61862 invoked from network); 11 Oct 2006 10:56:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 10:56:01 -0000
Received: (qmail 42058 invoked by uid 500); 11 Oct 2006 10:56:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41843 invoked by uid 500); 11 Oct 2006 10:56:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41831 invoked by uid 99); 11 Oct 2006 10:56:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 03:56:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 03:56:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96C8B7142E2
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 03:55:19 -0700 (PDT)
Message-ID: <21868771.1160564119615.JavaMail.root@brutus>
Date: Wed, 11 Oct 2006 03:55:19 -0700 (PDT)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-595) Browsing content of filesystem over
 HTTP not works
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Browsing content of filesystem over HTTP not works
--------------------------------------------------

                 Key: HADOOP-595
                 URL: http://issues.apache.org/jira/browse/HADOOP-595
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.0
            Reporter: Vladimir Krokhmalyov


When I click "Browse the filesystem" in my browser I get following:

An error occurred while loading http://localhost.localdomain:50070/nn_browsedfscontent.jsp:
Could not connect to host localhost.localdomain (port 65535).

In HADOOP 0.6.2 it works properly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 11:40:07 2006
Return-Path: 
 <hadoop-dev-return-4213-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77856 invoked from network); 11 Oct 2006 11:40:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 11:40:07 -0000
Received: (qmail 17848 invoked by uid 500); 11 Oct 2006 11:40:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17827 invoked by uid 500); 11 Oct 2006 11:40:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17818 invoked by uid 99); 11 Oct 2006 11:40:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 04:40:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 04:40:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 48E687142E2
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 04:39:25 -0700 (PDT)
Message-ID: <28181150.1160566765294.JavaMail.root@brutus>
Date: Wed, 11 Oct 2006 04:39:25 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-595) Browsing content of filesystem over
 HTTP not works
In-Reply-To: <21868771.1160564119615.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-595?page=comments#action_12441425 ] 
            
Yoram Arnon commented on HADOOP-595:
------------------------------------

it works fine for me, using the default config: namenode uses info port 50070, datanode uses 50075

> Browsing content of filesystem over HTTP not works
> --------------------------------------------------
>
>                 Key: HADOOP-595
>                 URL: http://issues.apache.org/jira/browse/HADOOP-595
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Vladimir Krokhmalyov
>
> When I click "Browse the filesystem" in my browser I get following:
> An error occurred while loading http://localhost.localdomain:50070/nn_browsedfscontent.jsp:
> Could not connect to host localhost.localdomain (port 65535).
> In HADOOP 0.6.2 it works properly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 12:44:03 2006
Return-Path: 
 <hadoop-dev-return-4214-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93312 invoked from network); 11 Oct 2006 12:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 12:44:03 -0000
Received: (qmail 14299 invoked by uid 500); 11 Oct 2006 12:44:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14261 invoked by uid 500); 11 Oct 2006 12:44:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14252 invoked by uid 99); 11 Oct 2006 12:44:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 05:44:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 05:44:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9DAC27142DC
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 05:43:19 -0700 (PDT)
Message-ID: <31153390.1160570599642.JavaMail.root@brutus>
Date: Wed, 11 Oct 2006 05:43:19 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-596) TaskTracker taskstatus's phase doesnt
 get updated on phase transition causing wrong values displayed in WI
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TaskTracker taskstatus's phase doesnt get updated on phase transition causing wrong values displayed in WI
----------------------------------------------------------------------------------------------------------

                 Key: HADOOP-596
                 URL: http://issues.apache.org/jira/browse/HADOOP-596
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.0
            Reporter: Sanjay Dahiya
         Assigned To: Sanjay Dahiya
             Fix For: 0.8.0


On task phase transition from shuffle > sort > reduce, the new phase doesnt get updated in task tracker's cached TaskStatus  causing wrong values displayed in WI. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 13:25:06 2006
Return-Path: 
 <hadoop-dev-return-4215-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8656 invoked from network); 11 Oct 2006 13:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 13:25:06 -0000
Received: (qmail 86870 invoked by uid 500); 11 Oct 2006 13:25:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86834 invoked by uid 500); 11 Oct 2006 13:25:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86825 invoked by uid 99); 11 Oct 2006 13:25:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 06:25:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 06:25:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7AA27142E2
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 06:24:23 -0700 (PDT)
Message-ID: <22782193.1160573063748.JavaMail.root@brutus>
Date: Wed, 11 Oct 2006 06:24:23 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya reassigned HADOOP-76:
-----------------------------------

    Assignee: Sanjay Dahiya  (was: Owen O'Malley)

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 13:25:09 2006
Return-Path: 
 <hadoop-dev-return-4216-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8698 invoked from network); 11 Oct 2006 13:25:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 13:25:09 -0000
Received: (qmail 87112 invoked by uid 500); 11 Oct 2006 13:25:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87083 invoked by uid 500); 11 Oct 2006 13:25:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87074 invoked by uid 99); 11 Oct 2006 13:25:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 06:25:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 06:25:07 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EF1D27142DC
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 06:24:26 -0700 (PDT)
Message-ID: <3563035.1160573066976.JavaMail.root@brutus>
Date: Wed, 11 Oct 2006 06:24:26 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-76) Implement speculative re-execution
 of reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Work on HADOOP-76 started by Sanjay Dahiya.

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 13:37:05 2006
Return-Path: 
 <hadoop-dev-return-4217-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12206 invoked from network); 11 Oct 2006 13:37:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 13:37:05 -0000
Received: (qmail 18303 invoked by uid 500); 11 Oct 2006 13:37:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18283 invoked by uid 500); 11 Oct 2006 13:37:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18274 invoked by uid 99); 11 Oct 2006 13:37:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 06:37:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 06:37:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 817C07142E2
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 06:36:22 -0700 (PDT)
Message-ID: <22529416.1160573782527.JavaMail.root@brutus>
Date: Wed, 11 Oct 2006 06:36:22 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12441456 ] 
            
Sanjay Dahiya commented on HADOOP-76:
-------------------------------------

Here is a list of code level changes, I will test this stuff meanwhile

- Adding extra jobConf configuration - runSpeculativeReduces. 

- TaskInProgress maintains a list of nodes where it has already ran ( or is running ), this will be used to not schedule a speculative instance where the task is already running or has failed in past. [TIP already contains a list of nodes where it task failed ]. 

- Another option is if *any* reduce task is already assigned to this TT and is still running, then its not assigned a speculative task. [comments?]

- TIP.hasSpeculative task , now checks for reduce tasks as well. currently it checks for only map tasks. The exact condition(timeouts) in which reduce task should be executed speculatively is open for discussion. using johan's conditions(finishedReduces / numReduceTasks >= 0.7 ) for testing till then. 

- JobInProgress.findNewTask - looks for speculative tasks (TIP.hasSpeculativeTask()) and whether the task ran on same task tracker. 

- If speculative execution of reduce is enabled then ReduceTask.run() creates a temp file name for reduce output. When reduce task finishes it checks if the output file is already written by some other reduce instance else it renames its output to final output. otherwise temp output is deleted. 

- TaskTracker.TIP.cleanup() also cleans up the reduce task temp file if it is killed in between. 

- JobTracker.pollForTaskWithClosedJob(), TIP.shouldCloseForClosedJob() - return true if a speculative reduce task finished first, which ultimately goes down to TT and kills/cleans up the task.

The exact condition(timeouts) in which reduce task should be executed speculatively is open for discussion. 

comments? 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 14:13:03 2006
Return-Path: 
 <hadoop-dev-return-4218-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27862 invoked from network); 11 Oct 2006 14:13:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 14:13:03 -0000
Received: (qmail 8489 invoked by uid 500); 11 Oct 2006 14:13:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8270 invoked by uid 500); 11 Oct 2006 14:13:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8255 invoked by uid 99); 11 Oct 2006 14:13:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 07:13:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 07:13:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1095E7142DD
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 07:12:21 -0700 (PDT)
Message-ID: <26564747.1160575941064.JavaMail.root@brutus>
Date: Wed, 11 Oct 2006 07:12:21 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-588) JobTracker History bug - kill() ed
 tasks are logged wrongly as finished.
In-Reply-To: <2570477.1160468241401.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-588?page=all ]

Sanjay Dahiya updated HADOOP-588:
---------------------------------

    Attachment: Hadoop-588-extra.patch

Submitting one more patch related to history with this bug ID. 
With this patch analyze history on WI will not attempt to analyze in case job did not succeed. 

note: it doesnt replace the existing patch, its in addition to that. 

> JobTracker History bug - kill() ed tasks are logged wrongly as finished.
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-588
>                 URL: http://issues.apache.org/jira/browse/HADOOP-588
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.7.1
>
>         Attachments: Hadoop-588-extra.patch, Hadoop-588.patch
>
>
> JobInProgress.kill() logs jobs as finished in jobtracker history, whereas they should be logged as failed. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 16:51:19 2006
Return-Path: 
 <hadoop-dev-return-4219-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73961 invoked from network); 11 Oct 2006 16:51:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 16:51:19 -0000
Received: (qmail 67336 invoked by uid 500); 11 Oct 2006 16:51:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67316 invoked by uid 500); 11 Oct 2006 16:51:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67307 invoked by uid 99); 11 Oct 2006 16:51:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 09:51:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 09:51:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1E6347142DF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 09:50:36 -0700 (PDT)
Message-ID: <20558558.1160585436089.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 09:50:36 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-591) Reducer sort should even out the
 pass factors in merging different pass
In-Reply-To: <31534512.1160500579703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-591?page=comments#action_12441494 ] 
            
Runping Qi commented on HADOOP-591:
-----------------------------------


Another strategy is to do one merge per pass. At the end of each pass, replace the just merged segments with the new segment in the segment list. Always choose the smallest segments from the segment list to merge. Each pass except the first one merges pass factor number of segments into one, reducing the segment list by pass factor minus one. Let T be the total number of segments, P the pass factor, The number of segments for the first pass will be  P if   (T-1) % (P-1) = 0; and (T-1)%(P-1) + 1 otherwise.
This strategy will minimize the volume of data copied during the merge process.

For the example in the previous comment. the first pass will merge the smallest 2 segments, and then the second pass merge the new segment with the remaining 99 segments.



> Reducer sort should even out the pass factors in merging different pass
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-591
>                 URL: http://issues.apache.org/jira/browse/HADOOP-591
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>
> When multiple pass merging is needed during sort, the current sort implementation in SequenceFile class uses a simple "greedy" way to select pass factors, resulting uneven pass factor in different passes. For example, if the factor pass is 100 (the default), and there are 101 segments to be merged. The current implementation will first merge the first 100 segments into one and then merge the big output file with the last segment with pass factor 2. It will be better off to use pass factors 11 in the first pass and pass factor 10 in the second pass.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 16:59:17 2006
Return-Path: 
 <hadoop-dev-return-4220-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76861 invoked from network); 11 Oct 2006 16:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 16:59:17 -0000
Received: (qmail 87851 invoked by uid 500); 11 Oct 2006 16:59:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87833 invoked by uid 500); 11 Oct 2006 16:59:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87824 invoked by uid 99); 11 Oct 2006 16:59:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 09:59:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 09:59:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 03B567142DF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 09:58:35 -0700 (PDT)
Message-ID: <18614380.1160585915012.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 09:58:35 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-597) transmission errors to the reduce will
 cause map output to be considered lost
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

transmission errors to the reduce will cause map output to be considered lost
-----------------------------------------------------------------------------

                 Key: HADOOP-597
                 URL: http://issues.apache.org/jira/browse/HADOOP-597
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.7.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.7.1


When the mapOutput servlet gets an IOException from reading the map output file, it correctly declares the map output lost. However, an IOException writing to the socket should NOT cause the map output to be declared lost. Unfortunately, the current implementation always declares the map output lost. When the map output is lost, the map is re-run on a different computer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 17:23:22 2006
Return-Path: 
 <hadoop-dev-return-4221-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83427 invoked from network); 11 Oct 2006 17:23:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 17:23:22 -0000
Received: (qmail 38569 invoked by uid 500); 11 Oct 2006 17:23:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38493 invoked by uid 500); 11 Oct 2006 17:23:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38481 invoked by uid 99); 11 Oct 2006 17:23:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 10:23:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 10:23:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9E3997142EF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 10:22:37 -0700 (PDT)
Message-ID: <5274472.1160587357645.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 10:22:37 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-597) transmission errors to the reduce will
 cause map output to be considered lost
In-Reply-To: <18614380.1160585915012.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-597?page=all ]

Owen O'Malley updated HADOOP-597:
---------------------------------

    Attachment: map-output-protect.patch

Here is a patch that fixes the problem. I use a flag to mark that the fault was on the input and therefore the map output should be declared lost. I'm not really that happy with all of the catches that rethrow, but I didn't see a more straightforward way of getting the right effect.

> transmission errors to the reduce will cause map output to be considered lost
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-597
>                 URL: http://issues.apache.org/jira/browse/HADOOP-597
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.1
>
>         Attachments: map-output-protect.patch
>
>
> When the mapOutput servlet gets an IOException from reading the map output file, it correctly declares the map output lost. However, an IOException writing to the socket should NOT cause the map output to be declared lost. Unfortunately, the current implementation always declares the map output lost. When the map output is lost, the map is re-run on a different computer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 17:51:23 2006
Return-Path: 
 <hadoop-dev-return-4222-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90653 invoked from network); 11 Oct 2006 17:51:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 17:51:23 -0000
Received: (qmail 85531 invoked by uid 500); 11 Oct 2006 17:51:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85507 invoked by uid 500); 11 Oct 2006 17:51:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85498 invoked by uid 99); 11 Oct 2006 17:51:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 10:51:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 10:51:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B5277142EF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 10:50:40 -0700 (PDT)
Message-ID: <22709174.1160589040240.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 10:50:40 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-593) NullPointerException in JobTracker's
 ExireTaskTracker thread
In-Reply-To: <19327807.1160506881826.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-593?page=all ]

Doug Cutting updated HADOOP-593:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> NullPointerException in JobTracker's ExireTaskTracker thread
> ------------------------------------------------------------
>
>                 Key: HADOOP-593
>                 URL: http://issues.apache.org/jira/browse/HADOOP-593
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Critical
>             Fix For: 0.7.1
>
>         Attachments: catch-exceptions-in-jt.patch
>
>
> The JobTracker's thread that finds dead task trackers is getting a NullPointerException:
> Exception in thread "Thread-19" java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobInProgress.failedTask(JobInProgress.java:614)
>         at org.apache.hadoop.mapred.JobInProgress.updateTaskStatus(JobInProgress.java:291)
>         at org.apache.hadoop.mapred.JobInProgress.failedTask(JobInProgress.java:674)
>         at org.apache.hadoop.mapred.JobTracker.lostTaskTracker(JobTracker.java:1204)
>         at org.apache.hadoop.mapred.JobTracker$ExpireTrackers.run(JobTracker.java:225)
>         at java.lang.Thread.run(Thread.java:595)
> Which kills the thread and prevents any other task trackers from being killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 17:58:23 2006
Return-Path: 
 <hadoop-dev-return-4223-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92392 invoked from network); 11 Oct 2006 17:58:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 17:58:23 -0000
Received: (qmail 92687 invoked by uid 500); 11 Oct 2006 17:58:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92668 invoked by uid 500); 11 Oct 2006 17:58:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92655 invoked by uid 99); 11 Oct 2006 17:58:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 10:58:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 10:58:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10B2C7142DF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 10:57:36 -0700 (PDT)
Message-ID: <1576918.1160589456065.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 10:57:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-592) NullPointerException in toString for
 RPC connection objects
In-Reply-To: <17915790.1160503819709.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-592?page=all ]

Doug Cutting updated HADOOP-592:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> NullPointerException in toString for RPC connection objects
> -----------------------------------------------------------
>
>                 Key: HADOOP-592
>                 URL: http://issues.apache.org/jira/browse/HADOOP-592
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.7.1
>
>         Attachments: connection-null-ptr.patch
>
>
> If the socket is closed when the log message is generated, the toString method gets a NullPointerException.
> The exception is caught and logged, but happens often enough that administrators will worry about it. It also loses useful debugging information.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 18:05:18 2006
Return-Path: 
 <hadoop-dev-return-4224-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94090 invoked from network); 11 Oct 2006 18:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 18:05:18 -0000
Received: (qmail 15984 invoked by uid 500); 11 Oct 2006 18:05:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15954 invoked by uid 500); 11 Oct 2006 18:05:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15944 invoked by uid 99); 11 Oct 2006 18:05:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:05:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:05:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 118FB7142DF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 11:04:36 -0700 (PDT)
Message-ID: <7438305.1160589876068.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 11:04:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-588) JobTracker History bug - kill() ed
 tasks are logged wrongly as finished.
In-Reply-To: <2570477.1160468241401.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-588?page=all ]

Owen O'Malley updated HADOOP-588:
---------------------------------

    Fix Version/s: 0.8.0
                       (was: 0.7.1)

I think that we should push this to 0.8.0 since it is not a stability issue.

> JobTracker History bug - kill() ed tasks are logged wrongly as finished.
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-588
>                 URL: http://issues.apache.org/jira/browse/HADOOP-588
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.8.0
>
>         Attachments: Hadoop-588-extra.patch, Hadoop-588.patch
>
>
> JobInProgress.kill() logs jobs as finished in jobtracker history, whereas they should be logged as failed. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 18:09:18 2006
Return-Path: 
 <hadoop-dev-return-4225-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94640 invoked from network); 11 Oct 2006 18:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 18:09:18 -0000
Received: (qmail 20932 invoked by uid 500); 11 Oct 2006 18:09:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20713 invoked by uid 500); 11 Oct 2006 18:09:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20704 invoked by uid 99); 11 Oct 2006 18:09:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:09:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:09:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 30A6B7142DF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 11:08:36 -0700 (PDT)
Message-ID: <9499391.1160590116196.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 11:08:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-597) transmission errors to the reduce
 will cause map output to be considered lost
In-Reply-To: <18614380.1160585915012.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-597?page=comments#action_12441520 ] 
            
Doug Cutting commented on HADOOP-597:
-------------------------------------

Half the number of try/catch blocks would be required if you instead wrapped the outStream operations and use a badOutput boolean, no?

> transmission errors to the reduce will cause map output to be considered lost
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-597
>                 URL: http://issues.apache.org/jira/browse/HADOOP-597
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.1
>
>         Attachments: map-output-protect.patch
>
>
> When the mapOutput servlet gets an IOException from reading the map output file, it correctly declares the map output lost. However, an IOException writing to the socket should NOT cause the map output to be declared lost. Unfortunately, the current implementation always declares the map output lost. When the map output is lost, the map is re-run on a different computer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 19:02:17 2006
Return-Path: 
 <hadoop-dev-return-4226-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11010 invoked from network); 11 Oct 2006 19:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 19:02:17 -0000
Received: (qmail 81493 invoked by uid 500); 11 Oct 2006 19:02:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81274 invoked by uid 500); 11 Oct 2006 19:02:16 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81265 invoked by uid 99); 11 Oct 2006 19:02:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:02:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:02:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C8DB7142DF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 12:01:35 -0700 (PDT)
Message-ID: <32377517.1160593295111.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 12:01:35 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-598) rpc timeout in Task.done kills task
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

rpc timeout in Task.done kills task
-----------------------------------

                 Key: HADOOP-598
                 URL: http://issues.apache.org/jira/browse/HADOOP-598
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.7.0
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.7.1


When tasks are done and try to signal the task tracker that they are done, a single rpc timeout will kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 19:04:18 2006
Return-Path: 
 <hadoop-dev-return-4227-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11752 invoked from network); 11 Oct 2006 19:04:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 19:04:18 -0000
Received: (qmail 84000 invoked by uid 500); 11 Oct 2006 19:04:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83977 invoked by uid 500); 11 Oct 2006 19:04:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83968 invoked by uid 99); 11 Oct 2006 19:04:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:04:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:04:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1B7D97142E2
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 12:03:36 -0700 (PDT)
Message-ID: <7835519.1160593416110.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 12:03:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-597) transmission errors to the reduce will
 cause map output to be considered lost
In-Reply-To: <18614380.1160585915012.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-597?page=all ]

Owen O'Malley updated HADOOP-597:
---------------------------------

    Attachment: map-output-protect-2.patch

Ok, as suggested by Doug, I inverted the check and wrapped the socket.write call with a specialized check. Thanks!

> transmission errors to the reduce will cause map output to be considered lost
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-597
>                 URL: http://issues.apache.org/jira/browse/HADOOP-597
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.1
>
>         Attachments: map-output-protect-2.patch, map-output-protect.patch
>
>
> When the mapOutput servlet gets an IOException from reading the map output file, it correctly declares the map output lost. However, an IOException writing to the socket should NOT cause the map output to be declared lost. Unfortunately, the current implementation always declares the map output lost. When the map output is lost, the map is re-run on a different computer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 19:11:18 2006
Return-Path: 
 <hadoop-dev-return-4228-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13323 invoked from network); 11 Oct 2006 19:11:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 19:11:18 -0000
Received: (qmail 90797 invoked by uid 500); 11 Oct 2006 19:11:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90769 invoked by uid 500); 11 Oct 2006 19:11:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90760 invoked by uid 99); 11 Oct 2006 19:11:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:11:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:11:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1960C7142DF
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 12:10:36 -0700 (PDT)
Message-ID: <2942139.1160593836101.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 12:10:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-598) rpc timeout in Task.done kills task
In-Reply-To: <32377517.1160593295111.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-598?page=all ]

Owen O'Malley updated HADOOP-598:
---------------------------------

    Attachment: task-done.patch

This patch will cause Task.done to retry upto 10 times before giving up and throwing, which will kill the task.

> rpc timeout in Task.done kills task
> -----------------------------------
>
>                 Key: HADOOP-598
>                 URL: http://issues.apache.org/jira/browse/HADOOP-598
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.1
>
>         Attachments: task-done.patch
>
>
> When tasks are done and try to signal the task tracker that they are done, a single rpc timeout will kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 19:13:18 2006
Return-Path: 
 <hadoop-dev-return-4229-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14040 invoked from network); 11 Oct 2006 19:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 19:13:18 -0000
Received: (qmail 94174 invoked by uid 500); 11 Oct 2006 19:13:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94060 invoked by uid 500); 11 Oct 2006 19:13:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94051 invoked by uid 99); 11 Oct 2006 19:13:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:13:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:13:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B7637142E2
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 12:12:36 -0700 (PDT)
Message-ID: <2137098.1160593956175.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 12:12:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-598) rpc timeout in Task.done kills task
In-Reply-To: <32377517.1160593295111.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-598?page=all ]

Owen O'Malley updated HADOOP-598:
---------------------------------

    Status: Patch Available  (was: Open)

> rpc timeout in Task.done kills task
> -----------------------------------
>
>                 Key: HADOOP-598
>                 URL: http://issues.apache.org/jira/browse/HADOOP-598
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.1
>
>         Attachments: task-done.patch
>
>
> When tasks are done and try to signal the task tracker that they are done, a single rpc timeout will kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 19:25:21 2006
Return-Path: 
 <hadoop-dev-return-4230-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23840 invoked from network); 11 Oct 2006 19:25:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 19:25:21 -0000
Received: (qmail 6937 invoked by uid 500); 11 Oct 2006 19:25:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6916 invoked by uid 500); 11 Oct 2006 19:25:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6907 invoked by uid 99); 11 Oct 2006 19:25:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:25:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:25:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2EE957141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 12:24:37 -0700 (PDT)
Message-ID: <22623994.1160594677159.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 12:24:37 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538_20061011.tgz

Here's another patch incorporating all features listed here: http://issues.apache.org/jira/browse/HADOOP-538#action_12439996 with a few additions:
* org.apache.hadoop.io.compress.zlib.{Com|Decom}pressor classes can now encode/decode both zlib and gzip formats. This is used in GzipCodec now.
* I have added a switch: 'hadoop.native.library' in hadoop-default.xml to let users control whether or not they wish to use the native code.
* Fixed an issue with autom4te which generated autom4te.cache in src/native

Doug - could you please copy the attached libhadoop-linux-i386.so in trunk/lib/native first before attempting to build native-hadoop? It will need to be committed also... thanks!

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 19:27:19 2006
Return-Path: 
 <hadoop-dev-return-4231-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24367 invoked from network); 11 Oct 2006 19:27:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 19:27:19 -0000
Received: (qmail 8914 invoked by uid 500); 11 Oct 2006 19:27:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8895 invoked by uid 500); 11 Oct 2006 19:27:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8886 invoked by uid 99); 11 Oct 2006 19:27:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:27:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:27:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D9FD7141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 12:26:36 -0700 (PDT)
Message-ID: <27510302.1160594796053.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 12:26:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-594) Safemode default threshold should be
 0.999
In-Reply-To: <11970307.1160527939653.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-594?page=all ]

Doug Cutting updated HADOOP-594:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.1
       Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> Safemode default threshold should be 0.999
> ------------------------------------------
>
>                 Key: HADOOP-594
>                 URL: http://issues.apache.org/jira/browse/HADOOP-594
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.7.1
>
>         Attachments: DefaultThreshold.patch
>
>
> We want all blocks reported before we leave safemode, except for just a few that might be missing or corrupted.
> So it's effectively 1.0 but not quite.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 19:35:19 2006
Return-Path: 
 <hadoop-dev-return-4232-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 27200 invoked from network); 11 Oct 2006 19:35:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 19:35:19 -0000
Received: (qmail 23786 invoked by uid 500); 11 Oct 2006 19:35:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23768 invoked by uid 500); 11 Oct 2006 19:35:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23759 invoked by uid 99); 11 Oct 2006 19:35:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:35:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:35:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0AAA07141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 12:34:36 -0700 (PDT)
Message-ID: <30628238.1160595276041.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 12:34:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-598) rpc timeout in Task.done kills task
In-Reply-To: <32377517.1160593295111.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-598?page=all ]

Doug Cutting updated HADOOP-598:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> rpc timeout in Task.done kills task
> -----------------------------------
>
>                 Key: HADOOP-598
>                 URL: http://issues.apache.org/jira/browse/HADOOP-598
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.1
>
>         Attachments: task-done.patch
>
>
> When tasks are done and try to signal the task tracker that they are done, a single rpc timeout will kill the task.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 19:47:18 2006
Return-Path: 
 <hadoop-dev-return-4233-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30814 invoked from network); 11 Oct 2006 19:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 19:47:18 -0000
Received: (qmail 42498 invoked by uid 500); 11 Oct 2006 19:47:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42355 invoked by uid 500); 11 Oct 2006 19:47:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42346 invoked by uid 99); 11 Oct 2006 19:47:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:47:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 12:47:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 104B37141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 12:46:36 -0700 (PDT)
Message-ID: <18142585.1160595996064.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 12:46:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-597) transmission errors to the reduce
 will cause map output to be considered lost
In-Reply-To: <18614380.1160585915012.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-597?page=all ]

Doug Cutting resolved HADOOP-597.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Owen.

> transmission errors to the reduce will cause map output to be considered lost
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-597
>                 URL: http://issues.apache.org/jira/browse/HADOOP-597
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.0
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.1
>
>         Attachments: map-output-protect-2.patch, map-output-protect.patch
>
>
> When the mapOutput servlet gets an IOException from reading the map output file, it correctly declares the map output lost. However, an IOException writing to the socket should NOT cause the map output to be declared lost. Unfortunately, the current implementation always declares the map output lost. When the map output is lost, the map is re-run on a different computer.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 20:17:19 2006
Return-Path: 
 <hadoop-dev-return-4234-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44291 invoked from network); 11 Oct 2006 20:17:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 20:17:19 -0000
Received: (qmail 96087 invoked by uid 500); 11 Oct 2006 20:17:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95872 invoked by uid 500); 11 Oct 2006 20:17:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95863 invoked by uid 99); 11 Oct 2006 20:17:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 13:17:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 13:17:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B20037141D1
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 13:16:36 -0700 (PDT)
Message-ID: <16575258.1160597796726.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 13:16:36 -0700 (PDT)
From: "Trevor Strohman (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Trevor Strohman updated HADOOP-525:
-----------------------------------

    Attachment: TypeBuilder.java

TypeBuilder class used in another MapReduce implementation.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: TypeBuilder.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 20:19:22 2006
Return-Path: 
 <hadoop-dev-return-4235-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45032 invoked from network); 11 Oct 2006 20:19:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 20:19:22 -0000
Received: (qmail 97469 invoked by uid 500); 11 Oct 2006 20:19:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97450 invoked by uid 500); 11 Oct 2006 20:19:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97441 invoked by uid 99); 11 Oct 2006 20:19:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 13:19:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 13:19:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 265D67141E3
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 13:18:39 -0700 (PDT)
Message-ID: <12145735.1160597919154.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 13:18:39 -0700 (PDT)
From: "Trevor Strohman (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Trevor Strohman updated HADOOP-525:
-----------------------------------

    Attachment: WordCountType.java

Example Type class autogenerated by TypeBuilder.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 20:23:19 2006
Return-Path: 
 <hadoop-dev-return-4236-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46792 invoked from network); 11 Oct 2006 20:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 20:23:19 -0000
Received: (qmail 6876 invoked by uid 500); 11 Oct 2006 20:23:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6670 invoked by uid 500); 11 Oct 2006 20:23:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6661 invoked by uid 99); 11 Oct 2006 20:23:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 13:23:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 13:23:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DAB1F7142D8
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 13:22:36 -0700 (PDT)
Message-ID: <12861908.1160598156891.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 13:22:36 -0700 (PDT)
From: "Trevor Strohman (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Trevor Strohman updated HADOOP-525:
-----------------------------------

    Attachment: TypeBuilder-support.tar

Support code for TypeBuilder.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 20:25:22 2006
Return-Path: 
 <hadoop-dev-return-4237-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47628 invoked from network); 11 Oct 2006 20:25:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 20:25:22 -0000
Received: (qmail 11524 invoked by uid 500); 11 Oct 2006 20:25:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11496 invoked by uid 500); 11 Oct 2006 20:25:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11487 invoked by uid 99); 11 Oct 2006 20:25:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 13:25:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 13:25:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A50547142DD
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 13:24:39 -0700 (PDT)
Message-ID: <30335293.1160598279673.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 13:24:39 -0700 (PDT)
From: "Trevor Strohman (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-525) Need raw comparators for hadoop
 record types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-525?page=comments#action_12441544 ] 
            
Trevor Strohman commented on HADOOP-525:
----------------------------------------

I just added three files (TypeBuilder, WordCountType and TypeBuilder-support.tar) to this issue based on the thread referenced below.  This code comes from my own MapReduce implementation and is not directly Hadoop-compatible.  The code here handles automatic generation of record comparators, hash functions, and serialization code.  The serialization code in particular uses knowledge of object order to compress the output.

Reference: http://mail-archives.apache.org/mod_mbox/lucene-hadoop-user/200610.mbox/%3c452D1CA7.40000@apache.org%3e

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 21:14:19 2006
Return-Path: 
 <hadoop-dev-return-4238-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65022 invoked from network); 11 Oct 2006 21:14:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 21:14:19 -0000
Received: (qmail 88463 invoked by uid 500); 11 Oct 2006 21:14:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88407 invoked by uid 500); 11 Oct 2006 21:14:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88398 invoked by uid 99); 11 Oct 2006 21:14:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 14:14:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 14:14:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3D007142E4
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 14:13:36 -0700 (PDT)
Message-ID: <17010736.1160601216734.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 14:13:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-255) Client Calls are not cancelled after a
 call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-255?page=all ]

Doug Cutting updated HADOOP-255:
--------------------------------

    Fix Version/s: 0.7.1
                       (was: 0.8.0)

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: rpc-timeout-2.patch, rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 11 21:14:21 2006
Return-Path: 
 <hadoop-dev-return-4239-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65062 invoked from network); 11 Oct 2006 21:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 21:14:21 -0000
Received: (qmail 88682 invoked by uid 500); 11 Oct 2006 21:14:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88663 invoked by uid 500); 11 Oct 2006 21:14:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88654 invoked by uid 99); 11 Oct 2006 21:14:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 14:14:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 14:14:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 94DF87142F3
	for <hadoop-dev@lucene.apache.org>; Wed, 11 Oct 2006 14:13:38 -0700 (PDT)
Message-ID: <23471957.1160601218606.JavaMail.jira@brutus>
Date: Wed, 11 Oct 2006 14:13:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-255) Client Calls are not cancelled after a
 call timeout
In-Reply-To: <1746800.1148596289846.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-255?page=all ]

Doug Cutting updated HADOOP-255:
--------------------------------

    Fix Version/s: 0.7.0
                       (was: 0.7.1)

This was included in the 0.7.0 release, but mistakenly marked for 0.8.0.

> Client Calls are not cancelled after a call timeout
> ---------------------------------------------------
>
>                 Key: HADOOP-255
>                 URL: http://issues.apache.org/jira/browse/HADOOP-255
>             Project: Hadoop
>          Issue Type: Bug
>          Components: ipc
>    Affects Versions: 0.2.1
>         Environment: Tested on Linux 2.6
>            Reporter: Naveen Nalam
>         Assigned To: Owen O'Malley
>             Fix For: 0.7.0
>
>         Attachments: rpc-timeout-2.patch, rpc-timeout.patch
>
>
> In ipc/Client.java, if a call times out, a SocketTimeoutException is thrown but the Call object still exists on the queue.
> What I found was that when transferring very large amounts of data, it's common for queued up calls to timeout. Yet even though the caller has is no longer waiting, the request is still serviced on the server and the data is sent to the client. The client after receiving the full response calls callComplete() which is a noop since nobody is waiting.
> The problem is that the calls that timeout will retry and the system gets into a situation where data is being transferred around, but it's all data for timed out requests and no progress is ever made.
> My quick solution to this was to add a "boolean timedout" to the Call object which I set to true whenever the queued caller times out. And then when the client starts to pull over the response data (in Connection::run) to first check if the Call is timedout and immediately close the connection.
> I think a good fix for this is to queue requests on the client, and do a single sendParam only when there is no outstanding request. This will allow closing the connection when receiving a response for a request we no longer have pending, reopen the connection, and resend the next queued request. I can provide a patch for this, but I've seen a lot of recent activity in this area so I'd like to get some feedback first.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 07:03:22 2006
Return-Path: 
 <hadoop-dev-return-4240-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54350 invoked from network); 12 Oct 2006 07:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 07:03:22 -0000
Received: (qmail 67412 invoked by uid 500); 12 Oct 2006 07:03:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67094 invoked by uid 500); 12 Oct 2006 07:03:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67064 invoked by uid 99); 12 Oct 2006 07:03:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 00:03:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 00:03:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F31D47142DF
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 00:02:34 -0700 (PDT)
Message-ID: <25432427.1160636554993.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 00:02:34 -0700 (PDT)
From: "Albert Chern (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-599) DFS Always Reports 0 Bytes Used
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFS Always Reports 0 Bytes Used
-------------------------------

                 Key: HADOOP-599
                 URL: http://issues.apache.org/jira/browse/HADOOP-599
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.1, 0.7.0, 0.6.2, 0.6.1, 0.6.0
         Environment: Ubuntu
            Reporter: Albert Chern
            Priority: Minor


Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:

Long remaining = new Long(volumes[idx].getCapacity();

to:

Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 07:56:21 2006
Return-Path: 
 <hadoop-dev-return-4241-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75898 invoked from network); 12 Oct 2006 07:56:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 07:56:21 -0000
Received: (qmail 33390 invoked by uid 500); 12 Oct 2006 07:56:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33185 invoked by uid 500); 12 Oct 2006 07:56:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33176 invoked by uid 99); 12 Oct 2006 07:56:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 00:56:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 00:56:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 183FA7142DF
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 00:55:36 -0700 (PDT)
Message-ID: <31680917.1160639736096.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 00:55:36 -0700 (PDT)
From: "Vladimir Krokhmalyov (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-595) Browsing content of filesystem over
 HTTP not works
In-Reply-To: <21868771.1160564119615.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-595?page=comments#action_12441653 ] 
            
Vladimir Krokhmalyov commented on HADOOP-595:
---------------------------------------------

My steps:
1. Unpack hadoop-0.7.0.tar.gz into /root/hadoop-0.7.0
2. Set export JAVA_HOME=/usr in hadoop-env.sh
3. Change hadoop-site.xml:

<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>

<property>
  <name>fs.default.name</name>
  <value>localhost:65408</value>
  <description>The name of the default file system.  Either the
  literal string "local" or a host:port for DFS.</description>
</property>

<property>
  <name>mapred.job.tracker</name>
  <value>localhost:65472</value>
  <description>The host and port that the MapReduce job tracker runs
  at.  If "local", then jobs are run in-process as a single map
  and reduce task.
  </description>
</property>

<property>
  <name>dfs.replication</name>
  <value>1</value>
  <description>Default block replication. 
  The actual number of replications can be specified when the file is created.
  The default is used if replication is not specified in create time.
  </description>
</property>

</configuration>

4. cd /root/hadoop-0.7.0/bin
5. ./start-dfs.sh   -> OK
6. Connect http://localhost:50070   -> OK
7. Click "Browse the filesystem"   ->

An error occurred while loading http://localhost.localdomain:50070/nn_browsedfscontent.jsp: 
Could not connect to host localhost.localdomain (port 65535). 


> Browsing content of filesystem over HTTP not works
> --------------------------------------------------
>
>                 Key: HADOOP-595
>                 URL: http://issues.apache.org/jira/browse/HADOOP-595
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Vladimir Krokhmalyov
>
> When I click "Browse the filesystem" in my browser I get following:
> An error occurred while loading http://localhost.localdomain:50070/nn_browsedfscontent.jsp:
> Could not connect to host localhost.localdomain (port 65535).
> In HADOOP 0.6.2 it works properly.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 10:58:23 2006
Return-Path: 
 <hadoop-dev-return-4242-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 28766 invoked from network); 12 Oct 2006 10:58:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 10:58:23 -0000
Received: (qmail 33041 invoked by uid 500); 12 Oct 2006 10:58:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33017 invoked by uid 500); 12 Oct 2006 10:58:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33008 invoked by uid 99); 12 Oct 2006 10:58:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 03:58:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 03:58:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E11457142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 03:57:39 -0700 (PDT)
Message-ID: <15932754.1160650659918.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 03:57:39 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441697 ] 
            
Arun C Murthy commented on HADOOP-489:
--------------------------------------

Here are some alternatives to consider vis-a-vis the log-rotatations:

1. Custom

    Capture the stdout/stderr from the map/reduce task (TaskRunner.logStream) as is today and then write them out to local disk keeping the 'limits' in mind and rolling over the logs via custom code.

2. Use our logging framework (commons-logging + log4j)

    There are 2 alternatives here:
    
    * Option 1
    
      The exec'ed (map/reduce) task has a custom log4j properties (passed as a system property for the exec'ed jvm) i.e. configure the task's logger with the necessary RollingFileAppender (i.e. file size limit, no of files to retain etc.). This means we have (almost) no custom code for implementing the rollover etc. In the long run we can also configure the task's logger-appender to do more complicated things like copy log fragments over to dfs instead of discarding them etc.; again without too much fuss - just via configuration.

      The flip-side is that we will force the application writer to use the commons-logging framework for all his logging if he wants them to be available separately via the UI etc. The user will either have to create a "org.apache.hadoop.mapred.task.id" logger or we will need to add a Mapper.getLogger() method to let the user get hold of the configured logger.

    * Option 2

      To get around the limitation that we force apps to use commons-logging framework for all logging, we could capture the stdout/stderr via TaskRunner.logStream and then use a custom logger in TaskRunner itself to log both stdout/stderr in logStream. Again this will ensure we can customise this logger to copy logs to dfs etc. in the long run...

      The flip-side is that it might be impossible to re-configure the custom logger in TaskRunner with the per-job limits of user-log-file-size etc. via the commons-logging framework and hence we might need to depend on log4j itself, introducing a new dependency on log4j. I will continue to explore if there are ways of re-configuring the TaskRunner's task-specific-logger via commons-logging itself... (any one has done this before?)

Thoughts?      


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 16:49:21 2006
Return-Path: 
 <hadoop-dev-return-4243-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64096 invoked from network); 12 Oct 2006 16:49:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 16:49:21 -0000
Received: (qmail 9264 invoked by uid 500); 12 Oct 2006 16:49:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9234 invoked by uid 500); 12 Oct 2006 16:49:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9220 invoked by uid 99); 12 Oct 2006 16:49:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 09:49:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 09:49:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3CE997142F5
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 09:48:36 -0700 (PDT)
Message-ID: <10493519.1160671716246.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 09:48:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-477) Streaming should execute Unix commands
 and scripts in well known languages without user specifying the path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-477?page=all ]

dhruba borthakur updated HADOOP-477:
------------------------------------

    Attachment: streamingpath.delta

This allows a streaming job to be able to invoke standard utilities (e.g. grep, wc, etc) without specifying their full path. Feedback appreciated.

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Attachments: streamingpath.delta
>
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 16:51:24 2006
Return-Path: 
 <hadoop-dev-return-4244-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64817 invoked from network); 12 Oct 2006 16:51:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 16:51:24 -0000
Received: (qmail 17479 invoked by uid 500); 12 Oct 2006 16:51:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17461 invoked by uid 500); 12 Oct 2006 16:51:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17429 invoked by uid 99); 12 Oct 2006 16:51:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 09:51:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 09:51:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0170B7142E0
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 09:50:37 -0700 (PDT)
Message-ID: <12024422.1160671837003.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 09:50:37 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-600) Race condition in JobTracker updating
 the task tracker's status while declaring it lost
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Race condition in JobTracker updating the task tracker's status while declaring it lost
---------------------------------------------------------------------------------------

                 Key: HADOOP-600
                 URL: http://issues.apache.org/jira/browse/HADOOP-600
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.1
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.8.0


There was a case where the JobTracker lost track of a set of tasks that were on a task tracker. It appears to be a race condition because the ExpireTrackers thread doesn't lock the JobTracker while updating the state. The fix would be to build a list of dead task trackers and then lock the job tracker while updating their status.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 17:20:21 2006
Return-Path: 
 <hadoop-dev-return-4245-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80282 invoked from network); 12 Oct 2006 17:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 17:20:21 -0000
Received: (qmail 84485 invoked by uid 500); 12 Oct 2006 17:20:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84462 invoked by uid 500); 12 Oct 2006 17:20:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84442 invoked by uid 99); 12 Oct 2006 17:20:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 10:20:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 10:20:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1C81B7142D8
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 10:19:36 -0700 (PDT)
Message-ID: <5922613.1160673576114.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 10:19:36 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-591) Reducer sort should even out the
 pass factors in merging different pass
In-Reply-To: <31534512.1160500579703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-591?page=comments#action_12441808 ] 
            
eric baldeschwieler commented on HADOOP-591:
--------------------------------------------

yup

> Reducer sort should even out the pass factors in merging different pass
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-591
>                 URL: http://issues.apache.org/jira/browse/HADOOP-591
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>
> When multiple pass merging is needed during sort, the current sort implementation in SequenceFile class uses a simple "greedy" way to select pass factors, resulting uneven pass factor in different passes. For example, if the factor pass is 100 (the default), and there are 101 segments to be merged. The current implementation will first merge the first 100 segments into one and then merge the big output file with the last segment with pass factor 2. It will be better off to use pass factors 11 in the first pass and pass factor 10 in the second pass.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 17:35:23 2006
Return-Path: 
 <hadoop-dev-return-4246-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86387 invoked from network); 12 Oct 2006 17:35:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 17:35:23 -0000
Received: (qmail 7681 invoked by uid 500); 12 Oct 2006 17:35:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 7654 invoked by uid 500); 12 Oct 2006 17:35:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 7645 invoked by uid 99); 12 Oct 2006 17:35:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 10:35:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 10:35:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A52697142F5
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 10:34:38 -0700 (PDT)
Message-ID: <17293660.1160674478673.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 10:34:38 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441812 ] 
            
eric baldeschwieler commented on HADOOP-489:
--------------------------------------------

You need to capture stdout and error.  We want that to work.

I like the idea of using the logging system if possible to avoid extra code.

I don't follow the details of your issues in option #2.  I think it is much more important to have a good out of the box experience than to have lots of config file options for changing task logging.  Having no user configuration via log4j config files of task logging would probably be fine.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 18:25:23 2006
Return-Path: 
 <hadoop-dev-return-4247-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7651 invoked from network); 12 Oct 2006 18:25:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 18:25:23 -0000
Received: (qmail 81219 invoked by uid 500); 12 Oct 2006 18:25:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81196 invoked by uid 500); 12 Oct 2006 18:25:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81187 invoked by uid 99); 12 Oct 2006 18:25:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 11:25:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 11:25:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFBA37142F3
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 11:24:38 -0700 (PDT)
Message-ID: <29294064.1160677478848.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 11:24:38 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-555) Tasks should inherit some of the
 server's environment
In-Reply-To: <4456046.1158966382364.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-555?page=all ]

Owen O'Malley resolved HADOOP-555.
----------------------------------

    Resolution: Cannot Reproduce

It seems to work fine. I'm not sure why my test program didn't work right.

> Tasks should inherit some of the server's environment
> -----------------------------------------------------
>
>                 Key: HADOOP-555
>                 URL: http://issues.apache.org/jira/browse/HADOOP-555
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>
> When the task trackers start up the Task process, they clear the environment variables. It would be better if there was a SERVER config that listed the names of the environment variables that would be copied from the server's enviroment.
> So the task tracker's config would have:
> <property><name>mapred.task.environment</name>
> <value>PATH,LD_LIBRARY_PATH</value></property>

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 19:00:24 2006
Return-Path: 
 <hadoop-dev-return-4248-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16388 invoked from network); 12 Oct 2006 19:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 19:00:24 -0000
Received: (qmail 26177 invoked by uid 500); 12 Oct 2006 19:00:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25966 invoked by uid 500); 12 Oct 2006 19:00:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25947 invoked by uid 99); 12 Oct 2006 19:00:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 12:00:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 12:00:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A23587142F3
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 11:59:39 -0700 (PDT)
Message-ID: <4897715.1160679579661.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 11:59:39 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441835 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

As I said last night, I think we just want the custom version. We can't assume that the user code uses logging at all. Eventually we may want to use a custom logger that does some out of band processing for errors and warnings, but that isn't the critical goal. The important piece is capturing stdout/stderr. Since the default logger will write the stderr that will handle the standard case quite well.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 20:22:21 2006
Return-Path: 
 <hadoop-dev-return-4249-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44778 invoked from network); 12 Oct 2006 20:22:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 20:22:21 -0000
Received: (qmail 72067 invoked by uid 500); 12 Oct 2006 20:22:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72046 invoked by uid 500); 12 Oct 2006 20:22:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72037 invoked by uid 99); 12 Oct 2006 20:22:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 13:22:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 13:22:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CC2DD7142E0
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 13:21:36 -0700 (PDT)
Message-ID: <13987821.1160684496833.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 13:21:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-506) job tracker hangs on to dead task
 trackers "forever"
In-Reply-To: <24887203.1157469982360.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-506?page=all ]

Owen O'Malley updated HADOOP-506:
---------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.7.0
                       (was: 0.8.0)
       Resolution: Fixed

> job tracker hangs on to dead task trackers "forever"
> ----------------------------------------------------
>
>                 Key: HADOOP-506
>                 URL: http://issues.apache.org/jira/browse/HADOOP-506
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Yoram Arnon
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>             Fix For: 0.7.0
>
>         Attachments: Hadoop-506.patch
>
>
> I see cases where a task tracker gets disconnected from the job tracker and disconnects, and then appears twice in the job tracker's list, with one instance being alive and well, and the other's 'time since last heartbeat' increasing monotonically.
> that all makes sense.
> What doesn't make sense, is that the old instances never expire. It's been over 400000 seoncds since the last heartbeat. And the cluster reports having more nodes up and running than its size (350 nodes in a 320 node cluster).
> there should be some reasonable timout for these expired task trackers, somewhere between 10 minutes and an hour.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 20:54:31 2006
Return-Path: 
 <hadoop-dev-return-4250-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55999 invoked from network); 12 Oct 2006 20:54:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 20:54:31 -0000
Received: (qmail 22879 invoked by uid 500); 12 Oct 2006 20:54:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22858 invoked by uid 500); 12 Oct 2006 20:54:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22849 invoked by uid 99); 12 Oct 2006 20:54:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 13:54:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 13:54:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ACB3B7142FA
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 13:53:46 -0700 (PDT)
Message-ID: <19608879.1160686426704.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 13:53:46 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12441868 ] 
            
Owen O'Malley commented on HADOOP-76:
-------------------------------------

I think it is better for now to just use JobConf.setSpeculativeExecution for both maps and reduces.

machinesWhereFailed is a list of machines where the task has failed. To find where it is currently running, you need to use recentTasks. Currently, the recentTasks is a set of task ids that are running. You should probably make it a map from task id to task tracker id. 

Don't block speculative reduces based on other reduces running. That would make a perpetually busy cluster never run speculative reduces.

*** Please create a library that lets you create files off to the side and when you call commit moves them into place. Speculative reduces need it, but that functionality is useful other places, such as side effect-based maps. The class should also have an abort method that cleans up.

The defaults for the map speculative execution don't look too unreasonable, so just use them for now.

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 12 21:23:19 2006
Return-Path: 
 <hadoop-dev-return-4251-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68286 invoked from network); 12 Oct 2006 21:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 21:23:19 -0000
Received: (qmail 62722 invoked by uid 500); 12 Oct 2006 21:23:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62692 invoked by uid 500); 12 Oct 2006 21:23:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62683 invoked by uid 99); 12 Oct 2006 21:23:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 14:23:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 14:23:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EF3257141F7
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 14:22:34 -0700 (PDT)
Message-ID: <18721500.1160688154977.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 14:22:34 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-601) we need some rpc retry framework
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

we need some rpc retry framework
--------------------------------

                 Key: HADOOP-601
                 URL: http://issues.apache.org/jira/browse/HADOOP-601
             Project: Hadoop
          Issue Type: Improvement
          Components: ipc
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.8.0


We need some mechanism for RPC calls that get exceptions to automatically retry the call under certain circumstances. In particular, we often end up with calls to rpcs being wrapped with retry loops for timeouts. We should be able to make a retrying proxy that will call the rpc and retry in some circumstances.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 00:17:26 2006
Return-Path: 
 <hadoop-dev-return-4253-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21122 invoked from network); 13 Oct 2006 00:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 00:17:26 -0000
Received: (qmail 9904 invoked by uid 500); 13 Oct 2006 00:17:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9879 invoked by uid 500); 13 Oct 2006 00:17:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9870 invoked by uid 99); 13 Oct 2006 00:17:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 17:17:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 17:17:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B48FA7141F7
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 17:16:36 -0700 (PDT)
Message-ID: <17750251.1160698596736.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 17:16:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-561) one replica of a file should be
 written locally if possible
In-Reply-To: <2427633.1159289452077.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-561?page=all ]

dhruba borthakur reassigned HADOOP-561:
---------------------------------------

    Assignee: dhruba borthakur

> one replica of a file should be written locally if possible
> -----------------------------------------------------------
>
>                 Key: HADOOP-561
>                 URL: http://issues.apache.org/jira/browse/HADOOP-561
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: dhruba borthakur
>
> one replica of a file should be written locally if possible. That's currently not the case.
> Copying a 1GB file using hadoop dfs -cp running on one of the cluster nodes, all the blocks were written to remote nodes, as seen by fsck -files -blocks -locations on the newly created file.
> as long as there is sufficient space locally, a local copy has significant performance benefits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 00:17:23 2006
Return-Path: 
 <hadoop-dev-return-4252-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21089 invoked from network); 13 Oct 2006 00:17:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 00:17:23 -0000
Received: (qmail 9649 invoked by uid 500); 13 Oct 2006 00:17:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9628 invoked by uid 500); 13 Oct 2006 00:17:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9619 invoked by uid 99); 13 Oct 2006 00:17:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 17:17:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 17:17:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AAF5F7142E0
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 17:16:38 -0700 (PDT)
Message-ID: <4398384.1160698598698.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 17:16:38 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur reassigned HADOOP-462:
---------------------------------------

    Assignee: dhruba borthakur

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 00:30:21 2006
Return-Path: 
 <hadoop-dev-return-4254-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24174 invoked from network); 13 Oct 2006 00:30:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 00:30:21 -0000
Received: (qmail 21373 invoked by uid 500); 13 Oct 2006 00:30:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21157 invoked by uid 500); 13 Oct 2006 00:30:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21148 invoked by uid 99); 13 Oct 2006 00:30:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 17:30:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 17:30:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A09607142E0
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 17:29:36 -0700 (PDT)
Message-ID: <9203844.1160699376655.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 17:29:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-477) Streaming should execute Unix
 commands and scripts in well known languages without user specifying the
 path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-477?page=all ]

dhruba borthakur reassigned HADOOP-477:
---------------------------------------

    Assignee: dhruba borthakur

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: dhruba borthakur
>         Attachments: streamingpath.delta
>
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 04:16:21 2006
Return-Path: 
 <hadoop-dev-return-4255-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99336 invoked from network); 13 Oct 2006 04:16:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 04:16:21 -0000
Received: (qmail 69813 invoked by uid 500); 13 Oct 2006 04:16:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69789 invoked by uid 500); 13 Oct 2006 04:16:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69780 invoked by uid 99); 13 Oct 2006 04:16:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:16:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:16:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A818A7142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 21:15:36 -0700 (PDT)
Message-ID: <1536205.1160712936685.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 21:15:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-477) Streaming should execute Unix commands
 and scripts in well known languages without user specifying the path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-477?page=all ]

dhruba borthakur updated HADOOP-477:
------------------------------------

    Attachment:     (was: streamingpath.delta)

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: dhruba borthakur
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 04:18:21 2006
Return-Path: 
 <hadoop-dev-return-4256-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99523 invoked from network); 13 Oct 2006 04:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 04:18:21 -0000
Received: (qmail 73147 invoked by uid 500); 13 Oct 2006 04:18:20 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73126 invoked by uid 500); 13 Oct 2006 04:18:20 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73117 invoked by uid 99); 13 Oct 2006 04:18:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:18:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:18:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96D767142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 21:17:36 -0700 (PDT)
Message-ID: <12576466.1160713056615.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 21:17:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-477) Streaming should execute Unix commands
 and scripts in well known languages without user specifying the path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-477?page=all ]

dhruba borthakur updated HADOOP-477:
------------------------------------

    Attachment: streamingpath.patch

This code change has been reviewied.

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: dhruba borthakur
>         Attachments: streamingpath.patch
>
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 04:29:21 2006
Return-Path: 
 <hadoop-dev-return-4257-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 944 invoked from network); 13 Oct 2006 04:29:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 04:29:21 -0000
Received: (qmail 82972 invoked by uid 500); 13 Oct 2006 04:29:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82751 invoked by uid 500); 13 Oct 2006 04:29:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82742 invoked by uid 99); 13 Oct 2006 04:29:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:29:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:29:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6D3B7142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 21:28:36 -0700 (PDT)
Message-ID: <12173641.1160713716746.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 21:28:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-477) Streaming should execute Unix commands
 and scripts in well known languages without user specifying the path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-477?page=all ]

dhruba borthakur updated HADOOP-477:
------------------------------------

    Status: Patch Available  (was: Open)

Here is a patch to Hadoop streaming. This allows a hadoop task to inherit the PATH environment from the task tracker. A mapper specified with a relative pathname (e.g. grep) will be automatically picked up from /bin.

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: dhruba borthakur
>         Attachments: streamingpath.patch
>
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 04:32:21 2006
Return-Path: 
 <hadoop-dev-return-4258-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1125 invoked from network); 13 Oct 2006 04:32:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 04:32:21 -0000
Received: (qmail 86637 invoked by uid 500); 13 Oct 2006 04:32:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86422 invoked by uid 500); 13 Oct 2006 04:32:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86406 invoked by uid 99); 13 Oct 2006 04:32:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:32:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:32:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0CDE67142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 21:31:37 -0700 (PDT)
Message-ID: <17956900.1160713897050.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 21:31:37 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur updated HADOOP-462:
------------------------------------

    Attachment: dfsshell.patch

This patch ensures that a user does not see a java-stack trace if he/she encounters an error with DFSShell. Instead, an error message shouls get displayed.

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 04:34:21 2006
Return-Path: 
 <hadoop-dev-return-4259-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1528 invoked from network); 13 Oct 2006 04:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 04:34:21 -0000
Received: (qmail 87681 invoked by uid 500); 13 Oct 2006 04:34:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87657 invoked by uid 500); 13 Oct 2006 04:34:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87648 invoked by uid 99); 13 Oct 2006 04:34:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:34:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:34:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F04257142F3
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 21:33:36 -0700 (PDT)
Message-ID: <24589904.1160714016981.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 21:33:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur updated HADOOP-462:
------------------------------------

    Status: Patch Available  (was: Open)

Enhanced DFSShell to handle error conditions better. A user of DFSShell does not have to grind his/her teeth trying to decipher a java stack trace.

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 04:39:26 2006
Return-Path: 
 <hadoop-dev-return-4260-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2187 invoked from network); 13 Oct 2006 04:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 04:39:26 -0000
Received: (qmail 90858 invoked by uid 500); 13 Oct 2006 04:39:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90713 invoked by uid 500); 13 Oct 2006 04:39:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90704 invoked by uid 99); 13 Oct 2006 04:39:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:39:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:39:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 02B2B7142F7
	for <hadoop-dev@lucene.apache.org>; Thu, 12 Oct 2006 21:38:41 -0700 (PDT)
Message-ID: <10540549.1160714321008.JavaMail.jira@brutus>
Date: Thu, 12 Oct 2006 21:38:41 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12441910 ] 
            
Arun C Murthy commented on HADOOP-489:
--------------------------------------

Eric, the issue with Option#2 is that the logger (filesize limits etc.) has to be configured dynamically depending on the per-job configuration (one of requirements which came up during this discussion is that we have a default log filesize limit which can be overridden in the jobconf).

The issue stems from the fact that the logger/appender is configured statically and looks like there isn't an easy way to re-configure it via apache commons-logging... (I'd love to be proved wrong on this one).


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 10:31:25 2006
Return-Path: 
 <hadoop-dev-return-4261-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95095 invoked from network); 13 Oct 2006 10:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 10:31:25 -0000
Received: (qmail 9052 invoked by uid 500); 13 Oct 2006 10:31:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9029 invoked by uid 500); 13 Oct 2006 10:31:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8967 invoked by uid 99); 13 Oct 2006 10:31:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 03:31:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 03:31:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 20C8C7142FA
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 03:30:38 -0700 (PDT)
Message-ID: <24274065.1160735438130.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 03:30:38 -0700 (PDT)
From: "Andrzej Bialecki  (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-602) Remove Lucene dependency
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Remove Lucene dependency
------------------------

                 Key: HADOOP-602
                 URL: http://issues.apache.org/jira/browse/HADOOP-602
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.8.0
            Reporter: Andrzej Bialecki 
         Assigned To: Andrzej Bialecki 
             Fix For: 0.8.0


Hadoop uses just a single class from Lucene, namely the PriorityQueue. I propose to remove this dependency by copying this class into org.apache.hadoop.util.PriorityQueue and removing lucene-core.jar from dependencies.

Removing this dependency makes it easier to run map-reduce applications that use different versions of Lucene.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 14:00:08 2006
Return-Path: 
 <hadoop-dev-return-4262-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90575 invoked from network); 13 Oct 2006 14:00:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 14:00:08 -0000
Received: (qmail 50259 invoked by uid 500); 13 Oct 2006 13:59:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50059 invoked by uid 500); 13 Oct 2006 13:59:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49929 invoked by uid 99); 13 Oct 2006 13:59:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 06:59:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 06:59:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E348C71431E
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 06:58:40 -0700 (PDT)
Message-ID: <1274175.1160747920928.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 06:58:40 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-602) Remove Lucene dependency
In-Reply-To: <24274065.1160735438130.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-602?page=comments#action_12442030 ] 
            
Benjamin Reed commented on HADOOP-602:
--------------------------------------

Since we have switched to 1.5. Can we use java.util.PriorityQueue?

> Remove Lucene dependency
> ------------------------
>
>                 Key: HADOOP-602
>                 URL: http://issues.apache.org/jira/browse/HADOOP-602
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.8.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.8.0
>
>
> Hadoop uses just a single class from Lucene, namely the PriorityQueue. I propose to remove this dependency by copying this class into org.apache.hadoop.util.PriorityQueue and removing lucene-core.jar from dependencies.
> Removing this dependency makes it easier to run map-reduce applications that use different versions of Lucene.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 17:35:22 2006
Return-Path: 
 <hadoop-dev-return-4263-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62058 invoked from network); 13 Oct 2006 17:35:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 17:35:22 -0000
Received: (qmail 13104 invoked by uid 500); 13 Oct 2006 17:35:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12891 invoked by uid 500); 13 Oct 2006 17:35:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12882 invoked by uid 99); 13 Oct 2006 17:35:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 10:35:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 10:35:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0AF377142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 10:34:36 -0700 (PDT)
Message-ID: <14889299.1160760876042.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 10:34:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-601) we need some rpc retry framework
In-Reply-To: <18721500.1160688154977.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-601?page=comments#action_12442072 ] 
            
Owen O'Malley commented on HADOOP-601:
--------------------------------------

Ok, I propose that we add annotations to the rpc protocol classes:

public interface FooBar extends VersionedProtocol {

@RpcReliability(@Try)             /* single try, no exception for failure */
void progress();

@RpcReliability(@TryNotify)    /* single try, exception for failure */
void setStatus(String msg);

@RpcReliability(@Forever)  /* keep trying forever */
void done();

@RpcReliability(@Timed(30,5)) /* try for 30 seconds waiting 5 seconds between attempts and then throw */
void doWork();

/* Set a default policy with some explicit handlers for specific exceptions.
    Matches with remote exceptions will also be handled. */
@RpcReliability(value=@Timed(30,5), 
                              handlers={@ErrorHandler(err=SocketTimeOutException.class, response=@Forever),
                                                  @ErrorHandler(err=NullPointerException, reponse=@TryNotify)})
void complexWork();

}

Thoughts?

> we need some rpc retry framework
> --------------------------------
>
>                 Key: HADOOP-601
>                 URL: http://issues.apache.org/jira/browse/HADOOP-601
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>
> We need some mechanism for RPC calls that get exceptions to automatically retry the call under certain circumstances. In particular, we often end up with calls to rpcs being wrapped with retry loops for timeouts. We should be able to make a retrying proxy that will call the rpc and retry in some circumstances.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 19:15:24 2006
Return-Path: 
 <hadoop-dev-return-4264-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83411 invoked from network); 13 Oct 2006 19:15:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 19:15:24 -0000
Received: (qmail 91096 invoked by uid 500); 13 Oct 2006 19:15:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91065 invoked by uid 500); 13 Oct 2006 19:15:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91054 invoked by uid 99); 13 Oct 2006 19:15:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 12:15:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 12:15:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0C0C07142FD
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 12:14:38 -0700 (PDT)
Message-ID: <31528228.1160766878046.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 12:14:38 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Devaraj Das reassigned HADOOP-331:
----------------------------------

    Assignee: Devaraj Das  (was: Yoram Arnon)

Looking at generating a single map output file per map for now.
The plan is to do the following:
Define a class called PartKey that will contain two fields - partition number (int) and the actual key (WritableComparable). As we are mapping, the PartKeys and the associated values are written to a buffer. The buffer has a fixed size (configurable via map.output.buffer.size) of 128M and this buffer, when full, is sorted and spilled to disk. We may end up having a couple of these spilled buffers. We do a merge at the end. The sorting takes into account the partition number. Also, the merge emits information about offsets where a particular partition resides in the merged file. The copying phase of reduce strips the partion information contained in the PartKey and feeds the actual map-generated key to the reducer.
Makes sense?

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 21:21:24 2006
Return-Path: 
 <hadoop-dev-return-4265-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21159 invoked from network); 13 Oct 2006 21:21:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 21:21:24 -0000
Received: (qmail 41724 invoked by uid 500); 13 Oct 2006 21:21:23 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41600 invoked by uid 500); 13 Oct 2006 21:21:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41590 invoked by uid 99); 13 Oct 2006 21:21:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 14:21:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 14:21:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3C57E7142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 14:20:37 -0700 (PDT)
Message-ID: <27978327.1160774437244.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 14:20:37 -0700 (PDT)
From: "Bryan Pendleton (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442096 ] 
            
Bryan Pendleton commented on HADOOP-331:
----------------------------------------

Just have to weigh in, as I always do, with the full-disk and multi-disk viewpoint. It would be nice if, either there's awareness of the disk filling up (set spill size down dynamically if disk free space is less than the default spill size), or if, instead of a single output, there was one output written per output directory. Of course, separate spills should be distributed across different output dirs in some way as they are now.

For huge jobs, every bit of space counts, and avoiding failure through simple means can have a big impact on throughput.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 21:23:23 2006
Return-Path: 
 <hadoop-dev-return-4266-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21897 invoked from network); 13 Oct 2006 21:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 21:23:23 -0000
Received: (qmail 44113 invoked by uid 500); 13 Oct 2006 21:23:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44093 invoked by uid 500); 13 Oct 2006 21:23:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44077 invoked by uid 99); 13 Oct 2006 21:23:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 14:23:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 14:23:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C1F447142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 14:22:36 -0700 (PDT)
Message-ID: <18135445.1160774556792.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 14:22:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12442097 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

Just started looking through the patch, but please set your emacs and/or eclipse to use spaces instead of tabs. It makes it hard to read when the indentation isn't even. Thanks!

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 13 21:26:22 2006
Return-Path: 
 <hadoop-dev-return-4267-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22816 invoked from network); 13 Oct 2006 21:26:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 21:26:22 -0000
Received: (qmail 51290 invoked by uid 500); 13 Oct 2006 21:26:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51188 invoked by uid 500); 13 Oct 2006 21:26:22 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51179 invoked by uid 99); 13 Oct 2006 21:26:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 14:26:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 14:26:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2E347142F7
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 14:25:36 -0700 (PDT)
Message-ID: <20031953.1160774736664.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 14:25:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12442098 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

I don't think clean-native is worth having in the build.xml, since it isn't used by the clean target and I don't see when you'd want to clean the native stuff without cleaning the java stuff.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:10:50 2006
Return-Path: 
 <hadoop-dev-return-4268-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76241 invoked from network); 14 Oct 2006 02:10:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:10:50 -0000
Received: (qmail 50547 invoked by uid 500); 14 Oct 2006 02:10:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49946 invoked by uid 500); 14 Oct 2006 02:10:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49927 invoked by uid 99); 14 Oct 2006 02:10:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:10:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:10:44 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F3C7E7142FE
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:09:58 -0700 (PDT)
Message-ID: <27490775.1160791798995.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:09:58 -0700 (PDT)
From: "David Bowen (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-204) Need to tweak a few things in the
 metrics package to support the Simon plugin
In-Reply-To: <22942249.1147204985788.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-204?page=comments#action_12442118 ] 
            
David Bowen commented on HADOOP-204:
------------------------------------


   [[ Old comment, sent by email on Tue, 16 May 2006 12:58:57 -0700 ]]

Thanks Doug.  It would be potentially useful to include the jar file in 
Hadoop releases so that there is a well-defined place for people to get 
it if they wish to use the metrics API separately from Hadoop.  Then 
again, no-one is asking for it yet.

- David



> Need to tweak a few things in the metrics package to support the Simon plugin
> -----------------------------------------------------------------------------
>
>                 Key: HADOOP-204
>                 URL: http://issues.apache.org/jira/browse/HADOOP-204
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: metrics
>            Reporter: David Bowen
>         Assigned To: David Bowen
>             Fix For: 0.3.0
>
>         Attachments: tweaks.patch
>
>
> (1) added an extra metrics.jar target to the build.xml so that I can build a stand-alone library containing only the
> metrics package and its subpackages.
> (2) added serialversionUIDs to a bunch of classes to make Eclipse happy
> (3) made AbstractMetricsContext.createRecord final, and added a protected newRecord that subclasses can use
> to customize record creation without breaking the parent class.
> (4) minor fix to how errors in callbacks are handled
> (5) constructor in MetricsRecordImpl made protected rather than package private so that it can be subclassed
> (6) extended Util.parse(String serverSpecs, int defaultPort) to handle the case of a null serverSpecs by defaulting to localhost

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:10:55 2006
Return-Path: 
 <hadoop-dev-return-4269-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76837 invoked from network); 14 Oct 2006 02:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:10:55 -0000
Received: (qmail 50986 invoked by uid 500); 14 Oct 2006 02:10:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50956 invoked by uid 500); 14 Oct 2006 02:10:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50672 invoked by uid 99); 14 Oct 2006 02:10:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:10:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:10:47 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A4C92714310
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:10:02 -0700 (PDT)
Message-ID: <14546299.1160791802672.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:10:02 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-234) Support for writing Map/Reduce
 functions in C++
In-Reply-To: <6140265.1148030971246.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-234?page=comments#action_12442121 ] 
            
Sanjay Dahiya commented on HADOOP-234:
--------------------------------------


   [[ Old comment, sent by email on Mon, 22 May 2006 17:28:16 +0530 ]]

Hi Doug -
I was also looking for a way to avoid serialization and de- 
serialization, but I am still not clear how do we use existing record  
IO with this (without modifying generated classes)
When we define a new record format and generate classes to work with  
the record, the generated classes contain Reader and Writer for the  
record. These read/write 'Record' objects from streams. One way to  
implement this would be to modify the class generation and make  
Reader extend SequenceInputFile and return(optionally) a ByetWritable  
rather than a Record. With this in place we should be able to avoid  
the need for serialization/de-serialization and users will not need  
to write extra code per type of record. Or am I missing something here ?

~Sanjay







> Support for writing Map/Reduce functions in C++
> -----------------------------------------------
>
>                 Key: HADOOP-234
>                 URL: http://issues.apache.org/jira/browse/HADOOP-234
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: Sanjay Dahiya
>         Attachments: Hadoop MaReduce Developer doc.pdf, Hadoop MaReduce Developer doc.pdf
>
>
> MapReduce C++ support
> Requirements 
> 1. Allow users to write Map and Reduce functions in C++, rest of the 
> infrastructure already present in Java should be reused. 
> 2. Avoid users having to write both Java and C++ for this to work. 
> 3. Avoid users having to work with JNI methods directly by wrapping them in helper functions. 
> 4. Use Record IO for describing record format, both MR java framework and C++ should 
> 	use the same format to work seemlessly. 
> 5. Allow users to write simple map reduce tasks without learning record IO if keys and values are 
> 	simple strings. 
> Implementation notes
> - If keys and values are simple strings then user passes SimpleNativeMapper in JobConf and implements 
> 	mapper and reducer methods in C++. 
> - For composite Record IO types user starts with defining a record format using Record IO DDL. 
> - User generates Java and C++ classes from the DDL using record IO. 
> - Users configures JobConf to use the generated Java classes as the MR input/output, key/value classes. 
> - User writes Map and Reduce functions in C++ using a standard interface ( given below ) , this interface 
>   makes a serialized record IO format available to the C++ function which should be deserialized in corrosponding
>   generated C++ record IO classes. 
> - User uses the helper functions to pass the serialized format of generated output key/value pairs to output collector. 
> Following is a pseudocode for the Mapper ( Reducer can be implemented similarly ) - 
> Native(JNI) Java proxy for the Mapper : 
> ---------------------------------------
> Without Record IO :-
> --------------------
> public class SimpleNativeMapper extends MapReduceBase implements Mapper {
> 	/**
> 	  * Works on simple strings. 
> 	  **/
> 	public void map(WritableComparable key, Writable value,
> 			OutputCollector output, Reporter reporter) throws IOException {
> 		mapNative(key.toString().getBytes()
> 				, value.toString().getBytes(), output, reporter); 
> 	}
> 	
> 	/**
> 	  * Native implementation. 
> 	  **/
> 	private native void mapNative(byte[] key, byte[] value, 
> 			OutputCollector output, Reporter reporter) throws IOException;
> }
> With Record IO :- 
> ------------------
> public class RecordIONativeMapper extends MapReduceBase implements Mapper {
> 	/**
> 	 * Implementation of map method, this acts as a JNI proxy for actual map 
> 	 * method implemented in C++. Works for Record IO based records. 
> 	 * @see map(byte[] , byte[],	OutputCollector, Reporter)
> 	 */
> 	public void map(WritableComparable key, Writable value,
> 			OutputCollector output, Reporter reporter) throws IOException {
> 		
> 		byte[] keyBytes = null ;
> 		byte[] valueBytes = null ;
> 		
> 		try{
> 			// we need to serialize the key and record and pass the serialized 
> 			// format to C++ / JNI methods so they can interpret it using appropriate 
> 			// record IO classes. 
> 			{
> 				ByteArrayOutputStream keyStream = new ByteArrayOutputStream() ; 
> 				BinaryOutputArchive boa = new BinaryOutputArchive(new DataOutputStream(keyStream)) ;
> 				
> 				((Record)key).serialize(boa, "WhatIsTag");
> 				keyBytes = keyStream.toByteArray();
> 			}
> 			{
> 				ByteArrayOutputStream valueStream = new ByteArrayOutputStream() ; 
> 				BinaryOutputArchive boa = new BinaryOutputArchive(new DataOutputStream(valueStream)) ;
> 				
> 				((Record)key).serialize(boa, "WhatIsTag");
> 				valueBytes = valueStream.toByteArray();
> 			}
> 		}catch(ClassCastException e){
> 			// throw better exceptions
> 			throw new IOException("Input record must be of Record IO Type"); 
> 		}
> 		// pass the serialized byte[] to C++ implementation. 
> 		mapNative(keyBytes, valueBytes, output, reporter); 
> 	}
> 	/**
> 	 * Implementation in C++.
> 	 */
> 	private native void mapNative(byte[] key, byte[] value, 
> 			OutputCollector output, Reporter reporter) throws IOException;
> }
> OutputCollector Proxy for C++
> ------------------------------
> public class NativeOutputCollector implements OutputCollector {
> 	// standard method from interface
> 	public void collect(WritableComparable key, Writable value)
> 			throws IOException {
> 	}
> 	
> 	// deserializes key and value and calls collect(WritableComparable, Writable)
> 	public void collectFromNative(byte[]key, byte[]value){
> 		// deserialize key and value to java types ( as configured in JobConf )
> 		// call actual collect method 
> 	}
> }
> Core Native functions ( helper for user provided Mapper and Reducer ) 
> ---------------------------------------------------------------------
> #include "org_apache_hadoop_mapred_NativeMapper.h"
> #include "UserMapper.h"
> /**
> 	* A C++ proxy method, calls actual implementation of the Mapper. This method 
> 	signature is generated by javah.
> **/
> JNIEXPORT void JNICALL Java_org_apache_hadoop_mapred_NativeMapper_mapNative
>   (JNIEnv *env, jobject thisObj, jbyteArray key, jbyteArray value, 
>   	jobject output_collector, jobject reporter);
> {
>  
>  	// convert char* and pass on to user defined map method. 
>  	// user's map method should take care of converting it to correct record IO 
>  	// type.
>  	int keyLen = (*env)->GetArrayLength(env, key) ;
>  	int valueLen = (*env)->GetArrayLength(env, valueLen) ;
>  	const char *keyBuf = (*env)->GetByteArrayElements(env,key, keyLen, JNI_FALSE) ;
>  	const char *valueuf = (*env)->GetByteArrayElements(env,value, valueLen, JNI_FALSE) ;
>  	
>  	// Call User defined method 
>  	user_map(keyBuf, valueBuf, output_collector, reporter) ;
>  	
>  	(*env)->ReleaseByteArrayElements(env, key, keyBuf,  JNI_ABORT) ; 
>  	(*env)->ReleaseByteArrayElements(env, value, ValueBuf, JNI_ABORT) ; 
> }
> /**
> 	Helper method, acts as a proxy to OutputCollector in java. key and value 
> 	must be serialized forms of records as specified in JobConf. 
> **/
> void output_collector(const char * key, const char *value,
> 	jobject output_collector, jobject reporter){
> 	
> 	// invoke java NativeOutputCollector.collect with key and value. 
> }
> User defined Mapper ( and Reducer ) 
> ------------------------------------
> /**
> 	implements user defined map operation. 
> **/
> void user_mapper(const char *key, const char *value, jobject collector, jobject recorder) {
> 	//1. deserialize key/value in the appropriate format using record IO. 
> 	
> 	//2. process key/value and generate the intermediate key/values in record IO format. 
> 	
> 	//3. Deserialize intermediate key/values to intermed_key and intermed_value
> 	
> 	//4. pass intermed_key/intermed_value using helper function - 
> 	// 		output_collector(intermed_key, intermed_value, collector, recorder);
> 	
> 	
> }

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:11:21 2006
Return-Path: 
 <hadoop-dev-return-4270-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77893 invoked from network); 14 Oct 2006 02:11:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:11:21 -0000
Received: (qmail 53579 invoked by uid 500); 14 Oct 2006 02:11:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53553 invoked by uid 500); 14 Oct 2006 02:11:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53534 invoked by uid 99); 14 Oct 2006 02:11:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:11:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:11:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C571F7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:10:19 -0700 (PDT)
Message-ID: <18905673.1160791819806.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:10:19 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-55) map-reduce job overhead is too high
In-Reply-To: <1224793629.1140650148939.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-55?page=comments#action_12442130 ] 
            
Yoram Arnon commented on HADOOP-55:
-----------------------------------


   [[ Old comment, sent by email on Wed, 31 May 2006 10:02:17 -0700 ]]

This may actually turn out to be high-ish prioority 



> map-reduce job overhead is too high
> -----------------------------------
>
>                 Key: HADOOP-55
>                 URL: http://issues.apache.org/jira/browse/HADOOP-55
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Yoram Arnon
>         Assigned To: Sameer Paranjpye
>            Priority: Minor
>
> map-reduce job overhead is too high. Running a null map-reduce job, with no input, no intermediate data and no output, on a several-hundred node cluster, takes several minutes, rather than several seconds.
> Enhanced distribution, launching and monitoring mechanisms should reduce the overhead to levels that match human online patience for short jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:48:51 2006
Return-Path: 
 <hadoop-dev-return-4271-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83022 invoked from network); 14 Oct 2006 02:48:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:48:51 -0000
Received: (qmail 75797 invoked by uid 500); 14 Oct 2006 02:48:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75751 invoked by uid 500); 14 Oct 2006 02:48:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75735 invoked by uid 99); 14 Oct 2006 02:48:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:48:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:48:46 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 569F6714314
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:48:01 -0700 (PDT)
Message-ID: <15964233.1160794081352.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:48:01 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-287) Speed up SequenceFile sort with
 memory reduction
In-Reply-To: <30420683.1149716489884.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-287?page=comments#action_12442138 ] 
            
Benjamin Reed commented on HADOOP-287:
--------------------------------------


   [[ Old comment, sent by email on Thu, 8 Jun 2006 07:32:09 -0700 ]]

Duh! Sorry Doug. Stupid error. I didn't realize you had unit tests.  
I've fixed it. I'll run the tests now.

ben




> Speed up SequenceFile sort with memory reduction
> ------------------------------------------------
>
>                 Key: HADOOP-287
>                 URL: http://issues.apache.org/jira/browse/HADOOP-287
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: io
>    Affects Versions: 0.3.2
>            Reporter: Benjamin Reed
>         Assigned To: Doug Cutting
>         Attachments: s.patch, zoom-sort.patch, zoom-sort.patch
>
>
> I replaced the merge sort with a quick sort and it yielded approx 30% improvement in sort time. It also reduced the memory requirement for sorting because the sort is done in place.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:50:13 2006
Return-Path: 
 <hadoop-dev-return-4272-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86619 invoked from network); 14 Oct 2006 02:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:50:13 -0000
Received: (qmail 85799 invoked by uid 500); 14 Oct 2006 02:50:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85761 invoked by uid 500); 14 Oct 2006 02:50:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85622 invoked by uid 99); 14 Oct 2006 02:50:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:50:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:50:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B798714315
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:49:15 -0700 (PDT)
Message-ID: <7799255.1160794155241.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:49:15 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-347) Implement HDFS content browsing
 interface
In-Reply-To: <17227613.1152182310090.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-347?page=comments#action_12442170 ] 
            
Devaraj Das commented on HADOOP-347:
------------------------------------


   [[ Old comment, sent by email on Fri, 7 Jul 2006 00:08:28 +0530 ]]

Hi Eric,
I spoke to Marco regarding WebDAV, and he told me that he just got started
on the work, etc. So I am wondering whether I should start off on this work
without WebDAV. Things like block view, etc. may not be possible with WebDAV
without major tweaking. What are your thoughts?
Thanks
Devaraj.



> Implement HDFS content browsing interface
> -----------------------------------------
>
>                 Key: HADOOP-347
>                 URL: http://issues.apache.org/jira/browse/HADOOP-347
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: dfs
>    Affects Versions: 0.4.0, 0.3.2, 0.3.1, 0.3.0, 0.2.1, 0.2.0, 0.1.1, 0.1.0
>            Reporter: Devaraj Das
>         Assigned To: Devaraj Das
>             Fix For: 0.5.0
>
>         Attachments: content_browsing.patch, fsnamesystem.patch
>
>
> Implement HDFS content browsing interface over HTTP. Clients would connect to the NameNode and this would send a redirect to a random DataNode. The DataNode, via dfs client, would proxy to namenode for metadata browsing and to other datanodes for content. One can also view the local blocks on any DataNode. Head, Tail will be provided as shorthands for viewing the first block and the last block of a file. 
> For full file viewing, the data displayed per HTTP request will be a block with a PREV/NEXT link. The block size for viewing can be a configurable parameter (the user sets it via the web browser) to the HTTP server (e.g., 256 KB can be the default block size for viewing files).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:51:03 2006
Return-Path: 
 <hadoop-dev-return-4273-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88363 invoked from network); 14 Oct 2006 02:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:51:03 -0000
Received: (qmail 90246 invoked by uid 500); 14 Oct 2006 02:50:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90143 invoked by uid 500); 14 Oct 2006 02:50:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90118 invoked by uid 99); 14 Oct 2006 02:50:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:50:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:50:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5874E71430E
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:49:36 -0700 (PDT)
Message-ID: <30358712.1160794176359.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:49:36 -0700 (PDT)
From: "Benjamin Reed (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-367) Static blocks do not automatically
 run when a class is loaded in Java 5.0
In-Reply-To: <22771983.1153174453937.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-367?page=comments#action_12442183 ] 
            
Benjamin Reed commented on HADOOP-367:
--------------------------------------


   [[ Old comment, sent by email on Tue, 25 Jul 2006 10:30:37 -0700 ]]

When would you call setAccessable? It would have to be outside of the class 
since nothing is initialized.

One option would be to put a public static getFactory() method on the class. 
Not only would that cause the static blocks to be run, but it would allow you 
to get rid of the factory table and just use reflection to call getFactory() 
on the class if there is one otherwise fall back to newInstance().

ben



> Static blocks do not automatically run when a class is loaded in Java 5.0
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-367
>                 URL: http://issues.apache.org/jira/browse/HADOOP-367
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>         Environment: Java 5.0
>            Reporter: Benjamin Reed
>         Attachments: f.patch, reflection.patch
>
>
> There seems to be a change that happened between 1.4 and 1.5 with respect to static initializers. I can't find this documented, but I can reproduce with a very simple program. Basically, a static initializer is not called unless a static member/method of the class is accessed or an instance is created. This is actually what the JLS says, but until 1.5 the static initializers ran when the class was loaded. Note that this behavior only occurs when running with the 1.5 JRE AND compiling for 1.5.
> For many Writables this isn't an issue, so the fallback behavior of the WritableFactory works, but Block is package private, so loadEdits fails when called from org.apache.hadoop.io.ArrayWritable.readFields() yielding the following trace:
> Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableFactories can not access a member of class org.apache.hadoop.dfs.Block with modifiers "public"
>         at org.apache.hadoop.io.WritableFactories.newInstance(WritableFactories.java:49)
>         at org.apache.hadoop.io.ArrayWritable.readFields(ArrayWritable.java:81)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSEdits(FSDirectory.java:532)
>         at org.apache.hadoop.dfs.FSDirectory.loadFSImage(FSDirectory.java:470)
>         at org.apache.hadoop.dfs.FSDirectory.<init>(FSDirectory.java:307)
>         at org.apache.hadoop.dfs.FSNamesystem.<init>(FSNamesystem.java:177)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:91)
>         at org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:84)
>         at org.apache.hadoop.dfs.NameNode.main(NameNode.java:491)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:51:23 2006
Return-Path: 
 <hadoop-dev-return-4274-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88913 invoked from network); 14 Oct 2006 02:51:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:51:23 -0000
Received: (qmail 93331 invoked by uid 500); 14 Oct 2006 02:50:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93267 invoked by uid 500); 14 Oct 2006 02:50:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93085 invoked by uid 99); 14 Oct 2006 02:50:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:50:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:50:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4CE0F7142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:49:51 -0700 (PDT)
Message-ID: <5713995.1160794191312.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:49:51 -0700 (PDT)
From: "p sutter (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-141) Disk thrashing / task timeouts
 during map output copy phase
In-Reply-To: <9808210.1145312482052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-141?page=comments#action_12442193 ] 
            
p sutter commented on HADOOP-141:
---------------------------------


   [[ Old comment, sent by email on Wed, 2 Aug 2006 13:47:05 -0700 ]]

Close it out! The new shuffle path is really great.




> Disk thrashing / task timeouts during map output copy phase
> -----------------------------------------------------------
>
>                 Key: HADOOP-141
>                 URL: http://issues.apache.org/jira/browse/HADOOP-141
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: linux
>            Reporter: p sutter
>
> MapOutputProtocol connections cause timeouts because of system thrashing and transferring the same file over and over again, ultimately leading to making no forward progress(medium sized job, 500GB input file, map output about as large as the input, 10 node cluster).
> There are several bugs behind this, but the following two changes improved matters considerably.
> (1) 
> The buffersize in MapOutputFile is currently hardcoded to 8192 bytes (for both reads and writes). By changing this buffer size to 256KB, the number of disk seeks are reduced and the problem went away. 
> Ideally there would be a buffer size parameter for this that is separate from the DFS io buffer size.
> (2)
> I also added the following code to the socket configuration in both Server.java and Client.java. No linger is a minor good idea in an enivronment with some packet loss (and you will have that when all the nodes get busy at once), but 256KB buffers is probably excessive, especially on a LAN, but it takes me two hours to test changes so I havent experimented.
> socket.setSendBufferSize(256*1024);
> socket.setReceiveBufferSize(256*1024);
> socket.setSoLinger(false, 0);
> socket.setKeepAlive(true);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:51:25 2006
Return-Path: 
 <hadoop-dev-return-4275-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88925 invoked from network); 14 Oct 2006 02:51:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:51:25 -0000
Received: (qmail 93343 invoked by uid 500); 14 Oct 2006 02:50:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93298 invoked by uid 500); 14 Oct 2006 02:50:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93258 invoked by uid 99); 14 Oct 2006 02:50:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:50:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:50:43 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99E7771431A
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:49:57 -0700 (PDT)
Message-ID: <1861164.1160794197628.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:49:57 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-415) DFSNodesStatus() should sort data
 nodes.
In-Reply-To: <11728384.1154482755948.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-415?page=comments#action_12442196 ] 
            
Konstantin Shvachko commented on HADOOP-415:
--------------------------------------------


   [[ Old comment, sent by email on Mon, 07 Aug 2006 10:32:18 -0700 ]]

This issue is closed now.
You probably need to create a new issue and attach your patch there.
I don't think it is possible to reopen closed issues.
--Konstantin




> DFSNodesStatus() should sort data nodes.
> ----------------------------------------
>
>                 Key: HADOOP-415
>                 URL: http://issues.apache.org/jira/browse/HADOOP-415
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.4.0
>            Reporter: Konstantin Shvachko
>             Fix For: 0.5.0
>
>         Attachments: refactor_datanodeinfo.patch, refactor_nodestatus.patch, refactor_nodestatus.patch
>
>
> HADOOP-392 introduced a new TreeMap member (datanodeMapByName) in the name node.
> It is used solely for reporting the data nodes in the UI sorted by their names.
> I think it is quite inefficient both time and space-wise to support an excessive
> data structure just for that.
> Suppose the UI will also require sorting by last heartbeat and/or by the available space....
> I think DFSNodesStatus() should just sort the original datanodeMap before returning the list.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:51:56 2006
Return-Path: 
 <hadoop-dev-return-4276-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90667 invoked from network); 14 Oct 2006 02:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:51:56 -0000
Received: (qmail 97179 invoked by uid 500); 14 Oct 2006 02:51:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97075 invoked by uid 500); 14 Oct 2006 02:51:03 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96965 invoked by uid 99); 14 Oct 2006 02:51:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:51:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:51:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2A11714314
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:50:15 -0700 (PDT)
Message-ID: <29408538.1160794215663.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:50:15 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-477) Streaming should execute Unix
 commands and scripts in well known languages without user specifying the
 path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-477?page=comments#action_12442208 ] 
            
arkady borkovsky commented on HADOOP-477:
-----------------------------------------


   [[ Old comment, sent by email on Mon, 28 Aug 2006 22:55:04 -0700 ]]

Thanks, Owen!

this will remove some pain.

Python example is not perfect though:  the version on the cluster is  
different from the version on lab machine.  On a local machine the  
default is 2.4, while on the cluster it is 2.3.

-- ab




> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: dhruba borthakur
>         Attachments: streamingpath.patch
>
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:51:57 2006
Return-Path: 
 <hadoop-dev-return-4277-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 90819 invoked from network); 14 Oct 2006 02:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:51:57 -0000
Received: (qmail 97786 invoked by uid 500); 14 Oct 2006 02:51:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97769 invoked by uid 500); 14 Oct 2006 02:51:06 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97726 invoked by uid 99); 14 Oct 2006 02:51:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:51:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:51:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BDF9F71430E
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:50:20 -0700 (PDT)
Message-ID: <12960557.1160794220775.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:50:20 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-492) Global counters
In-Reply-To: <5641100.1156887324032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-492?page=comments#action_12442211 ] 
            
arkady borkovsky commented on HADOOP-492:
-----------------------------------------


   [[ Old comment, sent by email on Wed, 30 Aug 2006 16:40:37 -0700 ]]

One of the intentions of Global Counters is for use in application code.
E.g. if I count words in a the input, I'd like to know the total number  
of words, not just the count for each word.
With vanilla MapReduce, I need a separate job to do the totals.  Global  
Counter would let me to do this during the first job.




> Global counters
> ---------------
>
>                 Key: HADOOP-492
>                 URL: http://issues.apache.org/jira/browse/HADOOP-492
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.
> This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.
> #491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:52:03 2006
Return-Path: 
 <hadoop-dev-return-4278-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91012 invoked from network); 14 Oct 2006 02:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:52:03 -0000
Received: (qmail 98714 invoked by uid 500); 14 Oct 2006 02:51:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98697 invoked by uid 500); 14 Oct 2006 02:51:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98669 invoked by uid 99); 14 Oct 2006 02:51:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:51:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:51:11 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 24638714313
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:50:22 -0700 (PDT)
Message-ID: <10565011.1160794222146.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:50:22 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-492) Global counters
In-Reply-To: <5641100.1156887324032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-492?page=comments#action_12442212 ] 
            
arkady borkovsky commented on HADOOP-492:
-----------------------------------------


   [[ Old comment, sent by email on Thu, 31 Aug 2006 10:40:32 -0700 ]]

It may be that Metrics API can be used for this purpose.

However Metrics API  is an "API for reporting performance metric  
information", while this proposal is more application oriented.
I'd like to be able to something like this:
-- in main() of MapReduce job
    JobConf conf ;
    GlobalCounters ggg = conf.addGlobalCounter( "TotalWordCount");

-- in map() ,  
     GlobalCounter  totalWords = reporter.getGlobalCounter(  
"TotalWords");
and whenever it processes a word
     totalWords.inc(1);

-- in the end of main(), after the job has completed.

     int totalWords = 0;
     for (int i=0; i < ggg.size(); i++) {
           totalWords += ggg.get(i);
     }

(I've pretended the GlobalCounter s are always int)

Currently, using vanilla MapReduce would require running two jobs --  
one to count the individual words, another to aggregate the counts (or  
to extract the aggregated counts from the output.)

Although not shown in this example, I assume that ggg is updated real  
time, and main() can run a thread to monitor it while the tasks are  
running.
Also it assumes that task failures and speculative execution are  
handled correctly.






> Global counters
> ---------------
>
>                 Key: HADOOP-492
>                 URL: http://issues.apache.org/jira/browse/HADOOP-492
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: mapred
>            Reporter: arkady borkovsky
>
> It would be nice to have map / reduce job keep aggregated counts for arbitrary events occuring in its tasks -- the numer of records processed, the numer of exceptions of a specific type, the number of sentences in passive voice, whatever the jobs finds useful.
> This can be implemented by tasks periodically sending <name, value> pairs to the jobtracker (in some implementations such messages are piggy-backed on the heartbeats), so that the job tracker stores all the latests values from each task and aggregates them on a request.  It should also make the aggregated values available at the job end.  The value for a task would be flushed when the task fails.
> #491 and #490 may be related to this one.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:52:24 2006
Return-Path: 
 <hadoop-dev-return-4279-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92142 invoked from network); 14 Oct 2006 02:52:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:52:24 -0000
Received: (qmail 1102 invoked by uid 500); 14 Oct 2006 02:51:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1085 invoked by uid 500); 14 Oct 2006 02:51:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1062 invoked by uid 99); 14 Oct 2006 02:51:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:51:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:51:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 47E8C714314
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:50:37 -0700 (PDT)
Message-ID: <33111847.1160794237291.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:50:37 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-243) WI shows progress as 100.00% before
 actual completion (rounding error)
In-Reply-To: <32908038.1148411909849.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-243?page=comments#action_12442221 ] 
            
Yoram Arnon commented on HADOOP-243:
------------------------------------


   [[ Old comment, sent by email on Tue, 12 Sep 2006 10:10:55 -0700 ]]

Muchos gracias
Yoram



> WI shows progress as 100.00% before actual completion (rounding error)
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-243
>                 URL: http://issues.apache.org/jira/browse/HADOOP-243
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.5.0, 0.6.0
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Trivial
>             Fix For: 0.7.0
>
>         Attachments: percent-complete.patch
>
>
> For jobs of over 50000 tasks, the rounding error in the WI is confusing.
> When less than 0.005% of the map (or reduce) tasks remain to execute, the WI shows progress as 100.00%, which is misleading.
> Rounding down to the nearest .01% would be better.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 02:53:29 2006
Return-Path: 
 <hadoop-dev-return-4280-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94487 invoked from network); 14 Oct 2006 02:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 02:53:29 -0000
Received: (qmail 11257 invoked by uid 500); 14 Oct 2006 02:52:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11194 invoked by uid 500); 14 Oct 2006 02:52:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11047 invoked by uid 99); 14 Oct 2006 02:52:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:52:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 19:52:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC7B17142FC
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 19:51:29 -0700 (PDT)
Message-ID: <19503780.1160794289900.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 19:51:29 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12442249 ] 
            
eric baldeschwieler commented on HADOOP-489:
--------------------------------------------


   [[ Old comment, sent by email on Tue, 10 Oct 2006 09:32:55 -0700 ]]

one log file per task does not work if we move the data into DSF.  I  
think we want one log file per running task, but then we need to  
combine them.

Owen?




> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 03:31:24 2006
Return-Path: 
 <hadoop-dev-return-4281-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2456 invoked from network); 14 Oct 2006 03:31:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 03:31:24 -0000
Received: (qmail 47797 invoked by uid 500); 14 Oct 2006 03:31:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47581 invoked by uid 500); 14 Oct 2006 03:31:23 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47572 invoked by uid 99); 14 Oct 2006 03:31:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 20:31:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 20:31:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 18C247142FD
	for <hadoop-dev@lucene.apache.org>; Fri, 13 Oct 2006 20:30:38 -0700 (PDT)
Message-ID: <6345664.1160796638098.JavaMail.jira@brutus>
Date: Fri, 13 Oct 2006 20:30:38 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-141) Disk thrashing / task timeouts during
 map output copy phase
In-Reply-To: <9808210.1145312482052.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-141?page=all ]

Owen O'Malley resolved HADOOP-141.
----------------------------------

    Fix Version/s: 0.3.0
       Resolution: Fixed
         Assignee: Owen O'Malley

> Disk thrashing / task timeouts during map output copy phase
> -----------------------------------------------------------
>
>                 Key: HADOOP-141
>                 URL: http://issues.apache.org/jira/browse/HADOOP-141
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>         Environment: linux
>            Reporter: p sutter
>         Assigned To: Owen O'Malley
>             Fix For: 0.3.0
>
>
> MapOutputProtocol connections cause timeouts because of system thrashing and transferring the same file over and over again, ultimately leading to making no forward progress(medium sized job, 500GB input file, map output about as large as the input, 10 node cluster).
> There are several bugs behind this, but the following two changes improved matters considerably.
> (1) 
> The buffersize in MapOutputFile is currently hardcoded to 8192 bytes (for both reads and writes). By changing this buffer size to 256KB, the number of disk seeks are reduced and the problem went away. 
> Ideally there would be a buffer size parameter for this that is separate from the DFS io buffer size.
> (2)
> I also added the following code to the socket configuration in both Server.java and Client.java. No linger is a minor good idea in an enivronment with some packet loss (and you will have that when all the nodes get busy at once), but 256KB buffers is probably excessive, especially on a LAN, but it takes me two hours to test changes so I havent experimented.
> socket.setSendBufferSize(256*1024);
> socket.setReceiveBufferSize(256*1024);
> socket.setSoLinger(false, 0);
> socket.setKeepAlive(true);

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 15:12:22 2006
Return-Path: 
 <hadoop-dev-return-4282-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21558 invoked from network); 14 Oct 2006 15:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 15:12:22 -0000
Received: (qmail 6981 invoked by uid 500); 14 Oct 2006 15:12:22 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6952 invoked by uid 500); 14 Oct 2006 15:12:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6943 invoked by uid 99); 14 Oct 2006 15:12:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 08:12:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 08:12:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 045347142FA
	for <hadoop-dev@lucene.apache.org>; Sat, 14 Oct 2006 08:11:35 -0700 (PDT)
Message-ID: <667134.1160838695014.JavaMail.jira@brutus>
Date: Sat, 14 Oct 2006 08:11:35 -0700 (PDT)
From: "Jim Kellerman (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-603) Extend SequenceFile to provide MapFile
 function by storing index at the end of the file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Extend SequenceFile to provide MapFile function by storing index at the end of the file
---------------------------------------------------------------------------------------

                 Key: HADOOP-603
                 URL: http://issues.apache.org/jira/browse/HADOOP-603
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
            Reporter: Jim Kellerman


MapFile increases the load on the name node as two files are created to provide a index file format. If SequenceFile were extended by storing the index at the end of the file, 1/2 of the files currently created for a map/reduce operation would be needed, reducing the load on the name node.

Perhaps this is why Google implemented SSTable files in this manner. (SSTable files are functionally identical to Hadoop MapFiles) (see the paper on BigTable - section 4 "Building Blocks" http://labs.google.com/papers/bigtable.html)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 14 21:57:25 2006
Return-Path: 
 <hadoop-dev-return-4283-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84184 invoked from network); 14 Oct 2006 21:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 21:57:25 -0000
Received: (qmail 9235 invoked by uid 500); 14 Oct 2006 21:57:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9010 invoked by uid 500); 14 Oct 2006 21:57:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8995 invoked by uid 99); 14 Oct 2006 21:57:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 14:57:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 14:57:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 116F27142FB
	for <hadoop-dev@lucene.apache.org>; Sat, 14 Oct 2006 14:56:36 -0700 (PDT)
Message-ID: <28592778.1160862996068.JavaMail.jira@brutus>
Date: Sat, 14 Oct 2006 14:56:36 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-603) Extend SequenceFile to provide
 MapFile function by storing index at the end of the file
In-Reply-To: <667134.1160838695014.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-603?page=comments#action_12442336 ] 
            
Runping Qi commented on HADOOP-603:
-----------------------------------


Storing the ondex at the end will make it impossible for appending!
Although Hadoop does not support append now, it is still open for that possibility.
I think it is important to leave that possibility open.

> Extend SequenceFile to provide MapFile function by storing index at the end of the file
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-603
>                 URL: http://issues.apache.org/jira/browse/HADOOP-603
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Jim Kellerman
>
> MapFile increases the load on the name node as two files are created to provide a index file format. If SequenceFile were extended by storing the index at the end of the file, 1/2 of the files currently created for a map/reduce operation would be needed, reducing the load on the name node.
> Perhaps this is why Google implemented SSTable files in this manner. (SSTable files are functionally identical to Hadoop MapFiles) (see the paper on BigTable - section 4 "Building Blocks" http://labs.google.com/papers/bigtable.html)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Oct 15 13:12:25 2006
Return-Path: 
 <hadoop-dev-return-4284-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19337 invoked from network); 15 Oct 2006 13:12:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 13:12:25 -0000
Received: (qmail 94635 invoked by uid 500); 15 Oct 2006 13:12:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94601 invoked by uid 500); 15 Oct 2006 13:12:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94592 invoked by uid 99); 15 Oct 2006 13:12:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 06:12:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 06:12:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 19B027142FB
	for <hadoop-dev@lucene.apache.org>; Sun, 15 Oct 2006 06:11:36 -0700 (PDT)
Message-ID: <32712200.1160917896102.JavaMail.jira@brutus>
Date: Sun, 15 Oct 2006 06:11:36 -0700 (PDT)
From: "Marco Paga (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-273) Add a interactive shell for
 admistrative access to the DFS
In-Reply-To: <4898117.1149335369839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-273?page=all ]

Marco Paga updated HADOOP-273:
------------------------------

    Attachment: interactiveShell.patch

The new and corrected version

> Add a interactive shell for admistrative access to the DFS
> ----------------------------------------------------------
>
>                 Key: HADOOP-273
>                 URL: http://issues.apache.org/jira/browse/HADOOP-273
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Marco Paga
>            Priority: Trivial
>         Attachments: interactiveShell.patch, interactiveShell.patch
>
>
> Implement a shell that allows the user to work in the dfs like on the local fs.
> cd /user/
> cd test
> put text.txt someText.txt
> cat someText.txt
> rm someText.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Oct 15 13:14:24 2006
Return-Path: 
 <hadoop-dev-return-4285-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19453 invoked from network); 15 Oct 2006 13:14:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 13:14:24 -0000
Received: (qmail 95284 invoked by uid 500); 15 Oct 2006 13:14:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95259 invoked by uid 500); 15 Oct 2006 13:14:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95250 invoked by uid 99); 15 Oct 2006 13:14:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 06:14:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 06:14:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0BE1C7142FB
	for <hadoop-dev@lucene.apache.org>; Sun, 15 Oct 2006 06:13:36 -0700 (PDT)
Message-ID: <18401616.1160918016046.JavaMail.jira@brutus>
Date: Sun, 15 Oct 2006 06:13:36 -0700 (PDT)
From: "Marco Paga (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-273) Add a interactive shell for
 admistrative access to the DFS
In-Reply-To: <4898117.1149335369839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-273?page=all ]

Marco Paga updated HADOOP-273:
------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.7.1

Added interactive DFS Shell

> Add a interactive shell for admistrative access to the DFS
> ----------------------------------------------------------
>
>                 Key: HADOOP-273
>                 URL: http://issues.apache.org/jira/browse/HADOOP-273
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.1
>            Reporter: Marco Paga
>            Priority: Trivial
>         Attachments: interactiveShell.patch, interactiveShell.patch
>
>
> Implement a shell that allows the user to work in the dfs like on the local fs.
> cd /user/
> cd test
> put text.txt someText.txt
> cat someText.txt
> rm someText.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Oct 15 13:16:25 2006
Return-Path: 
 <hadoop-dev-return-4286-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 19957 invoked from network); 15 Oct 2006 13:16:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 13:16:25 -0000
Received: (qmail 96862 invoked by uid 500); 15 Oct 2006 13:16:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96832 invoked by uid 500); 15 Oct 2006 13:16:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96823 invoked by uid 99); 15 Oct 2006 13:16:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 06:16:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 06:16:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 113237142FB
	for <hadoop-dev@lucene.apache.org>; Sun, 15 Oct 2006 06:15:36 -0700 (PDT)
Message-ID: <8677763.1160918136068.JavaMail.jira@brutus>
Date: Sun, 15 Oct 2006 06:15:36 -0700 (PDT)
From: "Marco Paga (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-273) Add a interactive shell for
 admistrative access to the DFS
In-Reply-To: <4898117.1149335369839.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-273?page=all ]

Marco Paga updated HADOOP-273:
------------------------------

    Status: In Progress  (was: Patch Available)

> Add a interactive shell for admistrative access to the DFS
> ----------------------------------------------------------
>
>                 Key: HADOOP-273
>                 URL: http://issues.apache.org/jira/browse/HADOOP-273
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.1
>            Reporter: Marco Paga
>            Priority: Trivial
>         Attachments: interactiveShell.patch, interactiveShell.patch
>
>
> Implement a shell that allows the user to work in the dfs like on the local fs.
> cd /user/
> cd test
> put text.txt someText.txt
> cat someText.txt
> rm someText.txt

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 03:43:27 2006
Return-Path: 
 <hadoop-dev-return-4287-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74368 invoked from network); 16 Oct 2006 03:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 03:43:27 -0000
Received: (qmail 66468 invoked by uid 500); 16 Oct 2006 03:43:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66248 invoked by uid 500); 16 Oct 2006 03:43:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66239 invoked by uid 99); 16 Oct 2006 03:43:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 20:43:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 20:43:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB04C7141B8
	for <hadoop-dev@lucene.apache.org>; Sun, 15 Oct 2006 20:42:36 -0700 (PDT)
Message-ID: <2832831.1160970156829.JavaMail.jira@brutus>
Date: Sun, 15 Oct 2006 20:42:36 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442453 ] 
            
eric baldeschwieler commented on HADOOP-331:
--------------------------------------------

re: devaraj

I like the approach.  One refinement suggested below:

I don't think you want to store the partkeys inline.  That requires more code change and an on disk format changes and wasted bytes to disk and over the wire.  I think you spill serialized key/values with a side file that maps each partition to a start offset.

In RAM you spill serialized key/value pairs to your buffer and also keep an array/vector (apply appropriate java class here) of (partition,offset to key).  You can then quicksort the array and spill.  You want to be sure to be able to apply a block compressor to each partition as spilled.  This will be very efficient and simple. So record the compressed lengths (kimoon suggested this on another thread).

Merging would go as you outline.  You could read one line of each sidefile and then merge the next partition from each, so the merge would only consider the keys.  Since it would be per partition.

You need the sidefile to support efficient access for the reduce readers anyway.

---
re: brian's comments

I think we should keep maps simple and focus this effort on reduces, which deal with much larger size.

That said, a corner case with HUGE maps should have a reasonable outcome. I think we need a stripped file abstraction to deal with these cases, where outputs are placed in medium HDFS sized blocks on whichever disk makes the most sense.  This same approach would probably be more used on the reduce side.

But I think this should come as a second project, rather than burdening this work with it.
Anyone want to file a bug on it?

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 07:37:50 2006
Return-Path: 
 <hadoop-dev-return-4289-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30773 invoked from network); 16 Oct 2006 07:37:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 07:37:50 -0000
Received: (qmail 91379 invoked by uid 500); 16 Oct 2006 07:37:06 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90304 invoked by uid 500); 16 Oct 2006 07:37:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89468 invoked by uid 99); 16 Oct 2006 07:36:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 00:36:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 00:08:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0DAE7714201
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 00:07:36 -0700 (PDT)
Message-ID: <14257139.1160982456053.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 00:07:36 -0700 (PDT)
From: "Jim Kellerman (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-603) Extend SequenceFile to provide
 MapFile function by storing index at the end of the file
In-Reply-To: <667134.1160838695014.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-603?page=comments#action_12442490 ] 
            
Jim Kellerman commented on HADOOP-603:
--------------------------------------

I believe that Google still supports append and re-writes the index at the end of the file. The advantage of this approach is that when you access these files it takes 1/2 the number of opens that MapFile does. This would significantly reduce the load on the name node.

> Extend SequenceFile to provide MapFile function by storing index at the end of the file
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-603
>                 URL: http://issues.apache.org/jira/browse/HADOOP-603
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Jim Kellerman
>
> MapFile increases the load on the name node as two files are created to provide a index file format. If SequenceFile were extended by storing the index at the end of the file, 1/2 of the files currently created for a map/reduce operation would be needed, reducing the load on the name node.
> Perhaps this is why Google implemented SSTable files in this manner. (SSTable files are functionally identical to Hadoop MapFiles) (see the paper on BigTable - section 4 "Building Blocks" http://labs.google.com/papers/bigtable.html)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 07:37:41 2006
Return-Path: 
 <hadoop-dev-return-4288-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30439 invoked from network); 16 Oct 2006 07:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 07:37:41 -0000
Received: (qmail 90670 invoked by uid 500); 16 Oct 2006 07:37:03 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89519 invoked by uid 500); 16 Oct 2006 07:36:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88775 invoked by uid 99); 16 Oct 2006 07:36:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 00:36:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 00:10:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6751971408C
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 00:09:37 -0700 (PDT)
Message-ID: <28307355.1160982577420.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 00:09:37 -0700 (PDT)
From: "Jim Kellerman (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442491 ] 
            
Jim Kellerman commented on HADOOP-331:
--------------------------------------

See also HADOOP-603

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 11:57:36 2006
Return-Path: 
 <hadoop-dev-return-4290-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20072 invoked from network); 16 Oct 2006 11:57:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 11:57:36 -0000
Received: (qmail 71617 invoked by uid 500); 16 Oct 2006 11:57:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71591 invoked by uid 500); 16 Oct 2006 11:57:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71581 invoked by uid 99); 16 Oct 2006 11:57:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 04:57:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vetler@opera.com designates
 193.69.113.81 as permitted sender)
Received: from [193.69.113.81] (HELO sam.opera.com) (193.69.113.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 04:57:33 -0700
Received: from localhost (pat.opera.com [193.69.113.22])
	(authenticated bits=0)
	by sam.opera.com (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id k9GBvArg025909
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 11:57:11 GMT
Date: Mon, 16 Oct 2006 13:57:20 +0200
To: hadoop-dev@lucene.apache.org
Subject: Input paths
From: "Vetle Roeim" <vetler@opera.com>
Organization: Opera Software ASA
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.thijhqevu1bjg7@localhost>
User-Agent: Opera Mail/9.01 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It seems that input to jobs is restricted to directories, and it is  
impossible to add individual files -- JobConf calls  
InputFormatBase.areValidInputDirectories, which checks that each input  
path is a directory.

Why is this required? Is it possible to change it or work around it  
(without copying the files into a separate directory)?


Thanks,
-- 
Vetle Roeim
Opera Software ASA <URL: http://www.opera.com/ >

From MAILER-DAEMON Mon Oct 16 14:21:48 2006
Return-Path: 
 <hadoop-dev-return-4291-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75513 invoked from network); 16 Oct 2006 14:21:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 14:21:48 -0000
Received: (qmail 52084 invoked by uid 500); 16 Oct 2006 14:21:46 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51995 invoked by uid 500); 16 Oct 2006 14:21:46 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51945 invoked by uid 99); 16 Oct 2006 14:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:21:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:21:42 -0700
Received: from [192.168.1.52] (pool-71-164-160-80.dllstx.fios.verizon.net
 [71.164.160.80])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id A16F8C2006E
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 09:22:17 -0500 (CDT)
Message-ID: <4533955E.7040500@dragonflymc.com>
Date: Mon, 16 Oct 2006 09:21:18 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: RPC Client Functionality Questions
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have been going through the RPC framework and I wanted to confirm what 
I am seeing and ask a couple of questions.

 From what I see the RPC framework returns dynamic proxy instances that 
use the Invoker as the InvocationHandler.  The Invoker uses a Client 
which uses a Connection and a Call to do the actual passing of the 
writable and returning of the result.  The networking happens inside of 
the Connection.  The Connection is pulled from a pool but initializes 
input and output streams and sockets on each call.  The Connection on 
sendParam method sends the Call over the network to the server and the 
socket input stream blocks waiting for a response back from the server.  
This is in a loop in the Connection thread and if the input stream read 
times out then it loops again and will block again waiting for a 
response.  This looks like this loop will happen indefinitely if nothing 
is returned from the server after the sendParam method is called.

My first question is, am I reading this code correctly?  Is what is 
described above what is actually happening.

When a call is finished the reading process the Connection object is in 
the pool if it didn't get removed by the ConnectionCuller thread for 
being idle to long.  When idle to long or an error occurs the should 
close flag on the Connection is set to true which causes it process to 
break out of the Connection processing loop in the run method and clean 
itself up eventually calling the close method.

Again is what I am seeing correct?  If it is shouldn't we be closing the 
input streams in the close method or does closing the socket 
automatically handle that?

Dennis


From MAILER-DAEMON Mon Oct 16 14:24:40 2006
Return-Path: 
 <hadoop-dev-return-4292-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76685 invoked from network); 16 Oct 2006 14:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 14:24:40 -0000
Received: (qmail 61517 invoked by uid 500); 16 Oct 2006 14:24:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61488 invoked by uid 500); 16 Oct 2006 14:24:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61479 invoked by uid 99); 16 Oct 2006 14:24:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:24:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:24:35 -0700
Received: from [192.168.1.52] (pool-71-164-160-80.dllstx.fios.verizon.net
 [71.164.160.80])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id A6D46C2006E
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 09:25:11 -0500 (CDT)
Message-ID: <4533960F.3080302@dragonflymc.com>
Date: Mon, 16 Oct 2006 09:24:15 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Input paths
References: <op.thijhqevu1bjg7@localhost>
In-Reply-To: <op.thijhqevu1bjg7@localhost>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could write your own InputFormat implementation that would check 
files instead of directories (perhaps passing in the parent directory of 
the files).  We just did something similar to this for reading index 
files as an InputFormat.

Dennis

Vetle Roeim wrote:
> It seems that input to jobs is restricted to directories, and it is 
> impossible to add individual files -- JobConf calls 
> InputFormatBase.areValidInputDirectories, which checks that each input 
> path is a directory.
>
> Why is this required? Is it possible to change it or work around it 
> (without copying the files into a separate directory)?
>
>
> Thanks,
> --Vetle Roeim
> Opera Software ASA <URL: http://www.opera.com/ >

From MAILER-DAEMON Mon Oct 16 14:41:33 2006
Return-Path: 
 <hadoop-dev-return-4293-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81263 invoked from network); 16 Oct 2006 14:41:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 14:41:33 -0000
Received: (qmail 93985 invoked by uid 500); 16 Oct 2006 14:41:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 93963 invoked by uid 500); 16 Oct 2006 14:41:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 93954 invoked by uid 99); 16 Oct 2006 14:41:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:41:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vetler@opera.com designates
 193.69.113.81 as permitted sender)
Received: from [193.69.113.81] (HELO sam.opera.com) (193.69.113.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:41:31 -0700
Received: from localhost (pat.opera.com [193.69.113.22])
	(authenticated bits=0)
	by sam.opera.com (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id k9GEf4Re028934
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 14:41:05 GMT
Date: Mon, 16 Oct 2006 16:41:13 +0200
To: hadoop-dev@lucene.apache.org
Subject: Re: Input paths
From: "Vetle Roeim" <vetler@opera.com>
Organization: Opera Software ASA
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <op.thijhqevu1bjg7@localhost> <4533960F.3080302@dragonflymc.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.thiq2zsyu1bjg7@localhost>
In-Reply-To: <4533960F.3080302@dragonflymc.com>
User-Agent: Opera Mail/9.01 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 16 Oct 2006 16:24:15 +0200, Dennis Kubes  
<nutch-dev@dragonflymc.com> wrote:

> You could write your own InputFormat implementation that would check  
> files instead of directories (perhaps passing in the parent directory of  
> the files).

Oh, so this restriction is in the InputFormat? I see in  
InputFormatBase.getSplits that the code just goes through input  
directories and gets all the files there. Would it be ok to just modify  
the code to handle files as well?

The use case for this is if you have a directory containing multiple  
files, but only want to operate on a few of those. In my case I have log  
files from several servers, and while jobs are usually run on all log  
files, this time I only want to run jobs on a subset.


> We just did something similar to this for reading index files as an  
> InputFormat.
>
> Dennis
>
> Vetle Roeim wrote:
>> It seems that input to jobs is restricted to directories, and it is  
>> impossible to add individual files -- JobConf calls  
>> InputFormatBase.areValidInputDirectories, which checks that each input  
>> path is a directory.
>>
>> Why is this required? Is it possible to change it or work around it  
>> (without copying the files into a separate directory)?
>>
>>
>> Thanks,
>> --Vetle Roeim
>> Opera Software ASA <URL: http://www.opera.com/ >



-- 
Vetle Roeim
Team Manager, Information Systems
Opera Software ASA <URL: http://www.opera.com/ >

From MAILER-DAEMON Mon Oct 16 16:36:35 2006
Return-Path: 
 <hadoop-dev-return-4294-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14760 invoked from network); 16 Oct 2006 16:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 16:36:35 -0000
Received: (qmail 45232 invoked by uid 500); 16 Oct 2006 16:36:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45188 invoked by uid 500); 16 Oct 2006 16:36:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45175 invoked by uid 99); 16 Oct 2006 16:36:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 09:36:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 09:36:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 14EB37142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 09:35:44 -0700 (PDT)
Message-ID: <8524258.1161016544083.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 09:35:44 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12442638 ] 
            
Arun C Murthy commented on HADOOP-489:
--------------------------------------

Some implementation details I'd like to bring to everyone's attention:

I'd like to propose addition of a pair of classes:

class TaskLog {

  static class Writer {
    Writer(JobConf conf, String taskId); // constructor
    public void write(byte[], int, int);  // write the task's stderr/stdout to the log
    void close();  // close the writer
  }

  static class Reader {
    Reader(String taskId); // constructor
    public int read(byte[] b, int off, int len, long logOffset, long logLength); // read longLength bytes from the task's (stderr/stdout) logs starting from logOffset
    void close();  // close the reader
  }

}

 These two classes will abstract away the details of the logfile splits etc. and offer a simple interface via write/read hiding the gory details. I'd also keep the TaskLog package-private in org.apache.hadoop.mapred.

Thoughts?


> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 16:43:52 2006
Return-Path: 
 <hadoop-dev-return-4295-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18207 invoked from network); 16 Oct 2006 16:43:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 16:43:52 -0000
Received: (qmail 65105 invoked by uid 500); 16 Oct 2006 16:43:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65030 invoked by uid 500); 16 Oct 2006 16:43:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65018 invoked by uid 99); 16 Oct 2006 16:43:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 09:43:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [74.0.0.77] (HELO linuxfly.dragonflymc.com) (74.0.0.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 09:43:50 -0700
Received: from [192.168.1.246] (unknown [63.133.162.98])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id 10C22C2006E
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 11:44:26 -0500 (CDT)
Message-ID: <4533B6B2.80002@dragonflymc.com>
Date: Mon, 16 Oct 2006 11:43:30 -0500
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Input paths
References: <op.thijhqevu1bjg7@localhost> <4533960F.3080302@dragonflymc.com>
 <op.thiq2zsyu1bjg7@localhost>
In-Reply-To: <op.thiq2zsyu1bjg7@localhost>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

InputFormatBase is used by some of the other input formats such as 
SequenceFileInputFormat so changing it there will affect those other 
classes as well.  I don't know if that is what you want or not.  I would 
probably extend TextInputFormat (assuming the files are in text logs 
such as apache logs and not xml files) and override the 
areValidInputDirectories to checks for files in the directories and the 
getSplits to return splits with only the files that you want to process.

Dennis

Vetle Roeim wrote:
> On Mon, 16 Oct 2006 16:24:15 +0200, Dennis Kubes 
> <nutch-dev@dragonflymc.com> wrote:
>
>> You could write your own InputFormat implementation that would check 
>> files instead of directories (perhaps passing in the parent directory 
>> of the files).
>
> Oh, so this restriction is in the InputFormat? I see in 
> InputFormatBase.getSplits that the code just goes through input 
> directories and gets all the files there. Would it be ok to just 
> modify the code to handle files as well?
>
> The use case for this is if you have a directory containing multiple 
> files, but only want to operate on a few of those. In my case I have 
> log files from several servers, and while jobs are usually run on all 
> log files, this time I only want to run jobs on a subset.
>
>
>> We just did something similar to this for reading index files as an 
>> InputFormat.
>>
>> Dennis
>>
>> Vetle Roeim wrote:
>>> It seems that input to jobs is restricted to directories, and it is 
>>> impossible to add individual files -- JobConf calls 
>>> InputFormatBase.areValidInputDirectories, which checks that each 
>>> input path is a directory.
>>>
>>> Why is this required? Is it possible to change it or work around it 
>>> (without copying the files into a separate directory)?
>>>
>>>
>>> Thanks,
>>> --Vetle Roeim
>>> Opera Software ASA <URL: http://www.opera.com/ >
>
>
>
> --Vetle Roeim
> Team Manager, Information Systems
> Opera Software ASA <URL: http://www.opera.com/ >

From MAILER-DAEMON Mon Oct 16 17:21:29 2006
Return-Path: 
 <hadoop-dev-return-4296-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 29605 invoked from network); 16 Oct 2006 17:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 17:21:29 -0000
Received: (qmail 34150 invoked by uid 500); 16 Oct 2006 17:21:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34131 invoked by uid 500); 16 Oct 2006 17:21:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34122 invoked by uid 99); 16 Oct 2006 17:21:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:21:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:21:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 830327142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 10:20:37 -0700 (PDT)
Message-ID: <713438.1161019237534.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 10:20:37 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442648 ] 
            
Sameer Paranjpye commented on HADOOP-331:
-----------------------------------------

It might be useful to have the 'buffer' of key/value pairs parititioned into R buckets, one for each reduce. Then when spilling, one could sort each bucket and reduce the number of comparisons and swaps done considerably. Alternatively, when spilling you could do a couple of linear passes over the buffer and bucket keys by reduce and then sort each bucket.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 17:40:36 2006
Return-Path: 
 <hadoop-dev-return-4297-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36631 invoked from network); 16 Oct 2006 17:40:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 17:40:36 -0000
Received: (qmail 94226 invoked by uid 500); 16 Oct 2006 17:40:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94137 invoked by uid 500); 16 Oct 2006 17:40:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94128 invoked by uid 99); 16 Oct 2006 17:40:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:40:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [203.99.254.143] (HELO rsmtp1.corp.hki.yahoo.com)
 (203.99.254.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:40:33 -0700
Received: from ddaslaptop (traveling-laptop-140.corp.yahoo.com
 [172.23.35.140])
	(authenticated bits=0)
	by rsmtp1.corp.hki.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id
 k9GHdvi1011468
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 10:39:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=LJNBr1B4fEQ0pf9SMXMeZH6pCpyumX3zL+xUrSAr/XP9oee8LQd2tEnogQkk8kOk
From: "Devaraj Das" <ddas@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: RPC Client Functionality Questions
Date: Mon, 16 Oct 2006 10:39:57 -0700
Message-ID: <000e01c6f14a$1a50ba90$aa9015ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4533955E.7040500@dragonflymc.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbxLnDOCr60MnJMSjKFMteyC68H8AAFwJ8A
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



> -----Original Message-----
> From: Dennis Kubes [mailto:nutch-dev@dragonflymc.com]
> Sent: Monday, October 16, 2006 7:21 AM
> To: hadoop-dev@lucene.apache.org
> Subject: RPC Client Functionality Questions
> 
> I have been going through the RPC framework and I wanted to confirm what
> I am seeing and ask a couple of questions.
> 
>  From what I see the RPC framework returns dynamic proxy instances that
> use the Invoker as the InvocationHandler.  The Invoker uses a Client
> which uses a Connection and a Call to do the actual passing of the
> writable and returning of the result.  The networking happens inside of
> the Connection.  The Connection is pulled from a pool but initializes
> input and output streams and sockets on each call.  The Connection on
> sendParam method sends the Call over the network to the server and the
> socket input stream blocks waiting for a response back from the server.
> This is in a loop in the Connection thread and if the input stream read
> times out then it loops again and will block again waiting for a
> response.  This looks like this loop will happen indefinitely if nothing
> is returned from the server after the sendParam method is called.

Yes, that's true. 

> 
> My first question is, am I reading this code correctly?  Is what is
> described above what is actually happening.
> 
> When a call is finished the reading process the Connection object is in
> the pool if it didn't get removed by the ConnectionCuller thread for
> being idle to long.  When idle to long or an error occurs the should
> close flag on the Connection is set to true which causes it process to
> break out of the Connection processing loop in the run method and clean
> itself up eventually calling the close method.
> 
> Again is what I am seeing correct?  If it is shouldn't we be closing the
> input streams in the close method or does closing the socket
> automatically handle that?

The streams should normally be closed (haven't looked at the source code
though). But since the Socket API documentation doesn't explicitly say this,
maybe we should be more explicit about it? 

> 
> Dennis



From MAILER-DAEMON Mon Oct 16 17:51:31 2006
Return-Path: 
 <hadoop-dev-return-4298-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39978 invoked from network); 16 Oct 2006 17:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 17:51:31 -0000
Received: (qmail 24940 invoked by uid 500); 16 Oct 2006 17:51:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24732 invoked by uid 500); 16 Oct 2006 17:51:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24722 invoked by uid 99); 16 Oct 2006 17:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:51:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:51:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE4527142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 10:50:34 -0700 (PDT)
Message-ID: <30151363.1161021034972.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 10:50:34 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-604) DataNodes get NullPointerException and
 become unresponsive on 50010
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DataNodes get NullPointerException and become unresponsive on 50010
-------------------------------------------------------------------

                 Key: HADOOP-604
                 URL: http://issues.apache.org/jira/browse/HADOOP-604
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.6.0
            Reporter: Christian Kunz


I wonder whether handling of 'children' in FSDataset is thread-safe.

Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
        at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
        at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
        at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
        at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
        at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
        at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
        at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
        at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
        at java.lang.Thread.run(Thread.java:595)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 17:53:27 2006
Return-Path: 
 <hadoop-dev-return-4299-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40448 invoked from network); 16 Oct 2006 17:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 17:53:27 -0000
Received: (qmail 26164 invoked by uid 500); 16 Oct 2006 17:53:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26137 invoked by uid 500); 16 Oct 2006 17:53:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26124 invoked by uid 99); 16 Oct 2006 17:53:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:53:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:53:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1ED367142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 10:52:36 -0700 (PDT)
Message-ID: <19490570.1161021156123.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 10:52:36 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-603) Extend SequenceFile to provide
 MapFile function by storing index at the end of the file
In-Reply-To: <667134.1160838695014.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-603?page=comments#action_12442654 ] 
            
eric baldeschwieler commented on HADOOP-603:
--------------------------------------------

Yeah.  Just keeping an array of offset vectors per partition would be simpler.

Jim: Don't see a problem with your suggestion (HADOOP-603), but I don't think the two projects relate.  These files will be broken into partitions.  Fitting that into a MapFile might be a bit of a stretch. 


> Extend SequenceFile to provide MapFile function by storing index at the end of the file
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-603
>                 URL: http://issues.apache.org/jira/browse/HADOOP-603
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Jim Kellerman
>
> MapFile increases the load on the name node as two files are created to provide a index file format. If SequenceFile were extended by storing the index at the end of the file, 1/2 of the files currently created for a map/reduce operation would be needed, reducing the load on the name node.
> Perhaps this is why Google implemented SSTable files in this manner. (SSTable files are functionally identical to Hadoop MapFiles) (see the paper on BigTable - section 4 "Building Blocks" http://labs.google.com/papers/bigtable.html)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 17:55:32 2006
Return-Path: 
 <hadoop-dev-return-4300-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43768 invoked from network); 16 Oct 2006 17:55:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 17:55:32 -0000
Received: (qmail 29920 invoked by uid 500); 16 Oct 2006 17:55:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29888 invoked by uid 500); 16 Oct 2006 17:55:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29879 invoked by uid 99); 16 Oct 2006 17:55:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:55:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:55:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E8EF71414C
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 10:54:36 -0700 (PDT)
Message-ID: <1169548.1161021276188.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 10:54:36 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-603) Extend SequenceFile to provide MapFile
 function by storing index at the end of the file
In-Reply-To: <667134.1160838695014.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-603?page=all ]

eric baldeschwieler updated HADOOP-603:
---------------------------------------

    Comment: was deleted

> Extend SequenceFile to provide MapFile function by storing index at the end of the file
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-603
>                 URL: http://issues.apache.org/jira/browse/HADOOP-603
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>            Reporter: Jim Kellerman
>
> MapFile increases the load on the name node as two files are created to provide a index file format. If SequenceFile were extended by storing the index at the end of the file, 1/2 of the files currently created for a map/reduce operation would be needed, reducing the load on the name node.
> Perhaps this is why Google implemented SSTable files in this manner. (SSTable files are functionally identical to Hadoop MapFiles) (see the paper on BigTable - section 4 "Building Blocks" http://labs.google.com/papers/bigtable.html)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 17:55:34 2006
Return-Path: 
 <hadoop-dev-return-4301-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43858 invoked from network); 16 Oct 2006 17:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 17:55:34 -0000
Received: (qmail 30150 invoked by uid 500); 16 Oct 2006 17:55:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30128 invoked by uid 500); 16 Oct 2006 17:55:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30119 invoked by uid 99); 16 Oct 2006 17:55:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:55:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:55:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 138AC7142D2
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 10:54:38 -0700 (PDT)
Message-ID: <21383839.1161021278077.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 10:54:38 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442655 ] 
            
eric baldeschwieler commented on HADOOP-331:
--------------------------------------------

Yeah.  Just keeping an array of offset vectors per partition would be simpler.

Jim: Don't see a problem with your suggestion (HADOOP-603), but I don't think the two projects relate.  These files will be broken into partitions.  Fitting that into a MapFile might be a bit of a stretch. 


> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 18:01:39 2006
Return-Path: 
 <hadoop-dev-return-4302-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49289 invoked from network); 16 Oct 2006 18:01:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 18:01:39 -0000
Received: (qmail 40037 invoked by uid 500); 16 Oct 2006 18:01:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39938 invoked by uid 500); 16 Oct 2006 18:01:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39898 invoked by uid 99); 16 Oct 2006 18:01:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 11:01:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 11:01:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 319377142DD
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 11:00:37 -0700 (PDT)
Message-ID: <15609800.1161021637199.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 11:00:37 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-604) DataNodes get NullPointerException
 and become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-604?page=all ]

Sameer Paranjpye reassigned HADOOP-604:
---------------------------------------

    Assignee: Milind Bhandarkar

> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Milind Bhandarkar
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 18:07:27 2006
Return-Path: 
 <hadoop-dev-return-4303-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 53200 invoked from network); 16 Oct 2006 18:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 18:07:27 -0000
Received: (qmail 55194 invoked by uid 500); 16 Oct 2006 18:07:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55157 invoked by uid 500); 16 Oct 2006 18:07:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55148 invoked by uid 99); 16 Oct 2006 18:07:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 11:07:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 11:07:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 676AE7142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 11:06:36 -0700 (PDT)
Message-ID: <26029852.1161021996335.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 11:06:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-601) we need some rpc retry framework
In-Reply-To: <18721500.1160688154977.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-601?page=comments#action_12442658 ] 
            
Doug Cutting commented on HADOOP-601:
-------------------------------------

This looks good to me.  +1

For comparison, the proxy approach might look something like:

XxxProtocol proxy = new RetryProxy(XxxProtocol.class, Try.FOREVER);

The weakness of this approach would be (a) the client would need to know how to build an appropriate proxy for the protocol, and (b) specifying different reliability contracts for different methods would be awkward.  By contrast, your annotation-based approach keeps the reliability requirements with the protocol and per-method.


> we need some rpc retry framework
> --------------------------------
>
>                 Key: HADOOP-601
>                 URL: http://issues.apache.org/jira/browse/HADOOP-601
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>
> We need some mechanism for RPC calls that get exceptions to automatically retry the call under certain circumstances. In particular, we often end up with calls to rpcs being wrapped with retry loops for timeouts. We should be able to make a retrying proxy that will call the rpc and retry in some circumstances.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 19:24:26 2006
Return-Path: 
 <hadoop-dev-return-4304-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97094 invoked from network); 16 Oct 2006 19:24:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 19:24:26 -0000
Received: (qmail 70134 invoked by uid 500); 16 Oct 2006 19:24:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70098 invoked by uid 500); 16 Oct 2006 19:24:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70084 invoked by uid 99); 16 Oct 2006 19:24:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 12:24:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 12:24:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2CBF47142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 12:23:35 -0700 (PDT)
Message-ID: <25157247.1161026615179.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 12:23:35 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-605) The jobtracker UI does not show some
 jobs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The jobtracker UI does not show some jobs
-----------------------------------------

                 Key: HADOOP-605
                 URL: http://issues.apache.org/jira/browse/HADOOP-605
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Mahadev konar
            Priority: Minor


we have seen this in streaming, not sure if it happens in hadoop java programs. The jobclient gets a jobid from the jobtracker and then fails to launch the job since hte job is missing a mapper ("No -mapper specified" in streaming). The job is never submitted to the jobtracker and the jobtracker does not have any history of this job. Streaming should inform the jobtracker why the job failed and this should show up in the job UI.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 21:49:28 2006
Return-Path: 
 <hadoop-dev-return-4305-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71737 invoked from network); 16 Oct 2006 21:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 21:49:28 -0000
Received: (qmail 9871 invoked by uid 500); 16 Oct 2006 21:49:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9649 invoked by uid 500); 16 Oct 2006 21:49:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9640 invoked by uid 99); 16 Oct 2006 21:49:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 14:49:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 14:49:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BE19C714201
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 14:48:36 -0700 (PDT)
Message-ID: <4847307.1161035316776.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 14:48:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-477) Streaming should execute Unix commands
 and scripts in well known languages without user specifying the path
In-Reply-To: <556122.1156462753408.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-477?page=all ]

Doug Cutting updated HADOOP-477:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> Streaming should execute Unix commands and scripts in well known languages without user specifying the path
> -----------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-477
>                 URL: http://issues.apache.org/jira/browse/HADOOP-477
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>            Reporter: arkady borkovsky
>         Assigned To: dhruba borthakur
>             Fix For: 0.8.0
>
>         Attachments: streamingpath.patch
>
>
> If the executables for -mapper or -reducer are well-known (grep, cat, awk), Streaming should make sure that the executable is found.
> If a script  for -mapper or -reducer are in a well-known language (.pl, .py), Streaming should  execute it  with the correct language processor.
> Reason:
> many jobs get started from machines with a different environment from that on the cluster.  
> On another hand, different clusters may have different environments.  
> Also, a user may have no access to the cluster machines.
> Because of this, a user may be unable to specify correct paths for standard commands, and correct language processors for scripts.
> Implementation:
> Stream may tailr the commands by prepending the path, or the name of language processor.  
> Another solution is to make sure that the commands are executed in a "meaningful" environment (with good $PATH, and other variables Unix users are accustomed to count upon).
> Once again, Streaming is user facing tool -- it is not a library or a hackable example that the users are to modify for their needs.  So it should work out of the box.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 22:06:28 2006
Return-Path: 
 <hadoop-dev-return-4306-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77135 invoked from network); 16 Oct 2006 22:06:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 22:06:28 -0000
Received: (qmail 31202 invoked by uid 500); 16 Oct 2006 22:06:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31164 invoked by uid 500); 16 Oct 2006 22:06:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31155 invoked by uid 99); 16 Oct 2006 22:06:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:06:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:06:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BA2C971414C
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 15:05:36 -0700 (PDT)
Message-ID: <21232185.1161036336760.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 15:05:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-462?page=comments#action_12442720 ] 
            
Doug Cutting commented on HADOOP-462:
-------------------------------------

Overall, this looks like a good change.

In DFSShell.run(), instead of adding a 'exitCode=0' to every clause, why not change the 'else' clause to 'return -1'?  That would save about 15 lines.  Why the double-semicolons?  And the 'else' clause you add is formatted non-standardly.

There's a typo in the javadoc for setQuietMode().

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 22:06:30 2006
Return-Path: 
 <hadoop-dev-return-4307-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 77183 invoked from network); 16 Oct 2006 22:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 22:06:30 -0000
Received: (qmail 31650 invoked by uid 500); 16 Oct 2006 22:06:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31430 invoked by uid 500); 16 Oct 2006 22:06:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31421 invoked by uid 99); 16 Oct 2006 22:06:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:06:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:06:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7AE57142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 15:05:38 -0700 (PDT)
Message-ID: <12976279.1161036338750.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 15:05:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

Doug Cutting updated HADOOP-462:
--------------------------------

    Status: Open  (was: Patch Available)

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 22:10:26 2006
Return-Path: 
 <hadoop-dev-return-4308-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79227 invoked from network); 16 Oct 2006 22:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 22:10:26 -0000
Received: (qmail 38099 invoked by uid 500); 16 Oct 2006 22:10:25 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38066 invoked by uid 500); 16 Oct 2006 22:10:25 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38054 invoked by uid 99); 16 Oct 2006 22:10:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:10:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:10:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 05DFD71414C
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 15:09:35 -0700 (PDT)
Message-ID: <19349222.1161036575021.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 15:09:35 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-606) DFSShell should print messages to
 standard error
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFSShell should print messages to standard error
------------------------------------------------

                 Key: HADOOP-606
                 URL: http://issues.apache.org/jira/browse/HADOOP-606
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Doug Cutting


DFSShell prints many of its usage and error messages to System.out.  Only command output (ls, cat, report, etc.) should be written to System.out, everything else should be sent to System.err.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 22:12:28 2006
Return-Path: 
 <hadoop-dev-return-4309-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79954 invoked from network); 16 Oct 2006 22:12:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 22:12:28 -0000
Received: (qmail 39605 invoked by uid 500); 16 Oct 2006 22:12:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39577 invoked by uid 500); 16 Oct 2006 22:12:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39568 invoked by uid 99); 16 Oct 2006 22:12:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:12:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:12:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BCABB7142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 15:11:36 -0700 (PDT)
Message-ID: <8199345.1161036696770.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 15:11:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-462?page=comments#action_12442723 ] 
            
dhruba borthakur commented on HADOOP-462:
-----------------------------------------

Hi Doug,

I am looking at it and will get back to you shortly.

Thanks,
dhruba



> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 22:14:32 2006
Return-Path: 
 <hadoop-dev-return-4310-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81265 invoked from network); 16 Oct 2006 22:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 22:14:32 -0000
Received: (qmail 42713 invoked by uid 500); 16 Oct 2006 22:14:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42686 invoked by uid 500); 16 Oct 2006 22:14:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42677 invoked by uid 99); 16 Oct 2006 22:14:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:14:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:14:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B3F87142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 15:13:36 -0700 (PDT)
Message-ID: <24490442.1161036816174.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 15:13:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-583) DFSClient should use debug level to
 log missing data-node.
In-Reply-To: <5544293.1160176163321.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-583?page=all ]

Doug Cutting updated HADOOP-583:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> DFSClient should use debug level to log missing data-node.
> ----------------------------------------------------------
>
>                 Key: HADOOP-583
>                 URL: http://issues.apache.org/jira/browse/HADOOP-583
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: ClientLog.patch
>
>
> When DFSClient cannot read a block replica it logs a message saying
> "Failed to connect to <target> ..." + exception
> and then tries other replicas. If the client succeeds with another replica this
> is only record that the log will contain. This seems to be confusing for users.
> So I propose to use debug logging level here.
> I also stringified exceptions.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 22:35:33 2006
Return-Path: 
 <hadoop-dev-return-4311-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84605 invoked from network); 16 Oct 2006 22:35:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 22:35:33 -0000
Received: (qmail 62056 invoked by uid 500); 16 Oct 2006 22:35:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61991 invoked by uid 500); 16 Oct 2006 22:35:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61982 invoked by uid 99); 16 Oct 2006 22:35:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:35:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:35:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C7E3A7142DD
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 15:34:40 -0700 (PDT)
Message-ID: <17398313.1161038080816.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 15:34:40 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442732 ] 
            
Doug Cutting commented on HADOOP-331:
-------------------------------------

> sort each bucket and reduce the number of comparisons and swaps done considerably

In memory, we only need to sort pointers to buffered items, so there only needs to be a single buffer with the serialized items.  Still, I agree that we can minimize comparisons & swaps by bucketing these pointers, then sorting each buffer prior to dumping the data it points to.  Is that what you meant, Sameer?

Each spill can result in output of the same format as the final output: a <key,value>* file sorted by <part,key> and a <part,offset>* file that indicates the start of each part.  So if there's only one spill then no merging is required.  Unfortunately, since 'part' is implicit, we cannot use the existing SequenceFile merge code.


> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 22:59:29 2006
Return-Path: 
 <hadoop-dev-return-4312-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89818 invoked from network); 16 Oct 2006 22:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 22:59:29 -0000
Received: (qmail 96853 invoked by uid 500); 16 Oct 2006 22:59:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96833 invoked by uid 500); 16 Oct 2006 22:59:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96824 invoked by uid 99); 16 Oct 2006 22:59:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:59:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:59:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 43EA17142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 15:58:37 -0700 (PDT)
Message-ID: <18011115.1161039517275.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 15:58:37 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-498) fsck should execute faster
In-Reply-To: <16510954.1157010324263.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-498?page=all ]

Doug Cutting updated HADOOP-498:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> fsck should execute faster
> --------------------------
>
>                 Key: HADOOP-498
>                 URL: http://issues.apache.org/jira/browse/HADOOP-498
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Yoram Arnon
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: fsck.patch
>
>
> on a good size dfs, with a few 100000 blocks, fsck takes around 30 minutes, while dfs -du takes only a couple of seconds.
> fsck should take seconds, rather than minutes. It should be a namenode operation, not a client program.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 23:06:32 2006
Return-Path: 
 <hadoop-dev-return-4313-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 91334 invoked from network); 16 Oct 2006 23:06:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 23:06:32 -0000
Received: (qmail 9620 invoked by uid 500); 16 Oct 2006 23:06:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9593 invoked by uid 500); 16 Oct 2006 23:06:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9584 invoked by uid 99); 16 Oct 2006 23:06:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:06:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:06:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 28DCF71414C
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 16:05:36 -0700 (PDT)
Message-ID: <18788351.1161039936163.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 16:05:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-586) Job Name should not ben empty, if its
 is not given bu user, Hadoop should use original Jar name as the job name.
In-Reply-To: <3307070.1160383039599.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-586?page=all ]

Doug Cutting updated HADOOP-586:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> Job Name should not ben empty, if its is not given bu user, Hadoop should use original Jar name as the job name.
> ----------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-586
>                 URL: http://issues.apache.org/jira/browse/HADOOP-586
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>            Priority: Trivial
>             Fix For: 0.8.0
>
>         Attachments: Hadoop-586.patch
>
>
> JobTracker UI and JobTracker history UI have job name column empty for jobs that don't have a name. It would be good to have some identification of the job there even if user doesn't give it a name. Name of the user jar file is a good candidate. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 23:12:34 2006
Return-Path: 
 <hadoop-dev-return-4314-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92710 invoked from network); 16 Oct 2006 23:12:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 23:12:34 -0000
Received: (qmail 17684 invoked by uid 500); 16 Oct 2006 23:12:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17656 invoked by uid 500); 16 Oct 2006 23:12:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17612 invoked by uid 99); 16 Oct 2006 23:12:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:12:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:12:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 414267142F9
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 16:11:41 -0700 (PDT)
Message-ID: <14728338.1161040301264.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 16:11:41 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-514) namenode heartbeat interval should be
 configurable
In-Reply-To: <17229842.1157594543761.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-514?page=all ]

Doug Cutting updated HADOOP-514:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> namenode heartbeat interval should be configurable
> --------------------------------------------------
>
>                 Key: HADOOP-514
>                 URL: http://issues.apache.org/jira/browse/HADOOP-514
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.0
>            Reporter: Wendy Chien
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: heartbeat.patch
>
>
> The namenode heartbeat interval is currently a constant in FSConstants.   It should be configurable instead.  Things which currently rely on the heartbeat occuring fairly frequently should be disassociated.    

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 23:16:42 2006
Return-Path: 
 <hadoop-dev-return-4315-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93346 invoked from network); 16 Oct 2006 23:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 23:16:42 -0000
Received: (qmail 21134 invoked by uid 500); 16 Oct 2006 23:16:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21094 invoked by uid 500); 16 Oct 2006 23:16:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21075 invoked by uid 99); 16 Oct 2006 23:16:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:16:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:16:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6AC7A7141E3
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 16:15:37 -0700 (PDT)
Message-ID: <17175669.1161040537434.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 16:15:37 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-588) JobTracker History bug - kill() ed
 tasks are logged wrongly as finished.
In-Reply-To: <2570477.1160468241401.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-588?page=all ]

Doug Cutting updated HADOOP-588:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> JobTracker History bug - kill() ed tasks are logged wrongly as finished.
> ------------------------------------------------------------------------
>
>                 Key: HADOOP-588
>                 URL: http://issues.apache.org/jira/browse/HADOOP-588
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Sanjay Dahiya
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.8.0
>
>         Attachments: Hadoop-588-extra.patch, Hadoop-588.patch
>
>
> JobInProgress.kill() logs jobs as finished in jobtracker history, whereas they should be logged as failed. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 23:41:33 2006
Return-Path: 
 <hadoop-dev-return-4317-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1338 invoked from network); 16 Oct 2006 23:41:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 23:41:33 -0000
Received: (qmail 53575 invoked by uid 500); 16 Oct 2006 23:41:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53368 invoked by uid 500); 16 Oct 2006 23:41:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53189 invoked by uid 99); 16 Oct 2006 23:41:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:41:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:41:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 406AF714201
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 16:40:36 -0700 (PDT)
Message-ID: <21928252.1161042036178.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 16:40:36 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien updated HADOOP-482:
-------------------------------

    Attachment: unittest.patch

This patch makes the unit tests fail instead of hang if a namenode or jobtracker is running on the machine.  

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 23:41:34 2006
Return-Path: 
 <hadoop-dev-return-4318-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1377 invoked from network); 16 Oct 2006 23:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 23:41:34 -0000
Received: (qmail 53654 invoked by uid 500); 16 Oct 2006 23:41:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53619 invoked by uid 500); 16 Oct 2006 23:41:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53586 invoked by uid 99); 16 Oct 2006 23:41:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:41:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:41:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 901B67142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 16:40:37 -0700 (PDT)
Message-ID: <16096720.1161042037587.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 16:40:37 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien updated HADOOP-482:
-------------------------------

    Status: Patch Available  (was: Open)

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 16 23:41:32 2006
Return-Path: 
 <hadoop-dev-return-4316-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1291 invoked from network); 16 Oct 2006 23:41:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 23:41:32 -0000
Received: (qmail 53349 invoked by uid 500); 16 Oct 2006 23:41:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53128 invoked by uid 500); 16 Oct 2006 23:41:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53119 invoked by uid 99); 16 Oct 2006 23:41:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:41:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 16:41:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BE9FD7142E4
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 16:40:40 -0700 (PDT)
Message-ID: <30766625.1161042040778.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 16:40:40 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-482?page=comments#action_12442757 ] 
            
Wendy Chien commented on HADOOP-482:
------------------------------------

I should mention that if the info port is in conflict, then it'll look for a new one, but it does not do this for the rpc port.  In that case, the test will fail. 

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 00:16:33 2006
Return-Path: 
 <hadoop-dev-return-4319-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10976 invoked from network); 17 Oct 2006 00:16:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 00:16:33 -0000
Received: (qmail 96102 invoked by uid 500); 17 Oct 2006 00:16:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96068 invoked by uid 500); 17 Oct 2006 00:16:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96059 invoked by uid 99); 17 Oct 2006 00:16:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 17:16:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 17:16:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ADED4714201
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 17:15:36 -0700 (PDT)
Message-ID: <24991418.1161044136709.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 17:15:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur updated HADOOP-462:
------------------------------------

    Attachment: dfsshell.patch.2

A new version of the patch with Doug's code review comments incorporated. This supercedes the earlier patch that was submitted.

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch, dfsshell.patch.2
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 00:18:28 2006
Return-Path: 
 <hadoop-dev-return-4320-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12360 invoked from network); 17 Oct 2006 00:18:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 00:18:28 -0000
Received: (qmail 99419 invoked by uid 500); 17 Oct 2006 00:18:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99400 invoked by uid 500); 17 Oct 2006 00:18:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99391 invoked by uid 99); 17 Oct 2006 00:18:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 17:18:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 17:18:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B19767141E3
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 17:17:36 -0700 (PDT)
Message-ID: <3779579.1161044256724.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 17:17:36 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur updated HADOOP-462:
------------------------------------

    Attachment:     (was: dfsshell.patch)

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch.2
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 00:18:35 2006
Return-Path: 
 <hadoop-dev-return-4321-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12414 invoked from network); 17 Oct 2006 00:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 00:18:35 -0000
Received: (qmail 99757 invoked by uid 500); 17 Oct 2006 00:18:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99726 invoked by uid 500); 17 Oct 2006 00:18:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99717 invoked by uid 99); 17 Oct 2006 00:18:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 17:18:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 17:18:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 960997142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 17:17:38 -0700 (PDT)
Message-ID: <15534089.1161044258612.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 17:17:38 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur updated HADOOP-462:
------------------------------------

    Status: Patch Available  (was: Open)

Submitted patch with Doug's code review comments.

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch.2
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 03:06:32 2006
Return-Path: 
 <hadoop-dev-return-4323-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52265 invoked from network); 17 Oct 2006 03:06:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 03:06:32 -0000
Received: (qmail 59109 invoked by uid 500); 17 Oct 2006 03:06:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58894 invoked by uid 500); 17 Oct 2006 03:06:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58885 invoked by uid 99); 17 Oct 2006 03:06:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 20:06:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 20:06:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 256D87141E3
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 20:05:36 -0700 (PDT)
Message-ID: <23900968.1161054336150.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 20:05:36 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien updated HADOOP-482:
-------------------------------

    Attachment: unittest2.patch

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest2.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 03:06:29 2006
Return-Path: 
 <hadoop-dev-return-4322-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52217 invoked from network); 17 Oct 2006 03:06:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 03:06:29 -0000
Received: (qmail 58861 invoked by uid 500); 17 Oct 2006 03:06:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58647 invoked by uid 500); 17 Oct 2006 03:06:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58638 invoked by uid 99); 17 Oct 2006 03:06:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 20:06:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 20:06:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5B1737142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 20:05:37 -0700 (PDT)
Message-ID: <20870147.1161054337370.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 20:05:37 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien updated HADOOP-482:
-------------------------------

    Attachment:     (was: unittest.patch)

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest2.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 05:57:28 2006
Return-Path: 
 <hadoop-dev-return-4324-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96402 invoked from network); 17 Oct 2006 05:57:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 05:57:28 -0000
Received: (qmail 85872 invoked by uid 500); 17 Oct 2006 05:57:26 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 85793 invoked by uid 500); 17 Oct 2006 05:57:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 85766 invoked by uid 99); 17 Oct 2006 05:57:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 22:57:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 22:57:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F10527141D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 22:56:34 -0700 (PDT)
Message-ID: <3618961.1161064594983.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 22:56:34 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-607) Classpath of tasks is not set
 correctly (bug happens for multiple mapred local dirs only)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Classpath of tasks is not set correctly (bug happens for multiple mapred local dirs only)
-----------------------------------------------------------------------------------------

                 Key: HADOOP-607
                 URL: http://issues.apache.org/jira/browse/HADOOP-607
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
         Assigned To: Mahadev konar
            Priority: Critical


Tasks fail because the classpath for the tasks is not set correctly. The current working directory of the tasks is not set to the directory where the job.jar is unjarred.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 05:59:28 2006
Return-Path: 
 <hadoop-dev-return-4325-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96550 invoked from network); 17 Oct 2006 05:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 05:59:28 -0000
Received: (qmail 89219 invoked by uid 500); 17 Oct 2006 05:59:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88998 invoked by uid 500); 17 Oct 2006 05:59:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88985 invoked by uid 99); 17 Oct 2006 05:59:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 22:59:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 22:59:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1840F7141E3
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 22:58:36 -0700 (PDT)
Message-ID: <28862997.1161064716096.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 22:58:36 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-607) Classpath of tasks is not set
 correctly (bug happens for multiple mapred local dirs only)
In-Reply-To: <3618961.1161064594983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-607?page=all ]

Mahadev konar updated HADOOP-607:
---------------------------------

    Attachment: bugfix.patch

just a one line change that fixes the problem. The problem was happening because I had been inconsistent about using conf.getLocalPath().

> Classpath of tasks is not set correctly (bug happens for multiple mapred local dirs only)
> -----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-607
>                 URL: http://issues.apache.org/jira/browse/HADOOP-607
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Critical
>         Attachments: bugfix.patch
>
>
> Tasks fail because the classpath for the tasks is not set correctly. The current working directory of the tasks is not set to the directory where the job.jar is unjarred.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 06:09:34 2006
Return-Path: 
 <hadoop-dev-return-4326-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97749 invoked from network); 17 Oct 2006 06:09:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 06:09:34 -0000
Received: (qmail 96972 invoked by uid 500); 17 Oct 2006 06:09:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96951 invoked by uid 500); 17 Oct 2006 06:09:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96938 invoked by uid 99); 17 Oct 2006 06:09:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 23:09:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 23:09:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6B8CE7142D1
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 23:08:37 -0700 (PDT)
Message-ID: <6850563.1161065317438.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 23:08:37 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442793 ] 
            
Devaraj Das commented on HADOOP-331:
------------------------------------

I would ideally like to use as much of the existing code/tools as possible. So, here is another proposal:
1) Generate a master index as the buffers are filled with key/value pairs. The master index is an array indexed by partition number and each entry in the array contain values of the form <filename, keyoffset, valoffset>*.  The filename refers to the filename where the containing buffer was spilled. Think of this as each element in the array is an array by itself.
2) Filled buffers are spilled and NO sorting is done when a spill happens.
3) At the end, we have a master index and we go through that index by index ( partition by partition). Since we know the filename and the key/value offsets, we can access the key/value data with ease. We create a temporary fixed-sized in-memory buffer for each array element and if we can accomodate all the key/value pairs for the particular array element in that buffer, well and good; we sort that in-memory buffer and append the sorted data to a final output file. If we cannot fit in everything into the buffer, we spill and sort the spills after we spill all the key/value pairs.
4) While we do (3), we can trivially generate the final index file.
5) At the end of the step (3), we have a big file with sorted data (by partition) and a single index file. 
The problems of implicit partition numbers are not there with this approach. Also, we can do parallel sorts (like two at a time or something) of the array elements and generate multiple files and just concatenate the sorted data at the end of the sorts to that single output file. The negative with this approach is that we need another temp buffer (but it may be required in the other approaches also). Think the master index file won't be very big (it will be roughly of the order of number of records processed by a single map).
Thoughts ?

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 06:30:29 2006
Return-Path: 
 <hadoop-dev-return-4327-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2973 invoked from network); 17 Oct 2006 06:30:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 06:30:29 -0000
Received: (qmail 27776 invoked by uid 500); 17 Oct 2006 06:30:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27740 invoked by uid 500); 17 Oct 2006 06:30:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27731 invoked by uid 99); 17 Oct 2006 06:30:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 23:30:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 23:30:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 61930714201
	for <hadoop-dev@lucene.apache.org>; Mon, 16 Oct 2006 23:29:37 -0700 (PDT)
Message-ID: <9069060.1161066577396.JavaMail.jira@brutus>
Date: Mon, 16 Oct 2006 23:29:37 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442807 ] 
            
Devaraj Das commented on HADOOP-331:
------------------------------------

> Think the master index file won't be very big (it will be roughly of the order of 
> number of records processed by a single map). 
Actually meant to say "master index array/buffer".

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 15:40:33 2006
Return-Path: 
 <hadoop-dev-return-4328-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95243 invoked from network); 17 Oct 2006 15:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 15:40:33 -0000
Received: (qmail 10217 invoked by uid 500); 17 Oct 2006 15:40:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10127 invoked by uid 500); 17 Oct 2006 15:40:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10040 invoked by uid 99); 17 Oct 2006 15:40:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:40:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:40:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 70FDA7142D1
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 08:39:37 -0700 (PDT)
Message-ID: <16438609.1161099577460.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 08:39:37 -0700 (PDT)
From: "Johannes Zillmann (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-608) dynamic configuration of
 mapred.map/reduce.tasks
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

dynamic configuration of mapred.map/reduce.tasks
------------------------------------------------

                 Key: HADOOP-608
                 URL: http://issues.apache.org/jira/browse/HADOOP-608
             Project: Hadoop
          Issue Type: Wish
          Components: conf
            Reporter: Johannes Zillmann
            Priority: Minor


Since the optimal value for these 2 configuration properties heavily depends on the numer of nodes, also examined here
http://wiki.apache.org/lucene-hadoop/HowManyMapsAndReduces
 would it be not more comfortable to configure relations to numberOfNodes ?
So you hav'nt to change it all the time the number of nodes changes...

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 16:33:28 2006
Return-Path: 
 <hadoop-dev-return-4329-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14259 invoked from network); 17 Oct 2006 16:33:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:33:28 -0000
Received: (qmail 77147 invoked by uid 500); 17 Oct 2006 16:33:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76976 invoked by uid 500); 17 Oct 2006 16:33:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76966 invoked by uid 99); 17 Oct 2006 16:33:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:33:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:33:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 06B557142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 09:32:35 -0700 (PDT)
Message-ID: <698465.1161102755024.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 09:32:35 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mini map/reduce cluster should use multiple temp directories
------------------------------------------------------------

                 Key: HADOOP-609
                 URL: http://issues.apache.org/jira/browse/HADOOP-609
             Project: Hadoop
          Issue Type: Test
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 16:33:30 2006
Return-Path: 
 <hadoop-dev-return-4330-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14308 invoked from network); 17 Oct 2006 16:33:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:33:30 -0000
Received: (qmail 77247 invoked by uid 500); 17 Oct 2006 16:33:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77221 invoked by uid 500); 17 Oct 2006 16:33:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77212 invoked by uid 99); 17 Oct 2006 16:33:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:33:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:33:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 49DB071430D
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 09:32:36 -0700 (PDT)
Message-ID: <22166228.1161102756300.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 09:32:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Owen O'Malley updated HADOOP-609:
---------------------------------

        Fix Version/s: 0.8.0
    Affects Version/s: 0.7.1

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 16:37:29 2006
Return-Path: 
 <hadoop-dev-return-4331-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16612 invoked from network); 17 Oct 2006 16:37:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:37:29 -0000
Received: (qmail 88367 invoked by uid 500); 17 Oct 2006 16:37:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88333 invoked by uid 500); 17 Oct 2006 16:37:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88324 invoked by uid 99); 17 Oct 2006 16:37:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:37:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:37:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 49B3E7142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 09:36:36 -0700 (PDT)
Message-ID: <29521479.1161102996299.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 09:36:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-607) Classpath of tasks is not set
 correctly (bug happens for multiple mapred local dirs only)
In-Reply-To: <3618961.1161064594983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-607?page=comments#action_12442969 ] 
            
Doug Cutting commented on HADOOP-607:
-------------------------------------

Do folks think this should force a 0.7.2 release?

> Classpath of tasks is not set correctly (bug happens for multiple mapred local dirs only)
> -----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-607
>                 URL: http://issues.apache.org/jira/browse/HADOOP-607
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Critical
>         Attachments: bugfix.patch
>
>
> Tasks fail because the classpath for the tasks is not set correctly. The current working directory of the tasks is not set to the directory where the job.jar is unjarred.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 16:45:33 2006
Return-Path: 
 <hadoop-dev-return-4332-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20739 invoked from network); 17 Oct 2006 16:45:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:45:33 -0000
Received: (qmail 12338 invoked by uid 500); 17 Oct 2006 16:45:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12318 invoked by uid 500); 17 Oct 2006 16:45:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12295 invoked by uid 99); 17 Oct 2006 16:45:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:45:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:45:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5548A7142E1
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 09:44:37 -0700 (PDT)
Message-ID: <12170200.1161103477346.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 09:44:37 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442972 ] 
            
Doug Cutting commented on HADOOP-331:
-------------------------------------

Unless I misunderstand, your step (3) involves a lot of random disk accesses, something we must avoid.  Seek time dominates for accesses of less than 100k or so.  Optimal performance will only be achieved if all disk operations are reads and writes of larger chunks.

Sorting buffers before they are written is also important, since it eliminates a sort pass.  Most map outputs can be sorted in just a few passes, often only one, so each pass is significant.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 16:50:45 2006
Return-Path: 
 <hadoop-dev-return-4333-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22783 invoked from network); 17 Oct 2006 16:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:50:45 -0000
Received: (qmail 23298 invoked by uid 500); 17 Oct 2006 16:50:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23280 invoked by uid 500); 17 Oct 2006 16:50:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23261 invoked by uid 99); 17 Oct 2006 16:50:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:50:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:50:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 437847142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 09:49:36 -0700 (PDT)
Message-ID: <7275492.1161103776273.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 09:49:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-607) Classpath of tasks is not set
 correctly (bug happens for multiple mapred local dirs only)
In-Reply-To: <3618961.1161064594983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-607?page=comments#action_12442973 ] 
            
Owen O'Malley commented on HADOOP-607:
--------------------------------------

+1

I also filed HADOOP-609 to write a unit test that tests this case.

> Classpath of tasks is not set correctly (bug happens for multiple mapred local dirs only)
> -----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-607
>                 URL: http://issues.apache.org/jira/browse/HADOOP-607
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Critical
>         Attachments: bugfix.patch
>
>
> Tasks fail because the classpath for the tasks is not set correctly. The current working directory of the tasks is not set to the directory where the job.jar is unjarred.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 16:56:29 2006
Return-Path: 
 <hadoop-dev-return-4334-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26393 invoked from network); 17 Oct 2006 16:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:56:29 -0000
Received: (qmail 39523 invoked by uid 500); 17 Oct 2006 16:56:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 39499 invoked by uid 500); 17 Oct 2006 16:56:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 39490 invoked by uid 99); 17 Oct 2006 16:56:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:56:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:56:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5FEC77142D1
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 09:55:36 -0700 (PDT)
Message-ID: <10736419.1161104136390.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 09:55:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-607) Classpath of tasks is not set
 correctly (bug happens for multiple mapred local dirs only)
In-Reply-To: <3618961.1161064594983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-607?page=all ]

Doug Cutting updated HADOOP-607:
--------------------------------

        Fix Version/s: 0.7.2
    Affects Version/s: 0.7.1

Good plan. I'll roll 0.7.2 once we have a unit test (HADOOP-609).

> Classpath of tasks is not set correctly (bug happens for multiple mapred local dirs only)
> -----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-607
>                 URL: http://issues.apache.org/jira/browse/HADOOP-607
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.1
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Critical
>             Fix For: 0.7.2
>
>         Attachments: bugfix.patch
>
>
> Tasks fail because the classpath for the tasks is not set correctly. The current working directory of the tasks is not set to the directory where the job.jar is unjarred.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 17:23:59 2006
Return-Path: 
 <hadoop-dev-return-4335-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37334 invoked from network); 17 Oct 2006 17:23:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 17:23:59 -0000
Received: (qmail 81768 invoked by uid 500); 17 Oct 2006 17:18:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81733 invoked by uid 500); 17 Oct 2006 17:18:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81721 invoked by uid 99); 17 Oct 2006 17:18:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:18:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:18:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 216607142E1
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 10:17:38 -0700 (PDT)
Message-ID: <9567137.1161105458134.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 10:17:38 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442988 ] 
            
Owen O'Malley commented on HADOOP-331:
--------------------------------------

I think that the buffer of the map output should be stored as:

class KeyByteOffset {
  WritableComparable key;
  int offset;      // offset of value in a buffer of bytes
  int length;     // length of value in buffer of bytes
}

List<KeyByteOffset>[NumReduces]

So you have a List of records for each reduce.

When you fill up on #records or #value bytes, sort and spill. (Combine first, if there is a combiner.)

The spilled keys should be PartKey's from above so that the standard merge tools on sequence files work. (If the PartKey uses the vint representation, each key will only expand by 1-2 bytes on disk.) 

I think we should have a new variant of the sequence file merge that returns an iterator over key/value pairs, which will be useful in reduce also. 

With that, we can easily merge and produce the final partition index & sequence file to local disk.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 17:24:57 2006
Return-Path: 
 <hadoop-dev-return-4337-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37707 invoked from network); 17 Oct 2006 17:24:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 17:24:57 -0000
Received: (qmail 83196 invoked by uid 500); 17 Oct 2006 17:22:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83170 invoked by uid 500); 17 Oct 2006 17:22:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83160 invoked by uid 99); 17 Oct 2006 17:22:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:22:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:20:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6F2757142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 10:19:38 -0700 (PDT)
Message-ID: <16752521.1161105578452.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 10:19:38 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442991 ] 
            
Devaraj Das commented on HADOOP-331:
------------------------------------

Yes, disk accesses bothers me too. So do you think it is better to sort before spill (step (2)) & then updating the master index array to contain the <filename, start-key-val-offset, end-key-val-offset> makes sense? If we do this, then we will have bigger chunks that sort will operate on at the end (basically we will merge the chunks).

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 17:24:59 2006
Return-Path: 
 <hadoop-dev-return-4336-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37723 invoked from network); 17 Oct 2006 17:24:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 17:24:59 -0000
Received: (qmail 83123 invoked by uid 500); 17 Oct 2006 17:22:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83100 invoked by uid 500); 17 Oct 2006 17:22:10 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83091 invoked by uid 99); 17 Oct 2006 17:22:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:22:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:20:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 818E97141D1
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 10:19:41 -0700 (PDT)
Message-ID: <13636336.1161105581528.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 10:19:41 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12442992 ] 
            
Owen O'Malley commented on HADOOP-331:
--------------------------------------

and clearly the servlet opens the file, transmits the sequence file header, and the range of bytes from the index.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 17:39:15 2006
Return-Path: 
 <hadoop-dev-return-4338-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43320 invoked from network); 17 Oct 2006 17:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 17:39:15 -0000
Received: (qmail 40696 invoked by uid 500); 17 Oct 2006 17:38:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40618 invoked by uid 500); 17 Oct 2006 17:38:00 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40573 invoked by uid 99); 17 Oct 2006 17:37:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:37:59 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 05D6D7142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 10:36:38 -0700 (PDT)
Message-ID: <19142220.1161106598020.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 10:36:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443002 ] 
            
Doug Cutting commented on HADOOP-331:
-------------------------------------

> we should have a new variant of the sequence file merge that returns an iterator over key/value pairs

+1

Owen, shouldn't KeyByteOffset also include the partition #?

Under this scheme, each spill will result in a separate <PartKey,value> sequence file, right?  And probably each such sequence file should be accompanied by a <part,position> index file.  That way, if there's only one spill, it can be used directly.  Note that block compression complicates random access.  Perhaps we should add a SequenceFile#Writer.flush() method that, when block-compression is used, resets the compressor and emits a sync, creating a seekable offset.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 17:40:52 2006
Return-Path: 
 <hadoop-dev-return-4339-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44335 invoked from network); 17 Oct 2006 17:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 17:40:52 -0000
Received: (qmail 60976 invoked by uid 500); 17 Oct 2006 17:40:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60944 invoked by uid 500); 17 Oct 2006 17:40:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60935 invoked by uid 99); 17 Oct 2006 17:40:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:40:50 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:40:48 -0700
Received: from [172.21.214.117] ([172.21.179.135])
	(authenticated bits=0)
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k9HHeMci040795
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 10:40:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=Q1DBQTqGjZbnnY8/nFoOQ7jfrjmF923/8IaHl6mCqmlqKYisTADmNKxwkTcUP8TM
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
References: <698465.1161102755024.JavaMail.jira@brutus>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ACA6DBD4-BBAB-4FFF-AE07-8881D74F1AC4@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Eric Baldeschwieler <eric14@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
Date: Tue, 17 Oct 2006 10:40:20 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sounds good!  Should do this by default.

From MAILER-DAEMON Tue Oct 17 18:30:41 2006
Return-Path: 
 <hadoop-dev-return-4340-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67601 invoked from network); 17 Oct 2006 18:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 18:30:41 -0000
Received: (qmail 98746 invoked by uid 500); 17 Oct 2006 18:30:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98722 invoked by uid 500); 17 Oct 2006 18:30:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98705 invoked by uid 99); 17 Oct 2006 18:30:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:30:40 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:30:36 -0700
Received: from enemysentdx (enemysent-dx.corp.yahoo.com [66.228.175.168])
	by mrout3.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k9HITndR094987;
	Tue, 17 Oct 2006 11:29:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:x-mimeole:thread-index;
	b=xRMHY4RXKSlOpSDpsAoIKnr1G9wWwuXuIoDa51W+i54FiIy568b7p0FmUWoVNTgX
From: "Mahadev Konar" <mahadev@yahoo-inc.com>
To: <hadoop-user@lucene.apache.org>, <hadoop-dev@lucene.apache.org>
Subject: Bug in Hadoop release 0.7 (only if you are using multiple directories
 for map reduce temporary data)
Date: Tue, 17 Oct 2006 11:29:49 -0700
Message-ID: <000001c6f21a$3ae97e10$a8afe442@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
thread-index: AcbyGjq3RwckBA++Ry2uCHsN7zOung==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
  There is a critical bug in Hadoop 0.7 release which crashes most of your
map reduce jobs if you are using multiple temporary directories for map
reduce. The bug and the patch are available at
https://issues.apache.org/jira/browse/HADOOP-607.  There should be a release
soon fixing this problem.

Regards
Mahadev


From MAILER-DAEMON Tue Oct 17 18:39:37 2006
Return-Path: 
 <hadoop-dev-return-4342-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70180 invoked from network); 17 Oct 2006 18:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 18:39:37 -0000
Received: (qmail 23695 invoked by uid 500); 17 Oct 2006 18:39:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23667 invoked by uid 500); 17 Oct 2006 18:39:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23658 invoked by uid 99); 17 Oct 2006 18:39:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:39:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:39:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E7907142DD
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 11:38:39 -0700 (PDT)
Message-ID: <5339547.1161110319449.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 11:38:39 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443027 ] 
            
Owen O'Malley commented on HADOOP-331:
--------------------------------------

Before the spill, the partition is implicit in which list the KeyByteOffset is on, so I don't think you need to include it explictly.

We may want to handle the (standard) 1 spill case separately, so that we can make the final output a sequence file over Key,Value instead of PartKey,Value. Either way will work...



> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 18:39:36 2006
Return-Path: 
 <hadoop-dev-return-4341-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 70139 invoked from network); 17 Oct 2006 18:39:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 18:39:36 -0000
Received: (qmail 23426 invoked by uid 500); 17 Oct 2006 18:39:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23405 invoked by uid 500); 17 Oct 2006 18:39:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23391 invoked by uid 99); 17 Oct 2006 18:39:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:39:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:39:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 678CE7142E1
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 11:38:42 -0700 (PDT)
Message-ID: <30270428.1161110322421.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 11:38:42 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443028 ] 
            
Sameer Paranjpye commented on HADOOP-331:
-----------------------------------------

Doug:

> Still, I agree that we can minimize comparisons & swaps by bucketing these pointers, then sorting each 
> buffer prior to dumping the data it points to.

Yes, this is what I meant.
---------------------

Don't think KeyByteOffset needs a partition# since partition# is the same as the index of the list in List<KeyByteOffset>[NumReduces] in which the key is stored.

> Under this scheme, each spill will result in a separate <PartKey,value> sequence file, right? And probably 
> each such sequence file should be accompanied by a <part,position> index file. That way, if there's only 
> one spill, it can be used directly. Note that block compression complicates random access. Perhaps we 
> should add a SequenceFile#Writer.flush() method that, when block-compression is used, resets the 
> compressor and emits a sync, creating a seekable offset.

+1

Another minor optimization could be to only include the partition# in the first key in each partition, populating all succeeding keys with 0.


> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 18:50:38 2006
Return-Path: 
 <hadoop-dev-return-4343-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75364 invoked from network); 17 Oct 2006 18:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 18:50:38 -0000
Received: (qmail 64677 invoked by uid 500); 17 Oct 2006 18:50:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64655 invoked by uid 500); 17 Oct 2006 18:50:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64628 invoked by uid 99); 17 Oct 2006 18:50:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:50:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:50:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 780BF7142F7
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 11:49:40 -0700 (PDT)
Message-ID: <9382488.1161110980489.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 11:49:40 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443034 ] 
            
Doug Cutting commented on HADOOP-331:
-------------------------------------

Owen:
> the partition is implicit in which list the KeyByteOffset is on

Ah, I somehow missed the lists.  Sorry!  You're right, no part is needed in KeyByteOffset.

Sameer:
> only include the partition# in the first key in each partition

But then we cannot use SequenceFile's merger, since keys wouldn't be independently comparable, right?



> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 19:04:31 2006
Return-Path: 
 <hadoop-dev-return-4344-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80695 invoked from network); 17 Oct 2006 19:04:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 19:04:31 -0000
Received: (qmail 91526 invoked by uid 500); 17 Oct 2006 19:04:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91492 invoked by uid 500); 17 Oct 2006 19:04:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91483 invoked by uid 99); 17 Oct 2006 19:04:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 12:04:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 12:04:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2B20C7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 12:03:38 -0700 (PDT)
Message-ID: <31766021.1161111818174.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 12:03:38 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443037 ] 
            
Devaraj Das commented on HADOOP-331:
------------------------------------

A modified proposal (after Doug's comments)
   -  Keep an array (length = # of partitions) whose elements will be lists containing elements of the form <spill#, start-key-val-offset, end-key-val-offset>*. This is obtained after the sort and before the spill of the buffer. The spill# helps in locating the section of the sorted partition data within a spill.
  - Merge goes over this array element by element and for each element, it looks at the contained list elements and creates a file appending the sections one by one. Then does mergesort with just one file as input with the output set to the final output file (opened in append mode).  An index file is updated to contain <part#, start-offset, compressedlength>
  - At the end of the above, we have the final output file and the index file.
The negative with this approach is that it requires trips to disk for reading/writing the sections before merge. So if we had 10 sections for a particular partition, we would have to read 10 chunks from the sorted spills and write them to disk as a single file. The plus is that the key format doesn't need to change at all (so minimum code change) and the number of comparisons during merge are reduced because we merge chunks of a single partition at a time.

We can have the interator over keys/values as suggested by Owen and the block compression optimization suggested by Doug. Although the iterator won't be required for the map outputs if we adopt the approach outlined above, but will be required for the reduces, right Owen? 

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 19:24:29 2006
Return-Path: 
 <hadoop-dev-return-4345-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 94303 invoked from network); 17 Oct 2006 19:24:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 19:24:29 -0000
Received: (qmail 25822 invoked by uid 500); 17 Oct 2006 19:24:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25798 invoked by uid 500); 17 Oct 2006 19:24:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25789 invoked by uid 99); 17 Oct 2006 19:24:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 12:24:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 12:24:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1CAA27142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 12:23:36 -0700 (PDT)
Message-ID: <5809881.1161113016114.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 12:23:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-482?page=comments#action_12443042 ] 
            
Doug Cutting commented on HADOOP-482:
-------------------------------------

I wonder if we should instead either (a) always roll the info port, indicating this in hadoop-default.xml, or (b) simply specify a different info port when testing.  We already specify a different port for rpcs, and should probably use the same solution for selection of both ports.  The test rpc port is currently a constant that's passed to the MiniDFSCluster's constructor.  We could do the same for the info port, or perhaps put both in src/test/hadoop-site.xml.  TestCopyFiles starts multiple namenodes, so that test would still need to either pass explicit port numbers, or pass a parameter N indicating that port default+N should be used.

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest2.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 19:28:31 2006
Return-Path: 
 <hadoop-dev-return-4346-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 95418 invoked from network); 17 Oct 2006 19:28:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 19:28:31 -0000
Received: (qmail 35520 invoked by uid 500); 17 Oct 2006 19:28:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35498 invoked by uid 500); 17 Oct 2006 19:28:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35489 invoked by uid 99); 17 Oct 2006 19:28:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 12:28:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 12:28:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 07A87714312
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 12:27:38 -0700 (PDT)
Message-ID: <16485211.1161113258028.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 12:27:38 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443043 ] 
            
Sameer Paranjpye commented on HADOOP-331:
-----------------------------------------

Doug:
> But then we cannot use SequenceFile's merger, since keys wouldn't be independently comparable, right? 

Yes, you're right, they wouldn't. This optimization is probably not worth the trouble.

-----
To summarize, this is what we appear to have ended up with.

- A couple of key variants
class KeyByteOffset {
  WritableComparable key;
  int offset;
  int length;
}

class PartKey {
  int partition;
  WritableComparable key;
}

- In RAM data structures
List<KeyByteOffset>[NumReduces]  keyLists; // one list of keys per reduce
byte[] valueBuffer; // serialized values are appended to this buffer

- For each <key, value> pair.
Determine partition for the key. Append the key to keyLists[partition], append the value to valueBuffer.
If #records is greater than #maxRecords or #valueBytes is greater than #maxValueBytes
OR
We have no more records to process.
SPILL - The spill is a block compressed sequence file of <PartKey, value> pairs, with a <part, offset> index.   
Compressed blocks in this file must not span partitions. 

- At the end, if #numSpills > 1, merge spills



> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 20:09:36 2006
Return-Path: 
 <hadoop-dev-return-4347-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15524 invoked from network); 17 Oct 2006 20:09:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 20:09:36 -0000
Received: (qmail 23053 invoked by uid 500); 17 Oct 2006 20:09:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23030 invoked by uid 500); 17 Oct 2006 20:09:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23021 invoked by uid 99); 17 Oct 2006 20:09:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:09:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:09:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E6B7714315
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 13:08:38 -0700 (PDT)
Message-ID: <2587124.1161115718252.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 13:08:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443052 ] 
            
Doug Cutting commented on HADOOP-331:
-------------------------------------

+1 to Sameer's summary.

Also note that two changes to SequenceFile are required:
1. Expose an iterator-like API to merge, where subsequent next key/value pairs can be extracted from the merge.  This will permit writing an index when merging, and will help optimize reduce.
2. Add a Writer.sync() method that ends a compression block and creates a sync point.


> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 20:26:33 2006
Return-Path: 
 <hadoop-dev-return-4348-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21267 invoked from network); 17 Oct 2006 20:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 20:26:33 -0000
Received: (qmail 52114 invoked by uid 500); 17 Oct 2006 20:26:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52086 invoked by uid 500); 17 Oct 2006 20:26:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52076 invoked by uid 99); 17 Oct 2006 20:26:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:26:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:26:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E43C171430D
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 13:25:39 -0700 (PDT)
Message-ID: <28963401.1161116739932.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 13:25:39 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar reassigned HADOOP-609:
------------------------------------

    Assignee: Mahadev konar  (was: Owen O'Malley)

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 20:39:42 2006
Return-Path: 
 <hadoop-dev-return-4349-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 24201 invoked from network); 17 Oct 2006 20:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 20:39:42 -0000
Received: (qmail 80054 invoked by uid 500); 17 Oct 2006 20:39:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 80028 invoked by uid 500); 17 Oct 2006 20:39:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 80019 invoked by uid 99); 17 Oct 2006 20:39:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:39:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:39:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ABD72714314
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 13:38:38 -0700 (PDT)
Message-ID: <13333637.1161117518701.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 13:38:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-602) Remove Lucene dependency
In-Reply-To: <24274065.1160735438130.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-602?page=comments#action_12443059 ] 
            
Doug Cutting commented on HADOOP-602:
-------------------------------------

The only problem I see with java.util.PriorityQueue is that it doesn't support adjustTop().  So instead of modifying the top entry and calling adjustTop(), one must pop the top entry, modify it, and push it back on.  That's twice as slow, as push, pop and adjustTop are all log(n) operations.  The implementation has the appropriate method (fixDown), but it's not public.  So it could be done, but with a performance penalty.

Note also that while pop and push are nearly always really log(n), if  items are unevenly distributed in the lists, then adjustTop() is faster yet, since the top can remain on top, while pop always moves the last entry to the top and percolates it back down, and push adds the entry at the end and percolates it up, which will typically really require log(n) pointer swaps.

We should probably measure whether this is significant.

> Remove Lucene dependency
> ------------------------
>
>                 Key: HADOOP-602
>                 URL: http://issues.apache.org/jira/browse/HADOOP-602
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.8.0
>            Reporter: Andrzej Bialecki 
>         Assigned To: Andrzej Bialecki 
>             Fix For: 0.8.0
>
>
> Hadoop uses just a single class from Lucene, namely the PriorityQueue. I propose to remove this dependency by copying this class into org.apache.hadoop.util.PriorityQueue and removing lucene-core.jar from dependencies.
> Removing this dependency makes it easier to run map-reduce applications that use different versions of Lucene.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 20:59:29 2006
Return-Path: 
 <hadoop-dev-return-4350-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30749 invoked from network); 17 Oct 2006 20:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 20:59:29 -0000
Received: (qmail 21200 invoked by uid 500); 17 Oct 2006 20:59:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 20984 invoked by uid 500); 17 Oct 2006 20:59:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20975 invoked by uid 99); 17 Oct 2006 20:59:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:59:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:59:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5DED4714310
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 13:58:36 -0700 (PDT)
Message-ID: <9785991.1161118716382.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 13:58:36 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien updated HADOOP-482:
-------------------------------

    Status: Open  (was: Patch Available)

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest2.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:13:39 2006
Return-Path: 
 <hadoop-dev-return-4351-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35880 invoked from network); 17 Oct 2006 21:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:13:39 -0000
Received: (qmail 57020 invoked by uid 500); 17 Oct 2006 21:13:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57000 invoked by uid 500); 17 Oct 2006 21:13:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56978 invoked by uid 99); 17 Oct 2006 21:13:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:13:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:13:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7F5FA714313
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:12:37 -0700 (PDT)
Message-ID: <5936435.1161119557518.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:12:37 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Attachment: junit_bugfix.patch

This patch makes all the minimrcluster junit tests except the TestMiniMRWithDFS use multiple mapred.local directories. The MiniMRWithDFS test depends on having a single mapred local directory so I did not change that. Also, this patch includes the patch for HADOOP-607. 

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>         Attachments: junit_bugfix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:15:33 2006
Return-Path: 
 <hadoop-dev-return-4352-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36346 invoked from network); 17 Oct 2006 21:15:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:15:33 -0000
Received: (qmail 59370 invoked by uid 500); 17 Oct 2006 21:15:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59336 invoked by uid 500); 17 Oct 2006 21:15:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59315 invoked by uid 99); 17 Oct 2006 21:15:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:15:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:15:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44CFA714313
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:14:39 -0700 (PDT)
Message-ID: <24584233.1161119679279.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:14:39 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443073 ] 
            
Sameer Paranjpye commented on HADOOP-331:
-----------------------------------------

A couple of other points/questions. In the summary above,

SPILL means:
- Sort
- Combine if a Combiner is specified
- Write to disk

What sorting algorithm should we use? Is Collections.sort good enough? It claims to be comparable to a highly optimized quicksort.  Or should we invest in a quicksort implementation.

Is the generic SequenceFile heap merge going to do the right thing when merging spills? Even in the final merge we don't want compressed blocks to span partition boundaries. Or are we going to have to special case it for PartKeys?

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:22:33 2006
Return-Path: 
 <hadoop-dev-return-4353-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40183 invoked from network); 17 Oct 2006 21:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:22:33 -0000
Received: (qmail 73573 invoked by uid 500); 17 Oct 2006 21:22:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73535 invoked by uid 500); 17 Oct 2006 21:22:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73526 invoked by uid 99); 17 Oct 2006 21:22:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:22:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:22:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C06677142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:21:39 -0700 (PDT)
Message-ID: <28328027.1161120099785.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:21:39 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-462?page=comments#action_12443075 ] 
            
Doug Cutting commented on HADOOP-462:
-------------------------------------

You're still sometimes placing 'else' and 'catch' clauses on a new line, rather than on the same line as the preceding close brace.

This could all really stand to be replaced by a commons-cli, but that's for another day...


> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch.2
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:24:30 2006
Return-Path: 
 <hadoop-dev-return-4354-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40514 invoked from network); 17 Oct 2006 21:24:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:24:30 -0000
Received: (qmail 74304 invoked by uid 500); 17 Oct 2006 21:24:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 74281 invoked by uid 500); 17 Oct 2006 21:24:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 74272 invoked by uid 99); 17 Oct 2006 21:24:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:24:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:24:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C7CC07142FC
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:23:36 -0700 (PDT)
Message-ID: <7576934.1161120216815.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:23:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

Doug Cutting updated HADOOP-462:
--------------------------------

    Status: Open  (was: Patch Available)

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch.2
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:30:35 2006
Return-Path: 
 <hadoop-dev-return-4356-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42765 invoked from network); 17 Oct 2006 21:30:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:30:35 -0000
Received: (qmail 97996 invoked by uid 500); 17 Oct 2006 21:30:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97962 invoked by uid 500); 17 Oct 2006 21:30:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97953 invoked by uid 99); 17 Oct 2006 21:30:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:30:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:30:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 62113714310
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:29:37 -0700 (PDT)
Message-ID: <2341536.1161120577399.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:29:37 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Status: Patch Available  (was: Open)

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>         Attachments: junit_bugfix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:30:32 2006
Return-Path: 
 <hadoop-dev-return-4355-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42719 invoked from network); 17 Oct 2006 21:30:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:30:32 -0000
Received: (qmail 97686 invoked by uid 500); 17 Oct 2006 21:30:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97662 invoked by uid 500); 17 Oct 2006 21:30:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97653 invoked by uid 99); 17 Oct 2006 21:30:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:30:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:30:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A000C714312
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:29:38 -0700 (PDT)
Message-ID: <23069723.1161120578653.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:29:38 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-482?page=comments#action_12443080 ] 
            
Wendy Chien commented on HADOOP-482:
------------------------------------

I assume you are suggesting these because then we won't have to change the constructor interfaces for Namenode, FSNamesystem, and JobTracker?

a) I'm fine with this solution, though I don't know what the info port is used for in non-test cases, just the web ui?  We'd have to be able to return the final selected info port.  

b) I prefer putting this in a config file (src/test/hadoop-site.xml) over having it passed into the constructor.   It seems cleaner to allow the user to change the test port without needing to change the code.

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest2.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:46:30 2006
Return-Path: 
 <hadoop-dev-return-4357-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48762 invoked from network); 17 Oct 2006 21:46:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:46:30 -0000
Received: (qmail 25265 invoked by uid 500); 17 Oct 2006 21:46:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25230 invoked by uid 500); 17 Oct 2006 21:46:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25221 invoked by uid 99); 17 Oct 2006 21:46:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:46:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:46:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 79437714312
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:45:37 -0700 (PDT)
Message-ID: <26220067.1161121537494.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:45:37 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443086 ] 
            
eric baldeschwieler commented on HADOOP-331:
--------------------------------------------

Sounds good.  I think we are converging on something.

A couple of points:

1) When we spill, we don't need to keep any record of the spilled data.  Devaraj maintained operating on these arrays after spills.  We should not do that.  Everything should be cleared out.  (Except possibly the index of partitions to file offsets).

2) I like the idea of extending the block compressed sequence file to directly support flushes at partition boundaries and merges of ranges.  This will be reused in reduce as doug observed.

3) We should not spill based on a number of records.  Don't see any value in that.  We should just spill based on RAM used.

4) Related, we need to track total RAM used, not just for values, but also for keys and arrays.  We don't want the system to blow up in the degenerate cases of huge keys or null values and many, many keys.


> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:48:50 2006
Return-Path: 
 <hadoop-dev-return-4358-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49433 invoked from network); 17 Oct 2006 21:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:48:50 -0000
Received: (qmail 27770 invoked by uid 500); 17 Oct 2006 21:48:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27746 invoked by uid 500); 17 Oct 2006 21:48:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27726 invoked by uid 99); 17 Oct 2006 21:48:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:48:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:48:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 37A04714315
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:47:39 -0700 (PDT)
Message-ID: <25384193.1161121659225.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:47:39 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Doug Cutting updated HADOOP-609:
--------------------------------

    Status: Open  (was: Patch Available)

When I apply this and revert the patch for HADOOP-607, unit tests still pass.  So I don't see how this tests the condition that HADOOP-607 fixes.

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>         Attachments: junit_bugfix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:53:30 2006
Return-Path: 
 <hadoop-dev-return-4359-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50791 invoked from network); 17 Oct 2006 21:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:53:30 -0000
Received: (qmail 33672 invoked by uid 500); 17 Oct 2006 21:53:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33642 invoked by uid 500); 17 Oct 2006 21:53:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33627 invoked by uid 99); 17 Oct 2006 21:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:53:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:53:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E2C1D714312
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:52:36 -0700 (PDT)
Message-ID: <30136675.1161121956926.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:52:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-482?page=comments#action_12443090 ] 
            
Doug Cutting commented on HADOOP-482:
-------------------------------------

Yes, I'm suggesting these primarily because it seems like we don't need to add a lot of code to fix this, but rather just change the unit test configuration to not conflict with a running system.  Less code is almost always better.

So I too prefer the (b) solution.  We'll still have to pass something to the ctor in TestCopyFiles, since it starts multiple namenodes.

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest2.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:53:38 2006
Return-Path: 
 <hadoop-dev-return-4360-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50910 invoked from network); 17 Oct 2006 21:53:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:53:38 -0000
Received: (qmail 34316 invoked by uid 500); 17 Oct 2006 21:53:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34288 invoked by uid 500); 17 Oct 2006 21:53:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34276 invoked by uid 99); 17 Oct 2006 21:53:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:53:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:53:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B1428714317
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:52:39 -0700 (PDT)
Message-ID: <24548435.1161121959723.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:52:39 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Doug Cutting updated HADOOP-609:
--------------------------------

    Fix Version/s: 0.7.2
                       (was: 0.8.0)

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_bugfix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 21:57:40 2006
Return-Path: 
 <hadoop-dev-return-4361-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52317 invoked from network); 17 Oct 2006 21:57:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:57:40 -0000
Received: (qmail 37470 invoked by uid 500); 17 Oct 2006 21:57:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37433 invoked by uid 500); 17 Oct 2006 21:57:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37424 invoked by uid 99); 17 Oct 2006 21:57:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:57:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:57:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53EA3714313
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 14:56:37 -0700 (PDT)
Message-ID: <22984458.1161122197341.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 14:56:37 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443092 ] 
            
eric baldeschwieler commented on HADOOP-331:
--------------------------------------------

A related feature.  Compressing values individually as we serialize (before sort/spill) should be an option.  Even if we are using block compression on output.  Sounds inefficient, but if it reduces the number of spills 3x, this saves total disk passes and compression/decompression passes.  Also clearly good if we choose to just compress by values, not block in the sequence files, since we could then just pass the compressed values about.


> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 22:05:42 2006
Return-Path: 
 <hadoop-dev-return-4362-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57034 invoked from network); 17 Oct 2006 22:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 22:05:42 -0000
Received: (qmail 49942 invoked by uid 500); 17 Oct 2006 22:05:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49843 invoked by uid 500); 17 Oct 2006 22:05:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49834 invoked by uid 99); 17 Oct 2006 22:05:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:05:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:05:40 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 53F0B714316
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 15:04:38 -0700 (PDT)
Message-ID: <18632816.1161122678341.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 15:04:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443094 ] 
            
Doug Cutting commented on HADOOP-331:
-------------------------------------

> we need to track total RAM used, not just for values, but also for keys and arrays

Then we should change KeyByteOffset to something like:

class BufferedEntry {
  int start;
  int keyLength;
  int valueLength;
}

Then the sort code can use WritableComparator.compare(byte[] k1, int s1, int l1, byte[] k2, int s2, int l2).  Most WritableComparables have an optimized implementation of this method.

To account for arrays we could just add 20 bytes per entry (BufferedEntry+pointer to it), which is probably close enough.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 22:07:30 2006
Return-Path: 
 <hadoop-dev-return-4363-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57261 invoked from network); 17 Oct 2006 22:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 22:07:30 -0000
Received: (qmail 50897 invoked by uid 500); 17 Oct 2006 22:07:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 50669 invoked by uid 500); 17 Oct 2006 22:07:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 50660 invoked by uid 99); 17 Oct 2006 22:07:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:07:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:07:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 895D2714314
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 15:06:37 -0700 (PDT)
Message-ID: <31057037.1161122797560.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 15:06:37 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-609?page=comments#action_12443095 ] 
            
Mahadev konar commented on HADOOP-609:
--------------------------------------

you are right doug. THe problem will not show. This is because there is no job.jar associated with jobs we submit in junit tests. All the classes are in hadoop-* jars. The problem with HADOOP-607 was that the directory where the job was being unjarred was not being added to the classpath of the task. With the junit tests we do not have any such problem because all the classes are in hadoop-*jars. Do we want to create a test wherein we create a job.jar and submit to a map red cluster with multiple directories?


> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_bugfix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 22:11:31 2006
Return-Path: 
 <hadoop-dev-return-4364-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58131 invoked from network); 17 Oct 2006 22:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 22:11:31 -0000
Received: (qmail 53598 invoked by uid 500); 17 Oct 2006 22:11:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53573 invoked by uid 500); 17 Oct 2006 22:11:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53564 invoked by uid 99); 17 Oct 2006 22:11:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:11:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:11:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 142B4714312
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 15:10:38 -0700 (PDT)
Message-ID: <40664.1161123038080.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 15:10:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443096 ] 
            
Doug Cutting commented on HADOOP-331:
-------------------------------------

> Compressing values individually as we serialize (before sort/spill) should be an option.

Sounds like an enhancement to be added later.  We should first use whatever compression is specified for map output.


> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 22:13:30 2006
Return-Path: 
 <hadoop-dev-return-4365-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 58628 invoked from network); 17 Oct 2006 22:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 22:13:30 -0000
Received: (qmail 59018 invoked by uid 500); 17 Oct 2006 22:13:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58984 invoked by uid 500); 17 Oct 2006 22:13:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58975 invoked by uid 99); 17 Oct 2006 22:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:13:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:13:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58542714313
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 15:12:37 -0700 (PDT)
Message-ID: <11639710.1161123157359.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 15:12:37 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-609?page=comments#action_12443097 ] 
            
Doug Cutting commented on HADOOP-609:
-------------------------------------

Yes.  I thought the point was to re-create the conditions which caused HADOOP-607.

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_bugfix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 23:02:30 2006
Return-Path: 
 <hadoop-dev-return-4366-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73692 invoked from network); 17 Oct 2006 23:02:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 23:02:30 -0000
Received: (qmail 33317 invoked by uid 500); 17 Oct 2006 23:02:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33194 invoked by uid 500); 17 Oct 2006 23:02:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33184 invoked by uid 99); 17 Oct 2006 23:02:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:02:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:02:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFB22714312
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 16:01:36 -0700 (PDT)
Message-ID: <29231610.1161126096848.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 16:01:36 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-413) streaming: replace class UTF8 with
 class Text
In-Reply-To: <20792221.1154478553914.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-413?page=all ]

Sameer Paranjpye resolved HADOOP-413.
-------------------------------------

    Fix Version/s: 0.6.0
       Resolution: Duplicate

This was fixed as part of HADOOP-499

> streaming: replace class UTF8 with class Text
> ---------------------------------------------
>
>                 Key: HADOOP-413
>                 URL: http://issues.apache.org/jira/browse/HADOOP-413
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Hairong Kuang
>             Fix For: 0.6.0
>
>
> need to support long lines in hadoopStreaming.
> So replace class UTF8 with class Text or with line-oriented binary I/O

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 23:02:33 2006
Return-Path: 
 <hadoop-dev-return-4367-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73805 invoked from network); 17 Oct 2006 23:02:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 23:02:33 -0000
Received: (qmail 33728 invoked by uid 500); 17 Oct 2006 23:02:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33688 invoked by uid 500); 17 Oct 2006 23:02:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33679 invoked by uid 99); 17 Oct 2006 23:02:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:02:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:02:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EBA18714316
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 16:01:39 -0700 (PDT)
Message-ID: <23632133.1161126099962.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 16:01:39 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-439) Streaming does not work for text data
 if the records don't fit in a short UTF8 [2^16/3 characters]
In-Reply-To: <8502499.1155174613900.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-439?page=all ]

Sameer Paranjpye resolved HADOOP-439.
-------------------------------------

    Fix Version/s: 0.6.0
       Resolution: Duplicate

Resolved as part of HADOOP-499

> Streaming does not work for text data if the records don't fit in a short UTF8 [2^16/3 characters]
> --------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-439
>                 URL: http://issues.apache.org/jira/browse/HADOOP-439
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.5.0
>            Reporter: Dick King
>         Assigned To: Hairong Kuang
>            Priority: Critical
>             Fix For: 0.6.0
>
>
> The streaming code internally reads the input data into a UTF8 .  This causes truncated data to be shipped to the mapper when the input exceeds about 21000 characters, with no notice to the user except possibly in individual tasks' machines' logs, which people would not normally read for apparently successful jobs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 17 23:08:31 2006
Return-Path: 
 <hadoop-dev-return-4368-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75128 invoked from network); 17 Oct 2006 23:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 23:08:31 -0000
Received: (qmail 44548 invoked by uid 500); 17 Oct 2006 23:08:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44521 invoked by uid 500); 17 Oct 2006 23:08:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44512 invoked by uid 99); 17 Oct 2006 23:08:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:08:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:08:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EC4EC714313
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 16:07:37 -0700 (PDT)
Message-ID: <14048040.1161126457965.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 16:07:37 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443113 ] 
            
Owen O'Malley commented on HADOOP-331:
--------------------------------------

Number of records does impact memory usage precisely because of the KeyByteOffset. I've seen cases where there are very small records (int,int) that use the majority of memory in the objects and their overhead. Since it can become a dominant factor, it needs to be monitored.

I want to keep the Key objects so that performance doesn't suck if the user doesn't define raw comparators. Key objects are typically small and doing the base sort on them will be much faster if we keep them as objects.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 03:49:31 2006
Return-Path: 
 <hadoop-dev-return-4369-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42571 invoked from network); 18 Oct 2006 03:49:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 03:49:31 -0000
Received: (qmail 49547 invoked by uid 500); 18 Oct 2006 03:49:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49514 invoked by uid 500); 18 Oct 2006 03:49:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49503 invoked by uid 99); 18 Oct 2006 03:49:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 20:49:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 20:49:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4DC5A7142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 20:48:37 -0700 (PDT)
Message-ID: <4258403.1161143317315.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 20:48:37 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Attachment: junit_classpath.patch
                job.jar

This patch includes one more test called TestMiniMRClasspath. This will run a job.jar which I have uploaded with the patch. So without Hadoop-607 TestMiniMRClasspath fails and with the patch for hadoop-607 it passes. The TestMiniMRClasspath run sthe mapper and reducer in job.jar (which is just a wordcount mapper and reducer). Without 607 this test fails with classnotfound exceptions. The test just checks for a successful run of the job.

I have left the multiple directories MiniMR in all the other tests as in the previous patch. It will be handy in finding other problems with multiple directories. 
Also, this patch includes the fix for Hadoop-607.

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: job.jar, junit_bugfix.patch, junit_classpath.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 03:51:31 2006
Return-Path: 
 <hadoop-dev-return-4370-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43004 invoked from network); 18 Oct 2006 03:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 03:51:31 -0000
Received: (qmail 52705 invoked by uid 500); 18 Oct 2006 03:51:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52681 invoked by uid 500); 18 Oct 2006 03:51:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52672 invoked by uid 99); 18 Oct 2006 03:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 20:51:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 20:51:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6301E7142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 20:50:37 -0700 (PDT)
Message-ID: <6331074.1161143437403.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 20:50:37 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Attachment:     (was: junit_bugfix.patch)

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: job.jar, junit_classpath.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 04:16:28 2006
Return-Path: 
 <hadoop-dev-return-4371-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47244 invoked from network); 18 Oct 2006 04:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 04:16:28 -0000
Received: (qmail 81233 invoked by uid 500); 18 Oct 2006 04:16:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81012 invoked by uid 500); 18 Oct 2006 04:16:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81003 invoked by uid 99); 18 Oct 2006 04:16:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 21:16:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 21:16:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F1C927142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 21:15:34 -0700 (PDT)
Message-ID: <27498217.1161144934987.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 21:15:34 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-610) Task Tracker offerService does not
 adequately protect from exceptions
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Task Tracker offerService does not adequately protect from exceptions
---------------------------------------------------------------------

                 Key: HADOOP-610
                 URL: http://issues.apache.org/jira/browse/HADOOP-610
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.1
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.8.0


The TaskTracker's offerService loop doesn't handle exceptions, such as time outs well and will reset the task tracker. I believe this is the cause of most of the lost task trackers. The scenario looks like:

  1. an rpc timeout in offerService
  2. the task tracker cleans up (which takes 30 minutes with the task tracker locked up)
  3. the task tracker is declared lost for not providing its heartbeat

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 05:13:28 2006
Return-Path: 
 <hadoop-dev-return-4372-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56994 invoked from network); 18 Oct 2006 05:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 05:13:28 -0000
Received: (qmail 41913 invoked by uid 500); 18 Oct 2006 05:13:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41884 invoked by uid 500); 18 Oct 2006 05:13:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41870 invoked by uid 99); 18 Oct 2006 05:13:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 22:13:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 22:13:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 101C27142E4
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 22:12:35 -0700 (PDT)
Message-ID: <6429596.1161148355062.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 22:12:35 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SequenceFile.Sorter should have a merge method that returns an iterator
-----------------------------------------------------------------------

                 Key: HADOOP-611
                 URL: http://issues.apache.org/jira/browse/HADOOP-611
             Project: Hadoop
          Issue Type: New Feature
          Components: io
            Reporter: Owen O'Malley
         Assigned To: Devaraj Das
             Fix For: 0.8.0


SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.

The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 06:29:32 2006
Return-Path: 
 <hadoop-dev-return-4373-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74118 invoked from network); 18 Oct 2006 06:29:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 06:29:32 -0000
Received: (qmail 30140 invoked by uid 500); 18 Oct 2006 06:29:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 29923 invoked by uid 500); 18 Oct 2006 06:29:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 29914 invoked by uid 99); 18 Oct 2006 06:29:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:29:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:29:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4496771430D
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 23:28:38 -0700 (PDT)
Message-ID: <21717246.1161152918278.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 23:28:38 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12443178 ] 
            
Owen O'Malley commented on HADOOP-611:
--------------------------------------

I think the interface should look like:

public interface KeyValueIterator<Key extends Writable, Value extends Writable> {
  boolean next(Key key, Value value);
}

and in SequenceFile.Sorter:

<Key extends WritableComparable, Value extends Writable> KeyValueIterator<Key,Value>
merge(File[] inFiles, boolean deleteInput) throws IOException {...}

which merges the list of files into an iterator.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.8.0
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 06:41:30 2006
Return-Path: 
 <hadoop-dev-return-4374-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76008 invoked from network); 18 Oct 2006 06:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 06:41:30 -0000
Received: (qmail 49046 invoked by uid 500); 18 Oct 2006 06:41:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49023 invoked by uid 500); 18 Oct 2006 06:41:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49014 invoked by uid 99); 18 Oct 2006 06:41:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:41:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:41:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 126E37142E1
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 23:40:37 -0700 (PDT)
Message-ID: <1543077.1161153637073.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 23:40:37 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur updated HADOOP-462:
------------------------------------

    Attachment: dfsshell.patch.3

I was not aware about the coding style for the exception catch statement. Fixed as per Doug's comments. This patch supercedes earlier attachments.

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch.3
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 06:41:32 2006
Return-Path: 
 <hadoop-dev-return-4375-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76047 invoked from network); 18 Oct 2006 06:41:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 06:41:32 -0000
Received: (qmail 49283 invoked by uid 500); 18 Oct 2006 06:41:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49263 invoked by uid 500); 18 Oct 2006 06:41:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49254 invoked by uid 99); 18 Oct 2006 06:41:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:41:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:41:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E1F0A7142E4
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 23:40:38 -0700 (PDT)
Message-ID: <13882183.1161153638923.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 23:40:38 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur updated HADOOP-462:
------------------------------------

    Attachment:     (was: dfsshell.patch.2)

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch.3
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 06:41:34 2006
Return-Path: 
 <hadoop-dev-return-4376-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76090 invoked from network); 18 Oct 2006 06:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 06:41:34 -0000
Received: (qmail 49527 invoked by uid 500); 18 Oct 2006 06:41:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49505 invoked by uid 500); 18 Oct 2006 06:41:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 49496 invoked by uid 99); 18 Oct 2006 06:41:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:41:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:41:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BCB5D7142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 17 Oct 2006 23:40:40 -0700 (PDT)
Message-ID: <5110351.1161153640770.JavaMail.jira@brutus>
Date: Tue, 17 Oct 2006 23:40:40 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

dhruba borthakur updated HADOOP-462:
------------------------------------

    Status: Patch Available  (was: Open)

Changed coding style of catch-exception statements.

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>         Attachments: dfsshell.patch.3
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 09:38:31 2006
Return-Path: 
 <hadoop-dev-return-4377-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36012 invoked from network); 18 Oct 2006 09:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 09:38:31 -0000
Received: (qmail 65281 invoked by uid 500); 18 Oct 2006 09:38:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65147 invoked by uid 500); 18 Oct 2006 09:38:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65138 invoked by uid 99); 18 Oct 2006 09:38:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 02:38:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 02:38:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 12EDC71430D
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 02:37:37 -0700 (PDT)
Message-ID: <19106475.1161164257075.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 02:37:37 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-562) Jobs fail if mapred.local.dir have
 several entries in it
In-Reply-To: <27491016.1159364451366.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-562?page=comments#action_12443211 ] 
            
Johan Oskarson commented on HADOOP-562:
---------------------------------------

This is probably the same as HADOOP-607

> Jobs fail if mapred.local.dir have several entries in it
> --------------------------------------------------------
>
>                 Key: HADOOP-562
>                 URL: http://issues.apache.org/jira/browse/HADOOP-562
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.0
>            Reporter: Johan Oskarson
>
> Since HADOOP-288 got commited jobs (sometimes) fail if you have a comma seperated list of directories as your mapred.local.dir
> The jobs fail with ClassNotFoundExceptions, I'm guessing the job.jar is put on one of the disks but something fails when reading/finding it again.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 11:35:36 2006
Return-Path: 
 <hadoop-dev-return-4378-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85776 invoked from network); 18 Oct 2006 11:35:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 11:35:36 -0000
Received: (qmail 75652 invoked by uid 500); 18 Oct 2006 11:35:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75555 invoked by uid 500); 18 Oct 2006 11:35:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75490 invoked by uid 99); 18 Oct 2006 11:35:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 04:35:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 04:35:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BE7F771430D
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 04:34:39 -0700 (PDT)
Message-ID: <19432339.1161171279760.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 04:34:39 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-612) DFs copyFromLocal fails with
 NullPointerException for a single file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DFs copyFromLocal fails with NullPointerException for a single file
-------------------------------------------------------------------

                 Key: HADOOP-612
                 URL: http://issues.apache.org/jira/browse/HADOOP-612
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.1
            Reporter: Sanjay Dahiya
            Priority: Blocker


DFS copyFromLocal fails with NullPointerException when copying a single file to DFS. Copying a directory works. 

  public File getFile(String dirsProp, String path)
    throws IOException {
    String[] dirs = getStrings(dirsProp);                     <===== returns null for a single file
    int hashCode = path.hashCode();
    for (int i = 0; i < dirs.length; i++) {  // try each local dir                     <==== Throws NullPointerException
      int index = (hashCode+i & Integer.MAX_VALUE) % dirs.length;
      File file = new File(dirs[index], path);
      File dir = file.getParentFile();
      if (dir.exists() || dir.mkdirs()) {
        return file;
      }
    }
    throw new IOException("No valid local directories in property: "+dirsProp);
  }



Exception in thread "main" java.lang.NullPointerException
        at org.apache.hadoop.conf.Configuration.getFile(Configuration.java:397)
        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.newBackupFile(DFSClient.java:913)
        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.<init>(DFSClient.java:903)
        at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:276)
        at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:104)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
        at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:271)
        at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:178)
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:77)
        at org.apache.hadoop.dfs.DistributedFileSystem.copyFromLocalFile(DistributedFileSystem.java:186)
        at org.apache.hadoop.dfs.DFSShell.copyFromLocal(DFSShell.java:45)
        at org.apache.hadoop.dfs.DFSShell.run(DFSShell.java:516)
        at org.apache.hadoop.util.ToolBase.doMain(ToolBase.java:187)
        at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:570)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 17:09:00 2006
Return-Path: 
 <hadoop-dev-return-4379-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26376 invoked from network); 18 Oct 2006 17:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 17:09:00 -0000
Received: (qmail 56931 invoked by uid 500); 18 Oct 2006 17:08:59 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56903 invoked by uid 500); 18 Oct 2006 17:08:58 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56894 invoked by uid 99); 18 Oct 2006 17:08:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:08:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:08:57 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B3B2771430D
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 10:08:03 -0700 (PDT)
Message-ID: <11646755.1161191283730.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 10:08:03 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443297 ] 
            
Doug Cutting commented on HADOOP-331:
-------------------------------------

> keep the Key objects so that performance doesn't suck if the user doesn't define raw comparators

Note that merge performance will also suffer when the user doesn't define raw comparators, but not as badly as sort performance.

One other advantage to using the raw, binary comparator is that we could then share the sort logic with SequenceFile.  It currently has a sort algorithm that, without too much work, could be exposed as something like:

public static sort(int[] pointers, int[] starts, int[] lengths, byte[] data, WritableComparator order);

The pointers array indicates which values in starts and lengths should be used.  It is permuted, so that, after sorting, the key at data[starts[pointers[i]]] is always less than data[starts[pointers[i+1]]].  To use this we'd dispense with the KeyByteOffset class altogether and simply keep something like:

byte[] data;  // all buffered keys and values
int[] starts;  // the start of each pair
int[] keyLengths; // the length of each key
// values run from starts[i]+keyLenghts[i] through starts[i+1].
List<int[]> partPointers;

Then we could sort each part pointer array and then write it.  Each buffered entry would have a fixed 12-byte overhead, so memory accounting could be exact.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 17:09:06 2006
Return-Path: 
 <hadoop-dev-return-4380-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26435 invoked from network); 18 Oct 2006 17:09:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 17:09:06 -0000
Received: (qmail 57193 invoked by uid 500); 18 Oct 2006 17:09:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57174 invoked by uid 500); 18 Oct 2006 17:09:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57165 invoked by uid 99); 18 Oct 2006 17:09:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:09:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:09:04 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 10BD6714312
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 10:08:11 -0700 (PDT)
Message-ID: <2733779.1161191291064.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 10:08:11 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443298 ] 
            
Owen O'Malley commented on HADOOP-331:
--------------------------------------

Ok, I've been convinced that we should start with BufferedEntry as a baseline. I think the overhead/record should be 40 rather than 20 for the size metric, but of course we should use a constant for it anyways:

final int BUFFERED_KEY_VALUE_OVERHEAD = 40;

And I think BufferedKeyValue is a little more informative than BufferedEntry.

// condition for a spill would be
buffer.size() + BUFFERED_KEY_VALUE_OVERHEAD * numKeyValues > conf.getMapOutputBufferSize() 

The records would be stored in an array of ArrayLists:

List<BufferedEntry>[numReduces]

Spills would be written as SequenceFile<PartKey<Key>, Value>

The spills would be merged (using the iterator output form of merge) to write:

SequenceFile<Key,Value> and partition index

If there have been no spills, you just write the SequenceFile<Key,Value> and partition index from memory.

It will give a fixed usage of memory, a single dump to disk in the common case, and a reasonable behavior for large cases.



> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 17:22:37 2006
Return-Path: 
 <hadoop-dev-return-4381-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32130 invoked from network); 18 Oct 2006 17:22:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 17:22:37 -0000
Received: (qmail 3105 invoked by uid 500); 18 Oct 2006 17:22:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3074 invoked by uid 500); 18 Oct 2006 17:22:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3060 invoked by uid 99); 18 Oct 2006 17:22:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:22:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:22:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B661E7142E1
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 10:21:36 -0700 (PDT)
Message-ID: <22883674.1161192096744.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 10:21:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-525) Need raw comparators for hadoop record
 types
In-Reply-To: <23311423.1158101362457.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-525?page=all ]

Doug Cutting updated HADOOP-525:
--------------------------------

    Priority: Major  (was: Minor)

A raw comparator shouldn't have to deserialize fields, but should operate directly on the field data.  For primitive fields we'd generate calls to methods like WritableComparator.{readInt,readLong,...}.  For Text, we'd generate calls to WritableComparator.compareBytes().  For complex objects we'd generate calls to their raw comparator.

Besides having a huge performance benefit, adding raw comparators to records would solve other problems with Hadoop's io framework: currently it is possible for raw and cooked comparators to differ.  But if both are auto-generated from the same source they'll be guaranteed compatible.  Also, raw comparators are fragile and difficult to develop, since they bypass all type mechanisms.  Generated code would ensure correctness.

I've increased the priority of this issue.  We should implement this and start using records more extensively.  Prior we've mostly thought of records as an aid for interoperability with other programming languages, but I think they'll also be a valuable for performance and correctness.

> Need raw comparators for hadoop record types
> --------------------------------------------
>
>                 Key: HADOOP-525
>                 URL: http://issues.apache.org/jira/browse/HADOOP-525
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: record
>    Affects Versions: 0.6.0
>            Reporter: Sameer Paranjpye
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: TypeBuilder-support.tar, TypeBuilder.java, WordCountType.java
>
>
> Raw comparators are not generated for types that are generated with the Hadoop record framework. This could have a substantial performance impact when using hadoop record generated types in Map/Reduce. The record i/o framework should auto-generate raw comparators for types.
> Comparison for hadoop record i/o types is defined to be member wise comparison of objects. A possible implementation could only deserialize one member from each object at a time, compare them and either return or move on to the next member if the values are equal.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 17:30:56 2006
Return-Path: 
 <hadoop-dev-return-4382-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34785 invoked from network); 18 Oct 2006 17:30:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 17:30:56 -0000
Received: (qmail 34674 invoked by uid 500); 18 Oct 2006 17:30:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34647 invoked by uid 500); 18 Oct 2006 17:30:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34596 invoked by uid 99); 18 Oct 2006 17:30:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:30:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:30:48 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 75268714317
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 10:29:46 -0700 (PDT)
Message-ID: <26226638.1161192586476.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 10:29:46 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-331?page=comments#action_12443307 ] 
            
Devaraj Das commented on HADOOP-331:
------------------------------------

>public static sort(int[] pointers, int[] starts, int[] lengths, byte[] data, 
>WritableComparator order); 

+1

>The pointers array indicates which values in starts and lengths should be used. It 
>is permuted, so that, after sorting, the key at data[starts[pointers[i]]] is always less 
>than data[starts[pointers[i+1]]]. To use this we'd dispense with the KeyByteOffset 
>class altogether and simply keep something like: 

+1



> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 18:02:43 2006
Return-Path: 
 <hadoop-dev-return-4383-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45198 invoked from network); 18 Oct 2006 18:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 18:02:43 -0000
Received: (qmail 49052 invoked by uid 500); 18 Oct 2006 18:02:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 49021 invoked by uid 500); 18 Oct 2006 18:02:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48973 invoked by uid 99); 18 Oct 2006 18:02:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:02:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:02:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 19B23714315
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 11:01:37 -0700 (PDT)
Message-ID: <23304567.1161194497102.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 11:01:37 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12443319 ] 
            
Doug Cutting commented on HADOOP-611:
-------------------------------------

Looks good overall.

The 'deleteInput' parameter seems odd there.  When would the input files be deleted?  As soon as the last entry is consumed?  What if the merger is dropped before all inputs are consumed?

Perhaps the iterator or Sorter should instead have a method that deletes things, that can be called in a finally clause around merge iteration?


> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.8.0
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 18:04:37 2006
Return-Path: 
 <hadoop-dev-return-4384-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45705 invoked from network); 18 Oct 2006 18:04:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 18:04:37 -0000
Received: (qmail 54772 invoked by uid 500); 18 Oct 2006 18:04:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54743 invoked by uid 500); 18 Oct 2006 18:04:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54729 invoked by uid 99); 18 Oct 2006 18:04:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:04:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:04:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 30A1B7142E4
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 11:03:37 -0700 (PDT)
Message-ID: <28110524.1161194617196.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 11:03:37 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-572) Chain reaction in a big cluster caused
 by simultaneous failure of only a few data-nodes.
In-Reply-To: <27006103.1159840519548.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-572?page=all ]

Sameer Paranjpye updated HADOOP-572:
------------------------------------

    Component/s: dfs

> Chain reaction in a big cluster caused by simultaneous failure of only a few data-nodes.
> ----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-572
>                 URL: http://issues.apache.org/jira/browse/HADOOP-572
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.2
>         Environment: Large dfs cluster
>            Reporter: Konstantin Shvachko
>
> I've observed a cluster crash caused by simultaneous failure of only 3 data-nodes.
> The crash is reproducable. In order to reproduce it you need a rather large cluster.
> To simplify calculations I'll consider a 600 node cluster as an example.
> The cluster should also contain a substantial amount of data.
> We will need at least 3 data-nodes containing 10,000+ blocks each.
> Now suppose that these 3 data-nodes fail at the same time, and the name-node
> started replicating all missing blocks belonging to the nodes.
> The name-node can replicate 50 blocks per second on average based on experimental data.
> Meaning, it will take more than 10 minutes, which is the heartbeat expiration interval,
> to replicates all 30,000+ blocks.
> With the 3 second heartbeat interval there are 600 / 3 = 200 heartbeats hitting the name-node every second.
> Under heavy replication load the name-node accepts about 50 heartbeats per second.
> So at most 3/4 of all heartbeats remain unserved.
> Each node SHOULD send 200 heartbeats during the 10 minute interval, and every time the probability
> of the heartbeat being unserved is 3/4 or less.
> So the probability of failing of all 200 heartbeats is (3/4) ** 200 = 0 from the practical standpoint.
> IN FACT since current implementation sets the rpc timeout to 1 minute, a failed heartbeat takes
> 1 minute and 8 seconds to complete, and under this circumstances each data-node can send only
> 9 heartbeats during the 10 minute interval. Thus, the probability of failing of all 9 of them is 0.075,
> which means that we will loose 45 nodes out of 600 at the end of the 10 minute interval.
> From this point the name-node will be constantly replicating blocks and loosing more nodes, and
> becomes effectively dysfunctional.
> A map-reduce framework running on top of it makes things deteriorate even faster, because failing
> tasks and jobs are trying to remove files and re-create them again increasing the overall load on
> the name-node.
> I see at least 2 problems that contribute to the chain reaction described above.
> 1. A heartbeat failure takes too long (1'8").
> 2. Name-node synchronized operations should be fine-grained.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 18:06:32 2006
Return-Path: 
 <hadoop-dev-return-4385-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46595 invoked from network); 18 Oct 2006 18:06:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 18:06:32 -0000
Received: (qmail 58180 invoked by uid 500); 18 Oct 2006 18:06:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 58157 invoked by uid 500); 18 Oct 2006 18:06:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 58148 invoked by uid 99); 18 Oct 2006 18:06:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:06:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:06:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9C4E9714312
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 11:05:37 -0700 (PDT)
Message-ID: <9552808.1161194737637.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 11:05:37 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Sameer Paranjpye reassigned HADOOP-611:
---------------------------------------

    Assignee: Mahadev konar  (was: Devaraj Das)

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.8.0
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 18:24:40 2006
Return-Path: 
 <hadoop-dev-return-4386-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54531 invoked from network); 18 Oct 2006 18:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 18:24:40 -0000
Received: (qmail 22412 invoked by uid 500); 18 Oct 2006 18:24:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22386 invoked by uid 500); 18 Oct 2006 18:24:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22360 invoked by uid 99); 18 Oct 2006 18:24:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:24:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:24:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AA65A7142E4
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 11:23:40 -0700 (PDT)
Message-ID: <30452632.1161195820695.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 11:23:40 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-609?page=comments#action_12443328 ] 
            
Doug Cutting commented on HADOOP-609:
-------------------------------------

The job.jar should be built from build.xml, rather than committed directly.  That way we can easily change what it contains as we add other tests.

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: job.jar, junit_classpath.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 18:30:30 2006
Return-Path: 
 <hadoop-dev-return-4387-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57275 invoked from network); 18 Oct 2006 18:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 18:30:30 -0000
Received: (qmail 45746 invoked by uid 500); 18 Oct 2006 18:30:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45714 invoked by uid 500); 18 Oct 2006 18:30:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45704 invoked by uid 99); 18 Oct 2006 18:30:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:30:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:30:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0F813714319
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 11:29:35 -0700 (PDT)
Message-ID: <32865816.1161196175060.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 11:29:35 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The final merge on the reduces should feed the reduce directly
--------------------------------------------------------------

                 Key: HADOOP-613
                 URL: http://issues.apache.org/jira/browse/HADOOP-613
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Owen O'Malley
         Assigned To: Mahadev konar
             Fix For: 0.8.0


The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 18:32:41 2006
Return-Path: 
 <hadoop-dev-return-4388-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59150 invoked from network); 18 Oct 2006 18:32:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 18:32:41 -0000
Received: (qmail 54208 invoked by uid 500); 18 Oct 2006 18:32:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54181 invoked by uid 500); 18 Oct 2006 18:32:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54167 invoked by uid 99); 18 Oct 2006 18:32:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:32:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:32:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2FE66714312
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 11:31:36 -0700 (PDT)
Message-ID: <24876967.1161196296193.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 11:31:36 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-95) dfs validation
In-Reply-To: <20690330.1142645739705.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-95?page=all ]

Sameer Paranjpye resolved HADOOP-95.
------------------------------------

    Fix Version/s: 0.2.0
       Resolution: Duplicate

This was fixed by HADOOP-101

> dfs validation
> --------------
>
>                 Key: HADOOP-95
>                 URL: http://issues.apache.org/jira/browse/HADOOP-95
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: dfs
>    Affects Versions: 0.1.0
>            Reporter: Hairong Kuang
>             Fix For: 0.2.0
>
>         Attachments: AccumulatingReducer.java, IOMapperAdapter.java, TestDFSIO.java, TestReadFS.java
>
>
> Dfs needs a validation operation similiar to fsck, so that we get to know the files that are corrupted and which data blocks are missing.
> Dfs namenode also needs to log more specific information such as which block is replication or is deleted. So when something goes wrong, we have a clue what has happened.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 19:59:32 2006
Return-Path: 
 <hadoop-dev-return-4389-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97098 invoked from network); 18 Oct 2006 19:59:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 19:59:32 -0000
Received: (qmail 82767 invoked by uid 500); 18 Oct 2006 19:59:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82742 invoked by uid 500); 18 Oct 2006 19:59:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82733 invoked by uid 99); 18 Oct 2006 19:59:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:59:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:59:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6A21714316
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 12:58:36 -0700 (PDT)
Message-ID: <1547953.1161201516745.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 12:58:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-462) DFSShell throws out arrayoutofbounds
 exceptions if the number of arguments is not right
In-Reply-To: <25926979.1155934755219.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-462?page=all ]

Doug Cutting updated HADOOP-462:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba.

> DFSShell throws out arrayoutofbounds exceptions if the number of arguments is not right
> ---------------------------------------------------------------------------------------
>
>                 Key: HADOOP-462
>                 URL: http://issues.apache.org/jira/browse/HADOOP-462
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Mahadev konar
>         Assigned To: dhruba borthakur
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: dfsshell.patch.3
>
>
> All the DFSShell commands do not check for the number of arguments. In DFSShell.run(), the args length is not checked before calling copyfromlocal, movefromlocal, copytolocal, and some others as well. This throws out arrrayoutofbounds exception in case lesser number of arguments is specified.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 20:09:34 2006
Return-Path: 
 <hadoop-dev-return-4390-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 811 invoked from network); 18 Oct 2006 20:09:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 20:09:34 -0000
Received: (qmail 5938 invoked by uid 500); 18 Oct 2006 20:09:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5902 invoked by uid 500); 18 Oct 2006 20:09:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5892 invoked by uid 99); 18 Oct 2006 20:09:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:09:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:09:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39A9071431C
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 13:08:39 -0700 (PDT)
Message-ID: <28401611.1161202119233.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 13:08:39 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Attachment:     (was: job.jar)

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_classpath.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 20:11:32 2006
Return-Path: 
 <hadoop-dev-return-4391-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1763 invoked from network); 18 Oct 2006 20:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 20:11:32 -0000
Received: (qmail 13589 invoked by uid 500); 18 Oct 2006 20:11:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13563 invoked by uid 500); 18 Oct 2006 20:11:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13554 invoked by uid 99); 18 Oct 2006 20:11:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:11:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:11:31 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D2D66714315
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 13:10:37 -0700 (PDT)
Message-ID: <3528729.1161202237861.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 13:10:37 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Attachment: junit_fix.patch

this patch creates the job.jar via build.xml. I have created seperate directory for this Class under test.

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_fix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 20:11:40 2006
Return-Path: 
 <hadoop-dev-return-4393-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1870 invoked from network); 18 Oct 2006 20:11:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 20:11:40 -0000
Received: (qmail 14245 invoked by uid 500); 18 Oct 2006 20:11:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14220 invoked by uid 500); 18 Oct 2006 20:11:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14211 invoked by uid 99); 18 Oct 2006 20:11:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:11:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:11:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5918F71431A
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 13:10:40 -0700 (PDT)
Message-ID: <15309623.1161202240362.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 13:10:40 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Attachment:     (was: junit_classpath.patch)

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_fix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 20:11:38 2006
Return-Path: 
 <hadoop-dev-return-4392-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1826 invoked from network); 18 Oct 2006 20:11:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 20:11:38 -0000
Received: (qmail 13970 invoked by uid 500); 18 Oct 2006 20:11:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13923 invoked by uid 500); 18 Oct 2006 20:11:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13909 invoked by uid 99); 18 Oct 2006 20:11:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:11:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:11:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 00ED571431C
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 13:10:43 -0700 (PDT)
Message-ID: <11616325.1161202243001.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 13:10:43 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Status: Patch Available  (was: Open)

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_fix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 21:18:35 2006
Return-Path: 
 <hadoop-dev-return-4394-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26829 invoked from network); 18 Oct 2006 21:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 21:18:35 -0000
Received: (qmail 66943 invoked by uid 500); 18 Oct 2006 21:18:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66920 invoked by uid 500); 18 Oct 2006 21:18:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66908 invoked by uid 99); 18 Oct 2006 21:18:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 14:18:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 14:18:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 62FCE714310
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 14:17:39 -0700 (PDT)
Message-ID: <26839851.1161206259403.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 14:17:39 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment: HADOOP-489_20061019.patch

Here's a patch which implements what we have discussed so far: user-logs are written to separate logs, which are split, log-splits exceeding the pre-configured job-level limit are purged. There are apis in place to read the logs given offset/length, tail the logs and also to just dump the entire log. I have added a src/webapps/task/tasklog.jsp for browsing the user-logs and also linked the same via taskdetails.jsp so as to let users quickly browse them.

Appreciate any comments/feedback...

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 22:07:41 2006
Return-Path: 
 <hadoop-dev-return-4395-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43664 invoked from network); 18 Oct 2006 22:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:07:41 -0000
Received: (qmail 51932 invoked by uid 500); 18 Oct 2006 22:07:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51763 invoked by uid 500); 18 Oct 2006 22:07:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51677 invoked by uid 99); 18 Oct 2006 22:07:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:07:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:07:35 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4CA28714315
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 15:06:37 -0700 (PDT)
Message-ID: <14307793.1161209197311.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 15:06:37 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-609?page=comments#action_12443373 ] 
            
Owen O'Malley commented on HADOOP-609:
--------------------------------------

Copying the code from WordCount is not really required. It would be better to just extend the WordCount.Mapper and Reducer and have empty classes.


> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_fix.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 22:18:32 2006
Return-Path: 
 <hadoop-dev-return-4396-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46944 invoked from network); 18 Oct 2006 22:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:18:32 -0000
Received: (qmail 77990 invoked by uid 500); 18 Oct 2006 22:18:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77961 invoked by uid 500); 18 Oct 2006 22:18:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77952 invoked by uid 99); 18 Oct 2006 22:18:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:18:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:18:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6D7D2714314
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 15:17:37 -0700 (PDT)
Message-ID: <19139622.1161209857446.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 15:17:37 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Attachment:     (was: junit_fix.patch)

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 22:31:30 2006
Return-Path: 
 <hadoop-dev-return-4397-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49359 invoked from network); 18 Oct 2006 22:31:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:31:30 -0000
Received: (qmail 5193 invoked by uid 500); 18 Oct 2006 22:31:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5167 invoked by uid 500); 18 Oct 2006 22:31:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5158 invoked by uid 99); 18 Oct 2006 22:31:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:31:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:31:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ED021714314
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 15:30:34 -0700 (PDT)
Message-ID: <5749547.1161210634968.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 15:30:34 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-614) Sporadic TestEmptyJobWithDFS failure
 due to NPE is JobTracker.submitJob()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sporadic TestEmptyJobWithDFS failure due to NPE is JobTracker.submitJob()
-------------------------------------------------------------------------

                 Key: HADOOP-614
                 URL: http://issues.apache.org/jira/browse/HADOOP-614
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Nigel Daley


org.apache.hadoop.mapred.TestEmptyJobWithDFS has failed a couple of times (low reproducibility) with the following exception:

2006-10-17 21:48:24,875 INFO  ipc.Server (Server.java:run(516)) - Server handler 2 on 50050 call error: java.io.IOException: java.lang.NullPointerException
java.io.IOException: java.lang.NullPointerException
        at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1020)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:385)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)

Complete test log attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 22:37:30 2006
Return-Path: 
 <hadoop-dev-return-4398-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50982 invoked from network); 18 Oct 2006 22:37:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:37:30 -0000
Received: (qmail 28224 invoked by uid 500); 18 Oct 2006 22:37:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28202 invoked by uid 500); 18 Oct 2006 22:37:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28193 invoked by uid 99); 18 Oct 2006 22:37:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:37:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:37:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 04003714314
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 15:36:35 -0700 (PDT)
Message-ID: <1014515.1161210995013.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 15:36:35 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-615) Sporadic TestEmptyJobWithDFS failure
 due to NPE is JobTracker.submitJob()
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sporadic TestEmptyJobWithDFS failure due to NPE is JobTracker.submitJob()
-------------------------------------------------------------------------

                 Key: HADOOP-615
                 URL: http://issues.apache.org/jira/browse/HADOOP-615
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Nigel Daley
         Attachments: TEST-org.apache.hadoop.mapred.TestEmptyJobWithDFS.txt

org.apache.hadoop.mapred.TestEmptyJobWithDFS has failed a couple of times (low reproducibility) with the following exception:

2006-10-17 21:48:24,875 INFO  ipc.Server (Server.java:run(516)) - Server handler 2 on 50050 call error: java.io.IOException: java.lang.NullPointerException
java.io.IOException: java.lang.NullPointerException
        at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1020)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:385)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)

Complete test log attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 22:37:31 2006
Return-Path: 
 <hadoop-dev-return-4399-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51026 invoked from network); 18 Oct 2006 22:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:37:31 -0000
Received: (qmail 28499 invoked by uid 500); 18 Oct 2006 22:37:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28465 invoked by uid 500); 18 Oct 2006 22:37:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28456 invoked by uid 99); 18 Oct 2006 22:37:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:37:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:37:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39AF0714315
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 15:36:36 -0700 (PDT)
Message-ID: <22346383.1161210996234.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 15:36:36 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-615) Sporadic TestEmptyJobWithDFS failure
 due to NPE is JobTracker.submitJob()
In-Reply-To: <1014515.1161210995013.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-615?page=all ]

Nigel Daley updated HADOOP-615:
-------------------------------

    Attachment: TEST-org.apache.hadoop.mapred.TestEmptyJobWithDFS.txt

> Sporadic TestEmptyJobWithDFS failure due to NPE is JobTracker.submitJob()
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-615
>                 URL: http://issues.apache.org/jira/browse/HADOOP-615
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Attachments: TEST-org.apache.hadoop.mapred.TestEmptyJobWithDFS.txt
>
>
> org.apache.hadoop.mapred.TestEmptyJobWithDFS has failed a couple of times (low reproducibility) with the following exception:
> 2006-10-17 21:48:24,875 INFO  ipc.Server (Server.java:run(516)) - Server handler 2 on 50050 call error: java.io.IOException: java.lang.NullPointerException
> java.io.IOException: java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1020)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:385)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
> Complete test log attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 22:44:32 2006
Return-Path: 
 <hadoop-dev-return-4400-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52487 invoked from network); 18 Oct 2006 22:44:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:44:32 -0000
Received: (qmail 42175 invoked by uid 500); 18 Oct 2006 22:44:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42150 invoked by uid 500); 18 Oct 2006 22:44:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42141 invoked by uid 99); 18 Oct 2006 22:44:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:44:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:44:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 468AB714314
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 15:43:37 -0700 (PDT)
Message-ID: <13300734.1161211417286.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 15:43:37 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Mahadev konar updated HADOOP-609:
---------------------------------

    Attachment: junit_less.patch

Thanks for the comments owen. I used the inheritance from WordCount example.

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_less.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Wed Oct 18 22:51:31 2006
Return-Path: 
 <hadoop-dev-return-4401-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54379 invoked from network); 18 Oct 2006 22:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:51:31 -0000
Received: (qmail 65490 invoked by uid 500); 18 Oct 2006 22:51:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65465 invoked by uid 500); 18 Oct 2006 22:51:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65456 invoked by uid 99); 18 Oct 2006 22:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:51:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:51:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1AA02714310
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 15:50:36 -0700 (PDT)
Message-ID: <1569537.1161211836106.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 15:50:36 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-614) Sporadic TestEmptyJobWithDFS failure
 due to NPE is JobTracker.submitJob()
In-Reply-To: <5749547.1161210634968.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-614?page=all ]

Nigel Daley resolved HADOOP-614.
--------------------------------

    Resolution: Duplicate

Somehow this bug got submitted twice.  Duplicate of 615 (which has the attachment)

> Sporadic TestEmptyJobWithDFS failure due to NPE is JobTracker.submitJob()
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-614
>                 URL: http://issues.apache.org/jira/browse/HADOOP-614
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>
> org.apache.hadoop.mapred.TestEmptyJobWithDFS has failed a couple of times (low reproducibility) with the following exception:
> 2006-10-17 21:48:24,875 INFO  ipc.Server (Server.java:run(516)) - Server handler 2 on 50050 call error: java.io.IOException: java.lang.NullPointerException
> java.io.IOException: java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1020)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:385)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
> Complete test log attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 03:58:32 2006
Return-Path: 
 <hadoop-dev-return-4402-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57198 invoked from network); 19 Oct 2006 03:58:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 03:58:32 -0000
Received: (qmail 86961 invoked by uid 500); 19 Oct 2006 03:58:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86934 invoked by uid 500); 19 Oct 2006 03:58:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86924 invoked by uid 99); 19 Oct 2006 03:58:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 20:58:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 20:58:30 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 300B9714314
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 20:57:36 -0700 (PDT)
Message-ID: <4178834.1161230256194.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 20:57:36 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-607) Classpath of tasks is not set
 correctly (bug happens for multiple mapred local dirs only)
In-Reply-To: <3618961.1161064594983.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-607?page=all ]

Doug Cutting resolved HADOOP-607.
---------------------------------

    Resolution: Fixed

I just committed this.  Thanks, Mahadev.

> Classpath of tasks is not set correctly (bug happens for multiple mapred local dirs only)
> -----------------------------------------------------------------------------------------
>
>                 Key: HADOOP-607
>                 URL: http://issues.apache.org/jira/browse/HADOOP-607
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.1
>            Reporter: Mahadev konar
>         Assigned To: Mahadev konar
>            Priority: Critical
>             Fix For: 0.7.2
>
>         Attachments: bugfix.patch
>
>
> Tasks fail because the classpath for the tasks is not set correctly. The current working directory of the tasks is not set to the directory where the job.jar is unjarred.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 03:58:34 2006
Return-Path: 
 <hadoop-dev-return-4403-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57256 invoked from network); 19 Oct 2006 03:58:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 03:58:34 -0000
Received: (qmail 87218 invoked by uid 500); 19 Oct 2006 03:58:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87186 invoked by uid 500); 19 Oct 2006 03:58:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87177 invoked by uid 99); 19 Oct 2006 03:58:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 20:58:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 20:58:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 98EA6714318
	for <hadoop-dev@lucene.apache.org>; Wed, 18 Oct 2006 20:57:38 -0700 (PDT)
Message-ID: <28865396.1161230258624.JavaMail.jira@brutus>
Date: Wed, 18 Oct 2006 20:57:38 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-609) Mini map/reduce cluster should use
 multiple temp directories
In-Reply-To: <698465.1161102755024.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-609?page=all ]

Doug Cutting updated HADOOP-609:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Mahadev.

> Mini map/reduce cluster should use multiple temp directories
> ------------------------------------------------------------
>
>                 Key: HADOOP-609
>                 URL: http://issues.apache.org/jira/browse/HADOOP-609
>             Project: Hadoop
>          Issue Type: Test
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Mahadev konar
>             Fix For: 0.7.2
>
>         Attachments: junit_less.patch
>
>
> Currently the mini map/reduce cluster only tests the task trackers with a single working directory. That caused us to miss a bug that broke 0.7.1. At least some of the mini m/r tests should run task trackers with two or threee working directories.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 09:45:36 2006
Return-Path: 
 <hadoop-dev-return-4404-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60709 invoked from network); 19 Oct 2006 09:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 09:45:36 -0000
Received: (qmail 83675 invoked by uid 500); 19 Oct 2006 09:45:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83629 invoked by uid 500); 19 Oct 2006 09:45:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83606 invoked by uid 99); 19 Oct 2006 09:45:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 02:45:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 02:45:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A6374714319
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 02:44:39 -0700 (PDT)
Message-ID: <3182316.1161251079678.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 02:44:39 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment:     (was: HADOOP-489_20061019.patch)

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 09:45:40 2006
Return-Path: 
 <hadoop-dev-return-4405-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60760 invoked from network); 19 Oct 2006 09:45:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 09:45:40 -0000
Received: (qmail 83928 invoked by uid 500); 19 Oct 2006 09:45:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83892 invoked by uid 500); 19 Oct 2006 09:45:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83877 invoked by uid 99); 19 Oct 2006 09:45:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 02:45:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 02:45:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F74371431C
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 02:44:44 -0700 (PDT)
Message-ID: <30359919.1161251084323.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 02:44:44 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-489) Seperating user logs from system logs
 in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-489?page=all ]

Arun C Murthy updated HADOOP-489:
---------------------------------

    Attachment: HADOOP-489_20061019.patch

Pretty-fied patch...

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:26:55 2006
Return-Path: 
 <hadoop-dev-return-4407-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50075 invoked from network); 19 Oct 2006 17:26:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:26:55 -0000
Received: (qmail 37886 invoked by uid 500); 19 Oct 2006 17:26:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37861 invoked by uid 500); 19 Oct 2006 17:26:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37852 invoked by uid 99); 19 Oct 2006 17:26:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:26:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tcurdt@gmail.com designates
 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:26:52 -0700
Received: by py-out-1112.google.com with SMTP id e30so68061pya
        for <hadoop-dev@lucene.apache.org>;
 Thu, 19 Oct 2006 10:26:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=Xbi6dkTanUO4bTMlKHirmzVaC5vJIyc+9PqNdvSlDZLNyC8dRtIN4/12F7qtedjGKyFsta2VUgLSiTRH/bobzvSa4agkKW9DZS9BTAgzL0b/50204ErM+DjJ4+/QUfyPrUuPbmmdjaey6Y33j9UKDxTbx/UgiFSktP2+EGXkmxI=
Received: by 10.35.89.10 with SMTP id r10mr99608pyl;
        Thu, 19 Oct 2006 08:41:15 -0700 (PDT)
Received: by 10.35.128.4 with HTTP; Thu, 19 Oct 2006 08:41:15 -0700 (PDT)
Message-ID: <98e4f1cd0610190841l29e85e6dq8d5c04cebec8b59b@mail.gmail.com>
Date: Thu, 19 Oct 2006 17:41:15 +0200
From: "Torsten Curdt" <tcurdt@apache.org>
Sender: tcurdt@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: replication
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 5f1791af37aeef22
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there,

I really need the master replication. Has anyone already started
implementing this proposal?

 http://mail-archives.apache.org/mod_mbox/lucene-hadoop-dev/200609.mbox/browser

There were no comments ...at least I would be interested to help
working on this.

cheers
--
Torsten

From MAILER-DAEMON Thu Oct 19 16:43:32 2006
Return-Path: 
 <hadoop-dev-return-4406-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34506 invoked from network); 19 Oct 2006 16:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 16:43:32 -0000
Received: (qmail 19146 invoked by uid 500); 19 Oct 2006 16:43:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19104 invoked by uid 500); 19 Oct 2006 16:43:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19095 invoked by uid 99); 19 Oct 2006 16:43:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 09:43:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 09:43:29 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 010F4714316
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 09:42:35 -0700 (PDT)
Message-ID: <2597036.1161276155001.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 09:42:35 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-616) downloading a file from dfs using the
 WI, using firefox, creates local files that start with a '-'
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

downloading a file from dfs using the WI, using firefox, creates local files that start with a '-'
--------------------------------------------------------------------------------------------------

                 Key: HADOOP-616
                 URL: http://issues.apache.org/jira/browse/HADOOP-616
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Yoram Arnon


'/' characters are converted to '-' when downloading a file from dfs using the WI. That's a good thing.
But using firefox, where file names can not be modified when saving to disk, creates local files that start with a '-', which is inconvenient on some OS's.

the first '/' character should be dropped rather than converted to a '-'

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:30:33 2006
Return-Path: 
 <hadoop-dev-return-4408-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51657 invoked from network); 19 Oct 2006 17:30:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:30:33 -0000
Received: (qmail 47260 invoked by uid 500); 19 Oct 2006 17:30:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47238 invoked by uid 500); 19 Oct 2006 17:30:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47229 invoked by uid 99); 19 Oct 2006 17:30:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:30:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:30:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4611F714319
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 10:29:37 -0700 (PDT)
Message-ID: <31943118.1161278977284.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 10:29:37 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-561) one replica of a file should be
 written locally if possible
In-Reply-To: <2427633.1159289452077.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-561?page=all ]

dhruba borthakur updated HADOOP-561:
------------------------------------

    Attachment: localreplica.patch

This fixesd two bugs in chooseTarget() routine that was causing the local machine to not get picked as a replica

> one replica of a file should be written locally if possible
> -----------------------------------------------------------
>
>                 Key: HADOOP-561
>                 URL: http://issues.apache.org/jira/browse/HADOOP-561
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: dhruba borthakur
>         Attachments: localreplica.patch
>
>
> one replica of a file should be written locally if possible. That's currently not the case.
> Copying a 1GB file using hadoop dfs -cp running on one of the cluster nodes, all the blocks were written to remote nodes, as seen by fsck -files -blocks -locations on the newly created file.
> as long as there is sufficient space locally, a local copy has significant performance benefits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:30:35 2006
Return-Path: 
 <hadoop-dev-return-4409-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51721 invoked from network); 19 Oct 2006 17:30:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:30:35 -0000
Received: (qmail 47507 invoked by uid 500); 19 Oct 2006 17:30:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47483 invoked by uid 500); 19 Oct 2006 17:30:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47474 invoked by uid 99); 19 Oct 2006 17:30:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:30:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:30:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1E79171431D
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 10:29:39 -0700 (PDT)
Message-ID: <33213337.1161278979122.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 10:29:39 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-561) one replica of a file should be
 written locally if possible
In-Reply-To: <2427633.1159289452077.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-561?page=all ]

dhruba borthakur updated HADOOP-561:
------------------------------------

    Status: Patch Available  (was: Open)

TThis fixed two bugs in chooseTarget(0 that was causing the local machine to not get oicked as a replica. There was a comparision between UTF8 and String.

> one replica of a file should be written locally if possible
> -----------------------------------------------------------
>
>                 Key: HADOOP-561
>                 URL: http://issues.apache.org/jira/browse/HADOOP-561
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: dhruba borthakur
>         Attachments: localreplica.patch
>
>
> one replica of a file should be written locally if possible. That's currently not the case.
> Copying a 1GB file using hadoop dfs -cp running on one of the cluster nodes, all the blocks were written to remote nodes, as seen by fsck -files -blocks -locations on the newly created file.
> as long as there is sufficient space locally, a local copy has significant performance benefits.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:34:35 2006
Return-Path: 
 <hadoop-dev-return-4411-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52671 invoked from network); 19 Oct 2006 17:34:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:34:35 -0000
Received: (qmail 59628 invoked by uid 500); 19 Oct 2006 17:34:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59608 invoked by uid 500); 19 Oct 2006 17:34:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59599 invoked by uid 99); 19 Oct 2006 17:34:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:34:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:34:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DAEDB71431D
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 10:33:38 -0700 (PDT)
Message-ID: <461489.1161279218894.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 10:33:38 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-554) hadoop dfs command line doesn't exit
 with status code on error
In-Reply-To: <32015994.1158861924004.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-554?page=all ]

dhruba borthakur reassigned HADOOP-554:
---------------------------------------

    Assignee: dhruba borthakur

> hadoop dfs command line doesn't exit with status code on error
> --------------------------------------------------------------
>
>                 Key: HADOOP-554
>                 URL: http://issues.apache.org/jira/browse/HADOOP-554
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: dhruba borthakur
>
> In DFSClient, the code looks like:
> ---- >8 ----
>         int exitCode = -1;
>         ...
>         try {
>             if ("-put".equals(cmd) || "-copyFromLocal".equals(cmd)) {
>                 copyFromLocal(new Path(argv[i++]), argv[i++]);
>             ...
>             exitCode = 0;;
>         } catch (IOException e ) {
>           System.err.println( cmd.substring(1) + ": " + e.getLocalizedMessage() );  
>         } finally {
>             fs.close();
>         }
>         return exitCode;
> ---- 8< ----
> Point 1: Few, if any of the functions called throw an exception. Instead they System.err.println and return.
> Point 2: exitCode, regardless if there is an exception, is always 0.
> At minimum, it would be best if SOME status code were returned, so that any scripts calling hadoop dfs would know to parse the output.
> At best, there'd be a well-documented table of exit codes so that parsing stderr wouldn't be required.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:33:50 2006
Return-Path: 
 <hadoop-dev-return-4410-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52520 invoked from network); 19 Oct 2006 17:33:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:33:50 -0000
Received: (qmail 57097 invoked by uid 500); 19 Oct 2006 17:33:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57064 invoked by uid 500); 19 Oct 2006 17:33:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57055 invoked by uid 99); 19 Oct 2006 17:33:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:33:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.225.92] (HELO alnrmhc12.comcast.net) (204.127.225.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:33:48 -0700
Received: from [10.0.4.220]
 (brewedawakening.oak.surfandsip.net[68.164.245.153])
          by comcast.net (alnrmhc12) with ESMTP
          id <20061019173327b1200fuf28e>; Thu, 19 Oct 2006 17:33:27 +0000
Message-ID: <4537B709.50908@apache.org>
Date: Thu, 19 Oct 2006 10:34:01 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: release 0.7.2 available
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Release 0.7.2 of Hadoop is now available, fixing a critical bug in 0.7.1.

The release may be downloaded from:

   http://www.apache.org/dyn/closer.cgi/lucene/hadoop/

Release notes are available at:

   http://tinyurl.com/ygy6y7

Please report problems via:

   http://issues.apache.org/jira/browse/HADOOP

Doug

From MAILER-DAEMON Thu Oct 19 17:36:36 2006
Return-Path: 
 <hadoop-dev-return-4412-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 54041 invoked from network); 19 Oct 2006 17:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:36:36 -0000
Received: (qmail 61905 invoked by uid 500); 19 Oct 2006 17:36:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61884 invoked by uid 500); 19 Oct 2006 17:36:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61875 invoked by uid 99); 19 Oct 2006 17:36:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:36:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:36:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E7DF971431D
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 10:35:39 -0700 (PDT)
Message-ID: <9560060.1161279339947.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 10:35:39 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-563) DFS client should try to re-new lease
 if it gets a lease expiration exception when it adds a block to a file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-563?page=all ]

dhruba borthakur reassigned HADOOP-563:
---------------------------------------

    Assignee: dhruba borthakur

> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Runping Qi
>         Assigned To: dhruba borthakur
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:44:34 2006
Return-Path: 
 <hadoop-dev-return-4413-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56159 invoked from network); 19 Oct 2006 17:44:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:44:34 -0000
Received: (qmail 86246 invoked by uid 500); 19 Oct 2006 17:44:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86219 invoked by uid 500); 19 Oct 2006 17:44:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86210 invoked by uid 99); 19 Oct 2006 17:44:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:44:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:44:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E949171431C
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 10:43:37 -0700 (PDT)
Message-ID: <28329064.1161279817953.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 10:43:37 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]

Sanjay Dahiya updated HADOOP-76:
--------------------------------

    Attachment: Hadoop-76.patch

This patch is up for review. 

Here is the list of changes included in this patch - 

Replaced recentTasks to a Map, added a new method in TaskInProgress hasRanOnMachine, which looks at this Map and hasFailedOnMachines(). This is used to avoid scheduling multiple reduce instances of same task on the same node. 

Added a PhasedRecordWriter, which takes a RecordWriter, tempName, finalName. Another option was to create a PhasedOutputFormat, this seems more natural as it works with any existing OutputFormat and RecordWriter. Records are written to tempName and when commit is called they are moved to finalName. 

ReduceTask.run() - if speculative execution is enabled then reduce output is written to a temp location using PhasedRecordWriter. After task finishes the output is written to a final location. 
If some other speculative instance finishes first then TaskInProgress.shouldCloseForClosedJob() returns true for the taskId. On TaskTracker the task is killed by Process.destroy() so cleanup code is in TaskTracker instead of Task. The cleanup of Maps happen in Conf, which is probably misplaced. We could refactor this part for both Map and Reduce and move cleanup code to some utility classes which, given a Map and Reduce task track the files generated and cleanup if needed. 

Added an extra attribute in TaskInProgress - runningSpeculative, to avoid running more than one speculative instances of ReduceTask. Too many Reduce instances for same task could increase load on Map machines, this needs discussion. I can revert this change back to allow some other number of instances of Reduces (MAX_TASK_FAILURES?). 

comments

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:46:37 2006
Return-Path: 
 <hadoop-dev-return-4414-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56515 invoked from network); 19 Oct 2006 17:46:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:46:37 -0000
Received: (qmail 88955 invoked by uid 500); 19 Oct 2006 17:46:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88933 invoked by uid 500); 19 Oct 2006 17:46:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88919 invoked by uid 99); 19 Oct 2006 17:46:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:46:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:46:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AFB6F71431C
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 10:45:38 -0700 (PDT)
Message-ID: <8237356.1161279938716.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 10:45:38 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-578) Failed tasks should not be put at the
 end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-578?page=all ]

Sanjay Dahiya reassigned HADOOP-578:
------------------------------------

    Assignee: Sanjay Dahiya

> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:46:52 2006
Return-Path: 
 <hadoop-dev-return-4415-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56650 invoked from network); 19 Oct 2006 17:46:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:46:52 -0000
Received: (qmail 89679 invoked by uid 500); 19 Oct 2006 17:46:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 89656 invoked by uid 500); 19 Oct 2006 17:46:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 89643 invoked by uid 99); 19 Oct 2006 17:46:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:46:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:46:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 64F7D714321
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 10:45:42 -0700 (PDT)
Message-ID: <989975.1161279942410.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 10:45:42 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-578) Failed tasks should not be put at
 the end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-578?page=all ]

Work on HADOOP-578 started by Sanjay Dahiya.

> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 17:58:41 2006
Return-Path: 
 <hadoop-dev-return-4416-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 60153 invoked from network); 19 Oct 2006 17:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 17:58:41 -0000
Received: (qmail 13952 invoked by uid 500); 19 Oct 2006 17:58:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13921 invoked by uid 500); 19 Oct 2006 17:58:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13912 invoked by uid 99); 19 Oct 2006 17:58:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:58:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 10:58:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 640C5714316
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 10:57:38 -0700 (PDT)
Message-ID: <6711225.1161280658406.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 10:57:38 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-576?page=all ]

Work on HADOOP-576 started by Mahadev konar.

> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 18:07:36 2006
Return-Path: 
 <hadoop-dev-return-4417-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 62931 invoked from network); 19 Oct 2006 18:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 18:07:36 -0000
Received: (qmail 36914 invoked by uid 500); 19 Oct 2006 18:07:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36711 invoked by uid 500); 19 Oct 2006 18:07:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36702 invoked by uid 99); 19 Oct 2006 18:07:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 11:07:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 11:07:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id ECB68714316
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 11:06:34 -0700 (PDT)
Message-ID: <7469623.1161281194965.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 11:06:34 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-617) Streaming should include more unit
 tests to test more features that it provides.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Streaming should include more unit tests to test more features that it provides.
--------------------------------------------------------------------------------

                 Key: HADOOP-617
                 URL: http://issues.apache.org/jira/browse/HADOOP-617
             Project: Hadoop
          Issue Type: Test
          Components: contrib/streaming
            Reporter: Mahadev konar
            Priority: Minor


Currently streaming has only one test that runs with ant test. It should include more tests to check for the features that streaming provides.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 22:00:34 2006
Return-Path: 
 <hadoop-dev-return-4418-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66734 invoked from network); 19 Oct 2006 22:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 22:00:34 -0000
Received: (qmail 96634 invoked by uid 500); 19 Oct 2006 22:00:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96619 invoked by uid 500); 19 Oct 2006 22:00:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96610 invoked by uid 99); 19 Oct 2006 22:00:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:00:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:00:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0B6EB714316
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 14:59:37 -0700 (PDT)
Message-ID: <28907046.1161295177044.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 14:59:37 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-493) hadoop dfs -report information is
 incorrect
In-Reply-To: <23553183.1156918702373.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-493?page=all ]

Raghu Angadi reassigned HADOOP-493:
-----------------------------------

    Assignee: Raghu Angadi

> hadoop dfs -report information is incorrect
> -------------------------------------------
>
>                 Key: HADOOP-493
>                 URL: http://issues.apache.org/jira/browse/HADOOP-493
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Yoram Arnon
>         Assigned To: Raghu Angadi
>            Priority: Minor
>
> The information presented by hadoop dfs -report is incorrect.
> In the following example, the total raw bytes are correct, the used raw bytes are incorrect and should actually be on the order of 138TB.
> The total effective bytes is correct, and the actual replication factor is really a healthy 3.
> yarnon@g1010:build:942>hadoop dfs  2> /dev/null -report | head
> Total raw bytes: 240761579888640 (224226.69 Gb)
> Used raw bytes: 35934229005360 (33466.35 Gb)
> % used: 14.92%
> Total effective bytes: 47093545108964 (43859.28 Gb)
> Effective replication multiplier: 0.7630393703047027
> -------------------------------------------------
> In the following example again the total raw bytes and total effective bytes are correct, but the used raw bytes, % used and effective replication are a tad off the mark.
> hadoop  dfs 2> /dev/null -report | head
> Total raw bytes: 236476179599360 (220235.60 Gb)
> Used raw bytes: -22028236104431 (-2.15 k)
> % used: -9.31%
> Total effective bytes: 55609049637201 (51789.96 Gb)
> Effective replication multiplier: -0.39612682194976206
> -------------------------------------------------

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 22:04:44 2006
Return-Path: 
 <hadoop-dev-return-4421-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68194 invoked from network); 19 Oct 2006 22:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 22:04:44 -0000
Received: (qmail 4963 invoked by uid 500); 19 Oct 2006 22:04:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4926 invoked by uid 500); 19 Oct 2006 22:04:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4901 invoked by uid 99); 19 Oct 2006 22:04:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:04:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:04:39 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE9B9714315
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 15:03:38 -0700 (PDT)
Message-ID: <10811862.1161295418842.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 15:03:38 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi reassigned HADOOP-599:
-----------------------------------

    Assignee: Raghu Angadi

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 22:04:41 2006
Return-Path: 
 <hadoop-dev-return-4419-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68119 invoked from network); 19 Oct 2006 22:04:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 22:04:41 -0000
Received: (qmail 4443 invoked by uid 500); 19 Oct 2006 22:04:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4421 invoked by uid 500); 19 Oct 2006 22:04:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4407 invoked by uid 99); 19 Oct 2006 22:04:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:04:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:04:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2C9FE714318
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 15:03:41 -0700 (PDT)
Message-ID: <24663298.1161295421180.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 15:03:41 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-553?page=all ]

Raghu Angadi reassigned HADOOP-553:
-----------------------------------

    Assignee: Raghu Angadi

> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-553
>                 URL: http://issues.apache.org/jira/browse/HADOOP-553
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred, dfs
>    Affects Versions: 0.6.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Raghu Angadi
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and 
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 19 22:04:43 2006
Return-Path: 
 <hadoop-dev-return-4420-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68156 invoked from network); 19 Oct 2006 22:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 22:04:43 -0000
Received: (qmail 4807 invoked by uid 500); 19 Oct 2006 22:04:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4760 invoked by uid 500); 19 Oct 2006 22:04:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4728 invoked by uid 99); 19 Oct 2006 22:04:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:04:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:04:38 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9DE59714319
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 15:03:43 -0700 (PDT)
Message-ID: <5346365.1161295423644.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 15:03:43 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-604) DataNodes get NullPointerException
 and become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-604?page=all ]

Raghu Angadi reassigned HADOOP-604:
-----------------------------------

    Assignee: Raghu Angadi  (was: Milind Bhandarkar)

> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 20 00:56:36 2006
Return-Path: 
 <hadoop-dev-return-4422-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14459 invoked from network); 20 Oct 2006 00:56:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 00:56:36 -0000
Received: (qmail 53087 invoked by uid 500); 20 Oct 2006 00:56:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53062 invoked by uid 500); 20 Oct 2006 00:56:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53053 invoked by uid 99); 20 Oct 2006 00:56:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 17:56:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 17:56:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3AFA3714316
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 17:55:38 -0700 (PDT)
Message-ID: <16478178.1161305738239.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 17:55:38 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Devaraj Das updated HADOOP-331:
-------------------------------

    Attachment: 331.txt

Attached is a txt doc that summarizes the discussions so far as a design doc.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 20 01:47:16 2006
Return-Path: 
 <hadoop-dev-return-4423-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30888 invoked from network); 20 Oct 2006 01:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 01:47:16 -0000
Received: (qmail 94618 invoked by uid 500); 20 Oct 2006 01:47:16 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 94395 invoked by uid 500); 20 Oct 2006 01:47:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 94382 invoked by uid 99); 20 Oct 2006 01:47:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 18:47:15 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 18:47:13 -0700
Received: from [192.168.1.66] (snvvpn2-10-72-76-c250.corp.yahoo.com
 [10.72.76.250])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k9K1kfVK080429
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 18:46:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:from:
	subject:date:to:x-mailer;
	b=X1OnDK3g8jXxe3qxL/M9bCtQ/tdk5NpsDmMx6sO/A9h1+63FgKb0ZQOK/IaXSkIb
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <28329064.1161279817953.JavaMail.jira@brutus>
References: <28329064.1161279817953.JavaMail.jira@brutus>
Content-Type: multipart/alternative; boundary=Apple-Mail-14-465490756
Message-Id: <7d3851cadc2612ad8d1eca173aa41e23@yahoo-inc.com>
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Updated: (HADOOP-76) Implement speculative re-execution of
 reduces
Date: Thu, 19 Oct 2006 18:46:40 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-14-465490756
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

Just a question:

did we consider "speculative execution of reduces with sub-splitting"?
That is, for each of the last / slow reduce tasks run several task 
subslitting the input of the original task?
The implementation would be probably more complicated, but the benefits 
may be huge -- currently, it is not uncommon to see the single last 
reduce task running for hours (if not for days).

-- ab

On Oct 19, 2006, at 10:43 AM, Sanjay Dahiya (JIRA) wrote:

>      [ http://issues.apache.org/jira/browse/HADOOP-76?page=all ]
>
> Sanjay Dahiya updated HADOOP-76:
> --------------------------------
>
>     Attachment: Hadoop-76.patch
>
> This patch is up for review.
>
> Here is the list of changes included in this patch -
>
> Replaced recentTasks to a Map, added a new method in TaskInProgress 
> hasRanOnMachine, which looks at this Map and hasFailedOnMachines(). 
> This is used to avoid scheduling multiple reduce instances of same 
> task on the same node.
>
> Added a PhasedRecordWriter, which takes a RecordWriter, tempName, 
> finalName. Another option was to create a PhasedOutputFormat, this 
> seems more natural as it works with any existing OutputFormat and 
> RecordWriter. Records are written to tempName and when commit is 
> called they are moved to finalName.
>
> ReduceTask.run() - if speculative execution is enabled then reduce 
> output is written to a temp location using PhasedRecordWriter. After 
> task finishes the output is written to a final location.
> If some other speculative instance finishes first then 
> TaskInProgress.shouldCloseForClosedJob() returns true for the taskId. 
> On TaskTracker the task is killed by Process.destroy() so cleanup code 
> is in TaskTracker instead of Task. The cleanup of Maps happen in Conf, 
> which is probably misplaced. We could refactor this part for both Map 
> and Reduce and move cleanup code to some utility classes which, given 
> a Map and Reduce task track the files generated and cleanup if needed.
>
> Added an extra attribute in TaskInProgress - runningSpeculative, to 
> avoid running more than one speculative instances of ReduceTask. Too 
> many Reduce instances for same task could increase load on Map 
> machines, this needs discussion. I can revert this change back to 
> allow some other number of instances of Reduces (MAX_TASK_FAILURES?).
>
> comments
>
>> Implement speculative re-execution of reduces
>> ---------------------------------------------
>>
>>                 Key: HADOOP-76
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>>             Project: Hadoop
>>          Issue Type: Improvement
>>          Components: mapred
>>    Affects Versions: 0.1.0
>>            Reporter: Doug Cutting
>>         Assigned To: Sanjay Dahiya
>>            Priority: Minor
>>         Attachments: Hadoop-76.patch, spec_reducev.patch
>>
>>
>> As a first step, reduce task outputs should go to temporary files 
>> which are renamed when the task completes.
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
>
>

--Apple-Mail-14-465490756--


From MAILER-DAEMON Fri Oct 20 02:00:34 2006
Return-Path: 
 <hadoop-dev-return-4424-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33834 invoked from network); 20 Oct 2006 02:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 02:00:34 -0000
Received: (qmail 3632 invoked by uid 500); 20 Oct 2006 02:00:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3598 invoked by uid 500); 20 Oct 2006 02:00:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3588 invoked by uid 99); 20 Oct 2006 02:00:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 19:00:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 19:00:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B43B714310
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 18:59:37 -0700 (PDT)
Message-ID: <14996636.1161309577305.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 18:59:37 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-615) Sporadic TestEmptyJobWithDFS failure
 due to NPE is JobTracker.submitJob()
In-Reply-To: <1014515.1161210995013.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

     [ http://issues.apache.org/jira/browse/HADOOP-615?page=all ]

Nigel Daley reassigned HADOOP-615:
----------------------------------

    Assignee: Owen O'Malley

> Sporadic TestEmptyJobWithDFS failure due to NPE is JobTracker.submitJob()
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-615
>                 URL: http://issues.apache.org/jira/browse/HADOOP-615
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>         Attachments: TEST-org.apache.hadoop.mapred.TestEmptyJobWithDFS.txt
>
>
> org.apache.hadoop.mapred.TestEmptyJobWithDFS has failed a couple of times (low reproducibility) with the following exception:
> 2006-10-17 21:48:24,875 INFO  ipc.Server (Server.java:run(516)) - Server handler 2 on 50050 call error: java.io.IOException: java.lang.NullPointerException
> java.io.IOException: java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1020)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:385)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
> Complete test log attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 20 02:05:34 2006
Return-Path: 
 <hadoop-dev-return-4425-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34672 invoked from network); 20 Oct 2006 02:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 02:05:34 -0000
Received: (qmail 6673 invoked by uid 500); 20 Oct 2006 02:05:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6533 invoked by uid 500); 20 Oct 2006 02:05:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6524 invoked by uid 99); 20 Oct 2006 02:05:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 19:05:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 19:05:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B391C714318
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 19:04:36 -0700 (PDT)
Message-ID: <19731555.1161309876733.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 19:04:36 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-615) Sporadic TestEmptyJobWithDFS failure
 due to NPE is JobTracker.submitJob()
In-Reply-To: <1014515.1161210995013.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-615?page=comments#action_12443677 ] 
            
Nigel Daley commented on HADOOP-615:
------------------------------------

Looking at the constructor of JobTracker, it looks like JobTracker advertises itself before it has completed initialization.  Given that the constructor is not synchronized, my guess is that JobTracker.submitJob is getting called before initialization completes, thus myMetrics is null causing the NPE.

> Sporadic TestEmptyJobWithDFS failure due to NPE is JobTracker.submitJob()
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-615
>                 URL: http://issues.apache.org/jira/browse/HADOOP-615
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>         Attachments: TEST-org.apache.hadoop.mapred.TestEmptyJobWithDFS.txt
>
>
> org.apache.hadoop.mapred.TestEmptyJobWithDFS has failed a couple of times (low reproducibility) with the following exception:
> 2006-10-17 21:48:24,875 INFO  ipc.Server (Server.java:run(516)) - Server handler 2 on 50050 call error: java.io.IOException: java.lang.NullPointerException
> java.io.IOException: java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:1020)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:585)
>         at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:385)
>         at org.apache.hadoop.ipc.Server$Handler.run(Server.java:514)
> Complete test log attached.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 20 06:02:39 2006
Return-Path: 
 <hadoop-dev-return-4426-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74417 invoked from network); 20 Oct 2006 06:02:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 06:02:39 -0000
Received: (qmail 9290 invoked by uid 500); 20 Oct 2006 06:02:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9264 invoked by uid 500); 20 Oct 2006 06:02:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9255 invoked by uid 99); 20 Oct 2006 06:02:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 23:02:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 23:02:37 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C5AF17142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 23:01:36 -0700 (PDT)
Message-ID: <23590382.1161324096806.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 23:01:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12443706 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

I think that "ant compile-native" should create:

build/native/libhadoop-${os}-${arch}.so

and package should move build/native/libhadoop-*.so to the root level of the distribution parallel with the jar files. Then the NativeCodeLoader should always load "hadoop-${os}-${arch}".



> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 20 06:10:34 2006
Return-Path: 
 <hadoop-dev-return-4427-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75122 invoked from network); 20 Oct 2006 06:10:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 06:10:34 -0000
Received: (qmail 18574 invoked by uid 500); 20 Oct 2006 06:10:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18352 invoked by uid 500); 20 Oct 2006 06:10:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18338 invoked by uid 99); 20 Oct 2006 06:10:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 23:10:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 23:10:32 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B76C77142E4
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 23:09:36 -0700 (PDT)
Message-ID: <10271952.1161324576748.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 23:09:36 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12443707 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

NativeCodeLoader:
   1. The Class & public methods need to have javadoc
   2. The log field should be private.
   3. Using a static Configuration is pretty broken, because it:
      a. causes the config files to be re-read
      b. ignores mapred-default.xml
      c. doesn't let the application control it
      As a result, I think the test for hadoop.native.code and the conf field should be removed.

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 20 06:43:37 2006
Return-Path: 
 <hadoop-dev-return-4428-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82341 invoked from network); 20 Oct 2006 06:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 06:43:37 -0000
Received: (qmail 63892 invoked by uid 500); 20 Oct 2006 06:43:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63858 invoked by uid 500); 20 Oct 2006 06:43:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63840 invoked by uid 99); 20 Oct 2006 06:43:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 23:43:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 23:43:34 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 695BE714310
	for <hadoop-dev@lucene.apache.org>; Thu, 19 Oct 2006 23:42:38 -0700 (PDT)
Message-ID: <1569824.1161326558429.JavaMail.jira@brutus>
Date: Thu, 19 Oct 2006 23:42:38 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12443720 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

src/java/org/apache/hadoop/io/compress/zip/ZlibCompressor.java and Decompressor:
   1. The fields should be private.
   2. The enum fields should be declared as enums rather than ints and the conversion done when the native methods are called.
   3. More missing javadoc *smile*

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 20 08:41:44 2006
Return-Path: 
 <hadoop-dev-return-4429-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21984 invoked from network); 20 Oct 2006 08:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 08:41:44 -0000
Received: (qmail 36441 invoked by uid 500); 20 Oct 2006 08:41:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36315 invoked by uid 500); 20 Oct 2006 08:41:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36304 invoked by uid 99); 20 Oct 2006 08:41:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 01:41:42 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tcurdt@gmail.com designates
 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO nz-out-0102.google.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 01:41:41 -0700
Received: by nz-out-0102.google.com with SMTP id k1so325419nzf
        for <hadoop-dev@lucene.apache.org>;
 Fri, 20 Oct 2006 01:41:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=J8SI457b7Dk4fyuXw7X75Sy9NcMsrQC98Skso2+kHmpQQWRCWu6M9c8GGO7sxPl7481JZuqcgx6FURgFAQbzJ+ZBiZzb+hVb1VVrSDouEtqMuWyjP3BVeZ+lhVXxypJy+5fZc0CaoSzytjwB4nDSk5/W00DTtAOAqP9Xw8ekhnw=
Received: by 10.35.61.17 with SMTP id o17mr190429pyk;
        Fri, 20 Oct 2006 01:41:18 -0700 (PDT)
Received: by 10.35.128.4 with HTTP; Fri, 20 Oct 2006 01:41:18 -0700 (PDT)
Message-ID: <98e4f1cd0610200141k715aec66m6eb49004f2648c79@mail.gmail.com>
Date: Fri, 20 Oct 2006 10:41:18 +0200
From: "Torsten Curdt" <tcurdt@apache.org>
Sender: tcurdt@gmail.com
To: hadoop-dev@lucene.apache.org
Subject: Re: replication
Cc: milindb@yahoo-inc.com
In-Reply-To: <98e4f1cd0610190841l29e85e6dq8d5c04cebec8b59b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <98e4f1cd0610190841l29e85e6dq8d5c04cebec8b59b@mail.gmail.com>
X-Google-Sender-Auth: 25f28f1e6b2a5aee
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ups ...that's the correct link

http://mail-archives.apache.org/mod_mbox/lucene-hadoop-dev/200609.mbox/%3cACC721A9-C328-40C5-B761-C80FFB1DB032@yahoo-inc.com%3e

Someone started yet?

cheers
--
Torsten

On 10/19/06, Torsten Curdt <tcurdt@apache.org> wrote:
> Hi there,
>
> I really need the master replication. Has anyone already started
> implementing this proposal?
>
>  http://mail-archives.apache.org/mod_mbox/lucene-hadoop-dev/200609.mbox/browser
>
> There were no comments ...at least I would be interested to help
> working on this.
>
> cheers
> --
> Torsten
>

From MAILER-DAEMON Fri Oct 20 08:59:19 2006
Return-Path: 
 <hadoop-dev-return-4430-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 26277 invoked from network); 20 Oct 2006 08:59:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 08:59:19 -0000
Received: (qmail 69586 invoked by uid 500); 20 Oct 2006 08:59:18 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69562 invoked by uid 500); 20 Oct 2006 08:59:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69553 invoked by uid 99); 20 Oct 2006 08:59:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 01:59:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vetler@opera.com designates
 193.69.113.81 as permitted sender)
Received: from [193.69.113.81] (HELO sam.opera.com) (193.69.113.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 01:59:16 -0700
Received: from localhost (pat.opera.com [193.69.113.22])
	(authenticated bits=0)
	by sam.opera.com (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id k9K8wsmn030421
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <hadoop-dev@lucene.apache.org>; Fri, 20 Oct 2006 08:58:54 GMT
Date: Fri, 20 Oct 2006 10:58:59 +0200
To: hadoop-dev@lucene.apache.org
Subject: Re: Input paths
From: "Vetle Roeim" <vetler@opera.com>
Organization: Opera Software ASA
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <op.thijhqevu1bjg7@localhost> <4533960F.3080302@dragonflymc.com>
 <op.thiq2zsyu1bjg7@localhost> <4533B6B2.80002@dragonflymc.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.thppwlhdu1bjg7@localhost>
In-Reply-To: <4533B6B2.80002@dragonflymc.com>
User-Agent: Opera Mail/9.01 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 16 Oct 2006 18:43:30 +0200, Dennis Kubes  
<nutch-dev@dragonflymc.com> wrote:

> InputFormatBase is used by some of the other input formats such as  
> SequenceFileInputFormat so changing it there will affect those other  
> classes as well.  I don't know if that is what you want or not.  I would  
> probably extend TextInputFormat (assuming the files are in text logs  
> such as apache logs and not xml files) and override the  
> areValidInputDirectories to checks for files in the directories and the  
> getSplits to return splits with only the files that you want to process.

Thanks for your suggestions ... Here's how I did it:

* When configuring the job, individual files are added with  
JobConf.addInputPath
* The inputformat is set to be TextFileInputFormat, which is subclassed  
 from TextInputFormat
* TextFileInputFormat overloads the following methods:

   - areValidInputDirectories: This is set to return true, even if one of  
the input paths is a file
   - listPaths: in InputFormatBase, this method simply returns a list of  
all the files in the input directories. I overloaded this to test if the  
input path is a directory or a file, and simply add the input path  
directly if it's a file.

This enables input to both be files and directories, and it seems to work  
like a charm.


[...]
-- 
Vetle Roeim
Team Manager, Information Systems
Opera Software ASA <URL: http://www.opera.com/ >

From MAILER-DAEMON Fri Oct 20 16:45:51 2006
Return-Path: 
 <hadoop-dev-return-4431-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 99771 invoked from network); 20 Oct 2006 16:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 16:45:51 -0000
Received: (qmail 28403 invoked by uid 500); 20 Oct 2006 16:45:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 28379 invoked by uid 500); 20 Oct 2006 16:45:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 28370 invoked by uid 99); 20 Oct 2006 16:45:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 09:45:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.155] (HELO rwcrmhc15.comcast.net)
 (216.148.227.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 09:45:48 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20061020164528m15009g56ie>; Fri, 20 Oct 2006 16:45:28 +0000
Message-ID: <4538FD27.4070106@apache.org>
Date: Fri, 20 Oct 2006 09:45:27 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: replication
References: <98e4f1cd0610190841l29e85e6dq8d5c04cebec8b59b@mail.gmail.com>
 <98e4f1cd0610200141k715aec66m6eb49004f2648c79@mail.gmail.com>
In-Reply-To: <98e4f1cd0610200141k715aec66m6eb49004f2648c79@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Torsten Curdt wrote:
> http://mail-archives.apache.org/mod_mbox/lucene-hadoop-dev/200609.mbox/%3cACC721A9-C328-40C5-B761-C80FFB1DB032@yahoo-inc.com%3e 
> 
> 
> Someone started yet?

Good question.  Milind, are you currently working on this?  Should we 
start a Jira issue for at least the first part of the proposal (write 
namenode data to multiple volumes)?

Doug

From MAILER-DAEMON Fri Oct 20 17:09:43 2006
Return-Path: 
 <hadoop-dev-return-4432-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6659 invoked from network); 20 Oct 2006 17:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 17:09:43 -0000
Received: (qmail 69321 invoked by uid 500); 20 Oct 2006 17:09:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69299 invoked by uid 500); 20 Oct 2006 17:09:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69290 invoked by uid 99); 20 Oct 2006 17:09:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 10:09:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [209.237.227.198] (HELO brutus.apache.org) (209.237.227.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 10:09:41 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0967A71431E
	for <hadoop-dev@lucene.apache.org>; Fri, 20 Oct 2006 10:08:35 -0700 (PDT)
Message-ID: <24570786.1161364115035.JavaMail.jira@brutus>
Date: Fri, 20 Oct 2006 10:08:35 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-618) JobProfile and JobSubmissionProtocol
 should be public
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JobProfile and JobSubmissionProtocol should be public
-----------------------------------------------------

                 Key: HADOOP-618
                 URL: http://issues.apache.org/jira/browse/HADOOP-618
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Runping Qi



Are there any reasons why they are not public?

Making them public adds a lot of flexibility for the client to interact with the Hadoop.




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 00:56:56 2006
Return-Path: 
 <hadoop-dev-return-4477-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32119 invoked from network); 26 Oct 2006 00:56:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 00:56:56 -0000
Received: (qmail 26420 invoked by uid 500); 24 Oct 2006 04:30:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26378 invoked by uid 500); 24 Oct 2006 04:30:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26326 invoked by uid 99); 24 Oct 2006 04:30:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Oct 2006 21:30:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Oct 2006 21:30:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 873E07141E3
	for <hadoop-dev@lucene.apache.org>; Mon, 23 Oct 2006 21:29:16 -0700 (PDT)
Message-ID: <16871.1161664156551.JavaMail.root@brutus>
Date: Mon, 23 Oct 2006 21:29:16 -0700 (PDT)
From: "arkady borkovsky (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-628) hadoop hdfs -cat   replaces some
 characters with question marks.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hadoop hdfs -cat   replaces some characters with question marks.
----------------------------------------------------------------

                 Key: HADOOP-628
                 URL: http://issues.apache.org/jira/browse/HADOOP-628
             Project: Hadoop
          Issue Type: Bug
            Reporter: arkady borkovsky


Should not the effect of

hadoop hdfs -get path local-file
and
hadoop hdfs -cat path >local-file

be the same?

Try to do this with a (hdfs) file that contains non-ascii characters and do a diff.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:36:17 2006
Return-Path: 
 <hadoop-dev-return-4478-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 92030 invoked from network); 26 Oct 2006 06:36:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:36:17 -0000
Received: (qmail 14459 invoked by uid 500); 24 Oct 2006 05:36:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 14237 invoked by uid 500); 24 Oct 2006 05:36:26 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 14227 invoked by uid 99); 24 Oct 2006 05:36:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Oct 2006 22:36:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Oct 2006 22:36:14 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEA2E7142BF
	for <hadoop-dev@lucene.apache.org>; Mon, 23 Oct 2006 22:35:16 -0700 (PDT)
Message-ID: <8479558.1161668116777.JavaMail.root@brutus>
Date: Mon, 23 Oct 2006 22:35:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-629) none of the rpc servers check the
 protcol name for validity
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

none of the rpc servers check the protcol name for validity 
------------------------------------------------------------

                 Key: HADOOP-629
                 URL: http://issues.apache.org/jira/browse/HADOOP-629
             Project: Hadoop
          Issue Type: Bug
          Components: ipc
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Wendy Chien
             Fix For: 0.8.0


All of the Hadoop RPC servers either ignore the protocol name or do:

if (protocol.equals(Prot1.class.getName()) {
  return Prot1.versionId;
} else {
  return Prot2.versionId;
}

A much better structure would be:

if (Prot1.class.getName().equals(protocol)) {
  return Prot1.versionId;
} else if (Prot2.class.getName().equals(protocol)) {
  return Prot2.versionId;
} else {
  throw new VersionMismatchException("Expected protocol Prot1 or Prot2 and received: " + protocol);
}

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 00:40:07 2006
Return-Path: 
 <hadoop-dev-return-4479-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20997 invoked from network); 26 Oct 2006 00:40:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 00:40:07 -0000
Received: (qmail 44615 invoked by uid 500); 24 Oct 2006 16:33:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44579 invoked by uid 500); 24 Oct 2006 16:33:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44568 invoked by uid 99); 24 Oct 2006 16:33:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 09:33:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 09:33:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 99A2E714201
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 09:32:16 -0700 (PDT)
Message-ID: <28675413.1161707536626.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 09:32:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-630) The web/ui for the JobTracker doesn't
 come up until after the namenode is out of safe mode
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The web/ui for the JobTracker doesn't come up until after the namenode is out of safe mode
------------------------------------------------------------------------------------------

                 Key: HADOOP-630
                 URL: http://issues.apache.org/jira/browse/HADOOP-630
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.8.0


The http status server for the job tracker isn't initialized until after the working directory is cleared, meaning that it can't happen until after the name node leaves safe mode. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:48:41 2006
Return-Path: 
 <hadoop-dev-return-4480-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30526 invoked from network); 26 Oct 2006 04:48:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:48:41 -0000
Received: (qmail 52237 invoked by uid 500); 24 Oct 2006 16:36:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52215 invoked by uid 500); 24 Oct 2006 16:36:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52202 invoked by uid 99); 24 Oct 2006 16:36:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 09:36:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 09:36:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 83CC4714201
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 09:35:16 -0700 (PDT)
Message-ID: <13862203.1161707716536.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 09:35:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-631) Task trackers don't register with the
 job tracker until after they clean out their working directory
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Task trackers don't register with the job tracker until after they clean out their working directory
----------------------------------------------------------------------------------------------------

                 Key: HADOOP-631
                 URL: http://issues.apache.org/jira/browse/HADOOP-631
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley


When TaskTrackers are started, they immediately start deleting their working directory, which can take 30+ minutes. Unfortunately, that means they don't register themselves with the JobTracker for a long time, so it looks like the cluster is "missing".

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:39:15 2006
Return-Path: 
 <hadoop-dev-return-4481-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6314 invoked from network); 26 Oct 2006 04:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:39:15 -0000
Received: (qmail 61009 invoked by uid 500); 24 Oct 2006 16:39:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60985 invoked by uid 500); 24 Oct 2006 16:39:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60976 invoked by uid 99); 24 Oct 2006 16:39:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 09:39:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 09:39:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A759F7142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 09:38:16 -0700 (PDT)
Message-ID: <10683289.1161707896682.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 09:38:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-632) dfs -report lists "missing" datanodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

dfs -report lists "missing" datanodes
-------------------------------------

                 Key: HADOOP-632
                 URL: http://issues.apache.org/jira/browse/HADOOP-632
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: dhruba borthakur
             Fix For: 0.8.0


"dfs -report" lists all nodes that have ever registered. It should only list the "alive" nodes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 01:08:59 2006
Return-Path: 
 <hadoop-dev-return-4482-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47113 invoked from network); 26 Oct 2006 01:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 01:08:59 -0000
Received: (qmail 13875 invoked by uid 500); 24 Oct 2006 17:02:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13856 invoked by uid 500); 24 Oct 2006 17:02:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13847 invoked by uid 99); 24 Oct 2006 17:02:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 10:02:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 10:02:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D0A60714201
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 10:01:18 -0700 (PDT)
Message-ID: <2068365.1161709278852.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 10:01:18 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-632) dfs -report lists "missing" datanodes
In-Reply-To: <10683289.1161707896682.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-632?page=all ]

Owen O'Malley reassigned HADOOP-632:
------------------------------------

    Assignee: Raghu Angadi  (was: dhruba borthakur)

Since Raghu is already working on dfs -report, it is better for him to take it.

> dfs -report lists "missing" datanodes
> -------------------------------------
>
>                 Key: HADOOP-632
>                 URL: http://issues.apache.org/jira/browse/HADOOP-632
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Raghu Angadi
>             Fix For: 0.8.0
>
>
> "dfs -report" lists all nodes that have ever registered. It should only list the "alive" nodes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:07:19 2006
Return-Path: 
 <hadoop-dev-return-4483-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97281 invoked from network); 26 Oct 2006 06:07:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:07:19 -0000
Received: (qmail 66110 invoked by uid 500); 24 Oct 2006 17:55:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66085 invoked by uid 500); 24 Oct 2006 17:55:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66069 invoked by uid 99); 24 Oct 2006 17:55:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 10:55:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 10:55:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC7A47142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 10:54:16 -0700 (PDT)
Message-ID: <33057763.1161712456703.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 10:54:16 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-633) if the jobinit thread gets killed the
 jobtracker keeps running without doing anything.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

if the jobinit thread gets killed the jobtracker keeps running without doing anything.
--------------------------------------------------------------------------------------

                 Key: HADOOP-633
                 URL: http://issues.apache.org/jira/browse/HADOOP-633
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Mahadev konar
         Assigned To: Owen O'Malley
            Priority: Minor


The jobtracker failed with OutOfMemory while uinjarring the jar file and this kileld the jobinit thread. The Jobtracker still kept running while doing nothing though accepting job submissions, but the jobs just sat in the queue.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:04:22 2006
Return-Path: 
 <hadoop-dev-return-4484-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 86209 invoked from network); 26 Oct 2006 06:04:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:04:22 -0000
Received: (qmail 82911 invoked by uid 500); 24 Oct 2006 18:04:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82890 invoked by uid 500); 24 Oct 2006 18:04:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82881 invoked by uid 99); 24 Oct 2006 18:04:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:04:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:04:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 701AF7142D2
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 11:03:20 -0700 (PDT)
Message-ID: <23032472.1161713000456.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 11:03:20 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-627) MiniMRCluster missing
 synchronization
In-Reply-To: <20847558.1161651796609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-627?page=comments#action_12444439 ] 
            
Nigel Daley commented on HADOOP-627:
------------------------------------

Note that by declaring isInitialized, isDead, and tt variables volatile, I have had many more successful build/test cycles than before this change.

> MiniMRCluster missing synchronization
> -------------------------------------
>
>                 Key: HADOOP-627
>                 URL: http://issues.apache.org/jira/browse/HADOOP-627
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>
> org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner contains (at least) 2 instance variables that are read by another thread: isInitialized and isDead.  These should be declared volatile or proper synchronization should be used for their access.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:15:28 2006
Return-Path: 
 <hadoop-dev-return-4485-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13407 invoked from network); 26 Oct 2006 06:15:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:15:28 -0000
Received: (qmail 11109 invoked by uid 500); 24 Oct 2006 18:15:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11090 invoked by uid 500); 24 Oct 2006 18:15:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11078 invoked by uid 99); 24 Oct 2006 18:15:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:15:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:15:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 86F3B71408D
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 11:14:18 -0700 (PDT)
Message-ID: <2802612.1161713658549.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 11:14:18 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-627) MiniMRCluster missing synchronization
In-Reply-To: <20847558.1161651796609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-627?page=all ]

Nigel Daley updated HADOOP-627:
-------------------------------

    Attachment: minimrcluster.patch

Owen, please review patch.

> MiniMRCluster missing synchronization
> -------------------------------------
>
>                 Key: HADOOP-627
>                 URL: http://issues.apache.org/jira/browse/HADOOP-627
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>         Attachments: minimrcluster.patch
>
>
> org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner contains (at least) 2 instance variables that are read by another thread: isInitialized and isDead.  These should be declared volatile or proper synchronization should be used for their access.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:25:17 2006
Return-Path: 
 <hadoop-dev-return-4486-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48308 invoked from network); 26 Oct 2006 06:25:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:25:17 -0000
Received: (qmail 31123 invoked by uid 500); 24 Oct 2006 18:25:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31098 invoked by uid 500); 24 Oct 2006 18:25:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31089 invoked by uid 99); 24 Oct 2006 18:25:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:25:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:25:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C354D714201
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 11:24:16 -0700 (PDT)
Message-ID: <25500199.1161714256797.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 11:24:16 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-634) Test files missing copyright headers
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Test files missing copyright headers
------------------------------------

                 Key: HADOOP-634
                 URL: http://issues.apache.org/jira/browse/HADOOP-634
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.7.2
            Reporter: Nigel Daley
         Assigned To: Nigel Daley
            Priority: Trivial


The tests are missing apache headers:

src/test/org/apache/hadoop/io/compress/TestCodec.java
src/test/org/apache/hadoop/io/TestBytesWritable.java
src/test/org/apache/hadoop/fs/TestLocalFileSystem.java
src/test/org/apache/hadoop/fs/TestGlobPaths.java
src/test/org/apache/hadoop/fs/AccumulatingReducer.java
src/test/org/apache/hadoop/fs/IOMapperBase.java
src/test/org/apache/hadoop/mapred/EmptyInputFormat.java
src/test/org/apache/hadoop/dfs/TestSeekBug.java
src/test/org/apache/hadoop/dfs/TestDFSMkdirs.java
src/test/org/apache/hadoop/dfs/TestLocalDFS.java
src/test/org/apache/hadoop/dfs/MiniDFSCluster.java
src/test/org/apache/hadoop/dfs/TestPread.java
src/test/org/apache/hadoop/dfs/TestDFSShellGenericOptions.java
src/test/org/apache/hadoop/record/test/RecString.java
src/test/org/apache/hadoop/record/test/RecBuffer.java
src/test/org/apache/hadoop/record/test/RecInt.java
src/test/org/apache/hadoop/record/test/RecRecord0.java
src/test/org/apache/hadoop/record/test/RecRecord1.java


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:27:20 2006
Return-Path: 
 <hadoop-dev-return-4487-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55164 invoked from network); 26 Oct 2006 06:27:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:27:20 -0000
Received: (qmail 37210 invoked by uid 500); 24 Oct 2006 18:27:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37172 invoked by uid 500); 24 Oct 2006 18:27:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37140 invoked by uid 99); 24 Oct 2006 18:27:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:27:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:27:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 82DAC7142C3
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 11:26:19 -0700 (PDT)
Message-ID: <26391639.1161714379533.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 11:26:19 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-634) Test files missing copyright headers
In-Reply-To: <25500199.1161714256797.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-634?page=all ]

Nigel Daley updated HADOOP-634:
-------------------------------

    Attachment: test-header.patch

> Test files missing copyright headers
> ------------------------------------
>
>                 Key: HADOOP-634
>                 URL: http://issues.apache.org/jira/browse/HADOOP-634
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>         Attachments: test-header.patch
>
>
> The tests are missing apache headers:
> src/test/org/apache/hadoop/io/compress/TestCodec.java
> src/test/org/apache/hadoop/io/TestBytesWritable.java
> src/test/org/apache/hadoop/fs/TestLocalFileSystem.java
> src/test/org/apache/hadoop/fs/TestGlobPaths.java
> src/test/org/apache/hadoop/fs/AccumulatingReducer.java
> src/test/org/apache/hadoop/fs/IOMapperBase.java
> src/test/org/apache/hadoop/mapred/EmptyInputFormat.java
> src/test/org/apache/hadoop/dfs/TestSeekBug.java
> src/test/org/apache/hadoop/dfs/TestDFSMkdirs.java
> src/test/org/apache/hadoop/dfs/TestLocalDFS.java
> src/test/org/apache/hadoop/dfs/MiniDFSCluster.java
> src/test/org/apache/hadoop/dfs/TestPread.java
> src/test/org/apache/hadoop/dfs/TestDFSShellGenericOptions.java
> src/test/org/apache/hadoop/record/test/RecString.java
> src/test/org/apache/hadoop/record/test/RecBuffer.java
> src/test/org/apache/hadoop/record/test/RecInt.java
> src/test/org/apache/hadoop/record/test/RecRecord0.java
> src/test/org/apache/hadoop/record/test/RecRecord1.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:29:23 2006
Return-Path: 
 <hadoop-dev-return-4488-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64503 invoked from network); 26 Oct 2006 06:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:29:23 -0000
Received: (qmail 43124 invoked by uid 500); 24 Oct 2006 18:29:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 43095 invoked by uid 500); 24 Oct 2006 18:29:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43015 invoked by uid 99); 24 Oct 2006 18:29:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:29:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:29:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B4DA27142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 11:28:17 -0700 (PDT)
Message-ID: <26276441.1161714497738.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 11:28:17 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-634) Test files missing copyright headers
In-Reply-To: <25500199.1161714256797.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-634?page=all ]

Nigel Daley updated HADOOP-634:
-------------------------------

    Status: Patch Available  (was: Open)

Header additions attached.

> Test files missing copyright headers
> ------------------------------------
>
>                 Key: HADOOP-634
>                 URL: http://issues.apache.org/jira/browse/HADOOP-634
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>         Attachments: test-header.patch
>
>
> The tests are missing apache headers:
> src/test/org/apache/hadoop/io/compress/TestCodec.java
> src/test/org/apache/hadoop/io/TestBytesWritable.java
> src/test/org/apache/hadoop/fs/TestLocalFileSystem.java
> src/test/org/apache/hadoop/fs/TestGlobPaths.java
> src/test/org/apache/hadoop/fs/AccumulatingReducer.java
> src/test/org/apache/hadoop/fs/IOMapperBase.java
> src/test/org/apache/hadoop/mapred/EmptyInputFormat.java
> src/test/org/apache/hadoop/dfs/TestSeekBug.java
> src/test/org/apache/hadoop/dfs/TestDFSMkdirs.java
> src/test/org/apache/hadoop/dfs/TestLocalDFS.java
> src/test/org/apache/hadoop/dfs/MiniDFSCluster.java
> src/test/org/apache/hadoop/dfs/TestPread.java
> src/test/org/apache/hadoop/dfs/TestDFSShellGenericOptions.java
> src/test/org/apache/hadoop/record/test/RecString.java
> src/test/org/apache/hadoop/record/test/RecBuffer.java
> src/test/org/apache/hadoop/record/test/RecInt.java
> src/test/org/apache/hadoop/record/test/RecRecord0.java
> src/test/org/apache/hadoop/record/test/RecRecord1.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:39:19 2006
Return-Path: 
 <hadoop-dev-return-4489-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97434 invoked from network); 26 Oct 2006 06:39:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:39:19 -0000
Received: (qmail 64106 invoked by uid 500); 24 Oct 2006 18:39:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64076 invoked by uid 500); 24 Oct 2006 18:39:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64066 invoked by uid 99); 24 Oct 2006 18:39:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:39:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:39:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6E5F87142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 11:38:18 -0700 (PDT)
Message-ID: <24795302.1161715098449.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 11:38:18 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-591) Reducer sort should even out the pass
 factors in merging different pass
In-Reply-To: <31534512.1160500579703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-591?page=all ]

Devaraj Das reassigned HADOOP-591:
----------------------------------

    Assignee: Devaraj Das

> Reducer sort should even out the pass factors in merging different pass
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-591
>                 URL: http://issues.apache.org/jira/browse/HADOOP-591
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>         Assigned To: Devaraj Das
>
> When multiple pass merging is needed during sort, the current sort implementation in SequenceFile class uses a simple "greedy" way to select pass factors, resulting uneven pass factor in different passes. For example, if the factor pass is 100 (the default), and there are 101 segments to be merged. The current implementation will first merge the first 100 segments into one and then merge the big output file with the last segment with pass factor 2. It will be better off to use pass factors 11 in the first pass and pass factor 10 in the second pass.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 01:09:47 2006
Return-Path: 
 <hadoop-dev-return-4490-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48175 invoked from network); 26 Oct 2006 01:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 01:09:47 -0000
Received: (qmail 67019 invoked by uid 500); 24 Oct 2006 20:32:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66952 invoked by uid 500); 24 Oct 2006 20:32:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66924 invoked by uid 99); 24 Oct 2006 20:32:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:32:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:32:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DA5807142D2
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 13:31:20 -0700 (PDT)
Message-ID: <27512931.1161721880891.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 13:31:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-627) MiniMRCluster missing
 synchronization
In-Reply-To: <20847558.1161651796609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-627?page=comments#action_12444494 ] 
            
Owen O'Malley commented on HADOOP-627:
--------------------------------------

+1

> MiniMRCluster missing synchronization
> -------------------------------------
>
>                 Key: HADOOP-627
>                 URL: http://issues.apache.org/jira/browse/HADOOP-627
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>         Attachments: minimrcluster.patch
>
>
> org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner contains (at least) 2 instance variables that are read by another thread: isInitialized and isDead.  These should be declared volatile or proper synchronization should be used for their access.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 05:01:48 2006
Return-Path: 
 <hadoop-dev-return-4491-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79227 invoked from network); 26 Oct 2006 05:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:01:48 -0000
Received: (qmail 67316 invoked by uid 500); 24 Oct 2006 20:32:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67286 invoked by uid 500); 24 Oct 2006 20:32:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67268 invoked by uid 99); 24 Oct 2006 20:32:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:32:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:32:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2F0017142DB
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 13:31:22 -0700 (PDT)
Message-ID: <7466816.1161721882190.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 13:31:22 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-627) MiniMRCluster missing synchronization
In-Reply-To: <20847558.1161651796609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-627?page=all ]

Owen O'Malley updated HADOOP-627:
---------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.8.0
         Assignee: Nigel Daley  (was: Owen O'Malley)

> MiniMRCluster missing synchronization
> -------------------------------------
>
>                 Key: HADOOP-627
>                 URL: http://issues.apache.org/jira/browse/HADOOP-627
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>             Fix For: 0.8.0
>
>         Attachments: minimrcluster.patch
>
>
> org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner contains (at least) 2 instance variables that are read by another thread: isInitialized and isDead.  These should be declared volatile or proper synchronization should be used for their access.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 01:06:12 2006
Return-Path: 
 <hadoop-dev-return-4492-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43552 invoked from network); 26 Oct 2006 01:06:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 01:06:12 -0000
Received: (qmail 86750 invoked by uid 500); 24 Oct 2006 20:39:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86728 invoked by uid 500); 24 Oct 2006 20:39:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86719 invoked by uid 99); 24 Oct 2006 20:39:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:39:43 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.150] (HELO rsmtp2.corp.yahoo.com)
 (207.126.228.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:39:28 -0700
Received: from [207.126.231.126] (sameerp2.corp.yahoo.com [207.126.231.126])
	by rsmtp2.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k9OKd4MD047679
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 13:39:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:mime-version:to:subject:
	references:in-reply-to:content-type:content-transfer-encoding;
	b=MrFuX1y3UO5YrGMv+ugb9cJVaoUSG0kp9gXItpem2zJS285/p52lKgYEqjabzUC1
Message-ID: <453E79E7.9030407@yahoo-inc.com>
Date: Tue, 24 Oct 2006 13:39:03 -0700
From: Sameer Paranjpye <sameerp@yahoo-inc.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: [jira] Resolved: (HADOOP-599) DFS Always Reports 0 Bytes Used
References: <13768486.1161634398420.JavaMail.root@brutus>
In-Reply-To: <13768486.1161634398420.JavaMail.root@brutus>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Did this patch get committed? As a matter of policy, we don't close any 
bugs until the patches submitted against them are committed.

Also, if the issue is closed, there is no way for Doug to tell that he 
needs to commit the patch.




Raghu Angadi (JIRA) wrote:
>      [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]
> 
> Raghu Angadi resolved HADOOP-599.
> ---------------------------------
> 
>     Resolution: Fixed
> 
>> DFS Always Reports 0 Bytes Used
>> -------------------------------
>>
>>                 Key: HADOOP-599
>>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>>             Project: Hadoop
>>          Issue Type: Bug
>>          Components: dfs
>>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>>         Environment: Ubuntu
>>            Reporter: Albert Chern
>>         Assigned To: Raghu Angadi
>>            Priority: Minor
>>         Attachments: patch.1, patch.2
>>
>>
>> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
>> Long remaining = new Long(volumes[idx].getCapacity();
>> to:
>> Long remaining = new Long(volumes[idx].getAvailable());
> 


From MAILER-DAEMON Thu Oct 26 05:27:54 2006
Return-Path: 
 <hadoop-dev-return-4493-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76304 invoked from network); 26 Oct 2006 05:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:27:54 -0000
Received: (qmail 18902 invoked by uid 500); 24 Oct 2006 20:47:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18883 invoked by uid 500); 24 Oct 2006 20:47:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18830 invoked by uid 99); 24 Oct 2006 20:47:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:47:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:47:00 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C2B757142F5
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 13:46:01 -0700 (PDT)
Message-ID: <25864792.1161722761795.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 13:46:01 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Reopened: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Sameer Paranjpye reopened HADOOP-599:
-------------------------------------

             

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: patch.1, patch.2
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 07:24:04 2006
Return-Path: 
 <hadoop-dev-return-4497-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34461 invoked from network); 26 Oct 2006 07:24:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:24:04 -0000
Received: (qmail 15647 invoked by uid 500); 24 Oct 2006 21:37:07 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15586 invoked by uid 500); 24 Oct 2006 21:37:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15538 invoked by uid 99); 24 Oct 2006 21:37:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:37:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:04:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5420B71408D
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:03:20 -0700 (PDT)
Message-ID: <6271084.1161723800341.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:03:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-24) make Configuration an interface
In-Reply-To: <52371844.1139256627178.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-24?page=comments#action_12444508 ] 
            
Doug Cutting commented on HADOOP-24:
------------------------------------

When I apply this to trunk things don't compile.  I think you forgot to include ConfigurationImpl.java.

I also wonder if, since we're editing all the places where a configuration is constructed, we might change things to use a factory.  So, instead of 'new ConfigurationImpl()' we'd have something like 'ConfigurationFactory.get()'.  That way, we could in the future change the default implementation without changing all of these places again.  E.g., if you're nesting Hadoop in JMX then you might specify a JMX configuration factory as the default.  Does that make sense?


> make Configuration an interface
> -------------------------------
>
>                 Key: HADOOP-24
>                 URL: http://issues.apache.org/jira/browse/HADOOP-24
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.7.2
>            Reporter: Doug Cutting
>         Attachments: configuration.java, configuration.patch, HADOOP-24-2.patch, HADOOP-24-3.patch, HADOOP-24-4.patch, HADOOP-24.patch, HADOOP-24.patch
>
>
> The Configuration class should become an interface, e.g.:
> public interface Configuration {
>   String get(String nam);
>   String set(String name, String value);
>   int getInt(String name);
>   void setInt(String name, int value);
>   float getFloat(String name);
>   void setFloat(String name, float value);
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> An abstract class named ConfigurationBase should be implemented as follows:
> public abstract class ConfigurationBase implements Configuration {
>   abstract public String get(String nam);
>   abstract public String set(String name, String value);
>   public  int getInt(String name) { ... implementation in terms of get(String) ... }
>   public void setInt(String name, int value) {... implementation in terms of set(String, String) ...}
>   public float getFloat(String name)  { ... implementation in terms of get(String) ... }
>   public void setFloat(String name, float value)  {... implementation in terms of set(String, String) ...}
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> A concrete, default implementation will be provided as follows:
> public class ConfigurationImpl implements Writable extends ConfigurationBase {
>   private Properties properties;
>   // implement abstract methods from ConfigurationBase
>   public String get(String name) { ... implemented in terms of props ...}
>   public String set(String name, String value) { .. implemented in terms of props ... }
>   // Writable methods
>   public write(DataOutputStream out);
>   public readFields(DataInputStream in);
>   // permit chaining of configurations
>   public Configuration getDefaults();
>   public void setDefaults(Configuration defaults);
> }
> Only code which creates configurations should need to be updated, so this shouldn't be a huge change.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 07:13:34 2006
Return-Path: 
 <hadoop-dev-return-4495-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17291 invoked from network); 26 Oct 2006 07:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:13:34 -0000
Received: (qmail 13696 invoked by uid 500); 24 Oct 2006 21:36:58 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13466 invoked by uid 500); 24 Oct 2006 21:36:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12780 invoked by uid 99); 24 Oct 2006 21:36:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:36:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:06:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB7E271408D
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:05:18 -0700 (PDT)
Message-ID: <27451999.1161723918831.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:05:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-24) make Configuration an interface
In-Reply-To: <52371844.1139256627178.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-24?page=all ]

Doug Cutting updated HADOOP-24:
-------------------------------

    Status: Open  (was: Patch Available)

> make Configuration an interface
> -------------------------------
>
>                 Key: HADOOP-24
>                 URL: http://issues.apache.org/jira/browse/HADOOP-24
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.7.2
>            Reporter: Doug Cutting
>         Attachments: configuration.java, configuration.patch, HADOOP-24-2.patch, HADOOP-24-3.patch, HADOOP-24-4.patch, HADOOP-24.patch, HADOOP-24.patch
>
>
> The Configuration class should become an interface, e.g.:
> public interface Configuration {
>   String get(String nam);
>   String set(String name, String value);
>   int getInt(String name);
>   void setInt(String name, int value);
>   float getFloat(String name);
>   void setFloat(String name, float value);
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> An abstract class named ConfigurationBase should be implemented as follows:
> public abstract class ConfigurationBase implements Configuration {
>   abstract public String get(String nam);
>   abstract public String set(String name, String value);
>   public  int getInt(String name) { ... implementation in terms of get(String) ... }
>   public void setInt(String name, int value) {... implementation in terms of set(String, String) ...}
>   public float getFloat(String name)  { ... implementation in terms of get(String) ... }
>   public void setFloat(String name, float value)  {... implementation in terms of set(String, String) ...}
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> A concrete, default implementation will be provided as follows:
> public class ConfigurationImpl implements Writable extends ConfigurationBase {
>   private Properties properties;
>   // implement abstract methods from ConfigurationBase
>   public String get(String name) { ... implemented in terms of props ...}
>   public String set(String name, String value) { .. implemented in terms of props ... }
>   // Writable methods
>   public write(DataOutputStream out);
>   public readFields(DataInputStream in);
>   // permit chaining of configurations
>   public Configuration getDefaults();
>   public void setDefaults(Configuration defaults);
> }
> Only code which creates configurations should need to be updated, so this shouldn't be a huge change.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 07:13:37 2006
Return-Path: 
 <hadoop-dev-return-4496-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17469 invoked from network); 26 Oct 2006 07:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:13:37 -0000
Received: (qmail 14070 invoked by uid 500); 24 Oct 2006 21:37:00 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 13991 invoked by uid 500); 24 Oct 2006 21:36:59 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 13488 invoked by uid 99); 24 Oct 2006 21:36:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:36:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:19:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A73437142C2
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:18:17 -0700 (PDT)
Message-ID: <11982477.1161724697682.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:18:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-610) Task Tracker offerService does not
 adequately protect from exceptions
In-Reply-To: <27498217.1161144934987.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-610?page=all ]

Doug Cutting updated HADOOP-610:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> Task Tracker offerService does not adequately protect from exceptions
> ---------------------------------------------------------------------
>
>                 Key: HADOOP-610
>                 URL: http://issues.apache.org/jira/browse/HADOOP-610
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.1
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>         Attachments: lost-tt.patch
>
>
> The TaskTracker's offerService loop doesn't handle exceptions, such as time outs well and will reset the task tracker. I believe this is the cause of most of the lost task trackers. The scenario looks like:
>   1. an rpc timeout in offerService
>   2. the task tracker cleans up (which takes 30 minutes with the task tracker locked up)
>   3. the task tracker is declared lost for not providing its heartbeat

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 07:09:48 2006
Return-Path: 
 <hadoop-dev-return-4500-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10730 invoked from network); 26 Oct 2006 07:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:09:48 -0000
Received: (qmail 72882 invoked by uid 500); 24 Oct 2006 21:53:42 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72178 invoked by uid 500); 24 Oct 2006 21:53:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71000 invoked by uid 99); 24 Oct 2006 21:53:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:53:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:26:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A97F87142C2
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:25:17 -0700 (PDT)
Message-ID: <10377828.1161725117691.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:25:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-625) add a little servlet to display the
 server's thread call stacks
In-Reply-To: <31590790.1161642556948.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-625?page=all ]

Doug Cutting updated HADOOP-625:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> add a little servlet to display the server's thread call stacks
> ---------------------------------------------------------------
>
>                 Key: HADOOP-625
>                 URL: http://issues.apache.org/jira/browse/HADOOP-625
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: stack-servlet.patch
>
>
> Add a trivial servlet to each jetty server that provides the stacks for each thread from
> http://<host>:<port>/stacks

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 05:42:58 2006
Return-Path: 
 <hadoop-dev-return-4494-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35572 invoked from network); 26 Oct 2006 05:42:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:42:58 -0000
Received: (qmail 10315 invoked by uid 500); 24 Oct 2006 21:36:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 10288 invoked by uid 500); 24 Oct 2006 21:36:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 10276 invoked by uid 99); 24 Oct 2006 21:36:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:36:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:36:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 60A4A7142C2
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:35:18 -0700 (PDT)
Message-ID: <28690973.1161725718393.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:35:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-554) hadoop dfs command line doesn't exit
 with status code on error
In-Reply-To: <32015994.1158861924004.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-554?page=all ]

Doug Cutting updated HADOOP-554:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba.

> hadoop dfs command line doesn't exit with status code on error
> --------------------------------------------------------------
>
>                 Key: HADOOP-554
>                 URL: http://issues.apache.org/jira/browse/HADOOP-554
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Marco Nicosia
>         Assigned To: dhruba borthakur
>             Fix For: 0.8.0
>
>         Attachments: errorcodes.patch
>
>
> In DFSClient, the code looks like:
> ---- >8 ----
>         int exitCode = -1;
>         ...
>         try {
>             if ("-put".equals(cmd) || "-copyFromLocal".equals(cmd)) {
>                 copyFromLocal(new Path(argv[i++]), argv[i++]);
>             ...
>             exitCode = 0;;
>         } catch (IOException e ) {
>           System.err.println( cmd.substring(1) + ": " + e.getLocalizedMessage() );  
>         } finally {
>             fs.close();
>         }
>         return exitCode;
> ---- 8< ----
> Point 1: Few, if any of the functions called throw an exception. Instead they System.err.println and return.
> Point 2: exitCode, regardless if there is an exception, is always 0.
> At minimum, it would be best if SOME status code were returned, so that any scripts calling hadoop dfs would know to parse the output.
> At best, there'd be a well-documented table of exit codes so that parsing stderr wouldn't be required.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 05:52:58 2006
Return-Path: 
 <hadoop-dev-return-4498-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61755 invoked from network); 26 Oct 2006 05:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:52:58 -0000
Received: (qmail 54461 invoked by uid 500); 24 Oct 2006 21:46:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54428 invoked by uid 500); 24 Oct 2006 21:46:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54419 invoked by uid 99); 24 Oct 2006 21:46:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:46:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:46:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A2E37714201
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:45:17 -0700 (PDT)
Message-ID: <14536773.1161726317664.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:45:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-626) NNBench example comments are incorrect
 and code contains cut-and-paste error
In-Reply-To: <6924313.1161644056618.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-626?page=all ]

Doug Cutting updated HADOOP-626:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Nigel.

> NNBench example comments are incorrect and code contains cut-and-paste error
> ----------------------------------------------------------------------------
>
>                 Key: HADOOP-626
>                 URL: http://issues.apache.org/jira/browse/HADOOP-626
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>             Fix For: 0.8.0
>
>         Attachments: nnbench.patch
>
>
> The class and main method comments don't reflect the actual behavior.  In addition, the Mapper implementation contains an unnecessary randomizeBytes call when reading back from the created file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:09:27 2006
Return-Path: 
 <hadoop-dev-return-4499-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1241 invoked from network); 26 Oct 2006 06:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:09:27 -0000
Received: (qmail 65329 invoked by uid 500); 24 Oct 2006 21:51:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65304 invoked by uid 500); 24 Oct 2006 21:51:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65284 invoked by uid 99); 24 Oct 2006 21:51:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:51:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:51:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3EB097142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:50:18 -0700 (PDT)
Message-ID: <25874727.1161726618254.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:50:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-634) Test files missing copyright headers
In-Reply-To: <25500199.1161714256797.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-634?page=all ]

Doug Cutting updated HADOOP-634:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Nigel!

> Test files missing copyright headers
> ------------------------------------
>
>                 Key: HADOOP-634
>                 URL: http://issues.apache.org/jira/browse/HADOOP-634
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>             Fix For: 0.8.0
>
>         Attachments: test-header.patch
>
>
> The tests are missing apache headers:
> src/test/org/apache/hadoop/io/compress/TestCodec.java
> src/test/org/apache/hadoop/io/TestBytesWritable.java
> src/test/org/apache/hadoop/fs/TestLocalFileSystem.java
> src/test/org/apache/hadoop/fs/TestGlobPaths.java
> src/test/org/apache/hadoop/fs/AccumulatingReducer.java
> src/test/org/apache/hadoop/fs/IOMapperBase.java
> src/test/org/apache/hadoop/mapred/EmptyInputFormat.java
> src/test/org/apache/hadoop/dfs/TestSeekBug.java
> src/test/org/apache/hadoop/dfs/TestDFSMkdirs.java
> src/test/org/apache/hadoop/dfs/TestLocalDFS.java
> src/test/org/apache/hadoop/dfs/MiniDFSCluster.java
> src/test/org/apache/hadoop/dfs/TestPread.java
> src/test/org/apache/hadoop/dfs/TestDFSShellGenericOptions.java
> src/test/org/apache/hadoop/record/test/RecString.java
> src/test/org/apache/hadoop/record/test/RecBuffer.java
> src/test/org/apache/hadoop/record/test/RecInt.java
> src/test/org/apache/hadoop/record/test/RecRecord0.java
> src/test/org/apache/hadoop/record/test/RecRecord1.java

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:02:00 2006
Return-Path: 
 <hadoop-dev-return-4501-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82201 invoked from network); 26 Oct 2006 06:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:02:00 -0000
Received: (qmail 86443 invoked by uid 500); 24 Oct 2006 21:55:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86414 invoked by uid 500); 24 Oct 2006 21:55:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86397 invoked by uid 99); 24 Oct 2006 21:55:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:55:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:55:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4B4AC714201
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:54:18 -0700 (PDT)
Message-ID: <16185005.1161726858305.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:54:18 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment:     (was: patch.2)

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: patch.1, patch.2
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:13:23 2006
Return-Path: 
 <hadoop-dev-return-4502-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9309 invoked from network); 26 Oct 2006 06:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:13:23 -0000
Received: (qmail 86662 invoked by uid 500); 24 Oct 2006 21:55:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86639 invoked by uid 500); 24 Oct 2006 21:55:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86583 invoked by uid 99); 24 Oct 2006 21:55:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:55:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:55:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2031C71408D
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:54:20 -0700 (PDT)
Message-ID: <3819562.1161726860129.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:54:20 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-627) MiniMRCluster missing synchronization
In-Reply-To: <20847558.1161651796609.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-627?page=all ]

Doug Cutting updated HADOOP-627:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Nigel!

> MiniMRCluster missing synchronization
> -------------------------------------
>
>                 Key: HADOOP-627
>                 URL: http://issues.apache.org/jira/browse/HADOOP-627
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>             Fix For: 0.8.0
>
>         Attachments: minimrcluster.patch
>
>
> org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner contains (at least) 2 instance variables that are read by another thread: isInitialized and isDead.  These should be declared volatile or proper synchronization should be used for their access.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:02:03 2006
Return-Path: 
 <hadoop-dev-return-4503-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 82307 invoked from network); 26 Oct 2006 06:02:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:02:03 -0000
Received: (qmail 87033 invoked by uid 500); 24 Oct 2006 21:55:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87009 invoked by uid 500); 24 Oct 2006 21:55:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87000 invoked by uid 99); 24 Oct 2006 21:55:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:55:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 14:55:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EFCEF7142CB
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 14:54:21 -0700 (PDT)
Message-ID: <23460161.1161726861979.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 14:54:21 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment: patch.2

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: patch.1, patch.2
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 05:03:18 2006
Return-Path: 
 <hadoop-dev-return-4504-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 89229 invoked from network); 26 Oct 2006 05:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:03:18 -0000
Received: (qmail 47149 invoked by uid 500); 25 Oct 2006 04:03:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47111 invoked by uid 500); 25 Oct 2006 04:03:28 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47053 invoked by uid 99); 25 Oct 2006 04:03:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 21:03:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 21:03:15 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 80C26714201
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 21:02:16 -0700 (PDT)
Message-ID: <30539743.1161748936524.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 21:02:16 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-635) hadoop dfs copy, move commands should
 accept multiple source files as arguments
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hadoop dfs copy, move commands should accept multiple source files as arguments
-------------------------------------------------------------------------------

                 Key: HADOOP-635
                 URL: http://issues.apache.org/jira/browse/HADOOP-635
             Project: Hadoop
          Issue Type: New Feature
    Affects Versions: 0.7.2
            Reporter: dhruba borthakur


hadoop dfs copy, move commands should accept multiple source files as arguments

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:37:51 2006
Return-Path: 
 <hadoop-dev-return-4505-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51036 invoked from network); 26 Oct 2006 06:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:37:51 -0000
Received: (qmail 2368 invoked by uid 500); 25 Oct 2006 04:28:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2293 invoked by uid 500); 25 Oct 2006 04:28:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2256 invoked by uid 99); 25 Oct 2006 04:28:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 21:28:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 21:28:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E8C6771408D
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 21:27:18 -0700 (PDT)
Message-ID: <18769509.1161750438951.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 21:27:18 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-635) hadoop dfs copy, move commands should
 accept multiple source files as arguments
In-Reply-To: <30539743.1161748936524.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-635?page=all ]

dhruba borthakur updated HADOOP-635:
------------------------------------

    Attachment: copymoveargs.patch

A user can now run a command of the form:

hadoop dfs -cp file1 file1 dir

and it's functionality will be exactly as if the user issued the following two commands:

hadoop dfs -cp file1 dir
hadoop dfs -cp file2 dir
 

> hadoop dfs copy, move commands should accept multiple source files as arguments
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-635
>                 URL: http://issues.apache.org/jira/browse/HADOOP-635
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Attachments: copymoveargs.patch
>
>
> hadoop dfs copy, move commands should accept multiple source files as arguments

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:32:06 2006
Return-Path: 
 <hadoop-dev-return-4506-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 39252 invoked from network); 26 Oct 2006 06:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:32:06 -0000
Received: (qmail 12451 invoked by uid 500); 25 Oct 2006 04:31:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12427 invoked by uid 500); 25 Oct 2006 04:31:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12412 invoked by uid 99); 25 Oct 2006 04:31:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 21:31:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 21:31:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CFA3571408D
	for <hadoop-dev@lucene.apache.org>; Tue, 24 Oct 2006 21:30:18 -0700 (PDT)
Message-ID: <5524121.1161750618848.JavaMail.root@brutus>
Date: Tue, 24 Oct 2006 21:30:18 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-635) hadoop dfs copy, move commands should
 accept multiple source files as arguments
In-Reply-To: <30539743.1161748936524.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-635?page=all ]

dhruba borthakur updated HADOOP-635:
------------------------------------

    Status: Patch Available  (was: Open)

A user can now run a command of the form:

hadoop dfs -cp file1 file1 dir

and it's functionality will be exactly as if the user issued the following two commands:

hadoop dfs -cp file1 dir
hadoop dfs -cp file2 dir 

> hadoop dfs copy, move commands should accept multiple source files as arguments
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-635
>                 URL: http://issues.apache.org/jira/browse/HADOOP-635
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Attachments: copymoveargs.patch
>
>
> hadoop dfs copy, move commands should accept multiple source files as arguments

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:42:42 2006
Return-Path: 
 <hadoop-dev-return-4507-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3593 invoked from network); 26 Oct 2006 06:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:42:42 -0000
Received: (qmail 27012 invoked by uid 500); 25 Oct 2006 11:47:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26980 invoked by uid 500); 25 Oct 2006 11:47:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26971 invoked by uid 99); 25 Oct 2006 11:47:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 04:47:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 04:47:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB918714201
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 04:46:18 -0700 (PDT)
Message-ID: <10175886.1161776778830.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 04:46:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya reassigned HADOOP-565:
------------------------------------

    Assignee: Sanjay Dahiya  (was: Owen O'Malley)

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 03:58:21 2006
Return-Path: 
 <hadoop-dev-return-4508-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3105 invoked from network); 26 Oct 2006 03:58:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 03:58:21 -0000
Received: (qmail 53240 invoked by uid 500); 25 Oct 2006 11:58:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53203 invoked by uid 500); 25 Oct 2006 11:58:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53194 invoked by uid 99); 25 Oct 2006 11:58:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 04:58:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 04:58:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 61CB3714201
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 04:57:18 -0700 (PDT)
Message-ID: <23968778.1161777438397.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 04:57:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya updated HADOOP-565:
---------------------------------

    Attachment: Hadoop-565.patch

Jetty 6 is not API compatible with earlier version for embedded usage, This patch changes StatusHttpServer to work with jetty 6.0. 

The minimum set of jar files to include for this patch to work follows 
- jetty-6.0.1.jar
- jetty-util-6.0.1.jar
- servlet-api-2.5-6.0.1.jar
- jsp-2.0/* -- includes 
	- ant-1.6.5.jar
	- commons-el-1.0.jar
	- jasper-compiler-5.5.15.jar	
	- jasper-compiler-jdt-5.5.15.jar
	- jasper-runtime-5.5.15.jar
	- jsp-api-2.0.jar
	- xercesImpl-2.6.2.jar
	- xmlParserAPIs-2.6.2.jar

Jetty uses slf4j so we need the following bridge to get logs in commons-logging. 
- slf4j-jcl.jar

All files from older jetty distro can be removed. 

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:06:30 2006
Return-Path: 
 <hadoop-dev-return-4509-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15273 invoked from network); 26 Oct 2006 04:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:06:30 -0000
Received: (qmail 53662 invoked by uid 500); 25 Oct 2006 11:58:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53637 invoked by uid 500); 25 Oct 2006 11:58:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 53624 invoked by uid 99); 25 Oct 2006 11:58:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 04:58:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 04:58:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 31D4D7142C3
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 04:57:20 -0700 (PDT)
Message-ID: <1408226.1161777440201.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 04:57:20 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya updated HADOOP-565:
---------------------------------

    Status: Patch Available  (was: Open)

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:13:25 2006
Return-Path: 
 <hadoop-dev-return-4510-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30149 invoked from network); 26 Oct 2006 04:13:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:13:25 -0000
Received: (qmail 65008 invoked by uid 500); 25 Oct 2006 12:05:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 64959 invoked by uid 500); 25 Oct 2006 12:05:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 64934 invoked by uid 99); 25 Oct 2006 12:05:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 05:05:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 05:05:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E66E714201
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 05:04:18 -0700 (PDT)
Message-ID: <91615.1161777858253.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 05:04:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-578) Failed tasks should not be put at
 the end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-578?page=comments#action_12444642 ] 
            
Sanjay Dahiya commented on HADOOP-578:
--------------------------------------

Currently a failed task moves the firstMapToTry and firstReduceToTry to next task from failed one, which will cause skipping of this task for immediate next scheduling. Although a failed task having ID less than this failed task will push the pointer back and this task may still get scheduled. 

We can fix this by changing - 
JobInProgress.failedTask() ->  firstMapToTry = Math.min(firstMapToTry, tip.getIdWithinJob()) ;

this will make sure that job tracker looks at first failed task in the list at any point before scheduling other tasks. This will make sure that if the job is going to fail due to certain failure of some tasks then we detect it as soon as
possible. 

comments ? 

> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 05:40:59 2006
Return-Path: 
 <hadoop-dev-return-4511-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12481 invoked from network); 26 Oct 2006 05:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:40:59 -0000
Received: (qmail 82238 invoked by uid 500); 25 Oct 2006 16:07:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82207 invoked by uid 500); 25 Oct 2006 16:07:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82198 invoked by uid 99); 25 Oct 2006 16:07:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 09:07:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.109.112.27] (HELO mrout1-b.corp.dcn.yahoo.com)
 (216.109.112.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 09:06:53 -0700
Received: from explainfloorlx (explainfloor-lx.corp.yahoo.com
 [207.126.231.230])
	by mrout1-b.corp.dcn.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id
 k9PG6EHo057893
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 09:06:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:thread-index:x-mimeole;
	b=TBEOxBvLuck0uUn8FQFDXDKNMpOT9uULTt/ryeVGF3ELM4wbPlWPb1dbntnDEOEU
From: "Runping Qi" <runping@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: Error in reading block compressed sequence file
Date: Wed, 25 Oct 2006 09:06:12 -0700
Message-ID: <000a01c6f84f$7e657140$6a4d480a@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <091E618E-407A-47BB-9FD0-69910EE9A0AF@yahoo-inc.com>
Thread-Index: Acb21rXKJz010CRzQa+GBCGcCWoiHQBeI/Pw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org


DefaultCodec works. Is there an existing bug report about the problem with
GZipCodec? If not, I'll create one to track the problem.


> -----Original Message-----
> From: Owen O'Malley [mailto:owen@yahoo-inc.com]
> Sent: Monday, October 23, 2006 11:24 AM
> To: hadoop-dev@lucene.apache.org
> Subject: Re: Error in reading block compressed sequence file
> 
> Arun's attempt to send this bounced, so I'll try...
> 
>    -- Owen
> 
> > From: Arun C Murthy <arunc@yahoo-inc.com>
> > Date: Mon, 23 Oct 2006 23:41:30 +0530
> > Subject: Re: Error in reading block compressed sequence file
> > To: hadoop-dev@lucene.apache.org
> >
> > On Sun, Oct 22, 2006 at 04:31:23PM -0700, Runping Qi wrote:
> >
> >>
> >>
> >> I got an error when I tried to read  a blocked compressed sequence
> >> file I
> >> just created. Anybody can offer any clues?
> >>
> >> The file was created through a SequenceFile.Writer object:
> >>
> >> The writer was created as follows:
> >>
> >>                        Configuration conf = new Configuration();
> >>                        FileSystem fs = FileSystem.getNamed
> >> ("local", conf);
> >>                        SequenceFile.Writer theWriter =
> >> SequenceFile.createWriter(fs, conf, new Path(outP), Text.class,
> >> ULTRecordJT.class,
> >>                        CompressionType.BLOCK, new GzipCodec());
> >>
> >                                                 ^^^^^^^^^^^^^^^^
> >
> >   You are using the GzipCodec which (for now, should change with
> > HADOOP-538) won't work with SequenceFiles. Can you replace that
> > with org.apache.hadoop.io.compress.DefaultCodec and give it a whirl?
> >
> >   The gzip basically is the zlib+headers, while the DefaultCodec is
> > zlib only... so compression should be identical but for the headers.
> >
> > thanks,
> > Arun



From MAILER-DAEMON Thu Oct 26 04:54:40 2006
Return-Path: 
 <hadoop-dev-return-4512-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49943 invoked from network); 26 Oct 2006 04:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:54:40 -0000
Received: (qmail 86721 invoked by uid 500); 25 Oct 2006 17:41:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86685 invoked by uid 500); 25 Oct 2006 17:41:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86674 invoked by uid 99); 25 Oct 2006 17:41:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 10:41:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 10:41:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 945FD7142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 10:40:16 -0700 (PDT)
Message-ID: <23627694.1161798016605.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 10:40:16 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-636) MapFile constructor should accept
 Progressible
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

MapFile constructor should accept Progressible
----------------------------------------------

                 Key: HADOOP-636
                 URL: http://issues.apache.org/jira/browse/HADOOP-636
             Project: Hadoop
          Issue Type: New Feature
          Components: io
            Reporter: Doug Cutting


MapFile's constructor should accept a Progressible and pass it down to the underlying SequenceFiles.  This permits DFS to signal task progress while writing blocks, and can keep reduce tasks from timing out when block writes are slow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:54:40 2006
Return-Path: 
 <hadoop-dev-return-4513-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49947 invoked from network); 26 Oct 2006 04:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:54:40 -0000
Received: (qmail 86770 invoked by uid 500); 25 Oct 2006 17:41:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86703 invoked by uid 500); 25 Oct 2006 17:41:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86686 invoked by uid 99); 25 Oct 2006 17:41:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 10:41:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 10:41:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D35BB714201
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 10:40:17 -0700 (PDT)
Message-ID: <264975.1161798017863.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 10:40:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-636) MapFile constructor should accept
 Progressible
In-Reply-To: <23627694.1161798016605.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-636?page=all ]

Doug Cutting reassigned HADOOP-636:
-----------------------------------

    Assignee: Doug Cutting

> MapFile constructor should accept Progressible
> ----------------------------------------------
>
>                 Key: HADOOP-636
>                 URL: http://issues.apache.org/jira/browse/HADOOP-636
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>
> MapFile's constructor should accept a Progressible and pass it down to the underlying SequenceFiles.  This permits DFS to signal task progress while writing blocks, and can keep reduce tasks from timing out when block writes are slow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 07:13:09 2006
Return-Path: 
 <hadoop-dev-return-4514-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16504 invoked from network); 26 Oct 2006 07:13:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:13:09 -0000
Received: (qmail 56605 invoked by uid 500); 25 Oct 2006 18:36:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 56536 invoked by uid 500); 25 Oct 2006 18:36:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 56500 invoked by uid 99); 25 Oct 2006 18:36:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 11:36:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 11:36:16 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FEE17142C3
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 11:35:16 -0700 (PDT)
Message-ID: <3722659.1161801316587.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 11:35:16 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-637) ipc.Server has memory leak -- serious
 issue for namenode server
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

ipc.Server has memory leak -- serious issue for namenode server
---------------------------------------------------------------

                 Key: HADOOP-637
                 URL: http://issues.apache.org/jira/browse/HADOOP-637
             Project: Hadoop
          Issue Type: Bug
          Components: ipc
    Affects Versions: 0.7.1
            Reporter: Christian Kunz


In my environment (running a lot of batch processes each of which reads, creates, and deletes a lof of  files in dfs) the namenode server can run out of memory rather quickly (in a few hours on a 150 node cluster). The netbeans profiler shows an increasing number of direct byte buffers not garbage collected. The documentation on java.nio.ByteBuffer indicates that their allocation might (and obviously does) happen outside the normal gc-collected heap, and, therefore, it is required that direct byte buffers should only be used for long-lived objects.

ipc.Server seems to use a 4KB direct byte buffer for every connection, but, worse, for every RPC call. If I replace the latter ones with non-direct byte buffers, the memory footprint of the namenode server increases only slowly, but even then it is just a matter of time (since I started it 24 hours ago, it leaked by about 300-400MB). If the performance increase by using direct buffers is a requirement, I would suggest to use a static pool.

Although my environment abuses the namenode server in unusual manner, I would imagine that the memory footprint of the namenode server creeps up slowly everywhere

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 05:55:46 2006
Return-Path: 
 <hadoop-dev-return-4516-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66615 invoked from network); 26 Oct 2006 05:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:55:46 -0000
Received: (qmail 69893 invoked by uid 500); 25 Oct 2006 18:42:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69873 invoked by uid 500); 25 Oct 2006 18:42:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69860 invoked by uid 99); 25 Oct 2006 18:42:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 11:42:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 11:42:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A84D17142C3
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 11:41:17 -0700 (PDT)
Message-ID: <28771486.1161801677686.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 11:41:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-636) MapFile constructor should accept
 Progressible
In-Reply-To: <23627694.1161798016605.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-636?page=all ]

Doug Cutting updated HADOOP-636:
--------------------------------

    Attachment: HADOOP-636.patch

> MapFile constructor should accept Progressible
> ----------------------------------------------
>
>                 Key: HADOOP-636
>                 URL: http://issues.apache.org/jira/browse/HADOOP-636
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-636.patch
>
>
> MapFile's constructor should accept a Progressible and pass it down to the underlying SequenceFiles.  This permits DFS to signal task progress while writing blocks, and can keep reduce tasks from timing out when block writes are slow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 07:14:26 2006
Return-Path: 
 <hadoop-dev-return-4515-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18674 invoked from network); 26 Oct 2006 07:14:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:14:26 -0000
Received: (qmail 69427 invoked by uid 500); 25 Oct 2006 18:42:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 69400 invoked by uid 500); 25 Oct 2006 18:42:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 69391 invoked by uid 99); 25 Oct 2006 18:42:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 11:42:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 11:42:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DC83B7142CB
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 11:41:18 -0700 (PDT)
Message-ID: <26207036.1161801678900.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 11:41:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-636) MapFile constructor should accept
 Progressible
In-Reply-To: <23627694.1161798016605.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-636?page=all ]

Doug Cutting updated HADOOP-636:
--------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.8.0

> MapFile constructor should accept Progressible
> ----------------------------------------------
>
>                 Key: HADOOP-636
>                 URL: http://issues.apache.org/jira/browse/HADOOP-636
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-636.patch
>
>
> MapFile's constructor should accept a Progressible and pass it down to the underlying SequenceFiles.  This permits DFS to signal task progress while writing blocks, and can keep reduce tasks from timing out when block writes are slow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:22:18 2006
Return-Path: 
 <hadoop-dev-return-4517-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43194 invoked from network); 26 Oct 2006 04:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:22:18 -0000
Received: (qmail 57093 invoked by uid 500); 25 Oct 2006 19:16:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57069 invoked by uid 500); 25 Oct 2006 19:16:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57060 invoked by uid 99); 25 Oct 2006 19:16:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 12:16:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 12:16:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B15B97142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 12:15:17 -0700 (PDT)
Message-ID: <26653922.1161803717723.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 12:15:17 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-227) Namespace check pointing is not
 performed until the namenode restarts.
In-Reply-To: <17890828.1147909205885.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-227?page=comments#action_12444717 ] 
            
Christian Kunz commented on HADOOP-227:
---------------------------------------

It looks as if this is on a back burner. I would like to raise the issue again, because the edits file can become large very quickly depending on the frequency of file operations. I generate an edits file of more than 2.5Gb every 24 hours. Of course, the namenode server could be restarted periodically (this what I have to do right now), but this is rather interruptive to clients. What about rotating the edits file periodically and resolving the older edits file with the image file in a separate thread? 

> Namespace check pointing is not performed until the namenode restarts.
> ----------------------------------------------------------------------
>
>                 Key: HADOOP-227
>                 URL: http://issues.apache.org/jira/browse/HADOOP-227
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.2.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>
> In current implementation when the name node starts, it reads its image file, then
> the edits file, and then saves the updated image back into the image file.
> The image file is never updated after that.
> In order to provide the system reliability reliability the namespace information should
> be check pointed periodically, and the edits file should be kept relatively small.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:20:21 2006
Return-Path: 
 <hadoop-dev-return-4518-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40409 invoked from network); 26 Oct 2006 04:20:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:20:21 -0000
Received: (qmail 67006 invoked by uid 500); 25 Oct 2006 19:20:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66974 invoked by uid 500); 25 Oct 2006 19:20:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66965 invoked by uid 99); 25 Oct 2006 19:20:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 12:20:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 12:20:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B73A7142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 12:19:18 -0700 (PDT)
Message-ID: <3661560.1161803958240.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 12:19:18 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-563) DFS client should try to re-new lease
 if it gets a lease expiration exception when it adds a block to a file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-563?page=all ]

dhruba borthakur updated HADOOP-563:
------------------------------------

    Attachment: softhardlease.patch

A client's lease goes stale if it fails to renew the lease for 1 minute. After that period, if a different client request a lease for the same file, the resouces associated with the original lease gets reclaimed and the new lease-request is satisfied.
A client's lease trasitions from stale to expired after a 1 hour period. At that time all resouces associated with that lease gets reclaimed.



> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Runping Qi
>         Assigned To: dhruba borthakur
>         Attachments: softhardlease.patch
>
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:20:23 2006
Return-Path: 
 <hadoop-dev-return-4519-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40444 invoked from network); 26 Oct 2006 04:20:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:20:23 -0000
Received: (qmail 67253 invoked by uid 500); 25 Oct 2006 19:20:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 67224 invoked by uid 500); 25 Oct 2006 19:20:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 67215 invoked by uid 99); 25 Oct 2006 19:20:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 12:20:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 12:20:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 023B17142C2
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 12:19:20 -0700 (PDT)
Message-ID: <17058480.1161803960006.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 12:19:20 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-563) DFS client should try to re-new lease
 if it gets a lease expiration exception when it adds a block to a file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-563?page=all ]

dhruba borthakur updated HADOOP-563:
------------------------------------

    Status: Patch Available  (was: Open)

A client's lease goes stale if it fails to renew the lease for 1 minute. After that period, if a different client request a lease for the same file, the resouces associated with the original lease gets reclaimed and the new lease-request is satisfied.
A client's lease trasitions from stale to expired after a 1 hour period. At that time all resouces associated with that lease gets reclaimed.

> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Runping Qi
>         Assigned To: dhruba borthakur
>         Attachments: softhardlease.patch
>
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:29:25 2006
Return-Path: 
 <hadoop-dev-return-4520-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33568 invoked from network); 26 Oct 2006 06:29:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:29:25 -0000
Received: (qmail 36981 invoked by uid 500); 25 Oct 2006 21:37:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36947 invoked by uid 500); 25 Oct 2006 21:37:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36938 invoked by uid 99); 25 Oct 2006 21:37:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 14:37:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 14:37:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 85D277142C2
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 14:36:16 -0700 (PDT)
Message-ID: <11864447.1161812176544.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 14:36:16 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-638) TaskTracker missing synchronization
 around tasks variable access
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

TaskTracker missing synchronization around tasks variable access
----------------------------------------------------------------

                 Key: HADOOP-638
                 URL: http://issues.apache.org/jira/browse/HADOOP-638
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Nigel Daley
         Assigned To: Nigel Daley


TaskTracker has one access to the tasks variable (line 449) that is not synchronized.  It should be.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:34:09 2006
Return-Path: 
 <hadoop-dev-return-4521-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43626 invoked from network); 26 Oct 2006 06:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:34:09 -0000
Received: (qmail 40683 invoked by uid 500); 25 Oct 2006 21:39:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40646 invoked by uid 500); 25 Oct 2006 21:39:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40622 invoked by uid 99); 25 Oct 2006 21:39:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 14:39:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 14:39:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F11627142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 14:38:17 -0700 (PDT)
Message-ID: <28538614.1161812297985.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 14:38:17 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-638) TaskTracker missing synchronization
 around tasks variable access
In-Reply-To: <11864447.1161812176544.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-638?page=all ]

Nigel Daley updated HADOOP-638:
-------------------------------

    Attachment: tasktracker-sync.patch

Owen, please review patch.

> TaskTracker missing synchronization around tasks variable access
> ----------------------------------------------------------------
>
>                 Key: HADOOP-638
>                 URL: http://issues.apache.org/jira/browse/HADOOP-638
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>         Attachments: tasktracker-sync.patch
>
>
> TaskTracker has one access to the tasks variable (line 449) that is not synchronized.  It should be.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:46:28 2006
Return-Path: 
 <hadoop-dev-return-4522-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68258 invoked from network); 26 Oct 2006 06:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:46:28 -0000
Received: (qmail 76539 invoked by uid 500); 25 Oct 2006 21:54:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 76517 invoked by uid 500); 25 Oct 2006 21:54:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 76508 invoked by uid 99); 25 Oct 2006 21:54:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 14:54:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 14:54:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 45BFE7142CB
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 14:53:18 -0700 (PDT)
Message-ID: <10621866.1161813198283.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 14:53:18 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12444740 ] 
            
Devaraj Das commented on HADOOP-611:
------------------------------------

Thinking of exposing the following public APIs to the merge subsystem:

1. RawKeyValueIterator merge (List <Path> input)

2. RawKeyValueIterator merge (SegmentDescriptor segments)
//The SegmentDescriptor is a class one of whose constructors is
//SegmentDescriptor (long start, long length, Path segmentPathName).

3. void writeFile(RawKeyValueIterator records, SequenceFile.Writer writer) throws IOException

4. SequenceFile.Writer cloneFileAttributes(FileSystem fileSys, 
                                                                             Path inputFile,
                                                                             Path outputFile,
                                                                             Progressable prog
                                                                            ) throws IOException;

//This API will look at the input file attributes (compression - block/value & codec for 
//now) and apply them to the writer (so that things like compression methods are 
//preserved). The progressable is just passed to the SequenceFile.Writer 
//constructor. Later on, API (3) can use the writer.

Also, the RawKeyValueIterator interface doesn't seem to require the getTotalBytes() method. So will remove that.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.8.0
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:52:33 2006
Return-Path: 
 <hadoop-dev-return-4523-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79527 invoked from network); 26 Oct 2006 06:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:52:33 -0000
Received: (qmail 95085 invoked by uid 500); 25 Oct 2006 22:00:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95067 invoked by uid 500); 25 Oct 2006 22:00:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95058 invoked by uid 99); 25 Oct 2006 22:00:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 15:00:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 15:00:25 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 7CF347142C3
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 14:59:19 -0700 (PDT)
Message-ID: <238436.1161813559509.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 14:59:19 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538_20061026.tgz

Here is another stab at native-zlib incorporating all of Owen's comments... the significant feature being better support for mutli-arch builds of hadoop. Appreciate any feedback...

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:56:28 2006
Return-Path: 
 <hadoop-dev-return-4524-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87068 invoked from network); 26 Oct 2006 06:56:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:56:28 -0000
Received: (qmail 8776 invoked by uid 500); 25 Oct 2006 22:04:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8759 invoked by uid 500); 25 Oct 2006 22:04:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8750 invoked by uid 99); 25 Oct 2006 22:04:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 15:04:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 15:04:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8A9527142C2
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 15:03:16 -0700 (PDT)
Message-ID: <23380746.1161813796565.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 15:03:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

task cleanup messages can get lost, causing task trackers to keep tasks forever
-------------------------------------------------------------------------------

                 Key: HADOOP-639
                 URL: http://issues.apache.org/jira/browse/HADOOP-639
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.8.0


If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:48:52 2006
Return-Path: 
 <hadoop-dev-return-4525-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72765 invoked from network); 26 Oct 2006 06:48:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:48:52 -0000
Received: (qmail 15112 invoked by uid 500); 25 Oct 2006 22:41:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15097 invoked by uid 500); 25 Oct 2006 22:41:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15088 invoked by uid 99); 25 Oct 2006 22:41:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 15:41:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 15:41:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 35CC27142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 15:40:18 -0700 (PDT)
Message-ID: <25449675.1161816018217.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 15:40:18 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-591) Reducer sort should even out the
 pass factors in merging different pass
In-Reply-To: <31534512.1160500579703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-591?page=comments#action_12444749 ] 
            
Runping Qi commented on HADOOP-591:
-----------------------------------


In case there are multiple local disks, the merge process should write merge result files onto different disks

> Reducer sort should even out the pass factors in merging different pass
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-591
>                 URL: http://issues.apache.org/jira/browse/HADOOP-591
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Runping Qi
>         Assigned To: Devaraj Das
>
> When multiple pass merging is needed during sort, the current sort implementation in SequenceFile class uses a simple "greedy" way to select pass factors, resulting uneven pass factor in different passes. For example, if the factor pass is 100 (the default), and there are 101 segments to be merged. The current implementation will first merge the first 100 segments into one and then merge the big output file with the last segment with pass factor 2. It will be better off to use pass factors 11 in the first pass and pass factor 10 in the second pass.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:41:54 2006
Return-Path: 
 <hadoop-dev-return-4526-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59349 invoked from network); 26 Oct 2006 06:41:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:41:54 -0000
Received: (qmail 73247 invoked by uid 500); 25 Oct 2006 23:08:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 73227 invoked by uid 500); 25 Oct 2006 23:08:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 73206 invoked by uid 99); 25 Oct 2006 23:08:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 16:08:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 16:08:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 562A27142CB
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 16:07:18 -0700 (PDT)
Message-ID: <1363630.1161817638350.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 16:07:18 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12444751 ] 
            
Devaraj Das commented on HADOOP-611:
------------------------------------

A few changes:

The API (1) should be  
RawKeyValueIterator merge (Path[] input)  
//this is to avoid duplicate method names since API (2) also uses the same 
//signature

The other change in API (1) is that it would take one more boolean argument "deleteInputs" (true means input paths will be deleted when merge has consumed them).

Missed this earlier: In the SegmentDescriptor, a method is provided called "cleanup()". During the merge process, this method is invoked whenever a segment is done with. One can override the SegmentDescriptor and define a cleanup that deletes the segment (for e.g., if the segment in question is the only segment in the segment's pathname).

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.8.0
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 06:46:45 2006
Return-Path: 
 <hadoop-dev-return-4527-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68762 invoked from network); 26 Oct 2006 06:46:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:46:45 -0000
Received: (qmail 48859 invoked by uid 500); 25 Oct 2006 23:41:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48830 invoked by uid 500); 25 Oct 2006 23:41:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48818 invoked by uid 99); 25 Oct 2006 23:41:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 16:41:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 16:41:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CD4207142CB
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 16:40:17 -0700 (PDT)
Message-ID: <7315440.1161819617837.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 16:40:17 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-640) Text class constructor and setCopacity
 method
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Text class constructor and setCopacity method
---------------------------------------------

                 Key: HADOOP-640
                 URL: http://issues.apache.org/jira/browse/HADOOP-640
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
            Reporter: Runping Qi



A couple of problems.

1. setCapacity may cause loss of the existing data, if the new len is bigger than the old len of the byte array.

2. Text should provide a constructor like:

Text(byte[] data,  int len) {
}

Text(byte[] data, int start, int len) {
}

Text(byte[] data,  int len, boolean noCopying) {
}

The last one above allows to save the cost of data copy if the user wants the ownership of data to be transferred to Text object


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 07:09:58 2006
Return-Path: 
 <hadoop-dev-return-4528-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11040 invoked from network); 26 Oct 2006 07:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:09:58 -0000
Received: (qmail 99136 invoked by uid 500); 26 Oct 2006 00:04:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 99102 invoked by uid 500); 26 Oct 2006 00:04:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 99070 invoked by uid 99); 26 Oct 2006 00:04:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 17:04:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 17:04:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EA5047142CB
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 17:03:20 -0700 (PDT)
Message-ID: <26665416.1161821000957.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 17:03:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-578) Failed tasks should not be put at
 the end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-578?page=comments#action_12444759 ] 
            
Owen O'Malley commented on HADOOP-578:
--------------------------------------

Actually, I'd just remove the first{Map,Reduce}ToTry and always start searching at index 0.

> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 07:21:55 2006
Return-Path: 
 <hadoop-dev-return-4529-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31147 invoked from network); 26 Oct 2006 07:21:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:21:55 -0000
Received: (qmail 30842 invoked by uid 500); 26 Oct 2006 00:16:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30816 invoked by uid 500); 26 Oct 2006 00:16:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30807 invoked by uid 99); 26 Oct 2006 00:16:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 17:16:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 17:16:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A3A437142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 17:15:17 -0700 (PDT)
Message-ID: <14500893.1161821717667.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 17:15:17 -0700 (PDT)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-638) TaskTracker missing synchronization
 around tasks variable access
In-Reply-To: <11864447.1161812176544.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-638?page=all ]

Nigel Daley updated HADOOP-638:
-------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.8.0

> TaskTracker missing synchronization around tasks variable access
> ----------------------------------------------------------------
>
>                 Key: HADOOP-638
>                 URL: http://issues.apache.org/jira/browse/HADOOP-638
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>             Fix For: 0.8.0
>
>         Attachments: tasktracker-sync.patch
>
>
> TaskTracker has one access to the tasks variable (line 449) that is not synchronized.  It should be.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 01:08:19 2006
Return-Path: 
 <hadoop-dev-return-4530-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46241 invoked from network); 26 Oct 2006 01:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 01:08:19 -0000
Received: (qmail 17689 invoked by uid 500); 26 Oct 2006 01:08:29 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17663 invoked by uid 500); 26 Oct 2006 01:08:29 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17649 invoked by uid 99); 26 Oct 2006 01:08:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:08:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:08:17 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9CE867142C2
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 18:07:16 -0700 (PDT)
Message-ID: <17516870.1161824836638.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 18:07:16 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-641) Name-node should demand a block report
 from resurrected data-nodes.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Name-node should demand a block report from resurrected data-nodes.
-------------------------------------------------------------------

                 Key: HADOOP-641
                 URL: http://issues.apache.org/jira/browse/HADOOP-641
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.7.2, 0.1.0
            Reporter: Konstantin Shvachko


1. This bug contributed to the crash discussed in HADOOP-572.
The problem is that when the name-node is busy, and is not able to process all requests from its clients,
it can consider one of data-nodes dead and discard its blocks sending them into the neededRelications list.
When it finally gets the heartbeat from this data-node it resurrects the node, but not the data-node blocks,
and hence continues to replicate them.
Of course, eventually the name-node will receive the block report from this data-node, but it could take up
to 1 hour. During this time it proceeds with unnecessary block replications, which could be avoided if the
data-node sent its block report right after the resurrection.

I modified code so that the name-node requests block report if it receives a heartbeat from a dead data-node.
I introduced a new command type in the BlockCommand class.
I replaced multiple boolean indicators of the command types by one enum field.
I changed the DatanodeProtocol version.

2. This patch also includes a fix for the data-node registration. If a data-nodes times out during registration
it silently exits, which is hard to notice with a large number of nodes. This patch places registration in a loop,
so that it could retry.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 01:10:21 2006
Return-Path: 
 <hadoop-dev-return-4531-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48873 invoked from network); 26 Oct 2006 01:10:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 01:10:21 -0000
Received: (qmail 19901 invoked by uid 500); 26 Oct 2006 01:10:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19881 invoked by uid 500); 26 Oct 2006 01:10:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19872 invoked by uid 99); 26 Oct 2006 01:10:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:10:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:10:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C83FF7142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 18:09:17 -0700 (PDT)
Message-ID: <24168713.1161824957818.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 18:09:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-641) Name-node should demand a block report
 from resurrected data-nodes.
In-Reply-To: <17516870.1161824836638.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-641?page=all ]

Konstantin Shvachko updated HADOOP-641:
---------------------------------------

    Attachment: ResurrectDN.patch

> Name-node should demand a block report from resurrected data-nodes.
> -------------------------------------------------------------------
>
>                 Key: HADOOP-641
>                 URL: http://issues.apache.org/jira/browse/HADOOP-641
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2, 0.1.0
>            Reporter: Konstantin Shvachko
>         Attachments: ResurrectDN.patch
>
>
> 1. This bug contributed to the crash discussed in HADOOP-572.
> The problem is that when the name-node is busy, and is not able to process all requests from its clients,
> it can consider one of data-nodes dead and discard its blocks sending them into the neededRelications list.
> When it finally gets the heartbeat from this data-node it resurrects the node, but not the data-node blocks,
> and hence continues to replicate them.
> Of course, eventually the name-node will receive the block report from this data-node, but it could take up
> to 1 hour. During this time it proceeds with unnecessary block replications, which could be avoided if the
> data-node sent its block report right after the resurrection.
> I modified code so that the name-node requests block report if it receives a heartbeat from a dead data-node.
> I introduced a new command type in the BlockCommand class.
> I replaced multiple boolean indicators of the command types by one enum field.
> I changed the DatanodeProtocol version.
> 2. This patch also includes a fix for the data-node registration. If a data-nodes times out during registration
> it silently exits, which is hard to notice with a large number of nodes. This patch places registration in a loop,
> so that it could retry.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:17:58 2006
Return-Path: 
 <hadoop-dev-return-4532-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 36838 invoked from network); 26 Oct 2006 04:17:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:17:58 -0000
Received: (qmail 52150 invoked by uid 500); 26 Oct 2006 01:31:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52132 invoked by uid 500); 26 Oct 2006 01:31:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52120 invoked by uid 99); 26 Oct 2006 01:31:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:31:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:31:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 00E447142CB
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 18:30:18 -0700 (PDT)
Message-ID: <10207486.1161826218000.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 18:30:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-642) Explicit timeout for ipc.Client
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Explicit timeout for ipc.Client
-------------------------------

                 Key: HADOOP-642
                 URL: http://issues.apache.org/jira/browse/HADOOP-642
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.7.2
            Reporter: Konstantin Shvachko


This bug contributed to the crash discussed in HADOOP-572.
ipc.Client is trying to establish connection with its server with an infinite timeout.
For an unknown to me reason infinity equals 3 minutes in this case.
I guess it is configured somewhere in the native socket implementation.
With this timeout data-nodes had only 3 chances to send heartbeats during the 10
minute expiration interval. And with a very busy name-node this makes their
chances to be accepted close to 0.

I included an explicit call of Socket.connect() with a timeout set to 1 min, which is
our default for all connections.
Modified a log message to include information that turned out to be useful for debugging.
Removed unnecessary imports.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:27:22 2006
Return-Path: 
 <hadoop-dev-return-4533-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50351 invoked from network); 26 Oct 2006 04:27:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:27:22 -0000
Received: (qmail 59509 invoked by uid 500); 26 Oct 2006 01:37:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59483 invoked by uid 500); 26 Oct 2006 01:37:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59471 invoked by uid 99); 26 Oct 2006 01:37:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:37:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:37:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D350A7142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 18:36:17 -0700 (PDT)
Message-ID: <13280023.1161826577863.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 18:36:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-642) Explicit timeout for ipc.Client
In-Reply-To: <10207486.1161826218000.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-642?page=all ]

Konstantin Shvachko updated HADOOP-642:
---------------------------------------

    Attachment: IpcClientTimeout.patch

> Explicit timeout for ipc.Client
> -------------------------------
>
>                 Key: HADOOP-642
>                 URL: http://issues.apache.org/jira/browse/HADOOP-642
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Attachments: IpcClientTimeout.patch
>
>
> This bug contributed to the crash discussed in HADOOP-572.
> ipc.Client is trying to establish connection with its server with an infinite timeout.
> For an unknown to me reason infinity equals 3 minutes in this case.
> I guess it is configured somewhere in the native socket implementation.
> With this timeout data-nodes had only 3 chances to send heartbeats during the 10
> minute expiration interval. And with a very busy name-node this makes their
> chances to be accepted close to 0.
> I included an explicit call of Socket.connect() with a timeout set to 1 min, which is
> our default for all connections.
> Modified a log message to include information that turned out to be useful for debugging.
> Removed unnecessary imports.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:27:23 2006
Return-Path: 
 <hadoop-dev-return-4534-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50378 invoked from network); 26 Oct 2006 04:27:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:27:23 -0000
Received: (qmail 59540 invoked by uid 500); 26 Oct 2006 01:37:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59506 invoked by uid 500); 26 Oct 2006 01:37:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59474 invoked by uid 99); 26 Oct 2006 01:37:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:37:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:37:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3FE8F7142C2
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 18:36:19 -0700 (PDT)
Message-ID: <25765686.1161826579259.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 18:36:19 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-641) Name-node should demand a block report
 from resurrected data-nodes.
In-Reply-To: <17516870.1161824836638.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-641?page=all ]

Konstantin Shvachko updated HADOOP-641:
---------------------------------------

    Attachment:     (was: ResurrectDN.patch)

> Name-node should demand a block report from resurrected data-nodes.
> -------------------------------------------------------------------
>
>                 Key: HADOOP-641
>                 URL: http://issues.apache.org/jira/browse/HADOOP-641
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.1.0, 0.7.2
>            Reporter: Konstantin Shvachko
>
> 1. This bug contributed to the crash discussed in HADOOP-572.
> The problem is that when the name-node is busy, and is not able to process all requests from its clients,
> it can consider one of data-nodes dead and discard its blocks sending them into the neededRelications list.
> When it finally gets the heartbeat from this data-node it resurrects the node, but not the data-node blocks,
> and hence continues to replicate them.
> Of course, eventually the name-node will receive the block report from this data-node, but it could take up
> to 1 hour. During this time it proceeds with unnecessary block replications, which could be avoided if the
> data-node sent its block report right after the resurrection.
> I modified code so that the name-node requests block report if it receives a heartbeat from a dead data-node.
> I introduced a new command type in the BlockCommand class.
> I replaced multiple boolean indicators of the command types by one enum field.
> I changed the DatanodeProtocol version.
> 2. This patch also includes a fix for the data-node registration. If a data-nodes times out during registration
> it silently exits, which is hard to notice with a large number of nodes. This patch places registration in a loop,
> so that it could retry.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:27:59 2006
Return-Path: 
 <hadoop-dev-return-4535-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51159 invoked from network); 26 Oct 2006 04:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:27:59 -0000
Received: (qmail 65726 invoked by uid 500); 26 Oct 2006 01:41:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 65704 invoked by uid 500); 26 Oct 2006 01:41:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 65695 invoked by uid 99); 26 Oct 2006 01:41:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:41:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:41:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BBAE87142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 18:40:17 -0700 (PDT)
Message-ID: <14897173.1161826817766.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 18:40:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-641) Name-node should demand a block report
 from resurrected data-nodes.
In-Reply-To: <17516870.1161824836638.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-641?page=all ]

Konstantin Shvachko updated HADOOP-641:
---------------------------------------

    Attachment: ResurrectDN.patch

Sorry attached a wrong version the first time.

> Name-node should demand a block report from resurrected data-nodes.
> -------------------------------------------------------------------
>
>                 Key: HADOOP-641
>                 URL: http://issues.apache.org/jira/browse/HADOOP-641
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.1.0, 0.7.2
>            Reporter: Konstantin Shvachko
>         Attachments: ResurrectDN.patch
>
>
> 1. This bug contributed to the crash discussed in HADOOP-572.
> The problem is that when the name-node is busy, and is not able to process all requests from its clients,
> it can consider one of data-nodes dead and discard its blocks sending them into the neededRelications list.
> When it finally gets the heartbeat from this data-node it resurrects the node, but not the data-node blocks,
> and hence continues to replicate them.
> Of course, eventually the name-node will receive the block report from this data-node, but it could take up
> to 1 hour. During this time it proceeds with unnecessary block replications, which could be avoided if the
> data-node sent its block report right after the resurrection.
> I modified code so that the name-node requests block report if it receives a heartbeat from a dead data-node.
> I introduced a new command type in the BlockCommand class.
> I replaced multiple boolean indicators of the command types by one enum field.
> I changed the DatanodeProtocol version.
> 2. This patch also includes a fix for the data-node registration. If a data-nodes times out during registration
> it silently exits, which is hard to notice with a large number of nodes. This patch places registration in a loop,
> so that it could retry.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:50:59 2006
Return-Path: 
 <hadoop-dev-return-4536-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34172 invoked from network); 26 Oct 2006 04:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:50:59 -0000
Received: (qmail 1777 invoked by uid 500); 26 Oct 2006 02:04:30 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1753 invoked by uid 500); 26 Oct 2006 02:04:30 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1744 invoked by uid 99); 26 Oct 2006 02:04:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 19:04:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 19:04:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF7E97142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 19:03:17 -0700 (PDT)
Message-ID: <1995817.1161828197912.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 19:03:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-641) Name-node should demand a block report
 from resurrected data-nodes.
In-Reply-To: <17516870.1161824836638.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-641?page=all ]

Konstantin Shvachko updated HADOOP-641:
---------------------------------------

    Status: Patch Available  (was: Open)

> Name-node should demand a block report from resurrected data-nodes.
> -------------------------------------------------------------------
>
>                 Key: HADOOP-641
>                 URL: http://issues.apache.org/jira/browse/HADOOP-641
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2, 0.1.0
>            Reporter: Konstantin Shvachko
>         Attachments: ResurrectDN.patch
>
>
> 1. This bug contributed to the crash discussed in HADOOP-572.
> The problem is that when the name-node is busy, and is not able to process all requests from its clients,
> it can consider one of data-nodes dead and discard its blocks sending them into the neededRelications list.
> When it finally gets the heartbeat from this data-node it resurrects the node, but not the data-node blocks,
> and hence continues to replicate them.
> Of course, eventually the name-node will receive the block report from this data-node, but it could take up
> to 1 hour. During this time it proceeds with unnecessary block replications, which could be avoided if the
> data-node sent its block report right after the resurrection.
> I modified code so that the name-node requests block report if it receives a heartbeat from a dead data-node.
> I introduced a new command type in the BlockCommand class.
> I replaced multiple boolean indicators of the command types by one enum field.
> I changed the DatanodeProtocol version.
> 2. This patch also includes a fix for the data-node registration. If a data-nodes times out during registration
> it silently exits, which is hard to notice with a large number of nodes. This patch places registration in a loop,
> so that it could retry.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:54:28 2006
Return-Path: 
 <hadoop-dev-return-4538-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49435 invoked from network); 26 Oct 2006 04:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:54:28 -0000
Received: (qmail 2362 invoked by uid 500); 26 Oct 2006 02:04:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2338 invoked by uid 500); 26 Oct 2006 02:04:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2329 invoked by uid 99); 26 Oct 2006 02:04:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 19:04:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 19:04:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 250157142C2
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 19:03:19 -0700 (PDT)
Message-ID: <10661749.1161828199149.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 19:03:19 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-642) Explicit timeout for ipc.Client
In-Reply-To: <10207486.1161826218000.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-642?page=all ]

Konstantin Shvachko updated HADOOP-642:
---------------------------------------

    Status: Patch Available  (was: Open)

> Explicit timeout for ipc.Client
> -------------------------------
>
>                 Key: HADOOP-642
>                 URL: http://issues.apache.org/jira/browse/HADOOP-642
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Attachments: IpcClientTimeout.patch
>
>
> This bug contributed to the crash discussed in HADOOP-572.
> ipc.Client is trying to establish connection with its server with an infinite timeout.
> For an unknown to me reason infinity equals 3 minutes in this case.
> I guess it is configured somewhere in the native socket implementation.
> With this timeout data-nodes had only 3 chances to send heartbeats during the 10
> minute expiration interval. And with a very busy name-node this makes their
> chances to be accepted close to 0.
> I included an explicit call of Socket.connect() with a timeout set to 1 min, which is
> our default for all connections.
> Modified a log message to include information that turned out to be useful for debugging.
> Removed unnecessary imports.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:51:02 2006
Return-Path: 
 <hadoop-dev-return-4537-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34275 invoked from network); 26 Oct 2006 04:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:51:02 -0000
Received: (qmail 2090 invoked by uid 500); 26 Oct 2006 02:04:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2055 invoked by uid 500); 26 Oct 2006 02:04:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2046 invoked by uid 99); 26 Oct 2006 02:04:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 19:04:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 19:04:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 558667142CB
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 19:03:20 -0700 (PDT)
Message-ID: <26757883.1161828200347.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 19:03:20 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-641) Name-node should demand a block
 report from resurrected data-nodes.
In-Reply-To: <17516870.1161824836638.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-641?page=all ]

Konstantin Shvachko reassigned HADOOP-641:
------------------------------------------

    Assignee: Konstantin Shvachko

> Name-node should demand a block report from resurrected data-nodes.
> -------------------------------------------------------------------
>
>                 Key: HADOOP-641
>                 URL: http://issues.apache.org/jira/browse/HADOOP-641
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2, 0.1.0
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: ResurrectDN.patch
>
>
> 1. This bug contributed to the crash discussed in HADOOP-572.
> The problem is that when the name-node is busy, and is not able to process all requests from its clients,
> it can consider one of data-nodes dead and discard its blocks sending them into the neededRelications list.
> When it finally gets the heartbeat from this data-node it resurrects the node, but not the data-node blocks,
> and hence continues to replicate them.
> Of course, eventually the name-node will receive the block report from this data-node, but it could take up
> to 1 hour. During this time it proceeds with unnecessary block replications, which could be avoided if the
> data-node sent its block report right after the resurrection.
> I modified code so that the name-node requests block report if it receives a heartbeat from a dead data-node.
> I introduced a new command type in the BlockCommand class.
> I replaced multiple boolean indicators of the command types by one enum field.
> I changed the DatanodeProtocol version.
> 2. This patch also includes a fix for the data-node registration. If a data-nodes times out during registration
> it silently exits, which is hard to notice with a large number of nodes. This patch places registration in a loop,
> so that it could retry.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:51:07 2006
Return-Path: 
 <hadoop-dev-return-4539-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34416 invoked from network); 26 Oct 2006 04:51:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:51:07 -0000
Received: (qmail 2677 invoked by uid 500); 26 Oct 2006 02:04:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2643 invoked by uid 500); 26 Oct 2006 02:04:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2613 invoked by uid 99); 26 Oct 2006 02:04:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 19:04:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 19:04:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8B7827142D1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 19:03:21 -0700 (PDT)
Message-ID: <13904973.1161828201568.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 19:03:21 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-642) Explicit timeout for ipc.Client
In-Reply-To: <10207486.1161826218000.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-642?page=all ]

Konstantin Shvachko reassigned HADOOP-642:
------------------------------------------

    Assignee: Konstantin Shvachko

> Explicit timeout for ipc.Client
> -------------------------------
>
>                 Key: HADOOP-642
>                 URL: http://issues.apache.org/jira/browse/HADOOP-642
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>         Attachments: IpcClientTimeout.patch
>
>
> This bug contributed to the crash discussed in HADOOP-572.
> ipc.Client is trying to establish connection with its server with an infinite timeout.
> For an unknown to me reason infinity equals 3 minutes in this case.
> I guess it is configured somewhere in the native socket implementation.
> With this timeout data-nodes had only 3 chances to send heartbeats during the 10
> minute expiration interval. And with a very busy name-node this makes their
> chances to be accepted close to 0.
> I included an explicit call of Socket.connect() with a timeout set to 1 min, which is
> our default for all connections.
> Modified a log message to include information that turned out to be useful for debugging.
> Removed unnecessary imports.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:15:06 2006
Return-Path: 
 <hadoop-dev-return-4540-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32655 invoked from network); 26 Oct 2006 04:15:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:15:06 -0000
Received: (qmail 30536 invoked by uid 500); 26 Oct 2006 03:13:17 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 30512 invoked by uid 500); 26 Oct 2006 03:13:17 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 30473 invoked by uid 99); 26 Oct 2006 03:13:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 20:13:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 20:13:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8AB2A7142DB
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 20:12:02 -0700 (PDT)
Message-ID: <933630.1161832322565.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 20:12:02 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12444771 ] 
            
Owen O'Malley commented on HADOOP-538:
--------------------------------------

A couple more comments:

The buffer sized in all the new code should use the conf.getInt("io.file.buffer.size") for the size rather than 4k.

The CompressionCodec sub-classes (in particular DefaultCodec) need to be Configurable and use the Configuration that is given to them rather than a default Configuraiton.

The built in gzip codec is still going to be broken when used inside of SequenceFiles.

Do the C source directories really need to be nested so deeply?

Since we already have src/c++, wouldn't it make more sense to use src/c++/libhadoop/.. instead of src/native/..

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 04:20:22 2006
Return-Path: 
 <hadoop-dev-return-4541-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40419 invoked from network); 26 Oct 2006 04:20:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:20:22 -0000
Received: (qmail 44668 invoked by uid 500); 26 Oct 2006 03:20:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44630 invoked by uid 500); 26 Oct 2006 03:20:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44621 invoked by uid 99); 26 Oct 2006 03:20:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 20:20:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 20:20:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A7AA97142C1
	for <hadoop-dev@lucene.apache.org>; Wed, 25 Oct 2006 20:19:17 -0700 (PDT)
Message-ID: <10725980.1161832757684.JavaMail.root@brutus>
Date: Wed, 25 Oct 2006 20:19:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-638) TaskTracker missing synchronization
 around tasks variable access
In-Reply-To: <11864447.1161812176544.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-638?page=comments#action_12444772 ] 
            
Owen O'Malley commented on HADOOP-638:
--------------------------------------

+1

> TaskTracker missing synchronization around tasks variable access
> ----------------------------------------------------------------
>
>                 Key: HADOOP-638
>                 URL: http://issues.apache.org/jira/browse/HADOOP-638
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>             Fix For: 0.8.0
>
>         Attachments: tasktracker-sync.patch
>
>
> TaskTracker has one access to the tasks variable (line 449) that is not synchronized.  It should be.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 12:26:23 2006
Return-Path: 
 <hadoop-dev-return-4542-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3872 invoked from network); 26 Oct 2006 12:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 12:26:23 -0000
Received: (qmail 38402 invoked by uid 500); 26 Oct 2006 12:26:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38369 invoked by uid 500); 26 Oct 2006 12:26:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38360 invoked by uid 99); 26 Oct 2006 12:26:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 05:26:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 05:26:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 446AF7142CB
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 05:25:18 -0700 (PDT)
Message-ID: <30835171.1161865518277.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 05:25:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-578) Failed tasks should not be put at
 the end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-578?page=comments#action_12444875 ] 
            
Sanjay Dahiya commented on HADOOP-578:
--------------------------------------

ok, i'll make it start searching at index 0.  
The only issue i see with that is if speculative instances are configured to start,  and conditions satisfy for speculative execution when tasks start failing then it may be a better idea to run failed tasks first and then speculative tasks on available cluster resources. 

> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 13:13:27 2006
Return-Path: 
 <hadoop-dev-return-4543-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37884 invoked from network); 26 Oct 2006 13:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 13:13:27 -0000
Received: (qmail 52187 invoked by uid 500); 26 Oct 2006 13:13:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52155 invoked by uid 500); 26 Oct 2006 13:13:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52125 invoked by uid 99); 26 Oct 2006 13:13:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:13:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:13:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0D92E7142C3
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 06:12:19 -0700 (PDT)
Message-ID: <24750448.1161868339052.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 06:12:19 -0700 (PDT)
From: "Gal Nitzan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-24) make Configuration an interface
In-Reply-To: <52371844.1139256627178.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-24?page=all ]

Gal Nitzan updated HADOOP-24:
-----------------------------

    Attachment: conf-with-factory.patch

I agree with you Doug. I also took the liberty to make the ConfigurationFactory an interface.

signed sealed and delivered (without missing classes I hope :-)  )

Gal.

> make Configuration an interface
> -------------------------------
>
>                 Key: HADOOP-24
>                 URL: http://issues.apache.org/jira/browse/HADOOP-24
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.7.2
>            Reporter: Doug Cutting
>         Attachments: conf-with-factory.patch, configuration.java, configuration.patch, HADOOP-24-2.patch, HADOOP-24-3.patch, HADOOP-24-4.patch, HADOOP-24.patch, HADOOP-24.patch
>
>
> The Configuration class should become an interface, e.g.:
> public interface Configuration {
>   String get(String nam);
>   String set(String name, String value);
>   int getInt(String name);
>   void setInt(String name, int value);
>   float getFloat(String name);
>   void setFloat(String name, float value);
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> An abstract class named ConfigurationBase should be implemented as follows:
> public abstract class ConfigurationBase implements Configuration {
>   abstract public String get(String nam);
>   abstract public String set(String name, String value);
>   public  int getInt(String name) { ... implementation in terms of get(String) ... }
>   public void setInt(String name, int value) {... implementation in terms of set(String, String) ...}
>   public float getFloat(String name)  { ... implementation in terms of get(String) ... }
>   public void setFloat(String name, float value)  {... implementation in terms of set(String, String) ...}
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> A concrete, default implementation will be provided as follows:
> public class ConfigurationImpl implements Writable extends ConfigurationBase {
>   private Properties properties;
>   // implement abstract methods from ConfigurationBase
>   public String get(String name) { ... implemented in terms of props ...}
>   public String set(String name, String value) { .. implemented in terms of props ... }
>   // Writable methods
>   public write(DataOutputStream out);
>   public readFields(DataInputStream in);
>   // permit chaining of configurations
>   public Configuration getDefaults();
>   public void setDefaults(Configuration defaults);
> }
> Only code which creates configurations should need to be updated, so this shouldn't be a huge change.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 13:26:25 2006
Return-Path: 
 <hadoop-dev-return-4544-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49124 invoked from network); 26 Oct 2006 13:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 13:26:25 -0000
Received: (qmail 87007 invoked by uid 500); 26 Oct 2006 13:26:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86981 invoked by uid 500); 26 Oct 2006 13:26:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86972 invoked by uid 99); 26 Oct 2006 13:26:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:26:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:26:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2D4A27142CB
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 06:25:18 -0700 (PDT)
Message-ID: <5963070.1161869118181.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 06:25:18 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-643) failure closing block of file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

failure closing block of file
-----------------------------

                 Key: HADOOP-643
                 URL: http://issues.apache.org/jira/browse/HADOOP-643
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.2
            Reporter: Johan Oskarson
            Priority: Critical


I've been getting "failure closing block of file" on random files.
Both datanode and tasktracker running on node7. No problems with pinging.
Guess it got stuck after the NPE in DataNode.

Job cannot start because of:

java.io.IOException: failure closing block of file /home/hadoop/mapred/system/submit_99u9cd/.job.jar.crc to node node7:50010
        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.internalClose(DFSClient.java:1199)
        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1163)
        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1241)
        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
        at org.apache.hadoop.fs.FSDataOutputStream$Summer.close(FSDataOutputStream.java:96)
        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
        at org.apache.hadoop.fs.FileUtil.copyContent(FileUtil.java:205)
        at org.apache.hadoop.fs.FileUtil.copyContent(FileUtil.java:190)
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:77)
        at org.apache.hadoop.dfs.DistributedFileSystem.copyFromLocalFile(DistributedFileSystem.java:186)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:289)
        at org.apache.hadoop.mapred.jobcontrol.Job.submit(Job.java:314)
        at org.apache.hadoop.mapred.jobcontrol.JobControl.startReadyJobs(JobControl.java:248)
        at org.apache.hadoop.mapred.jobcontrol.JobControl.run(JobControl.java:280)
        at java.lang.Thread.run(Thread.java:595)
Caused by: java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
        at java.io.DataInputStream.readFully(DataInputStream.java:176)
        at java.io.DataInputStream.readLong(DataInputStream.java:380)
        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.internalClose(DFSClient.java:1193)


Cxception in datanode.out on node7:
Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@1c86be5" java.lang.NullPointerException
        at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
        at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
        at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
        at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
        at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
        at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:480)
        at java.lang.Thread.run(Thread.java:595)


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 13:26:32 2006
Return-Path: 
 <hadoop-dev-return-4545-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49238 invoked from network); 26 Oct 2006 13:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 13:26:32 -0000
Received: (qmail 87441 invoked by uid 500); 26 Oct 2006 13:26:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87421 invoked by uid 500); 26 Oct 2006 13:26:42 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87412 invoked by uid 99); 26 Oct 2006 13:26:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:26:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:26:28 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E9CAB7142DB
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 06:25:25 -0700 (PDT)
Message-ID: <21573824.1161869125954.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 06:25:25 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-578) Failed tasks should not be put at the
 end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-578?page=all ]

Sanjay Dahiya updated HADOOP-578:
---------------------------------

    Attachment: Hadoop-578.patch

This patch 

- removes firstMapToTry and firstReduceToTry and starts from 0 every time a TaskTracker polls for new task. 
- removes the extra argument firstTaskToTry from findNewTask(). 



> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-578.patch
>
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 13:26:40 2006
Return-Path: 
 <hadoop-dev-return-4546-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49329 invoked from network); 26 Oct 2006 13:26:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 13:26:40 -0000
Received: (qmail 87734 invoked by uid 500); 26 Oct 2006 13:26:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87708 invoked by uid 500); 26 Oct 2006 13:26:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87699 invoked by uid 99); 26 Oct 2006 13:26:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:26:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:26:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 51F987142E1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 06:25:33 -0700 (PDT)
Message-ID: <22264302.1161869133175.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 06:25:33 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-578) Failed tasks should not be put at the
 end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-578?page=all ]

Sanjay Dahiya updated HADOOP-578:
---------------------------------

    Status: Patch Available  (was: In Progress)

> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-578.patch
>
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 13:30:22 2006
Return-Path: 
 <hadoop-dev-return-4547-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50748 invoked from network); 26 Oct 2006 13:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 13:30:22 -0000
Received: (qmail 2946 invoked by uid 500); 26 Oct 2006 13:30:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 2921 invoked by uid 500); 26 Oct 2006 13:30:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 2912 invoked by uid 99); 26 Oct 2006 13:30:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:30:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:30:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6675A71414C
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 06:29:18 -0700 (PDT)
Message-ID: <31596648.1161869358417.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 06:29:18 -0700 (PDT)
From: "Johan Oskarson (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-643) failure closing block of file
In-Reply-To: <5963070.1161869118181.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-643?page=comments#action_12444886 ] 
            
Johan Oskarson commented on HADOOP-643:
---------------------------------------

Just after filing this I subled upon HADOOP-604, same Issue.

Sorry about that.

> failure closing block of file
> -----------------------------
>
>                 Key: HADOOP-643
>                 URL: http://issues.apache.org/jira/browse/HADOOP-643
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Johan Oskarson
>            Priority: Critical
>
> I've been getting "failure closing block of file" on random files.
> Both datanode and tasktracker running on node7. No problems with pinging.
> Guess it got stuck after the NPE in DataNode.
> Job cannot start because of:
> java.io.IOException: failure closing block of file /home/hadoop/mapred/system/submit_99u9cd/.job.jar.crc to node node7:50010
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.internalClose(DFSClient.java:1199)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1163)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1241)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.close(FSDataOutputStream.java:96)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at org.apache.hadoop.fs.FileUtil.copyContent(FileUtil.java:205)
>         at org.apache.hadoop.fs.FileUtil.copyContent(FileUtil.java:190)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:77)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyFromLocalFile(DistributedFileSystem.java:186)
>         at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:289)
>         at org.apache.hadoop.mapred.jobcontrol.Job.submit(Job.java:314)
>         at org.apache.hadoop.mapred.jobcontrol.JobControl.startReadyJobs(JobControl.java:248)
>         at org.apache.hadoop.mapred.jobcontrol.JobControl.run(JobControl.java:280)
>         at java.lang.Thread.run(Thread.java:595)
> Caused by: java.net.SocketTimeoutException: Read timed out
>         at java.net.SocketInputStream.socketRead0(Native Method)
>         at java.net.SocketInputStream.read(SocketInputStream.java:129)
>         at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>         at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>         at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>         at java.io.DataInputStream.readFully(DataInputStream.java:176)
>         at java.io.DataInputStream.readLong(DataInputStream.java:380)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.internalClose(DFSClient.java:1193)
> Cxception in datanode.out on node7:
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@1c86be5" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:480)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 13:36:26 2006
Return-Path: 
 <hadoop-dev-return-4548-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 52752 invoked from network); 26 Oct 2006 13:36:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 13:36:26 -0000
Received: (qmail 17885 invoked by uid 500); 26 Oct 2006 13:36:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 17856 invoked by uid 500); 26 Oct 2006 13:36:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 17847 invoked by uid 99); 26 Oct 2006 13:36:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:36:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:36:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE6E57142CB
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 06:35:18 -0700 (PDT)
Message-ID: <26462614.1161869718974.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 06:35:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-613) The final merge on the reduces should
 feed the reduce directly
In-Reply-To: <32865816.1161196175060.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-613?page=all ]

Sanjay Dahiya reassigned HADOOP-613:
------------------------------------

    Assignee: Sanjay Dahiya  (was: Mahadev konar)

> The final merge on the reduces should feed the reduce directly
> --------------------------------------------------------------
>
>                 Key: HADOOP-613
>                 URL: http://issues.apache.org/jira/browse/HADOOP-613
>             Project: Hadoop
>          Issue Type: Improvement
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.8.0
>
>
> The final merge on the input to the reduce should use the iterators from HADOOP-611 directly rather than using a round trip to disk.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 16:16:23 2006
Return-Path: 
 <hadoop-dev-return-4549-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20931 invoked from network); 26 Oct 2006 16:16:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:16:23 -0000
Received: (qmail 18288 invoked by uid 500); 26 Oct 2006 16:16:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 18268 invoked by uid 500); 26 Oct 2006 16:16:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 18259 invoked by uid 99); 26 Oct 2006 16:16:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:16:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:16:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C560C71414C
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 09:15:17 -0700 (PDT)
Message-ID: <19669922.1161879317805.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 09:15:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-636) MapFile constructor should accept
 Progressible
In-Reply-To: <23627694.1161798016605.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-636?page=all ]

Doug Cutting updated HADOOP-636:
--------------------------------

    Attachment:     (was: HADOOP-636.patch)

> MapFile constructor should accept Progressible
> ----------------------------------------------
>
>                 Key: HADOOP-636
>                 URL: http://issues.apache.org/jira/browse/HADOOP-636
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.8.0
>
>
> MapFile's constructor should accept a Progressible and pass it down to the underlying SequenceFiles.  This permits DFS to signal task progress while writing blocks, and can keep reduce tasks from timing out when block writes are slow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 16:18:23 2006
Return-Path: 
 <hadoop-dev-return-4550-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 21613 invoked from network); 26 Oct 2006 16:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:18:23 -0000
Received: (qmail 23996 invoked by uid 500); 26 Oct 2006 16:18:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23978 invoked by uid 500); 26 Oct 2006 16:18:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23969 invoked by uid 99); 26 Oct 2006 16:18:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:18:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:18:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B92EF71414C
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 09:17:17 -0700 (PDT)
Message-ID: <4990643.1161879437755.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 09:17:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-636) MapFile constructor should accept
 Progressible
In-Reply-To: <23627694.1161798016605.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-636?page=all ]

Doug Cutting updated HADOOP-636:
--------------------------------

    Attachment: HADOOP-636.patch

Pass progressible in MapFileOutputFormat.

> MapFile constructor should accept Progressible
> ----------------------------------------------
>
>                 Key: HADOOP-636
>                 URL: http://issues.apache.org/jira/browse/HADOOP-636
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-636.patch
>
>
> MapFile's constructor should accept a Progressible and pass it down to the underlying SequenceFiles.  This permits DFS to signal task progress while writing blocks, and can keep reduce tasks from timing out when block writes are slow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 16:42:38 2006
Return-Path: 
 <hadoop-dev-return-4551-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 30464 invoked from network); 26 Oct 2006 16:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:42:38 -0000
Received: (qmail 96754 invoked by uid 500); 26 Oct 2006 16:42:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96730 invoked by uid 500); 26 Oct 2006 16:42:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96713 invoked by uid 99); 26 Oct 2006 16:42:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:42:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:42:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AD9007142C1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 09:41:17 -0700 (PDT)
Message-ID: <25336730.1161880877708.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 09:41:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-624) fix warning about pathSpec should
 start with '/' or '*' : mapOutput
In-Reply-To: <23206464.1161641056815.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-624?page=all ]

Owen O'Malley updated HADOOP-624:
---------------------------------

    Status: Patch Available  (was: Open)

> fix warning about pathSpec should start with '/' or '*' : mapOutput
> -------------------------------------------------------------------
>
>                 Key: HADOOP-624
>                 URL: http://issues.apache.org/jira/browse/HADOOP-624
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: map-out-url.patch
>
>
> Every task tracker start gets a complaint that the mapOutput servlet has a bad path.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 16:49:30 2006
Return-Path: 
 <hadoop-dev-return-4552-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 32653 invoked from network); 26 Oct 2006 16:49:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:49:30 -0000
Received: (qmail 11048 invoked by uid 500); 26 Oct 2006 16:49:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 11024 invoked by uid 500); 26 Oct 2006 16:49:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 11012 invoked by uid 99); 26 Oct 2006 16:49:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:49:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:49:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 513E971414C
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 09:48:18 -0700 (PDT)
Message-ID: <22628038.1161881298329.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 09:48:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya updated HADOOP-565:
---------------------------------

    Attachment: Hadoop-565_1.patch.txt

Removed task tracker changes which got submitted with HADOOP-624, thanks owen for pointing that. 

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 16:55:23 2006
Return-Path: 
 <hadoop-dev-return-4553-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34824 invoked from network); 26 Oct 2006 16:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:55:23 -0000
Received: (qmail 23165 invoked by uid 500); 26 Oct 2006 16:55:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23140 invoked by uid 500); 26 Oct 2006 16:55:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23131 invoked by uid 99); 26 Oct 2006 16:55:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:55:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:55:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6AA697142CB
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 09:54:18 -0700 (PDT)
Message-ID: <2328976.1161881658434.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 09:54:18 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-578) Failed tasks should not be put at
 the end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-578?page=comments#action_12444923 ] 
            
Owen O'Malley commented on HADOOP-578:
--------------------------------------

looks good
+1

> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-578.patch
>
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 17:04:08 2006
Return-Path: 
 <hadoop-dev-return-4554-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38094 invoked from network); 26 Oct 2006 17:04:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 17:04:08 -0000
Received: (qmail 45390 invoked by uid 500); 26 Oct 2006 17:04:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 45362 invoked by uid 500); 26 Oct 2006 17:04:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 45353 invoked by uid 99); 26 Oct 2006 17:04:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:04:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a8.dreamhost.com)
 (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:04:02 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net
 [74.229.189.244])
	by spunkymail-a8.dreamhost.com (Postfix) with ESMTP id 7D22110AEB7
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 10:03:44 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <4EED12EF-EEB0-4511-A5E6-97579E3C0FE1@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: hadoop-dev@lucene.apache.org
From: Grant Ingersoll <gsingers@apache.org>
Subject: Wiki
Date: Thu, 26 Oct 2006 13:03:40 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I know Hadoop is separate from Nutch, but I found the Hadoop Tutorial  
(http://wiki.apache.org/nutch/NutchHadoopTutorial) on the Nutch Wiki  
to be quite informative in filling in some gray areas for me on how  
to get Hadoop working, so I was wondering if it is all right to link  
to this one, or should some effort be made (by me) to extract the  
relevant Hadoop pieces from this link and put them in a new page on  
the Hadoop wiki?  I know some users may be confused by the talk of  
Nutch in it.


Thanks,
Grant




From MAILER-DAEMON Thu Oct 26 17:30:24 2006
Return-Path: 
 <hadoop-dev-return-4555-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44578 invoked from network); 26 Oct 2006 17:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 17:30:24 -0000
Received: (qmail 9190 invoked by uid 500); 26 Oct 2006 17:30:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9169 invoked by uid 500); 26 Oct 2006 17:30:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9160 invoked by uid 99); 26 Oct 2006 17:30:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:30:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:30:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 45FE871414C
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 10:29:18 -0700 (PDT)
Message-ID: <9474728.1161883758284.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 10:29:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya updated HADOOP-565:
---------------------------------

    Attachment: Hadoop-565_lib.tar.gz

Attaching jetty 6 and dependent libs used with this patch. 
[4.1MB attachment]

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 17:34:31 2006
Return-Path: 
 <hadoop-dev-return-4556-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46434 invoked from network); 26 Oct 2006 17:34:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 17:34:31 -0000
Received: (qmail 19267 invoked by uid 500); 26 Oct 2006 17:34:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 19239 invoked by uid 500); 26 Oct 2006 17:34:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 19100 invoked by uid 99); 26 Oct 2006 17:34:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:34:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:34:26 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 724377142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 10:33:19 -0700 (PDT)
Message-ID: <17193875.1161883999464.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 10:33:19 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-644) should dump stacks before timing out
 task
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

should dump stacks before timing out task
-----------------------------------------

                 Key: HADOOP-644
                 URL: http://issues.apache.org/jira/browse/HADOOP-644
             Project: Hadoop
          Issue Type: New Feature
          Components: mapred
            Reporter: Doug Cutting


When a task process times out and is killed it is often difficult to determine why.  If its stack was dumped prior to killing it, then debugging would be vastly simplified.  Ideally the stack dump would be available through the web ui, but even the log would be sufficient.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 17:40:51 2006
Return-Path: 
 <hadoop-dev-return-4557-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48298 invoked from network); 26 Oct 2006 17:40:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 17:40:51 -0000
Received: (qmail 34767 invoked by uid 500); 26 Oct 2006 17:41:02 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34739 invoked by uid 500); 26 Oct 2006 17:41:02 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34730 invoked by uid 99); 26 Oct 2006 17:41:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:41:02 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of james.w.todd@gmail.com
 designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:40:48 -0700
Received: by ug-out-1314.google.com with SMTP id k40so455986ugc
        for <hadoop-dev@lucene.apache.org>;
 Thu, 26 Oct 2006 10:40:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Jh3q7iT7BSd1j3/UUn3UNnGUufYNFuP1apxNjrKXT4iWyNZQvEtj/DY4rXkStUaApZKvd0U3Tlj320tK5I9u3VJ/LQTIAMu6pZP9ZBxq0iQ/cRdoUn3W44WRs8G2XwXK+xopqmI/Dv282T1/cHnLOT8no3rZm38IFUClNSOLBz8=
Received: by 10.66.221.19 with SMTP id t19mr3295881ugg;
        Thu, 26 Oct 2006 10:40:24 -0700 (PDT)
Received: by 10.67.15.3 with HTTP; Thu, 26 Oct 2006 10:40:24 -0700 (PDT)
Message-ID: <b0ff1e2d0610261040le5862efrc0e30b13930931f8@mail.gmail.com>
Date: Thu, 26 Oct 2006 10:40:24 -0700
From: "James Todd" <james.w.todd@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: Re: Wiki
In-Reply-To: <4EED12EF-EEB0-4511-A5E6-97579E3C0FE1@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_24913_27161643.1161884424568"
References: <4EED12EF-EEB0-4511-A5E6-97579E3C0FE1@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24913_27161643.1161884424568
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

agreed.

i'm interested in running only dfs at this time and have just about got a
runtime boiled down independent from
the default scripts which assume ssh/rsync/etc. my goal is to have a
deployable zip upon which one can add
prebaked configurations specific to the target environment. 1 sh, 1 lib dir
and optional configs.

so, i'd like to see the sort of subsystem breakout you are referring to and
i can possibly help w/ dfs aspsects.

hth,

- james

On 10/26/06, Grant Ingersoll <gsingers@apache.org> wrote:
>
> I know Hadoop is separate from Nutch, but I found the Hadoop Tutorial
> (http://wiki.apache.org/nutch/NutchHadoopTutorial) on the Nutch Wiki
> to be quite informative in filling in some gray areas for me on how
> to get Hadoop working, so I was wondering if it is all right to link
> to this one, or should some effort be made (by me) to extract the
> relevant Hadoop pieces from this link and put them in a new page on
> the Hadoop wiki?  I know some users may be confused by the talk of
> Nutch in it.
>
>
> Thanks,
> Grant
>
>
>
>

------=_Part_24913_27161643.1161884424568--

From MAILER-DAEMON Thu Oct 26 17:52:25 2006
Return-Path: 
 <hadoop-dev-return-4558-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 51968 invoked from network); 26 Oct 2006 17:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 17:52:25 -0000
Received: (qmail 63078 invoked by uid 500); 26 Oct 2006 17:52:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63057 invoked by uid 500); 26 Oct 2006 17:52:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63044 invoked by uid 99); 26 Oct 2006 17:52:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:52:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:52:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B61CE7142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 10:51:17 -0700 (PDT)
Message-ID: <19662319.1161885077743.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 10:51:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-601) we need some rpc retry framework
In-Reply-To: <18721500.1160688154977.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-601?page=comments#action_12444936 ] 
            
Doug Cutting commented on HADOOP-601:
-------------------------------------

Note: VersionedProtocol.getProtocolVersion() should retry at least a few times.

> we need some rpc retry framework
> --------------------------------
>
>                 Key: HADOOP-601
>                 URL: http://issues.apache.org/jira/browse/HADOOP-601
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: ipc
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>
> We need some mechanism for RPC calls that get exceptions to automatically retry the call under certain circumstances. In particular, we often end up with calls to rpcs being wrapped with retry loops for timeouts. We should be able to make a retrying proxy that will call the rpc and retry in some circumstances.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 18:26:59 2006
Return-Path: 
 <hadoop-dev-return-4559-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 64664 invoked from network); 26 Oct 2006 18:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 18:26:59 -0000
Received: (qmail 52337 invoked by uid 500); 26 Oct 2006 18:27:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52130 invoked by uid 500); 26 Oct 2006 18:27:09 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52120 invoked by uid 99); 26 Oct 2006 18:27:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 11:27:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.148.227.154] (HELO rwcrmhc14.comcast.net)
 (216.148.227.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 11:26:54 -0700
Received: from [192.168.168.15]
 (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20061026182633m1400kpi4ue>; Thu, 26 Oct 2006 18:26:33 +0000
Message-ID: <4540FDD8.2020103@apache.org>
Date: Thu, 26 Oct 2006 11:26:32 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: Wiki
References: <4EED12EF-EEB0-4511-A5E6-97579E3C0FE1@apache.org>
In-Reply-To: <4EED12EF-EEB0-4511-A5E6-97579E3C0FE1@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> I know Hadoop is separate from Nutch, but I found the Hadoop Tutorial 
> (http://wiki.apache.org/nutch/NutchHadoopTutorial) on the Nutch Wiki to 
> be quite informative in filling in some gray areas for me on how to get 
> Hadoop working, so I was wondering if it is all right to link to this 
> one, or should some effort be made (by me) to extract the relevant 
> Hadoop pieces from this link and put them in a new page on the Hadoop 
> wiki?  I know some users may be confused by the talk of Nutch in it.

That does look like a good tutorial, and I don't have a problem with 
linking to it from the Hadoop wiki.  Or, if you're feeling energetic, 
copy it to the Hadoop wiki & remove the Nutch-specifics.  Then you might 
make the Nutch wiki page link to your page in Hadoop's wiki.

A few notes, however:

1. mapred.map.tasks and mapred.reduce.tasks should be in 
mapred-default.xml, not in hadoop-site.xml.  Otherwise jobs cannot 
override these.  Nutch sometimes does override these.

2. Config files now support variables, so that setting just 
hadoop.tmp.dir in hadoop-site.xml is usually sufficient, since all other 
directories in the defaults are relative to this.

3. When setting HADOOP_MASTER it's usually advisable to set 
HADOOP_SLAVE_SLEEP=1, or else the rsyncs can fail.

Doug

From MAILER-DAEMON Thu Oct 26 19:27:58 2006
Return-Path: 
 <hadoop-dev-return-4560-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 808 invoked from network); 26 Oct 2006 19:27:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 19:27:58 -0000
Received: (qmail 75810 invoked by uid 500); 26 Oct 2006 19:28:05 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75775 invoked by uid 500); 26 Oct 2006 19:28:05 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75704 invoked by uid 99); 26 Oct 2006 19:28:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 12:28:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 12:27:51 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9ECAE7142D6
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 12:26:49 -0700 (PDT)
Message-ID: <16553721.1161890809647.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 12:26:49 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12444950 ] 
            
Sameer Paranjpye commented on HADOOP-538:
-----------------------------------------

Some more comments on the native code:

Makefiles etc.

- We should compile with '-Wall'. 
- What about 64-bit vs 32-bit builds, this makefile will generate the OS default, which may be 
incompatible with the JVM used. For instance on a 64-bit machine with a 32-bit JVM this will generate
a 64-bit library, which will be incompatible with the JVM. We should check the JVM version and compile
with -m32 or -m64 as appropriate.

-----------

Index: src/native/org/apache/hadoop/io/compress/zlib/ZlibCompressor.c

+JNIEXPORT jlong JNICALL
+Java_org_apache_hadoop_io_compress_zlib_ZlibCompressor_init(
+	JNIEnv *env, jclass class, jint level, jint strategy
+	) {
+	// Create a z_stream
+    z_stream *stream = malloc(sizeof(z_stream));
+    if (!stream) {
+		THROW(env, "java/lang/OutOfMemoryError", NULL);
+		return (jlong)0;
+    } 
+    memset((void*)stream, 0, sizeof(z_stream));
...
...
...
+
+    return (jlong)((int)stream);
+}
+

Is this the only way to return a void* to the JVM? This is a bad, unsafe cast, not 64-bit safe. 
If a cast like this is needed it should be '(jlong)(stream)'.


+JNIEXPORT jint JNICALL
+Java_org_apache_hadoop_io_compress_zlib_ZlibCompressor_deflateBytesDirect(
+	JNIEnv *env, jobject this
+	) {
+	// Get members of ZlibCompressor
+    z_stream *stream = (z_stream *)
+  				((int)(*env)->GetLongField(env, this, ZlibCompressor_stream));
...
...
...
+}

Cast to int is not 64-bit safe.


-------------
Index: src/native/org/apache/hadoop/io/compress/zlib/ZlibDecompressor.c


+JNIEXPORT jlong JNICALL
+Java_org_apache_hadoop_io_compress_zlib_ZlibDecompressor_init(
+	JNIEnv *env, jclass cls
+	) {
+    z_stream *stream = malloc(sizeof(z_stream));
+    memset((void*)stream, 0, sizeof(z_stream));
+
...
...
...
+	return (jint)((int)stream);
+}


Cast is not 64-bit safe.



-----------------
Index: src/native/org/apache/hadoop/io/compress/zlib/org_apache_hadoop_io_compress_zlib_util.h

+// TODO: Fix the below macro for 64-bit systems
+// Helpful macro to convert a jlong to z_stream*
+#define ZSTREAM(stream) ((z_stream*)((int)stream))


Act on the comment, please. :)



-----------------
Index: src/native/org_apache_hadoop.h

+ 
+ #define THROW(env, exception_name, message) \
+ 			{ \
+			 	jclass ecls = (*env)->FindClass(env, exception_name); \
+			 	if (ecls) { \
+					(*env)->ThrowNew(env, ecls, message); \
+		 		} \
+ 			}
+		 			 			


This macro creates a local reference to a class in jclass and does not destroy it, causing a memory leak.
Add a '(*env)->DestroyLocalReference(env, ecls)' statement.



> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 19:28:24 2006
Return-Path: 
 <hadoop-dev-return-4561-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1596 invoked from network); 26 Oct 2006 19:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 19:28:24 -0000
Received: (qmail 79761 invoked by uid 500); 26 Oct 2006 19:28:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 79711 invoked by uid 500); 26 Oct 2006 19:28:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 79695 invoked by uid 99); 26 Oct 2006 19:28:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 12:28:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 12:28:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 754067142F0
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 12:27:18 -0700 (PDT)
Message-ID: <9699824.1161890838476.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 12:27:18 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12444960 ] 
            
Devaraj Das commented on HADOOP-76:
-----------------------------------

Regarding the PhasedRecordWriter class, I think this should provide the option of creating a file, write to them and then call commit or abort. The current implementation binds it to a RecordWriter, but this should cater to things like Sequence files also (for e.g., RandomWriter should be able to use this functionality).

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:03:37 2006
Return-Path: 
 <hadoop-dev-return-4562-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22280 invoked from network); 26 Oct 2006 20:03:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:03:37 -0000
Received: (qmail 48364 invoked by uid 500); 26 Oct 2006 20:03:47 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48341 invoked by uid 500); 26 Oct 2006 20:03:47 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48332 invoked by uid 99); 26 Oct 2006 20:03:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:03:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:03:33 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A1E637142D8
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:02:31 -0700 (PDT)
Message-ID: <16660868.1161892951659.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:02:31 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-563) DFS client should try to re-new lease
 if it gets a lease expiration exception when it adds a block to a file
In-Reply-To: <28125744.1159383470163.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-563?page=all ]

Doug Cutting updated HADOOP-563:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> DFS client should try to re-new lease if it gets a lease expiration exception when it adds a block to a file
> ------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-563
>                 URL: http://issues.apache.org/jira/browse/HADOOP-563
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>            Reporter: Runping Qi
>         Assigned To: dhruba borthakur
>             Fix For: 0.8.0
>
>         Attachments: softhardlease.patch
>
>
> In the current DFS client implementation, there is one thread responsible for renewing leases. If for whatever reason, that thread runs behind, the lease may get expired. That causes the client gets a lease expiration exception when writing a block. The consequence of that is very devastating: the client can no longer write to the file, and all the partial results up to that point are gone! This is especially costly for some map reduce jobs where a reducer may take hours or even days to sort the intermediate results before the actual reducing work can start.
> The problem will be solved if the flush method of  DFS client can renew lease on demand. That is, it should try to re-new lease  when it catches a lease expiration exception. That way,  even when under heavy load and the lease renewing thread runs behind, the reducer  task (or what ever tasks use that client) can preceed.  That will be a huge saving in some cases (where sorting intermediate results take a long time to finish). We can set a limit on the number of retries, and may even make it configurable (or changeable at runtime). 
> The namenode can use a different expiration time that is much higher than the current 1 minute lease expiration time for cleaning  up the abandoned unclosed files.
>  

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:03:39 2006
Return-Path: 
 <hadoop-dev-return-4563-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 22349 invoked from network); 26 Oct 2006 20:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:03:39 -0000
Received: (qmail 48741 invoked by uid 500); 26 Oct 2006 20:03:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48721 invoked by uid 500); 26 Oct 2006 20:03:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48712 invoked by uid 99); 26 Oct 2006 20:03:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:03:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:03:36 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E92D77142DB
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:02:34 -0700 (PDT)
Message-ID: <27569488.1161892954952.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:02:34 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-635) hadoop dfs copy, move commands should
 accept multiple source files as arguments
In-Reply-To: <30539743.1161748936524.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-635?page=all ]

Doug Cutting updated HADOOP-635:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Dhruba!

> hadoop dfs copy, move commands should accept multiple source files as arguments
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-635
>                 URL: http://issues.apache.org/jira/browse/HADOOP-635
>             Project: Hadoop
>          Issue Type: New Feature
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>             Fix For: 0.8.0
>
>         Attachments: copymoveargs.patch
>
>
> hadoop dfs copy, move commands should accept multiple source files as arguments

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:23:31 2006
Return-Path: 
 <hadoop-dev-return-4564-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 37662 invoked from network); 26 Oct 2006 20:23:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:23:31 -0000
Received: (qmail 84381 invoked by uid 500); 26 Oct 2006 20:23:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84346 invoked by uid 500); 26 Oct 2006 20:23:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84324 invoked by uid 99); 26 Oct 2006 20:23:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:23:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:23:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C58737142DC
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:22:21 -0700 (PDT)
Message-ID: <3820932.1161894141805.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:22:21 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-641) Name-node should demand a block report
 from resurrected data-nodes.
In-Reply-To: <17516870.1161824836638.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-641?page=all ]

Doug Cutting updated HADOOP-641:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> Name-node should demand a block report from resurrected data-nodes.
> -------------------------------------------------------------------
>
>                 Key: HADOOP-641
>                 URL: http://issues.apache.org/jira/browse/HADOOP-641
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.1.0, 0.7.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.8.0
>
>         Attachments: ResurrectDN.patch
>
>
> 1. This bug contributed to the crash discussed in HADOOP-572.
> The problem is that when the name-node is busy, and is not able to process all requests from its clients,
> it can consider one of data-nodes dead and discard its blocks sending them into the neededRelications list.
> When it finally gets the heartbeat from this data-node it resurrects the node, but not the data-node blocks,
> and hence continues to replicate them.
> Of course, eventually the name-node will receive the block report from this data-node, but it could take up
> to 1 hour. During this time it proceeds with unnecessary block replications, which could be avoided if the
> data-node sent its block report right after the resurrection.
> I modified code so that the name-node requests block report if it receives a heartbeat from a dead data-node.
> I introduced a new command type in the BlockCommand class.
> I replaced multiple boolean indicators of the command types by one enum field.
> I changed the DatanodeProtocol version.
> 2. This patch also includes a fix for the data-node registration. If a data-nodes times out during registration
> it silently exits, which is hard to notice with a large number of nodes. This patch places registration in a loop,
> so that it could retry.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:30:22 2006
Return-Path: 
 <hadoop-dev-return-4565-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 40969 invoked from network); 26 Oct 2006 20:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:30:22 -0000
Received: (qmail 96168 invoked by uid 500); 26 Oct 2006 20:30:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 96144 invoked by uid 500); 26 Oct 2006 20:30:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 96135 invoked by uid 99); 26 Oct 2006 20:30:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:30:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:30:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A47747142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:29:17 -0700 (PDT)
Message-ID: <7148958.1161894557670.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:29:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-642) Explicit timeout for ipc.Client
In-Reply-To: <10207486.1161826218000.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-642?page=all ]

Doug Cutting updated HADOOP-642:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Konstantin!

> Explicit timeout for ipc.Client
> -------------------------------
>
>                 Key: HADOOP-642
>                 URL: http://issues.apache.org/jira/browse/HADOOP-642
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.7.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.8.0
>
>         Attachments: IpcClientTimeout.patch
>
>
> This bug contributed to the crash discussed in HADOOP-572.
> ipc.Client is trying to establish connection with its server with an infinite timeout.
> For an unknown to me reason infinity equals 3 minutes in this case.
> I guess it is configured somewhere in the native socket implementation.
> With this timeout data-nodes had only 3 chances to send heartbeats during the 10
> minute expiration interval. And with a very busy name-node this makes their
> chances to be accepted close to 0.
> I included an explicit call of Socket.connect() with a timeout set to 1 min, which is
> our default for all connections.
> Modified a log message to include information that turned out to be useful for debugging.
> Removed unnecessary imports.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:34:30 2006
Return-Path: 
 <hadoop-dev-return-4566-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 42801 invoked from network); 26 Oct 2006 20:34:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:34:30 -0000
Received: (qmail 167 invoked by uid 500); 26 Oct 2006 20:34:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 148 invoked by uid 500); 26 Oct 2006 20:34:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 139 invoked by uid 99); 26 Oct 2006 20:34:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:34:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:34:27 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 079207142C1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:33:18 -0700 (PDT)
Message-ID: <27067722.1161894798027.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:33:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-638) TaskTracker missing synchronization
 around tasks variable access
In-Reply-To: <11864447.1161812176544.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-638?page=all ]

Doug Cutting updated HADOOP-638:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Nigel!

> TaskTracker missing synchronization around tasks variable access
> ----------------------------------------------------------------
>
>                 Key: HADOOP-638
>                 URL: http://issues.apache.org/jira/browse/HADOOP-638
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>             Fix For: 0.8.0
>
>         Attachments: tasktracker-sync.patch
>
>
> TaskTracker has one access to the tasks variable (line 449) that is not synchronized.  It should be.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:36:22 2006
Return-Path: 
 <hadoop-dev-return-4567-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43291 invoked from network); 26 Oct 2006 20:36:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:36:22 -0000
Received: (qmail 1960 invoked by uid 500); 26 Oct 2006 20:36:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1928 invoked by uid 500); 26 Oct 2006 20:36:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1918 invoked by uid 99); 26 Oct 2006 20:36:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:36:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:36:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 90C527142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:35:16 -0700 (PDT)
Message-ID: <18535487.1161894916590.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:35:16 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Map-reduce task does not finish correctly when -reducer NONE is specified
-------------------------------------------------------------------------

                 Key: HADOOP-645
                 URL: http://issues.apache.org/jira/browse/HADOOP-645
             Project: Hadoop
          Issue Type: Bug
          Components: contrib/streaming
    Affects Versions: 0.7.2
            Reporter: dhruba borthakur


Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:

java.lang.IllegalArgumentException: URI is not hierarchical
TaskRunner: at java.io.File.<init>(File.java:335)
TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
TaskRunner: sideEffectURI_ file:output length 11


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:36:23 2006
Return-Path: 
 <hadoop-dev-return-4568-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 43319 invoked from network); 26 Oct 2006 20:36:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:36:23 -0000
Received: (qmail 1990 invoked by uid 500); 26 Oct 2006 20:36:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1965 invoked by uid 500); 26 Oct 2006 20:36:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1926 invoked by uid 99); 26 Oct 2006 20:36:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:36:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:36:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D625C7142C1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:35:17 -0700 (PDT)
Message-ID: <30430392.1161894917874.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:35:17 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-624) fix warning about pathSpec should
 start with '/' or '*' : mapOutput
In-Reply-To: <23206464.1161641056815.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-624?page=all ]

Doug Cutting updated HADOOP-624:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Owen!

> fix warning about pathSpec should start with '/' or '*' : mapOutput
> -------------------------------------------------------------------
>
>                 Key: HADOOP-624
>                 URL: http://issues.apache.org/jira/browse/HADOOP-624
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: map-out-url.patch
>
>
> Every task tracker start gets a complaint that the mapOutput servlet has a bad path.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:39:24 2006
Return-Path: 
 <hadoop-dev-return-4569-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44028 invoked from network); 26 Oct 2006 20:39:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:39:24 -0000
Received: (qmail 8119 invoked by uid 500); 26 Oct 2006 20:39:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8096 invoked by uid 500); 26 Oct 2006 20:39:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8087 invoked by uid 99); 26 Oct 2006 20:39:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:39:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:39:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 96CA47142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:38:17 -0700 (PDT)
Message-ID: <1452125.1161895097615.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:38:17 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-645?page=all ]

dhruba borthakur reassigned HADOOP-645:
---------------------------------------

    Assignee: dhruba borthakur

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 20:51:21 2006
Return-Path: 
 <hadoop-dev-return-4570-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46995 invoked from network); 26 Oct 2006 20:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 20:51:21 -0000
Received: (qmail 21194 invoked by uid 500); 26 Oct 2006 20:51:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21168 invoked by uid 500); 26 Oct 2006 20:51:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21159 invoked by uid 99); 26 Oct 2006 20:51:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:51:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 13:51:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 39FC77142C1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 13:50:18 -0700 (PDT)
Message-ID: <30919237.1161895818234.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 13:50:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-578) Failed tasks should not be put at the
 end of the job tracker's queue
In-Reply-To: <21547759.1160069059588.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-578?page=all ]

Doug Cutting updated HADOOP-578:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Sanjay!

> Failed tasks should not be put at the end of the job tracker's queue
> --------------------------------------------------------------------
>
>                 Key: HADOOP-578
>                 URL: http://issues.apache.org/jira/browse/HADOOP-578
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.6.2
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>             Fix For: 0.8.0
>
>         Attachments: Hadoop-578.patch
>
>
> This functionality was basically a workaround for other problems, which have been fixed. The impact of putting them at the end of the work queue is that if you have 100,000 maps, and the Mapper fails deterministically, you'll run 300,000+ attempts before your job is killed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 21:05:46 2006
Return-Path: 
 <hadoop-dev-return-4571-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 50926 invoked from network); 26 Oct 2006 21:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 21:05:46 -0000
Received: (qmail 51235 invoked by uid 500); 26 Oct 2006 21:05:57 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51211 invoked by uid 500); 26 Oct 2006 21:05:57 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51202 invoked by uid 99); 26 Oct 2006 21:05:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 14:05:57 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.126.228.149] (HELO rsmtp1.corp.yahoo.com)
 (207.126.228.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 14:05:45 -0700
Received: from [10.72.108.58] (arkady-mac.corp.yahoo.com [10.72.108.58])
	by rsmtp1.corp.yahoo.com (8.13.6/8.13.6/y.rout) with ESMTP id k9QL5Ekl086528
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 14:05:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:content-type:message-id:
	content-transfer-encoding:from:subject:date:to:x-mailer;
	b=pOGF5Lkse1puPtWIzbCGtUMKtIz/j3tH8y+K9X2p0/kBwFASyZC5jJqyoX3xNvD7
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
References: <18535487.1161894916590.JavaMail.root@brutus>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <670ebf7daeb9d3dddab76bdc61b7ddd5@yahoo-inc.com>
Content-Transfer-Encoding: 7bit
From: Arkady Borkovsky <arkady@yahoo-inc.com>
Subject: Re: [jira] Created: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
Date: Thu, 26 Oct 2006 14:05:13 -0700
To: hadoop-dev@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org

In addition to the exception, the output files in create in DFS are  
completely wrong.
(with -reducer NONE, the outputs of map tasks are supposed to be copied  
to DFS output directory)

On Oct 26, 2006, at 1:35 PM, dhruba borthakur (JIRA) wrote:

> Map-reduce task does not finish correctly when -reducer NONE is  
> specified
> ----------------------------------------------------------------------- 
> --
>
>                  Key: HADOOP-645
>                  URL: http://issues.apache.org/jira/browse/HADOOP-645
>              Project: Hadoop
>           Issue Type: Bug
>           Components: contrib/streaming
>     Affects Versions: 0.7.2
>             Reporter: dhruba borthakur
>
>
> Map-reduce task does not finish correctly when -reducer NONE is  
> specified, The NONE option means that the reducer should not be  
> generating any output. Using this option causes an exception in the  
> task tracker:
>
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at  
> org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java: 
> 583)
> TaskRunner: at  
> org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at  
> org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at  
> org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11
>
>
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the  
> administrators:  
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see:  
> http://www.atlassian.com/software/jira
>
>


From MAILER-DAEMON Thu Oct 26 21:44:28 2006
Return-Path: 
 <hadoop-dev-return-4572-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 66954 invoked from network); 26 Oct 2006 21:44:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 21:44:28 -0000
Received: (qmail 37854 invoked by uid 500); 26 Oct 2006 21:44:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37834 invoked by uid 500); 26 Oct 2006 21:44:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37800 invoked by uid 99); 26 Oct 2006 21:44:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 14:44:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 14:44:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B47877142D2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 14:43:21 -0700 (PDT)
Message-ID: <13603316.1161899001736.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 14:43:21 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-604) DataNodes get NullPointerException
 and become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-604?page=comments#action_12445010 ] 
            
dhruba borthakur commented on HADOOP-604:
-----------------------------------------

I was investigating HADOOP-643. The problem is that the FSDataSet is not protected by locks. In this case, data-receive thread is receiving some data from another datanaode and is traversing the dataset to validate that the directory is valid. At the same time,  the main datanode thread (offerService()) could be modifying the FSDataset. Protecting the DataXceiveServer thread from the offerservice thread is all this is needed.

It appears that the DataTransfer does not need any protection.

> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 21:53:23 2006
Return-Path: 
 <hadoop-dev-return-4573-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 71912 invoked from network); 26 Oct 2006 21:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 21:53:23 -0000
Received: (qmail 57108 invoked by uid 500); 26 Oct 2006 21:53:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57083 invoked by uid 500); 26 Oct 2006 21:53:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57074 invoked by uid 99); 26 Oct 2006 21:53:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 14:53:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 14:53:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3E1337142C1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 14:52:18 -0700 (PDT)
Message-ID: <4636118.1161899538251.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 14:52:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Doug Cutting updated HADOOP-565:
--------------------------------

    Status: Open  (was: Patch Available)

When I apply this, TestMiniMRWithDFS fails with:

------------- Standard Error -----------------
Task tracker crashed:
java.net.BindException: Address already in use
	at java.net.PlainSocketImpl.socketBind(Native Method)
	at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
	at java.net.ServerSocket.bind(ServerSocket.java:319)
	at java.net.ServerSocket.<init>(ServerSocket.java:185)
	at java.net.ServerSocket.<init>(ServerSocket.java:141)
	at org.mortbay.jetty.bio.SocketConnector.newServerSocket(SocketConnector.java:78)
	at org.mortbay.jetty.bio.SocketConnector.open(SocketConnector.java:72)
	at org.mortbay.jetty.AbstractConnector.doStart(AbstractConnector.java:313)
	at org.mortbay.jetty.bio.SocketConnector.doStart(SocketConnector.java:136)
	at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:38)
	at org.mortbay.jetty.Server.doStart(Server.java:217)
	at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:38)
	at org.apache.hadoop.mapred.StatusHttpServer.start(StatusHttpServer.java:186)
	at org.apache.hadoop.mapred.TaskTracker.<init>(TaskTracker.java:395)
	at org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner.run(MiniMRCluster.java:120)
	at java.lang.Thread.run(Thread.java:595)



> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:01:26 2006
Return-Path: 
 <hadoop-dev-return-4574-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75275 invoked from network); 26 Oct 2006 22:01:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:01:26 -0000
Received: (qmail 70733 invoked by uid 500); 26 Oct 2006 22:01:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70519 invoked by uid 500); 26 Oct 2006 22:01:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70510 invoked by uid 99); 26 Oct 2006 22:01:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:01:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:01:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B6E9C7142DC
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:00:18 -0700 (PDT)
Message-ID: <2562749.1161900018746.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:00:18 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12445017 ] 
            
Owen O'Malley commented on HADOOP-611:
--------------------------------------

The location of the temporary merge files should use Configuration.getLocalPath(path) so that the intermediate merge files will be put onto mutliple disks.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.8.0
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:09:22 2006
Return-Path: 
 <hadoop-dev-return-4575-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 79875 invoked from network); 26 Oct 2006 22:09:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:09:22 -0000
Received: (qmail 84347 invoked by uid 500); 26 Oct 2006 22:09:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 84324 invoked by uid 500); 26 Oct 2006 22:09:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 84315 invoked by uid 99); 26 Oct 2006 22:09:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:09:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:09:18 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC6F77142CE
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:08:16 -0700 (PDT)
Message-ID: <6602315.1161900496769.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:08:16 -0700 (PDT)
From: "Christian Kunz (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-646) name node server does not load large
 (> 2^31 bytes) edits file
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

name node server does not load large (> 2^31 bytes) edits file
--------------------------------------------------------------

                 Key: HADOOP-646
                 URL: http://issues.apache.org/jira/browse/HADOOP-646
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.1
            Reporter: Christian Kunz
            Priority: Critical


FileInputStream.available() returns negative values when reading a large file (> 2^31 bytes) -- this is a known (unresolved) java bug:
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6402006

Consequence: a large edits file is not loaded and deleted without any warnings. The system reverts back to the old fsimage.

This happens in jdk1.6 as well, i.e. the bug has not yet been fixed.

In addition, when finally I was able to load my big cron-backed-up edits file (6.5 GB)  with a kludgy work-around, the blocks did not exist anymore in the data node servers, probably deleted from the previous attempts when the name node server did not know about the changed situation. 

Moral till this is fixed or worked-around: don't wait too long to restart the name node server. Otherwise this is a way to lose the entire dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:11:21 2006
Return-Path: 
 <hadoop-dev-return-4576-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80769 invoked from network); 26 Oct 2006 22:11:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:11:21 -0000
Received: (qmail 86717 invoked by uid 500); 26 Oct 2006 22:11:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86695 invoked by uid 500); 26 Oct 2006 22:11:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86686 invoked by uid 99); 26 Oct 2006 22:11:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:11:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:11:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6C8957142D1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:10:18 -0700 (PDT)
Message-ID: <9278197.1161900618442.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:10:18 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-576?page=all ]

Mahadev konar updated HADOOP-576:
---------------------------------

    Attachment: streaming.patch

This patch makes cachign available in streaming. So you can specify an option to cachefile as 

bin/hadoop jar hadoop-streaming.jar -cacheFile dfs://host:port/path_in_dfsof_fileorarchive#NAME

This would lead to a symlink NAME in your current working directory pointing to 
(i) in case of a file the symlink points to the file where the file has been localized
(ii) in case of archives the symlink points to the directory where your archives have been localized.

This patch also makes available the symlinks in conventional hadoop. 
To create a symlink providing a fragment is necessary (meaning specifying NAME in the uri is necessary).
To create a symlink in conventional Hadoop you would need to do this :

DistributedCache.createSymlink(jobconf)

also there is method DistributedCache.checkURIs(fileURIs, archiveURIS)
this checks to see if there is a fragment collision and returns false if the fragments are not specified and if there is a fragment collision it returns false.

So the correct order in which conventional hadoop users should be using it is 
DistributedCache.checkURIs(fileURIS, archiveURIs)
DistributedCache.setCache/Filearchives()
DistributedCache.createSymLink()

Hadoop streaming takes care of all this.
I have tested it on windows (cygwin) as well and it works.


> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: streaming.patch
>
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:11:23 2006
Return-Path: 
 <hadoop-dev-return-4577-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 80813 invoked from network); 26 Oct 2006 22:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:11:23 -0000
Received: (qmail 86972 invoked by uid 500); 26 Oct 2006 22:11:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 86947 invoked by uid 500); 26 Oct 2006 22:11:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 86936 invoked by uid 99); 26 Oct 2006 22:11:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:11:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:11:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 555357142D2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:10:20 -0700 (PDT)
Message-ID: <18520592.1161900620347.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:10:20 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-576?page=comments#action_12445020 ] 
            
Mahadev konar commented on HADOOP-576:
--------------------------------------

sorry the second line should have been

bin/hadoop jar hadoop-streaming.jar -cacheFile dfs://host:port/path_in_dfsof_file#NAME 
bin/hadoop jar hadoop-streaming.jar -cacheArchive dfs://host:port/path_in_dfsof_archive#NAME 

> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: streaming.patch
>
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:13:24 2006
Return-Path: 
 <hadoop-dev-return-4578-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81050 invoked from network); 26 Oct 2006 22:13:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:13:24 -0000
Received: (qmail 88558 invoked by uid 500); 26 Oct 2006 22:13:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88534 invoked by uid 500); 26 Oct 2006 22:13:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88525 invoked by uid 99); 26 Oct 2006 22:13:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:13:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:13:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 76B557142D1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:12:18 -0700 (PDT)
Message-ID: <29195980.1161900738484.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:12:18 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-576?page=comments#action_12445021 ] 
            
Mahadev konar commented on HADOOP-576:
--------------------------------------

also forgot to mention that I have tried adding documentation in some files so that it gets easier for others to develop on.

> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: streaming.patch
>
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:13:25 2006
Return-Path: 
 <hadoop-dev-return-4579-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81078 invoked from network); 26 Oct 2006 22:13:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:13:25 -0000
Received: (qmail 88715 invoked by uid 500); 26 Oct 2006 22:13:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 88673 invoked by uid 500); 26 Oct 2006 22:13:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 88650 invoked by uid 99); 26 Oct 2006 22:13:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:13:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:13:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB33E7142CE
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:12:19 -0700 (PDT)
Message-ID: <27573459.1161900739830.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:12:19 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-612) DFs copyFromLocal fails with
 NullPointerException for a single file
In-Reply-To: <19432339.1161171279760.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-612?page=comments#action_12445022 ] 
            
dhruba borthakur commented on HADOOP-612:
-----------------------------------------

Hi sanjay, 
Is it likely that the property "dfs.client.buffer.dir" is not set in your configuration? if so, then this bug can be fixed by simply putting a try, catch block in the code segment you pointed out.  Please let me know if you want me to fix it.

> DFs copyFromLocal fails with NullPointerException for a single file
> -------------------------------------------------------------------
>
>                 Key: HADOOP-612
>                 URL: http://issues.apache.org/jira/browse/HADOOP-612
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1
>            Reporter: Sanjay Dahiya
>            Priority: Blocker
>
> DFS copyFromLocal fails with NullPointerException when copying a single file to DFS. Copying a directory works. 
>   public File getFile(String dirsProp, String path)
>     throws IOException {
>     String[] dirs = getStrings(dirsProp);                     <===== returns null for a single file
>     int hashCode = path.hashCode();
>     for (int i = 0; i < dirs.length; i++) {  // try each local dir                     <==== Throws NullPointerException
>       int index = (hashCode+i & Integer.MAX_VALUE) % dirs.length;
>       File file = new File(dirs[index], path);
>       File dir = file.getParentFile();
>       if (dir.exists() || dir.mkdirs()) {
>         return file;
>       }
>     }
>     throw new IOException("No valid local directories in property: "+dirsProp);
>   }
> Exception in thread "main" java.lang.NullPointerException
>         at org.apache.hadoop.conf.Configuration.getFile(Configuration.java:397)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.newBackupFile(DFSClient.java:913)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.<init>(DFSClient.java:903)
>         at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:276)
>         at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:104)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
>         at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:271)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:178)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:77)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyFromLocalFile(DistributedFileSystem.java:186)
>         at org.apache.hadoop.dfs.DFSShell.copyFromLocal(DFSShell.java:45)
>         at org.apache.hadoop.dfs.DFSShell.run(DFSShell.java:516)
>         at org.apache.hadoop.util.ToolBase.doMain(ToolBase.java:187)
>         at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:570)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:15:25 2006
Return-Path: 
 <hadoop-dev-return-4580-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81643 invoked from network); 26 Oct 2006 22:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:15:25 -0000
Received: (qmail 91772 invoked by uid 500); 26 Oct 2006 22:15:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91735 invoked by uid 500); 26 Oct 2006 22:15:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91723 invoked by uid 99); 26 Oct 2006 22:15:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:15:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:15:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AEACF7142DC
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:14:19 -0700 (PDT)
Message-ID: <5603082.1161900859712.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:14:19 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-576?page=all ]

Mahadev konar updated HADOOP-576:
---------------------------------

    Status: Patch Available  (was: In Progress)

> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: streaming.patch
>
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:22:25 2006
Return-Path: 
 <hadoop-dev-return-4581-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85064 invoked from network); 26 Oct 2006 22:22:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:22:25 -0000
Received: (qmail 1182 invoked by uid 500); 26 Oct 2006 22:22:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1147 invoked by uid 500); 26 Oct 2006 22:22:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1138 invoked by uid 99); 26 Oct 2006 22:22:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:22:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:22:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BC0FA7142DC
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:21:20 -0700 (PDT)
Message-ID: <15654745.1161901280767.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:21:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12445025 ] 
            
Owen O'Malley commented on HADOOP-489:
--------------------------------------

This is looking good. A couple of comments:
  1. The last 4k/8k links don't work if you have less than 4k of logs. You get an error about illegal offset.
  2. You add an extra two spaces before the first line of the logs. It happens in the jsp because you have two space before the <%.
  3. Don't put the hadoop logo and compile information in the header of tasklog.jsp or the links in the footer.
  4. I don't see the clean up code after a couple of days.
  5. I think the output quota would be better expressed as a per task limit rather than per a job and should probably default to 100k or so.
  6. It would be good to have more directory structure in the user log storage, probably $jobid/$taskid/part-%03d.txt or something.
  7. I'm not sure it is right to assume that the output from the user task is utf8/strings. Should we be reading/writing it in bytes instead of strings? If we are just shoving it around, it is probably better to not interpret it.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:37:23 2006
Return-Path: 
 <hadoop-dev-return-4582-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88355 invoked from network); 26 Oct 2006 22:37:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:37:23 -0000
Received: (qmail 16692 invoked by uid 500); 26 Oct 2006 22:37:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 16648 invoked by uid 500); 26 Oct 2006 22:37:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 16631 invoked by uid 99); 26 Oct 2006 22:37:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:37:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:37:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A18207142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:36:17 -0700 (PDT)
Message-ID: <9526012.1161902177659.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:36:17 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-645?page=comments#action_12445029 ] 
            
dhruba borthakur commented on HADOOP-645:
-----------------------------------------

Not sure if it's just mis-stated, but -reducer NONE doesn't imply no output by reducer, it implies that the mapper itself writes out its output as a dfs file, and the reducer is never even launched. It save transfer of data over the network, sorting by the reducer etc.
-Yoram

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 22:48:26 2006
Return-Path: 
 <hadoop-dev-return-4583-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 96331 invoked from network); 26 Oct 2006 22:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 22:48:26 -0000
Received: (qmail 34490 invoked by uid 500); 26 Oct 2006 22:48:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 34464 invoked by uid 500); 26 Oct 2006 22:48:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 34455 invoked by uid 99); 26 Oct 2006 22:48:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:48:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 15:48:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4274A7142D1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 15:47:21 -0700 (PDT)
Message-ID: <26130268.1161902841269.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 15:47:21 -0700 (PDT)
From: "Sameer Paranjpye (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-489) Seperating user logs from system
 logs in map reduce
In-Reply-To: <30146384.1156876403539.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-489?page=comments#action_12445040 ] 
            
Sameer Paranjpye commented on HADOOP-489:
-----------------------------------------

Another point:

Logs for failed jobs should be accessible from the failures page. In many respects, these are far more interesting.

> Seperating user logs from system logs in map reduce
> ---------------------------------------------------
>
>                 Key: HADOOP-489
>                 URL: http://issues.apache.org/jira/browse/HADOOP-489
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Arun C Murthy
>            Priority: Minor
>         Attachments: HADOOP-489_20061019.patch
>
>
> Currently the user logs are a part of system logs in mapreduce. Anything logged by the user is logged into the tasktracker log files. This create two issues-
> 1) The system log files get cluttered with user output. If the user outputs a large amount of logs, the system logs need to be cleaned up pretty often.
> 2) For the user, it is difficult to get to each of the machines and look for the logs his/her job might have generated.
> I am proposing three solutions to the problem. All of them have issues with it -
> Solution 1.
> Output the user logs on the user screen as part of the job submission process. 
> Merits- 
> This will prevent users from printing large amount of logs and the user can get runtime feedback on what is wrong with his/her job.
> Issues - 
> This proposal will use the framework bandwidth while running jobs for the user. The user logs will need to pass from the tasks to the tasktrackers, from the tasktrackers to the jobtrackers and then from the jobtrackers to the jobclient using a lot of framework bandwidth if the user is printing out too much data.
> Solution 2.
> Output the user logs onto a dfs directory and then concatenate these files. Each task can create a file for the output in the log direcotyr for a given user and jobid.
> Issues -
> This will create a huge amount of small files in DFS which later can be concatenated into a single file. Also there is this issue that who would concatenate these files into a single file? This could be done by the framework (jobtracker) as part of the cleanup for the jobs - might stress the jobtracker.
>  
> Solution 3.
> Put the user logs into a seperate user log file in the log directory on each tasktrackers. We can provide some tools to query these local log files. We could have commands like for jobid j and for taskid t get me the user log output. These tools could run as a seperate map reduce program with each map grepping the user log files and a single recude aggregating these logs in to a single dfs file.
> Issues-
> This does sound like more work for the user. Also, the output might not be complete since a tasktracker might have went down after it ran the job. 
> Any thoughts?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Thu Oct 26 23:30:23 2006
Return-Path: 
 <hadoop-dev-return-4584-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16319 invoked from network); 26 Oct 2006 23:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 23:30:23 -0000
Received: (qmail 90800 invoked by uid 500); 26 Oct 2006 23:30:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 90777 invoked by uid 500); 26 Oct 2006 23:30:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 90768 invoked by uid 99); 26 Oct 2006 23:30:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 16:30:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 16:30:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 952357142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 16:29:17 -0700 (PDT)
Message-ID: <523831.1161905357608.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 16:29:17 -0700 (PDT)
From: "dhruba borthakur (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-646) name node server does not load large
 (> 2^31 bytes) edits file
In-Reply-To: <6602315.1161900496769.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-646?page=comments#action_12445043 ] 
            
dhruba borthakur commented on HADOOP-646:
-----------------------------------------

Maybe we can avoid using the available() method completely. Can we first find the size of the edits file and then issue the appropriate number of readByte() calls? 

> name node server does not load large (> 2^31 bytes) edits file
> --------------------------------------------------------------
>
>                 Key: HADOOP-646
>                 URL: http://issues.apache.org/jira/browse/HADOOP-646
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>            Priority: Critical
>
> FileInputStream.available() returns negative values when reading a large file (> 2^31 bytes) -- this is a known (unresolved) java bug:
> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6402006
> Consequence: a large edits file is not loaded and deleted without any warnings. The system reverts back to the old fsimage.
> This happens in jdk1.6 as well, i.e. the bug has not yet been fixed.
> In addition, when finally I was able to load my big cron-backed-up edits file (6.5 GB)  with a kludgy work-around, the blocks did not exist anymore in the data node servers, probably deleted from the previous attempts when the name node server did not know about the changed situation. 
> Moral till this is fixed or worked-around: don't wait too long to restart the name node server. Otherwise this is a way to lose the entire dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 00:03:08 2006
Return-Path: 
 <hadoop-dev-return-4586-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87226 invoked from network); 27 Oct 2006 00:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 00:03:08 -0000
Received: (qmail 25065 invoked by uid 500); 27 Oct 2006 00:03:14 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 24989 invoked by uid 500); 27 Oct 2006 00:03:13 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 24939 invoked by uid 99); 27 Oct 2006 00:03:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 17:03:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 17:02:06 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5EAF97142C1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 17:00:18 -0700 (PDT)
Message-ID: <17258758.1161907218385.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 17:00:18 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-576?page=all ]

Mahadev konar updated HADOOP-576:
---------------------------------

    Attachment: streaming.patch

forgto to add the junit test.

> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: streaming.patch
>
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 00:02:41 2006
Return-Path: 
 <hadoop-dev-return-4585-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85553 invoked from network); 27 Oct 2006 00:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 00:02:41 -0000
Received: (qmail 21508 invoked by uid 500); 27 Oct 2006 00:02:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21200 invoked by uid 500); 27 Oct 2006 00:02:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21107 invoked by uid 99); 27 Oct 2006 00:02:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 17:02:03 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44A1B7142D1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 17:00:20 -0700 (PDT)
Message-ID: <14690401.1161907220278.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 17:00:20 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-576?page=all ]

Mahadev konar updated HADOOP-576:
---------------------------------

    Attachment:     (was: streaming.patch)

> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: streaming.patch
>
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 00:08:25 2006
Return-Path: 
 <hadoop-dev-return-4587-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2932 invoked from network); 27 Oct 2006 00:08:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 00:08:25 -0000
Received: (qmail 37176 invoked by uid 500); 27 Oct 2006 00:08:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37158 invoked by uid 500); 27 Oct 2006 00:08:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37149 invoked by uid 99); 27 Oct 2006 00:08:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 17:08:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 17:08:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 685FB7142D2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 17:07:19 -0700 (PDT)
Message-ID: <31259906.1161907639424.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 17:07:19 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12445048 ] 
            
Owen O'Malley commented on HADOOP-76:
-------------------------------------

The PhasedRecordWriter won't handle all of the cases, because RecordWriters can write multiple files. Furthermore, they are user code and it would be better to minimize required changes to them.

A better approach would be to have a PhasedFileSystem that takes a base FileSystem and use that to commit/abort the changes. Then the framework could pass the PhasedFileSystem to the createRecordReader call and it would catch all of the files that the RecordWriter created. When the PhasedFileSystem gets a create call, it creates it in the base FileSystem with a mutated name. When the changes are commited, the files are all renamed. If the changes are aborted, the mutated filenames are deleted.



> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 02:04:23 2006
Return-Path: 
 <hadoop-dev-return-4588-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 551 invoked from network); 27 Oct 2006 02:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 02:04:23 -0000
Received: (qmail 55071 invoked by uid 500); 27 Oct 2006 02:04:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 54847 invoked by uid 500); 27 Oct 2006 02:04:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 54838 invoked by uid 99); 27 Oct 2006 02:04:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 19:04:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 19:04:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A08FD7142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 19:03:17 -0700 (PDT)
Message-ID: <17409410.1161914597654.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 19:03:17 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien updated HADOOP-482:
-------------------------------

    Attachment:     (was: unittest2.patch)

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 02:19:22 2006
Return-Path: 
 <hadoop-dev-return-4589-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3299 invoked from network); 27 Oct 2006 02:19:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 02:19:22 -0000
Received: (qmail 63298 invoked by uid 500); 27 Oct 2006 02:19:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63264 invoked by uid 500); 27 Oct 2006 02:19:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63255 invoked by uid 99); 27 Oct 2006 02:19:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 19:19:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 19:19:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D15CB7142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 19:18:17 -0700 (PDT)
Message-ID: <28348607.1161915497855.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 19:18:17 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien updated HADOOP-482:
-------------------------------

    Attachment: unittest3.patch

This patch allows you to run unit tests while a cluster is running and while other unit tests are running.   The cause of the hangs in the past were due to port conflicts.  Now, if we can't start up the namenode or jobtracker, we change the configured values (in memory) for the rpc and info ports and try again in MiniMRcluster and MiniDFSCluster.   

Notes:  
1. build/minimr/hadoop-site.xml is eliminated.  MiniMRCluster no longer creates this file.  for this reason, this patch conflicts with the patch for HADOOP-576.  (the conflict is small, so whichever is second, the patch can be regenerated)  
2. I changed some of the job tracker rpc ports from 50050 to 60050 in the unit tests because 50050 is the default value for mapred.task.tracker.report.port

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest3.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 02:19:24 2006
Return-Path: 
 <hadoop-dev-return-4590-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 3342 invoked from network); 27 Oct 2006 02:19:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 02:19:24 -0000
Received: (qmail 63570 invoked by uid 500); 27 Oct 2006 02:19:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63508 invoked by uid 500); 27 Oct 2006 02:19:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63499 invoked by uid 99); 27 Oct 2006 02:19:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 19:19:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 19:19:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 620327142C1
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 19:18:19 -0700 (PDT)
Message-ID: <25599058.1161915499398.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 19:18:19 -0700 (PDT)
From: "Wendy Chien (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Wendy Chien updated HADOOP-482:
-------------------------------

    Status: Patch Available  (was: Open)

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>         Attachments: unittest3.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 03:33:21 2006
Return-Path: 
 <hadoop-dev-return-4591-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 59082 invoked from network); 27 Oct 2006 03:33:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 03:33:21 -0000
Received: (qmail 32924 invoked by uid 500); 27 Oct 2006 03:33:32 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32893 invoked by uid 500); 27 Oct 2006 03:33:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32884 invoked by uid 99); 27 Oct 2006 03:33:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 20:33:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 20:33:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 54E437142CE
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 20:32:18 -0700 (PDT)
Message-ID: <1923630.1161919938345.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 20:32:18 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-633) if the jobinit thread gets killed
 the jobtracker keeps running without doing anything.
In-Reply-To: <33057763.1161712456703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-633?page=all ]

Work on HADOOP-633 started by Owen O'Malley.

> if the jobinit thread gets killed the jobtracker keeps running without doing anything.
> --------------------------------------------------------------------------------------
>
>                 Key: HADOOP-633
>                 URL: http://issues.apache.org/jira/browse/HADOOP-633
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>            Reporter: Mahadev konar
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> The jobtracker failed with OutOfMemory while uinjarring the jar file and this kileld the jobinit thread. The Jobtracker still kept running while doing nothing though accepting job submissions, but the jobs just sat in the queue.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 05:52:20 2006
Return-Path: 
 <hadoop-dev-return-4592-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45605 invoked from network); 27 Oct 2006 05:52:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 05:52:20 -0000
Received: (qmail 21032 invoked by uid 500); 27 Oct 2006 05:52:31 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21003 invoked by uid 500); 27 Oct 2006 05:52:31 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 20993 invoked by uid 99); 27 Oct 2006 05:52:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 22:52:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 22:52:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9BDDE7142CE
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 22:51:16 -0700 (PDT)
Message-ID: <5320427.1161928276635.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 22:51:16 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-647) Map outputs can't have a different
 type of compression from the reduce outputs
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Map outputs can't have a different type of compression from the reduce outputs
------------------------------------------------------------------------------

                 Key: HADOOP-647
                 URL: http://issues.apache.org/jira/browse/HADOOP-647
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley
             Fix For: 0.8.0
         Attachments: map-out-compress-type.patch

Right now there is only a single knob to control the compression type for sequence files. Sorting and merging is faster with record compression, but the files are smaller with block compression. I'd like to introduce a mapOutputCompressionType that lets the application control how the map outputs are compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 05:52:24 2006
Return-Path: 
 <hadoop-dev-return-4594-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45749 invoked from network); 27 Oct 2006 05:52:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 05:52:24 -0000
Received: (qmail 21545 invoked by uid 500); 27 Oct 2006 05:52:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21523 invoked by uid 500); 27 Oct 2006 05:52:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21513 invoked by uid 99); 27 Oct 2006 05:52:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 22:52:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 22:52:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D4B8C7142D2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 22:51:17 -0700 (PDT)
Message-ID: <345616.1161928277869.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 22:51:17 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-647) Map outputs can't have a different
 type of compression from the reduce outputs
In-Reply-To: <5320427.1161928276635.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-647?page=all ]

Owen O'Malley updated HADOOP-647:
---------------------------------

    Attachment: map-out-compress-type.patch

> Map outputs can't have a different type of compression from the reduce outputs
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-647
>                 URL: http://issues.apache.org/jira/browse/HADOOP-647
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>         Attachments: map-out-compress-type.patch
>
>
> Right now there is only a single knob to control the compression type for sequence files. Sorting and merging is faster with record compression, but the files are smaller with block compression. I'd like to introduce a mapOutputCompressionType that lets the application control how the map outputs are compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 05:52:23 2006
Return-Path: 
 <hadoop-dev-return-4593-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 45705 invoked from network); 27 Oct 2006 05:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 05:52:23 -0000
Received: (qmail 21350 invoked by uid 500); 27 Oct 2006 05:52:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21328 invoked by uid 500); 27 Oct 2006 05:52:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21318 invoked by uid 99); 27 Oct 2006 05:52:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 22:52:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 22:52:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 40C937142D8
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 22:51:19 -0700 (PDT)
Message-ID: <32806596.1161928279262.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 22:51:19 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-647) Map outputs can't have a different
 type of compression from the reduce outputs
In-Reply-To: <5320427.1161928276635.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-647?page=all ]

Owen O'Malley updated HADOOP-647:
---------------------------------

    Status: Patch Available  (was: Open)

> Map outputs can't have a different type of compression from the reduce outputs
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-647
>                 URL: http://issues.apache.org/jira/browse/HADOOP-647
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>         Attachments: map-out-compress-type.patch
>
>
> Right now there is only a single knob to control the compression type for sequence files. Sorting and merging is faster with record compression, but the files are smaller with block compression. I'd like to introduce a mapOutputCompressionType that lets the application control how the map outputs are compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 06:53:22 2006
Return-Path: 
 <hadoop-dev-return-4595-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 49947 invoked from network); 27 Oct 2006 06:53:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 06:53:22 -0000
Received: (qmail 5531 invoked by uid 500); 27 Oct 2006 06:53:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5511 invoked by uid 500); 27 Oct 2006 06:53:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 5502 invoked by uid 99); 27 Oct 2006 06:53:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 23:53:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 23:53:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C4B017142C2
	for <hadoop-dev@lucene.apache.org>; Thu, 26 Oct 2006 23:52:16 -0700 (PDT)
Message-ID: <20676975.1161931936803.JavaMail.root@brutus>
Date: Thu, 26 Oct 2006 23:52:16 -0700 (PDT)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-648) JobClient waitForCompletion() method
 sometimes throws an NPE
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobClient waitForCompletion() method sometimes throws an NPE
------------------------------------------------------------

                 Key: HADOOP-648
                 URL: http://issues.apache.org/jira/browse/HADOOP-648
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.6.1
            Reporter: Thomas Friol


java.lang.NullPointerException
        at org.apache.hadoop.mapred.JobClient$NetworkedJob.isComplete(JobClient.java:113)
        at org.apache.hadoop.mapred.JobClient$NetworkedJob.waitForCompletion(JobClient.java:128)

Does someone have an idea why this happens ?
Thanks for any help.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 08:00:05 2006
Return-Path: 
 <hadoop-dev-return-4596-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10924 invoked from network); 27 Oct 2006 08:00:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 08:00:05 -0000
Received: (qmail 6208 invoked by uid 500); 27 Oct 2006 08:00:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 6187 invoked by uid 500); 27 Oct 2006 08:00:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 6178 invoked by uid 99); 27 Oct 2006 08:00:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 01:00:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 01:00:02 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C23B07142F0
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 00:58:17 -0700 (PDT)
Message-ID: <4153143.1161935897793.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 00:58:17 -0700 (PDT)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-648) JobClient waitForCompletion() method
 sometimes throws an NPE
In-Reply-To: <20676975.1161931936803.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-648?page=comments#action_12445113 ] 
            
Thomas Friol commented on HADOOP-648:
-------------------------------------

In fatc it seems that in this method : 

synchronized void ensureFreshStatus() throws IOException {
            if (System.currentTimeMillis() - statustime > MAX_JOBPROFILE_AGE) {
                this.status = jobSubmitClient.getJobStatus(profile.getJobId());
                this.statustime = System.currentTimeMillis();
            }
        }

this.status is setted to null because jobSubmitClient.getJobStatus() returns null


> JobClient waitForCompletion() method sometimes throws an NPE
> ------------------------------------------------------------
>
>                 Key: HADOOP-648
>                 URL: http://issues.apache.org/jira/browse/HADOOP-648
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.1
>            Reporter: Thomas Friol
>
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobClient$NetworkedJob.isComplete(JobClient.java:113)
>         at org.apache.hadoop.mapred.JobClient$NetworkedJob.waitForCompletion(JobClient.java:128)
> Does someone have an idea why this happens ?
> Thanks for any help.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 09:07:24 2006
Return-Path: 
 <hadoop-dev-return-4597-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31091 invoked from network); 27 Oct 2006 09:07:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 09:07:24 -0000
Received: (qmail 57256 invoked by uid 500); 27 Oct 2006 09:07:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57223 invoked by uid 500); 27 Oct 2006 09:07:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57214 invoked by uid 99); 27 Oct 2006 09:07:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 02:07:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 02:07:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 751707142D1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 02:06:18 -0700 (PDT)
Message-ID: <4463877.1161939978477.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 02:06:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya updated HADOOP-565:
---------------------------------

    Attachment: Hadoop-565_2.patch

Here is an updated patch. thanks Doug for pointing the exception

The earlier patch fails in cases where there is only one exception thrown by server.start(), if there are more than one exceptions (wrapped in MultiException) then it would work. 
In jetty 6 MultiException, it throws the original exception if there is a single exception and it throws MulltiException if there are more than one exceptions. This looks kind of dangerous because now we need to handle same set of exceptions in two places. 


> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_2.patch, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 09:09:25 2006
Return-Path: 
 <hadoop-dev-return-4598-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 31794 invoked from network); 27 Oct 2006 09:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 09:09:25 -0000
Received: (qmail 62290 invoked by uid 500); 27 Oct 2006 09:09:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62267 invoked by uid 500); 27 Oct 2006 09:09:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62258 invoked by uid 99); 27 Oct 2006 09:09:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 02:09:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 02:09:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EE4F7142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 02:08:18 -0700 (PDT)
Message-ID: <16693804.1161940098648.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 02:08:18 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Sanjay Dahiya updated HADOOP-565:
---------------------------------

    Status: Patch Available  (was: Open)

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_2.patch, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 11:19:19 2006
Return-Path: 
 <hadoop-dev-return-4599-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93034 invoked from network); 27 Oct 2006 11:19:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 11:19:19 -0000
Received: (qmail 16054 invoked by uid 500); 27 Oct 2006 11:19:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 15986 invoked by uid 500); 27 Oct 2006 11:19:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 15932 invoked by uid 99); 27 Oct 2006 11:19:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 04:19:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 04:19:05 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 413A57142E1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 04:18:02 -0700 (PDT)
Message-ID: <6388735.1161947882264.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 04:18:02 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12445148 ] 
            
Sanjay Dahiya commented on HADOOP-76:
-------------------------------------

PhasedFileSystem sounds good, I will work on this approach. thanks Devaraj, Owen for review. 

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 11:33:25 2006
Return-Path: 
 <hadoop-dev-return-4600-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 97857 invoked from network); 27 Oct 2006 11:33:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 11:33:25 -0000
Received: (qmail 40703 invoked by uid 500); 27 Oct 2006 11:33:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 40669 invoked by uid 500); 27 Oct 2006 11:33:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 40660 invoked by uid 99); 27 Oct 2006 11:33:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 04:33:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 04:33:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2E86D7142D1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 04:32:18 -0700 (PDT)
Message-ID: <20242862.1161948738186.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 04:32:18 -0700 (PDT)
From: "Thomas Friol (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-649) Jobs without any map and reduce
 operations seems to be lost after their execution
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jobs without any map and reduce operations seems to be lost after their execution
---------------------------------------------------------------------------------

                 Key: HADOOP-649
                 URL: http://issues.apache.org/jira/browse/HADOOP-649
             Project: Hadoop
          Issue Type: Bug
    Affects Versions: 0.6.1
            Reporter: Thomas Friol


When a job does not provide any file splits (because there is no data present), the job successes but then it is lost by the job tracker. Is this normal ?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 12:56:25 2006
Return-Path: 
 <hadoop-dev-return-4601-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20828 invoked from network); 27 Oct 2006 12:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 12:56:25 -0000
Received: (qmail 48293 invoked by uid 500); 27 Oct 2006 12:56:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48263 invoked by uid 500); 27 Oct 2006 12:56:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48254 invoked by uid 99); 27 Oct 2006 12:56:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 05:56:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 05:56:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EBA77142D1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 05:55:19 -0700 (PDT)
Message-ID: <2505640.1161953719647.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 05:55:19 -0700 (PDT)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12445173 ] 
            
Sanjay Dahiya commented on HADOOP-76:
-------------------------------------

Looking at FileSystem implementation here is a concern 

FileSystem is an abstract class, extended by Local/Distributed FileSystem. ideal way to have a PhasedFileSystem would be if FileSystem was an interface, we could implement it and take a FileSystem in the constructor of PhasedFIleSystem. some thing like  - 
PhasedFileSystem implements FileSystem{
   public PhasedFileSystem(FileSysten fs);
   // channel all methods to fs 
  // implement commit() / abort()
}
In this case we could use Phased functionality with both Local/Distributed FileSystem, still maintaining interface compatibility. Doing this with base abstract class will cause some dummy objects. as in next option 

Next option is to have something like 

PhasedFileSystem extends FileSystem{
   private FileSystem fs ; 
   protected PhasedFileSystem(FileSysten fs) { 
    super(fs.getConf()); // not used, just dummy for base class creation
   	this.fs = fs ; 
   }
   protected PhasedFileSystem(conf){ super(conf); throw NotSupportedException; } 
   
   public static getNamed(...) { 
     return new PhasedFileSystem(FileSystem.getNamed..) ;
   }
   //  All other methods channel calls to fs
   commit() ;
   abort(); 
}

Last option is to add extra methods to FileSystem itself, which will not be used in most cases but will be available in derived FileSystems. This doesnt sound too good. 
 
Option 2 is something that will work well for us, even though its not a good design.

Comments?

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 17:46:26 2006
Return-Path: 
 <hadoop-dev-return-4602-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46633 invoked from network); 27 Oct 2006 17:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 17:46:26 -0000
Received: (qmail 44875 invoked by uid 500); 27 Oct 2006 17:46:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44852 invoked by uid 500); 27 Oct 2006 17:46:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 44843 invoked by uid 99); 27 Oct 2006 17:46:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 10:46:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 10:46:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3861D7142D2
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 10:45:19 -0700 (PDT)
Message-ID: <13412579.1161971119228.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 10:45:19 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-643) failure closing block of file
In-Reply-To: <5963070.1161869118181.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-643?page=all ]

Raghu Angadi resolved HADOOP-643.
---------------------------------

    Resolution: Duplicate
      Assignee: Raghu Angadi

Duplicate of HADOOP-604.

> failure closing block of file
> -----------------------------
>
>                 Key: HADOOP-643
>                 URL: http://issues.apache.org/jira/browse/HADOOP-643
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Johan Oskarson
>         Assigned To: Raghu Angadi
>            Priority: Critical
>
> I've been getting "failure closing block of file" on random files.
> Both datanode and tasktracker running on node7. No problems with pinging.
> Guess it got stuck after the NPE in DataNode.
> Job cannot start because of:
> java.io.IOException: failure closing block of file /home/hadoop/mapred/system/submit_99u9cd/.job.jar.crc to node node7:50010
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.internalClose(DFSClient.java:1199)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1163)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1241)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.close(FSDataOutputStream.java:96)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at java.io.FilterOutputStream.close(FilterOutputStream.java:143)
>         at org.apache.hadoop.fs.FileUtil.copyContent(FileUtil.java:205)
>         at org.apache.hadoop.fs.FileUtil.copyContent(FileUtil.java:190)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:77)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyFromLocalFile(DistributedFileSystem.java:186)
>         at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:289)
>         at org.apache.hadoop.mapred.jobcontrol.Job.submit(Job.java:314)
>         at org.apache.hadoop.mapred.jobcontrol.JobControl.startReadyJobs(JobControl.java:248)
>         at org.apache.hadoop.mapred.jobcontrol.JobControl.run(JobControl.java:280)
>         at java.lang.Thread.run(Thread.java:595)
> Caused by: java.net.SocketTimeoutException: Read timed out
>         at java.net.SocketInputStream.socketRead0(Native Method)
>         at java.net.SocketInputStream.read(SocketInputStream.java:129)
>         at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
>         at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
>         at java.io.BufferedInputStream.read(BufferedInputStream.java:313)
>         at java.io.DataInputStream.readFully(DataInputStream.java:176)
>         at java.io.DataInputStream.readLong(DataInputStream.java:380)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.internalClose(DFSClient.java:1193)
> Cxception in datanode.out on node7:
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@1c86be5" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:480)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 17:50:22 2006
Return-Path: 
 <hadoop-dev-return-4603-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 47433 invoked from network); 27 Oct 2006 17:50:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 17:50:22 -0000
Received: (qmail 51325 invoked by uid 500); 27 Oct 2006 17:50:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51301 invoked by uid 500); 27 Oct 2006 17:50:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51292 invoked by uid 99); 27 Oct 2006 17:50:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 10:50:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 10:50:19 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8BD667142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 10:49:16 -0700 (PDT)
Message-ID: <28993539.1161971356570.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 10:49:16 -0700 (PDT)
From: "Mahadev konar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-650) bin/hadoop dfs -lsr / is broken
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

bin/hadoop dfs -lsr / is broken
-------------------------------

                 Key: HADOOP-650
                 URL: http://issues.apache.org/jira/browse/HADOOP-650
             Project: Hadoop
          Issue Type: Bug
            Reporter: Mahadev konar
            Priority: Minor


bin/hadoop dfs -lsr / 
used to work but seems like its broken now. The output of this command just keeps on listing "/user" again and again and does not list any other files/directories. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 18:18:27 2006
Return-Path: 
 <hadoop-dev-return-4604-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 56365 invoked from network); 27 Oct 2006 18:18:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 18:18:27 -0000
Received: (qmail 3926 invoked by uid 500); 27 Oct 2006 18:18:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3892 invoked by uid 500); 27 Oct 2006 18:18:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3883 invoked by uid 99); 27 Oct 2006 18:18:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:18:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:18:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 964037142D8
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 11:17:19 -0700 (PDT)
Message-ID: <17698227.1161973039612.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 11:17:19 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-604) DataNodes get NullPointerException
 and become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-604?page=comments#action_12445239 ] 
            
Raghu Angadi commented on HADOOP-604:
-------------------------------------


Thanks Dhruba. Yes, lot of accesses from offerServer() and other threads is not protected. I just started reading the surounding code to see exactly how this exception occurs what we should protect.


> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 18:44:23 2006
Return-Path: 
 <hadoop-dev-return-4605-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72541 invoked from network); 27 Oct 2006 18:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 18:44:23 -0000
Received: (qmail 47085 invoked by uid 500); 27 Oct 2006 18:44:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 46879 invoked by uid 500); 27 Oct 2006 18:44:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 46870 invoked by uid 99); 27 Oct 2006 18:44:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:44:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:44:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id B7A327142D6
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 11:43:16 -0700 (PDT)
Message-ID: <6883418.1161974596748.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 11:43:16 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-651) fsck does not handle arguments -blocks
 and -locations correctly
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

fsck does not handle arguments -blocks and -locations correctly
---------------------------------------------------------------

                 Key: HADOOP-651
                 URL: http://issues.apache.org/jira/browse/HADOOP-651
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.2
            Reporter: Milind Bhandarkar
         Assigned To: Milind Bhandarkar
             Fix For: 0.8.0
         Attachments: fsck-bug.patch

fsck does not pass arguments correctly to the servlet. As a result, only the last argument (except for the path) is passed to the servlet. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 18:44:24 2006
Return-Path: 
 <hadoop-dev-return-4606-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72562 invoked from network); 27 Oct 2006 18:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 18:44:24 -0000
Received: (qmail 47158 invoked by uid 500); 27 Oct 2006 18:44:34 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47123 invoked by uid 500); 27 Oct 2006 18:44:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47114 invoked by uid 99); 27 Oct 2006 18:44:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:44:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:44:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F12547142D2
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 11:43:17 -0700 (PDT)
Message-ID: <9767058.1161974597985.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 11:43:17 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-651) fsck does not handle arguments -blocks
 and -locations correctly
In-Reply-To: <6883418.1161974596748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-651?page=all ]

Milind Bhandarkar updated HADOOP-651:
-------------------------------------

    Attachment: fsck-bug.patch

This fixes the fsck arg-processing bug.

> fsck does not handle arguments -blocks and -locations correctly
> ---------------------------------------------------------------
>
>                 Key: HADOOP-651
>                 URL: http://issues.apache.org/jira/browse/HADOOP-651
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: fsck-bug.patch
>
>
> fsck does not pass arguments correctly to the servlet. As a result, only the last argument (except for the path) is passed to the servlet. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 18:44:26 2006
Return-Path: 
 <hadoop-dev-return-4607-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72615 invoked from network); 27 Oct 2006 18:44:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 18:44:26 -0000
Received: (qmail 47401 invoked by uid 500); 27 Oct 2006 18:44:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47381 invoked by uid 500); 27 Oct 2006 18:44:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47372 invoked by uid 99); 27 Oct 2006 18:44:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:44:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:44:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3BE867142D8
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 11:43:19 -0700 (PDT)
Message-ID: <18741659.1161974599243.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 11:43:19 -0700 (PDT)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-651) fsck does not handle arguments -blocks
 and -locations correctly
In-Reply-To: <6883418.1161974596748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-651?page=all ]

Milind Bhandarkar updated HADOOP-651:
-------------------------------------

    Status: Patch Available  (was: Open)

Patch attached.

> fsck does not handle arguments -blocks and -locations correctly
> ---------------------------------------------------------------
>
>                 Key: HADOOP-651
>                 URL: http://issues.apache.org/jira/browse/HADOOP-651
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: fsck-bug.patch
>
>
> fsck does not pass arguments correctly to the servlet. As a result, only the last argument (except for the path) is passed to the servlet. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 18:52:25 2006
Return-Path: 
 <hadoop-dev-return-4608-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74880 invoked from network); 27 Oct 2006 18:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 18:52:25 -0000
Received: (qmail 62338 invoked by uid 500); 27 Oct 2006 18:52:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62314 invoked by uid 500); 27 Oct 2006 18:52:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62291 invoked by uid 99); 27 Oct 2006 18:52:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:52:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 11:52:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 957647142D6
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 11:51:16 -0700 (PDT)
Message-ID: <8743293.1161975076609.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 11:51:16 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-652) Not all Datastructures are updated
 when a block is deleted
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not all Datastructures are updated when a block is deleted
----------------------------------------------------------

                 Key: HADOOP-652
                 URL: http://issues.apache.org/jira/browse/HADOOP-652
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
            Reporter: Raghu Angadi



Currently when a block is deleted, DataNode just deletes the physical file and updates its map. We need to update more things. For e.g. numBlocks in FSDir is not decremented.. effect of this would be that we will create more subdirectories than necessary. It might not show up badly yet since numBlocks gets correct value when the dataNode restarts. I have to see what else needs to be updated.



-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 19:54:24 2006
Return-Path: 
 <hadoop-dev-return-4609-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1450 invoked from network); 27 Oct 2006 19:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 19:54:24 -0000
Received: (qmail 98408 invoked by uid 500); 27 Oct 2006 19:54:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 98375 invoked by uid 500); 27 Oct 2006 19:54:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 98361 invoked by uid 99); 27 Oct 2006 19:54:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 12:54:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 12:54:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E56A17142DC
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 12:53:18 -0700 (PDT)
Message-ID: <21489583.1161978798937.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 12:53:18 -0700 (PDT)
From: "Gal Nitzan (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-24) make Configuration an interface
In-Reply-To: <52371844.1139256627178.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-24?page=comments#action_12445261 ] 
            
Gal Nitzan commented on HADOOP-24:
----------------------------------

Done.... for some reason attaching thw file did not produce an email.

> make Configuration an interface
> -------------------------------
>
>                 Key: HADOOP-24
>                 URL: http://issues.apache.org/jira/browse/HADOOP-24
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: conf
>    Affects Versions: 0.7.2
>            Reporter: Doug Cutting
>         Attachments: conf-with-factory.patch, configuration.java, configuration.patch, HADOOP-24-2.patch, HADOOP-24-3.patch, HADOOP-24-4.patch, HADOOP-24.patch, HADOOP-24.patch
>
>
> The Configuration class should become an interface, e.g.:
> public interface Configuration {
>   String get(String nam);
>   String set(String name, String value);
>   int getInt(String name);
>   void setInt(String name, int value);
>   float getFloat(String name);
>   void setFloat(String name, float value);
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> An abstract class named ConfigurationBase should be implemented as follows:
> public abstract class ConfigurationBase implements Configuration {
>   abstract public String get(String nam);
>   abstract public String set(String name, String value);
>   public  int getInt(String name) { ... implementation in terms of get(String) ... }
>   public void setInt(String name, int value) {... implementation in terms of set(String, String) ...}
>   public float getFloat(String name)  { ... implementation in terms of get(String) ... }
>   public void setFloat(String name, float value)  {... implementation in terms of set(String, String) ...}
>   //... other utility methods based on get(String) and set(String,String) ...
> }
> A concrete, default implementation will be provided as follows:
> public class ConfigurationImpl implements Writable extends ConfigurationBase {
>   private Properties properties;
>   // implement abstract methods from ConfigurationBase
>   public String get(String name) { ... implemented in terms of props ...}
>   public String set(String name, String value) { .. implemented in terms of props ... }
>   // Writable methods
>   public write(DataOutputStream out);
>   public readFields(DataInputStream in);
>   // permit chaining of configurations
>   public Configuration getDefaults();
>   public void setDefaults(Configuration defaults);
> }
> Only code which creates configurations should need to be updated, so this shouldn't be a huge change.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 20:21:29 2006
Return-Path: 
 <hadoop-dev-return-4610-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8062 invoked from network); 27 Oct 2006 20:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 20:21:29 -0000
Received: (qmail 36434 invoked by uid 500); 27 Oct 2006 20:21:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 36414 invoked by uid 500); 27 Oct 2006 20:21:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 36398 invoked by uid 99); 27 Oct 2006 20:21:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 13:21:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 13:21:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C59707142D6
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 13:20:17 -0700 (PDT)
Message-ID: <17883372.1161980417806.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 13:20:17 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-650) bin/hadoop dfs -lsr / is broken
In-Reply-To: <28993539.1161971356570.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-650?page=comments#action_12445264 ] 
            
Konstantin Shvachko commented on HADOOP-650:
--------------------------------------------

The problem is with the data not the software.
You have illegal sub-directory "/" inside /user. That is why it loops.

bin/hadoop dfs -ls /user
Found 7 items
/user   <dir>
/       <dir>
/user/mahadev   <dir>
....

The entries were probably created prior to HADOOP-423, which fixed the problem.
But I don't know how to get rid of this entries now when we do not allow them.
I guess a custom code should be written.

> bin/hadoop dfs -lsr / is broken
> -------------------------------
>
>                 Key: HADOOP-650
>                 URL: http://issues.apache.org/jira/browse/HADOOP-650
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>            Priority: Minor
>
> bin/hadoop dfs -lsr / 
> used to work but seems like its broken now. The output of this command just keeps on listing "/user" again and again and does not list any other files/directories. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 20:56:29 2006
Return-Path: 
 <hadoop-dev-return-4611-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23030 invoked from network); 27 Oct 2006 20:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 20:56:29 -0000
Received: (qmail 23238 invoked by uid 500); 27 Oct 2006 20:56:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 23205 invoked by uid 500); 27 Oct 2006 20:56:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 23196 invoked by uid 99); 27 Oct 2006 20:56:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 13:56:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 13:56:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CB1317142D8
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 13:55:18 -0700 (PDT)
Message-ID: <6033462.1161982518829.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 13:55:18 -0700 (PDT)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-645?page=comments#action_12445271 ] 
            
eric baldeschwieler commented on HADOOP-645:
--------------------------------------------

Is this a streaming specific discussion, or does general map-reduce really imply that map outputs go directly to HDFS when no reducers are run?  I'm not sure that is a viable scalable behavior.  This may simply create way too many outputs and kill the FS.

Do we believe this is the current behavior or an ask for an extension?

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 21:25:26 2006
Return-Path: 
 <hadoop-dev-return-4612-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38706 invoked from network); 27 Oct 2006 21:25:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 21:25:26 -0000
Received: (qmail 81168 invoked by uid 500); 27 Oct 2006 21:25:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 81142 invoked by uid 500); 27 Oct 2006 21:25:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 81133 invoked by uid 99); 27 Oct 2006 21:25:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 14:25:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 14:25:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DFCC07142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 14:24:18 -0700 (PDT)
Message-ID: <3350433.1161984258913.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 14:24:18 -0700 (PDT)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-538?page=comments#action_12445272 ] 
            
Arun C Murthy commented on HADOOP-538:
--------------------------------------

Thanks for the detailed feedback to Owen/Sameer, i'll put up an updated patch asap... though I admit I hadn't thought about 32-bit jvm on a 64-bit OS! :)

Meanwhile, one of the nice side-effects of this patch will be to enable the GzipCodec to work with SequenceFiles. 

Context: gzip is just zlib algo + extra headers. java.util.zip.GZIP{Input|Output}Stream and hence existing GzipCodec won't work with SequenceFile due the fact that java.util.zip.GZIP{Input|Output}Streams will try to read/write gzip headers in the constructors which won't work in SequenceFiles since we typically read data from disk onto buffers, these buffers are empty on startup/after-reset and cause the java.util.zip.GZIP{Input|Output}Streams to fail.

The upshot of this patch is that newer (zlib-1.2.*) can deal with this directly (java.util.zip is zlib-1.1.*), which means we can use them in SequenceFile. However, the downside is that people will need to have native hadoop code for getting this benefit. If people strongly feel we need this funcationality without native hadoop code, IMHO not critical since gzip is zlib+headers i.e. exact compression etc., then I guess we can track it via a separate jira issue... would people object to me enabling GzipCodec to work with SequenceFile for now only with native code in? If the native code isn't present I can print out a warning very early and exit...

Thoughts?

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 22:08:22 2006
Return-Path: 
 <hadoop-dev-return-4613-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 67603 invoked from network); 27 Oct 2006 22:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 22:08:22 -0000
Received: (qmail 66673 invoked by uid 500); 27 Oct 2006 22:08:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66637 invoked by uid 500); 27 Oct 2006 22:08:32 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66623 invoked by uid 99); 27 Oct 2006 22:08:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 15:08:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 15:08:20 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5F81E7142D6
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 15:07:17 -0700 (PDT)
Message-ID: <22027316.1161986837388.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 15:07:17 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-653) Hadoop Record csv serialization should
 not convert Text into String
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hadoop Record csv serialization should not convert Text into String
-------------------------------------------------------------------

                 Key: HADOOP-653
                 URL: http://issues.apache.org/jira/browse/HADOOP-653
             Project: Hadoop
          Issue Type: Bug
            Reporter: Runping Qi




-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 22:19:25 2006
Return-Path: 
 <hadoop-dev-return-4614-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 72548 invoked from network); 27 Oct 2006 22:19:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 22:19:25 -0000
Received: (qmail 82060 invoked by uid 500); 27 Oct 2006 22:19:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82028 invoked by uid 500); 27 Oct 2006 22:19:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82002 invoked by uid 99); 27 Oct 2006 22:19:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 15:19:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 15:19:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C2BA57142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 15:18:17 -0700 (PDT)
Message-ID: <27137240.1161987497795.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 15:18:17 -0700 (PDT)
From: "Runping Qi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-653) Hadoop Record csv serialization
 should not convert Text into String
In-Reply-To: <22027316.1161986837388.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-653?page=comments#action_12445277 ] 
            
Runping Qi commented on HADOOP-653:
-----------------------------------


Here is the method in question in class CsvOutputArchive:

   public void writeString(Text s, String tag) throws IOException {
        printCommaUnlessFirst();
        stream.print(Utils.toCSVString(s));
        throwExceptionOnError(tag);
    }

This also happens to XML output archive:

   public void writeString(Text s, String tag) throws IOException {
        printBeginEnvelope(tag);
        stream.print("<string>");
        stream.print(Utils.toXMLString(s));
        stream.print("</string>");
        printEndEnvelope(tag);
    }



> Hadoop Record csv serialization should not convert Text into String
> -------------------------------------------------------------------
>
>                 Key: HADOOP-653
>                 URL: http://issues.apache.org/jira/browse/HADOOP-653
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Runping Qi
>


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 22:23:29 2006
Return-Path: 
 <hadoop-dev-return-4615-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 75100 invoked from network); 27 Oct 2006 22:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 22:23:29 -0000
Received: (qmail 87178 invoked by uid 500); 27 Oct 2006 22:23:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87148 invoked by uid 500); 27 Oct 2006 22:23:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87134 invoked by uid 99); 27 Oct 2006 22:23:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 15:23:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 15:23:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C03437142D1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 15:22:20 -0700 (PDT)
Message-ID: <27487881.1161987740785.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 15:22:20 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-553?page=all ]

Raghu Angadi updated HADOOP-553:
--------------------------------

    Attachment: logging-exceptions.patch

logging-exceptions.patch:
Patch to write exceptions to log file instead of stderr. 

I will submit a seperate patch to rotate .out files.


> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-553
>                 URL: http://issues.apache.org/jira/browse/HADOOP-553
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred, dfs
>    Affects Versions: 0.6.2
>            Reporter: Konstantin Shvachko
>         Assigned To: Raghu Angadi
>         Attachments: logging-exceptions.patch
>
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and 
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 23:08:23 2006
Return-Path: 
 <hadoop-dev-return-4616-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87237 invoked from network); 27 Oct 2006 23:08:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 23:08:23 -0000
Received: (qmail 52774 invoked by uid 500); 27 Oct 2006 23:08:33 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52747 invoked by uid 500); 27 Oct 2006 23:08:33 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52738 invoked by uid 99); 27 Oct 2006 23:08:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:08:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:08:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 570B07142C1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 16:07:18 -0700 (PDT)
Message-ID: <26313214.1161990438353.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 16:07:18 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment:     (was: patch.1)

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 23:08:26 2006
Return-Path: 
 <hadoop-dev-return-4617-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 87278 invoked from network); 27 Oct 2006 23:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 23:08:26 -0000
Received: (qmail 53027 invoked by uid 500); 27 Oct 2006 23:08:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 53007 invoked by uid 500); 27 Oct 2006 23:08:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52998 invoked by uid 99); 27 Oct 2006 23:08:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:08:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:08:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 361E67142D1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 16:07:20 -0700 (PDT)
Message-ID: <30989401.1161990440219.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 16:07:20 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment:     (was: patch.2)

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 23:12:26 2006
Return-Path: 
 <hadoop-dev-return-4618-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88608 invoked from network); 27 Oct 2006 23:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 23:12:26 -0000
Received: (qmail 57959 invoked by uid 500); 27 Oct 2006 23:12:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 57940 invoked by uid 500); 27 Oct 2006 23:12:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 57930 invoked by uid 99); 27 Oct 2006 23:12:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:12:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:12:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 546DA7142C1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 16:11:18 -0700 (PDT)
Message-ID: <14419710.1161990678343.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 16:11:18 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment: dfs-report.patch


dfs-report.patch

Resubmitting the patch with proper paths etc. This fixes 'dfs -report'.


> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: dfs-report.patch
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 23:40:27 2006
Return-Path: 
 <hadoop-dev-return-4619-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 4895 invoked from network); 27 Oct 2006 23:40:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 23:40:27 -0000
Received: (qmail 91234 invoked by uid 500); 27 Oct 2006 23:40:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 91203 invoked by uid 500); 27 Oct 2006 23:40:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 91194 invoked by uid 99); 27 Oct 2006 23:40:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:40:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:40:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2AE8C7142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 16:39:19 -0700 (PDT)
Message-ID: <8202738.1161992359173.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 16:39:19 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-611?page=comments#action_12445297 ] 
            
Devaraj Das commented on HADOOP-611:
------------------------------------

In the current merge code, 'merge-factor' number of keys & values are kept in memory. While implementing this, one thought was that we can prevent all the 'merge-factor' values from being in memory at the same time and fetch them when needed. When the user of the merge code does a next() on the MergeQueue to fetch the key/value, the system loads in memory the value corresponding to the 'minimum' key and defers the loading of the value until then.
Implemented this for Compression = NONE & RECORD. However, for BLOCK compression, the code for not proactively loading values is already there and controlled by a boolean "lazyDecompression" and nothing extra needs to be done. The thing is lazyDecompression is controlled via hadoop config (defaulting to true). I was thinking whether it makes good sense to remove this configurable item and have it as true always.
Any objection to this?

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.8.0
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Fri Oct 27 23:56:23 2006
Return-Path: 
 <hadoop-dev-return-4620-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 9713 invoked from network); 27 Oct 2006 23:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 23:56:23 -0000
Received: (qmail 8353 invoked by uid 500); 27 Oct 2006 23:56:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8135 invoked by uid 500); 27 Oct 2006 23:56:34 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8126 invoked by uid 99); 27 Oct 2006 23:56:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:56:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 16:56:21 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A89A77142CE
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 16:55:17 -0700 (PDT)
Message-ID: <9515149.1161993317688.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 16:55:17 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-645) Map-reduce task does not finish
 correctly when -reducer NONE is specified
In-Reply-To: <18535487.1161894916590.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-645?page=comments#action_12445300 ] 
            
Yoram Arnon commented on HADOOP-645:
------------------------------------

it's streaming specific.

That said, with each map task normally working on one entire dfs block but sometimes working on an entire file (like in the case of gzipped data), generating one file per map will result in fairly large files on output. If the imput was a bunch of small files to begin with, the output is no worse than the input.

With iterative jobs in particular, where the job output is the input to the next job and is really temporary, it is very reasonable to skip shuffling the data and sorting it if possible.

> Map-reduce task does not finish correctly when -reducer NONE is specified
> -------------------------------------------------------------------------
>
>                 Key: HADOOP-645
>                 URL: http://issues.apache.org/jira/browse/HADOOP-645
>             Project: Hadoop
>          Issue Type: Bug
>          Components: contrib/streaming
>    Affects Versions: 0.7.2
>            Reporter: dhruba borthakur
>         Assigned To: dhruba borthakur
>
> Map-reduce task does not finish correctly when -reducer NONE is specified, The NONE option means that the reducer should not be generating any output. Using this option causes an exception in the task tracker:
> java.lang.IllegalArgumentException: URI is not hierarchical
> TaskRunner: at java.io.File.<init>(File.java:335)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:583)
> TaskRunner: at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:96)
> TaskRunner: at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:49)
> TaskRunner: at org.apache.hadoop.mapred.MapTask.run(MapTask.java:213)
> TaskRunner: at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:1240)
> TaskRunner: sideEffectURI_ file:output length 11

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 28 00:13:26 2006
Return-Path: 
 <hadoop-dev-return-4621-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 14590 invoked from network); 28 Oct 2006 00:13:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 00:13:26 -0000
Received: (qmail 31983 invoked by uid 500); 28 Oct 2006 00:13:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 31763 invoked by uid 500); 28 Oct 2006 00:13:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 31754 invoked by uid 99); 28 Oct 2006 00:13:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 17:13:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 17:13:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EF8377142D2
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 17:12:19 -0700 (PDT)
Message-ID: <27663060.1161994339978.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 17:12:19 -0700 (PDT)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-604) DataNodes get NullPointerException
 and become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-604?page=comments#action_12445308 ] 
            
Raghu Angadi commented on HADOOP-604:
-------------------------------------


What should this thread do if it gets a run time exception like this? Should that be part of the patch for this?


> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 28 00:35:00 2006
Return-Path: 
 <hadoop-dev-return-4622-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18249 invoked from network); 28 Oct 2006 00:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 00:35:00 -0000
Received: (qmail 51174 invoked by uid 500); 28 Oct 2006 00:35:11 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51146 invoked by uid 500); 28 Oct 2006 00:35:11 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51136 invoked by uid 99); 28 Oct 2006 00:35:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 17:35:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 17:34:58 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D7D7B7142D2
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 17:33:54 -0700 (PDT)
Message-ID: <11062364.1161995634881.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 17:33:54 -0700 (PDT)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-650) bin/hadoop dfs -lsr / is broken
In-Reply-To: <28993539.1161971356570.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-650?page=comments#action_12445311 ] 
            
Konstantin Shvachko commented on HADOOP-650:
--------------------------------------------

Nobody else complained, but just in case I'd propose to include a deprecated method in FSImage
that would delete files named ".", ".." and "/" if any when loading the image.


> bin/hadoop dfs -lsr / is broken
> -------------------------------
>
>                 Key: HADOOP-650
>                 URL: http://issues.apache.org/jira/browse/HADOOP-650
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Mahadev konar
>            Priority: Minor
>
> bin/hadoop dfs -lsr / 
> used to work but seems like its broken now. The output of this command just keeps on listing "/user" again and again and does not list any other files/directories. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 28 00:35:05 2006
Return-Path: 
 <hadoop-dev-return-4623-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 18370 invoked from network); 28 Oct 2006 00:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 00:35:05 -0000
Received: (qmail 51672 invoked by uid 500); 28 Oct 2006 00:35:15 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 51648 invoked by uid 500); 28 Oct 2006 00:35:15 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 51638 invoked by uid 99); 28 Oct 2006 00:35:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 17:35:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 17:35:01 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE3CA7142C1
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 17:33:57 -0700 (PDT)
Message-ID: <26394419.1161995637973.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 17:33:57 -0700 (PDT)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-604) DataNodes get NullPointerException
 and become unresponsive on 50010
In-Reply-To: <30151363.1161021034972.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-604?page=comments#action_12445312 ] 
            
Yoram Arnon commented on HADOOP-604:
------------------------------------

it's best effort:
if you can recover, by restarting the thread or otherwise, then recover.
Otherwise, take down the entire process, so it's clear that you're down and require manual intervention.

> DataNodes get NullPointerException and become unresponsive on 50010
> -------------------------------------------------------------------
>
>                 Key: HADOOP-604
>                 URL: http://issues.apache.org/jira/browse/HADOOP-604
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0
>            Reporter: Christian Kunz
>         Assigned To: Raghu Angadi
>
> I wonder whether handling of 'children' in FSDataset is thread-safe.
> Exception in thread "org.apache.hadoop.dfs.DataNode$DataXceiveServer@19b04e2" java.lang.NullPointerException
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSDir.checkDirTree(FSDataset.java:162)
>         at org.apache.hadoop.dfs.FSDataset$FSVolume.checkDirs(FSDataset.java:238)
>         at org.apache.hadoop.dfs.FSDataset$FSVolumeSet.checkDirs(FSDataset.java:326)
>         at org.apache.hadoop.dfs.FSDataset.checkDataDir(FSDataset.java:522)
>         at org.apache.hadoop.dfs.DataNode$DataXceiveServer.run(DataNode.java:472)
>         at java.lang.Thread.run(Thread.java:595)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 28 03:21:27 2006
Return-Path: 
 <hadoop-dev-return-4624-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 61124 invoked from network); 28 Oct 2006 03:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 03:21:27 -0000
Received: (qmail 75600 invoked by uid 500); 28 Oct 2006 03:21:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75579 invoked by uid 500); 28 Oct 2006 03:21:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75567 invoked by uid 99); 28 Oct 2006 03:21:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 20:21:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 20:21:24 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5DEEB7142D8
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 20:20:20 -0700 (PDT)
Message-ID: <21532658.1162005620381.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 20:20:20 -0700 (PDT)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-76) Implement speculative re-execution of
 reduces
In-Reply-To: <1176204687.1142031469402.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-76?page=comments#action_12445321 ] 
            
Owen O'Malley commented on HADOOP-76:
-------------------------------------

1. This patch doesn't apply cleanly anymore. The TaskTracker.java has a conflicting change.

2. I agree that it would be nice if FileSystem was an interface, but that is way out of scope for this bug. 

You should derive PhasedFileSystem from FileSystem. It should have a "base" FileSystem that does the real work and a Map<String,String> that maps "final" filenames to "temporary" filenames. 

PhasedFileSystem will need to implement the abstract "Raw" methods from FileSystem. The read operations, can just be sent directly to the base FileSystem. createRaw should create a temporary name, put it in the map and create the file using the base FileSystem. The other "modification" methods (renameRaw, deleteRaw) should throw UnsupportedOperationException.

To ensure that the files are cleaned up correctly, I'd suggest that the temporary files be stored under:

<system dir>/<job id>/<tip id>/<task id>/<unique file id>

(in dfs clearly) so that when the job is finished, we just need to delete the job directory to clean up any remains of failed tasks that didn't clean up properly.

there should also be:
  public void commit() throws IOException {...}
  public void abort() throws IOException {...}
  public void close() throws IOException { abort(); }

For close, it should lock the tip directory, move the files into place, put a DONE touch file in the tip directory and delete the task id directory.

> Implement speculative re-execution of reduces
> ---------------------------------------------
>
>                 Key: HADOOP-76
>                 URL: http://issues.apache.org/jira/browse/HADOOP-76
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.1.0
>            Reporter: Doug Cutting
>         Assigned To: Sanjay Dahiya
>            Priority: Minor
>         Attachments: Hadoop-76.patch, spec_reducev.patch
>
>
> As a first step, reduce task outputs should go to temporary files which are renamed when the task completes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 28 03:37:24 2006
Return-Path: 
 <hadoop-dev-return-4625-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63139 invoked from network); 28 Oct 2006 03:37:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 03:37:24 -0000
Received: (qmail 87975 invoked by uid 500); 28 Oct 2006 03:37:35 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87944 invoked by uid 500); 28 Oct 2006 03:37:35 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87935 invoked by uid 99); 28 Oct 2006 03:37:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 20:37:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 20:37:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 49E9C7142D6
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 20:36:19 -0700 (PDT)
Message-ID: <10495825.1162006579300.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 20:36:19 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-574) want FileSystem implementation for
 Amazon S3
In-Reply-To: <21744554.1159980319607.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-574?page=comments#action_12445322 ] 
            
Doug Cutting commented on HADOOP-574:
-------------------------------------

Hadoop's wiki now includes a page describing how to use Hadoop on Amazon EC2:

http://wiki.apache.org/lucene-hadoop/AmazonEC2


> want FileSystem implementation for Amazon S3
> --------------------------------------------
>
>                 Key: HADOOP-574
>                 URL: http://issues.apache.org/jira/browse/HADOOP-574
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: fs
>            Reporter: Doug Cutting
>
> An S3-based Hadoop FileSystem would make a great addition to Hadoop.
> It would facillitate use of Hadoop on Amazon's EC2 computing grid, as discussed here:
> http://www.mail-archive.com/hadoop-user@lucene.apache.org/msg00318.html
> This is related to HADOOP-571, which would make Hadoop's FileSystem considerably easier to extend.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 28 03:42:25 2006
Return-Path: 
 <hadoop-dev-return-4626-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 63706 invoked from network); 28 Oct 2006 03:42:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 03:42:25 -0000
Received: (qmail 95490 invoked by uid 500); 28 Oct 2006 03:42:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 95269 invoked by uid 500); 28 Oct 2006 03:42:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 95253 invoked by uid 99); 28 Oct 2006 03:42:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 20:42:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 20:42:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3BAB07142D6
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 20:41:18 -0700 (PDT)
Message-ID: <14702898.1162006878241.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 20:41:18 -0700 (PDT)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-4?page=comments#action_12445323 ] 
            
Doug Cutting commented on HADOOP-4:
-----------------------------------

There are already tools to mount WebDAV on Windows, MacOS and Linux.  So HADOOP-496 will provide a more universal solution for this issue.  I'd like to resolve this as a duplicate of that issue.  Does anyone object?


> tool to mount dfs on linux
> --------------------------
>
>                 Key: HADOOP-4
>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.5.0
>         Environment: linux only
>            Reporter: John Xing
>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 28 06:45:25 2006
Return-Path: 
 <hadoop-dev-return-4627-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 83871 invoked from network); 28 Oct 2006 06:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 06:45:25 -0000
Received: (qmail 1079 invoked by uid 500); 28 Oct 2006 06:45:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1049 invoked by uid 500); 28 Oct 2006 06:45:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1036 invoked by uid 99); 28 Oct 2006 06:45:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 23:45:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 23:45:22 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4E1617142DB
	for <hadoop-dev@lucene.apache.org>; Fri, 27 Oct 2006 23:44:18 -0700 (PDT)
Message-ID: <7959767.1162017858317.JavaMail.root@brutus>
Date: Fri, 27 Oct 2006 23:44:18 -0700 (PDT)
From: "Sami Siren (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-4) tool to mount dfs on linux
In-Reply-To: <1520733599.1139079363816.JavaMail.jira@ajax.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-4?page=comments#action_12445345 ] 
            
Sami Siren commented on HADOOP-4:
---------------------------------

Has anyone made any comparison (performance or other) of these two different approaches. It lloks like the webdav version (were dfs client is in servlet) introduces one more network hop compared to fuse version (where the dfs client is in machine using the dfs).

One way or the other I could easily satisfy my mounting needs with any one of these solutions - so hopefully one will be integrated (so it gets maintenance attention).


> tool to mount dfs on linux
> --------------------------
>
>                 Key: HADOOP-4
>                 URL: http://issues.apache.org/jira/browse/HADOOP-4
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: fs
>    Affects Versions: 0.5.0
>         Environment: linux only
>            Reporter: John Xing
>         Attachments: fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, fuse-hadoop-0.1.1.tar.gz
>
>
> tool to mount dfs on linux

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sat Oct 28 08:16:26 2006
Return-Path: 
 <hadoop-dev-return-4628-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 76148 invoked from network); 28 Oct 2006 08:16:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 08:16:26 -0000
Received: (qmail 42273 invoked by uid 500); 28 Oct 2006 08:16:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 42245 invoked by uid 500); 28 Oct 2006 08:16:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 42236 invoked by uid 99); 28 Oct 2006 08:16:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Oct 2006 01:16:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Oct 2006 01:16:23 -0700
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EFDD57142D1
	for <hadoop-dev@lucene.apache.org>; Sat, 28 Oct 2006 01:15:18 -0700 (PDT)
Message-ID: <24422744.1162023318979.JavaMail.root@brutus>
Date: Sat, 28 Oct 2006 01:15:18 -0700 (PDT)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Devaraj Das updated HADOOP-611:
-------------------------------

    Attachment: merge.patch

Apart from the RawKeyValueIterator that the merge APIs return, this patch implements the following merge optimizations:
1. Optimization described in Hadoop-591 (Reducer sort should even out the pass factors in merging different pass)
2. Temp files are deleted as soon as possible
3. Added two new APIs nextRawKey and nextRawValue. Current implementation keeps at least
'factor * (sizeof(RawKey) + sizeof(RawValue))' bytes in memory. Optimized this to keep at most
'factor * (sizeof(RawKey)) + sizeof(RawValue)'  bytes in memory.
4. Merge temp files are spread out on multiple disks if mapred.local.dir is configured to have multiple directories.

The RawKeyValueIterator looks like:
    
public static interface RawKeyValueIterator {
      /** Gets the current raw key
       * @return DataOutputBuffer
       * @throws IOException
       */
      DataOutputBuffer getKey() throws IOException; 
      /** Gets the current raw value
       * @return ValueBytes 
       * @throws IOException
       */
      ValueBytes getValue() throws IOException; 
      /** Sets up the current key and value (for getKey and getValue)
       * @return true if there exists a key/value, false otherwise 
       * @throws IOException
       */
      boolean next() throws IOException;
      /** closes the iterator so that the underlying streams can be closed
       * @throws IOException
       */
      void close() throws IOException;
    }    

The public merge methods are:
//Merges the list of segments of type SegmentDescriptor
1. public RawKeyValueIterator merge(List <SegmentDescriptor> segments)  throws IOException;
//Merges the contents of files passed in Path[]
2. public RawKeyValueIterator merge(Path [] inNames, boolean deleteInputs)  throws IOException;
//Clones the attributes (like compression of the input file and 
//creates a corresponding Writer
3. public Writer cloneFileAttributes(FileSystem fileSys, Path inputFile, Path outputFile, Progressable prog) throws IOException;
//Writes records from RawKeyValueIterator into a file represented 
//by the passed writer
4. public void writeFile(RawKeyValueIterator records, Writer writer) throws IOException;
//Merge the provided files
5. public void merge(Path[] inFiles, Path outFile) throws IOException;

Feedback welcome.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.8.0
>
>         Attachments: merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Oct 29 22:27:28 2006
Return-Path: 
 <hadoop-dev-return-4629-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65074 invoked from network); 29 Oct 2006 22:27:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2006 22:27:28 -0000
Received: (qmail 97300 invoked by uid 500); 29 Oct 2006 22:27:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97271 invoked by uid 500); 29 Oct 2006 22:27:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97262 invoked by uid 99); 29 Oct 2006 22:27:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 14:27:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 14:27:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 58AD57142CD
	for <hadoop-dev@lucene.apache.org>; Sun, 29 Oct 2006 14:26:18 -0800 (PST)
Message-ID: <24661873.1162160778360.JavaMail.root@brutus>
Date: Sun, 29 Oct 2006 14:26:18 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-646) name node server does not load large
 (> 2^31 bytes) edits file
In-Reply-To: <6602315.1161900496769.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-646?page=comments#action_12445466 ] 
            
Milind Bhandarkar commented on HADOOP-646:
------------------------------------------

Dhruba,

Finding out number of entries from the size of the edits file is not possible, since these are not fixed size entries. However, trying to read a next byte and ending when we get an EOFExxception will allow us to avoid the call to available() completely. I am attaching a patch (untested for files > 2G) which does exactly that.

Christian,

Can you try this patch out for the backed-up edits file (6.5 G) that you have and let me know if it worked ? (It should be safe to try this patch out if you backup your image.)

- milind

> name node server does not load large (> 2^31 bytes) edits file
> --------------------------------------------------------------
>
>                 Key: HADOOP-646
>                 URL: http://issues.apache.org/jira/browse/HADOOP-646
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>            Priority: Critical
>
> FileInputStream.available() returns negative values when reading a large file (> 2^31 bytes) -- this is a known (unresolved) java bug:
> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6402006
> Consequence: a large edits file is not loaded and deleted without any warnings. The system reverts back to the old fsimage.
> This happens in jdk1.6 as well, i.e. the bug has not yet been fixed.
> In addition, when finally I was able to load my big cron-backed-up edits file (6.5 GB)  with a kludgy work-around, the blocks did not exist anymore in the data node servers, probably deleted from the previous attempts when the name node server did not know about the changed situation. 
> Moral till this is fixed or worked-around: don't wait too long to restart the name node server. Otherwise this is a way to lose the entire dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Oct 29 22:45:26 2006
Return-Path: 
 <hadoop-dev-return-4630-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 68458 invoked from network); 29 Oct 2006 22:45:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2006 22:45:26 -0000
Received: (qmail 22460 invoked by uid 500); 29 Oct 2006 22:45:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22427 invoked by uid 500); 29 Oct 2006 22:45:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22418 invoked by uid 99); 29 Oct 2006 22:45:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 14:45:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 14:45:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3B6767142EC
	for <hadoop-dev@lucene.apache.org>; Sun, 29 Oct 2006 14:44:18 -0800 (PST)
Message-ID: <33437038.1162161858240.JavaMail.root@brutus>
Date: Sun, 29 Oct 2006 14:44:18 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-646) name node server does not load large
 (> 2^31 bytes) edits file
In-Reply-To: <6602315.1161900496769.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-646?page=all ]

Milind Bhandarkar updated HADOOP-646:
-------------------------------------

    Attachment: edits.patch

Patch for christian to test his large edits file loading.

> name node server does not load large (> 2^31 bytes) edits file
> --------------------------------------------------------------
>
>                 Key: HADOOP-646
>                 URL: http://issues.apache.org/jira/browse/HADOOP-646
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1
>            Reporter: Christian Kunz
>            Priority: Critical
>         Attachments: edits.patch
>
>
> FileInputStream.available() returns negative values when reading a large file (> 2^31 bytes) -- this is a known (unresolved) java bug:
> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6402006
> Consequence: a large edits file is not loaded and deleted without any warnings. The system reverts back to the old fsimage.
> This happens in jdk1.6 as well, i.e. the bug has not yet been fixed.
> In addition, when finally I was able to load my big cron-backed-up edits file (6.5 GB)  with a kludgy work-around, the blocks did not exist anymore in the data node servers, probably deleted from the previous attempts when the name node server did not know about the changed situation. 
> Moral till this is fixed or worked-around: don't wait too long to restart the name node server. Otherwise this is a way to lose the entire dfs.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Oct 29 22:52:28 2006
Return-Path: 
 <hadoop-dev-return-4631-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69489 invoked from network); 29 Oct 2006 22:52:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2006 22:52:28 -0000
Received: (qmail 26738 invoked by uid 500); 29 Oct 2006 22:52:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26710 invoked by uid 500); 29 Oct 2006 22:52:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26701 invoked by uid 99); 29 Oct 2006 22:52:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 14:52:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 14:52:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9DA947142E7
	for <hadoop-dev@lucene.apache.org>; Sun, 29 Oct 2006 14:51:19 -0800 (PST)
Message-ID: <5747119.1162162279643.JavaMail.root@brutus>
Date: Sun, 29 Oct 2006 14:51:19 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-90) DFS is succeptible to data loss in case
 of name node failure
In-Reply-To: <726654166.1142563875329.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-90?page=all ]

Milind Bhandarkar updated HADOOP-90:
------------------------------------

    Attachment: backup.patch

Attached a patch that allows multiple locations to store the filesystem image and the edits log. Thus, dfs.name.dir can now contain multiple directories separated by comma.
Upon startup, the namenode scans all provided locations, and determines the most recent image and the most recent edits log. Recents all images, and writes the new image in all the locations, alongwith a timestamp file.
Namenode format command allows one to selectively format among all the specified locations.
One could use a more reliable disks (including NFS mounted disk) to store namesystem state.


> DFS is succeptible to data loss in case of name node failure
> ------------------------------------------------------------
>
>                 Key: HADOOP-90
>                 URL: http://issues.apache.org/jira/browse/HADOOP-90
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Yoram Arnon
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.8.0
>
>         Attachments: backup.patch, multipleEditsDest.patch
>
>
> Currently, DFS name node stores its log and state in local files.
> This has the disadvantage that a hardware failure of the name node causes a total data loss. 
> Several approaches may be used to address this flaw:
> 1. replicate the name server state files using copy or rsync once in a while, either manually or using a cron job.
> 2. set up secondary name servers and a protocol whereby the primary updates the secondaries. In case of failure, a secondary can take over.
> 3. store the state files as distributed, replicated files in the DFS itself. The difficulty is that it becomes a bootstrap problem, where the name node needs some information, typically stored in its state files, in order to read those same state files.
> solution 1 is fine for non critical systems, but for systems that need to guarantee no data loss it's insufficient.
> Solutions 2 and 3 both seem valid; 3 seems more elegant in that it doesn't require an extra protocol, it leverages the DFS and allows any level of replication for robustness. Below is a proposition for  solution 3.
> 1.	The name node, when it starts up, needs some basic information. That information is not large and can easily be stored in a single block of DFS. We hard code the block location, using block id 0. Block 0 will contain the list of blocks that contain the name node metadata - not the metadata itself (file names, servers, blocks etc), just the list of blocks that contain it. With a block identified by 8 bytes, and 32 MB blocks, we can fit 256K block id's in block 0. 256K blocks of 32MB each can hold 8TB of metadata, which can map a large enough file system, so a single block of block_ids is sufficient.
> 2.	The name node writes his state basically the same way as now: log file plus occasional full state. DFS needs to change to commit changes to open files while allowing continued writing to them, or else the log file wouldn't be valid on name server failure, before the file is closed. 
> 3.	The name node will use double buffering for its state, using blocks 0 and 1. Starting with block 0, it writes its state, then a log of changes. When it's time to write a new state it writes it to node 1. The state includes a generation number, a single byte starting at 0, to enable the name server to identify the valid state. A CRC is written at the end of the block to mark its validity and completeness. The log file is identified by the same generation number as the state it relates to. 
> 4.	The log file will be limited to a single block as well. When that block fills up a new state is written. 32MB of transaction logs should suffice. If not, we could set aside a set of blocks, and set aside a few locations in the super-block (block 0/1) to store that set of block ids.
> 5.	The super-block, the log and the metadata blocks may be exposed as read only files in reserved files in the DFS: /.metadata/* or something.
> 6.	When a name nodes starts, it waits for data nodes to connect to it to report their blocks. It waits until it gets a report about blocks 0 and 1, from which it can continue to read its entire state. After that it continues normally.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Sun Oct 29 22:52:32 2006
Return-Path: 
 <hadoop-dev-return-4632-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 69542 invoked from network); 29 Oct 2006 22:52:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2006 22:52:32 -0000
Received: (qmail 26995 invoked by uid 500); 29 Oct 2006 22:52:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26973 invoked by uid 500); 29 Oct 2006 22:52:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26964 invoked by uid 99); 29 Oct 2006 22:52:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 14:52:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 14:52:29 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C415E7142F3
	for <hadoop-dev@lucene.apache.org>; Sun, 29 Oct 2006 14:51:22 -0800 (PST)
Message-ID: <1064317.1162162282801.JavaMail.root@brutus>
Date: Sun, 29 Oct 2006 14:51:22 -0800 (PST)
From: "Milind Bhandarkar (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-90) DFS is succeptible to data loss in case
 of name node failure
In-Reply-To: <726654166.1142563875329.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-90?page=all ]

Milind Bhandarkar updated HADOOP-90:
------------------------------------

               Status: Patch Available  (was: Open)
        Fix Version/s: 0.8.0
    Affects Version/s: 0.7.2
                           (was: 0.1.0)

Patch submitted.

> DFS is succeptible to data loss in case of name node failure
> ------------------------------------------------------------
>
>                 Key: HADOOP-90
>                 URL: http://issues.apache.org/jira/browse/HADOOP-90
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Yoram Arnon
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.8.0
>
>         Attachments: backup.patch, multipleEditsDest.patch
>
>
> Currently, DFS name node stores its log and state in local files.
> This has the disadvantage that a hardware failure of the name node causes a total data loss. 
> Several approaches may be used to address this flaw:
> 1. replicate the name server state files using copy or rsync once in a while, either manually or using a cron job.
> 2. set up secondary name servers and a protocol whereby the primary updates the secondaries. In case of failure, a secondary can take over.
> 3. store the state files as distributed, replicated files in the DFS itself. The difficulty is that it becomes a bootstrap problem, where the name node needs some information, typically stored in its state files, in order to read those same state files.
> solution 1 is fine for non critical systems, but for systems that need to guarantee no data loss it's insufficient.
> Solutions 2 and 3 both seem valid; 3 seems more elegant in that it doesn't require an extra protocol, it leverages the DFS and allows any level of replication for robustness. Below is a proposition for  solution 3.
> 1.	The name node, when it starts up, needs some basic information. That information is not large and can easily be stored in a single block of DFS. We hard code the block location, using block id 0. Block 0 will contain the list of blocks that contain the name node metadata - not the metadata itself (file names, servers, blocks etc), just the list of blocks that contain it. With a block identified by 8 bytes, and 32 MB blocks, we can fit 256K block id's in block 0. 256K blocks of 32MB each can hold 8TB of metadata, which can map a large enough file system, so a single block of block_ids is sufficient.
> 2.	The name node writes his state basically the same way as now: log file plus occasional full state. DFS needs to change to commit changes to open files while allowing continued writing to them, or else the log file wouldn't be valid on name server failure, before the file is closed. 
> 3.	The name node will use double buffering for its state, using blocks 0 and 1. Starting with block 0, it writes its state, then a log of changes. When it's time to write a new state it writes it to node 1. The state includes a generation number, a single byte starting at 0, to enable the name server to identify the valid state. A CRC is written at the end of the block to mark its validity and completeness. The log file is identified by the same generation number as the state it relates to. 
> 4.	The log file will be limited to a single block as well. When that block fills up a new state is written. 32MB of transaction logs should suffice. If not, we could set aside a set of blocks, and set aside a few locations in the super-block (block 0/1) to store that set of block ids.
> 5.	The super-block, the log and the metadata blocks may be exposed as read only files in reserved files in the DFS: /.metadata/* or something.
> 6.	When a name nodes starts, it waits for data nodes to connect to it to report their blocks. It waits until it gets a report about blocks 0 and 1, from which it can continue to read its entire state. After that it continues normally.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 30 07:23:45 2006
Return-Path: 
 <hadoop-dev-return-4633-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57413 invoked from network); 30 Oct 2006 07:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 07:23:45 -0000
Received: (qmail 25543 invoked by uid 500); 30 Oct 2006 07:23:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 25327 invoked by uid 500); 30 Oct 2006 07:23:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 25310 invoked by uid 99); 30 Oct 2006 07:23:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 23:23:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 23:23:43 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E0EB771431E
	for <hadoop-dev@lucene.apache.org>; Sun, 29 Oct 2006 23:22:35 -0800 (PST)
Message-ID: <16103312.1162192955918.JavaMail.root@brutus>
Date: Sun, 29 Oct 2006 23:22:35 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-611) SequenceFile.Sorter should have a
 merge method that returns an iterator
In-Reply-To: <6429596.1161148355062.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-611?page=all ]

Devaraj Das updated HADOOP-611:
-------------------------------

    Attachment: merge.patch

Cleaned-up patch.

> SequenceFile.Sorter should have a merge method that returns an iterator
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-611
>                 URL: http://issues.apache.org/jira/browse/HADOOP-611
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Owen O'Malley
>         Assigned To: Devaraj Das
>             Fix For: 0.8.0
>
>         Attachments: merge.patch, merge.patch
>
>
> SequenceFile.Sorter should get a new merge method that returns an iterator over the keys/values.
> The current merge method should become a simple method that gets the iterator and writes the records out to a file.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 30 08:47:27 2006
Return-Path: 
 <hadoop-dev-return-4634-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 85708 invoked from network); 30 Oct 2006 08:47:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 08:47:27 -0000
Received: (qmail 61368 invoked by uid 500); 30 Oct 2006 08:47:37 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 61346 invoked by uid 500); 30 Oct 2006 08:47:37 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 61337 invoked by uid 99); 30 Oct 2006 08:47:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 00:47:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 00:47:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DE4277142E7
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 00:46:17 -0800 (PST)
Message-ID: <20165121.1162197977887.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 00:46:17 -0800 (PST)
From: "Sanjay Dahiya (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-612) DFs copyFromLocal fails with
 NullPointerException for a single file
In-Reply-To: <19432339.1161171279760.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-612?page=comments#action_12445519 ] 
            
Sanjay Dahiya commented on HADOOP-612:
--------------------------------------

sorry for late response, missed it somehow. 
I will cross check and get back soon. 

> DFs copyFromLocal fails with NullPointerException for a single file
> -------------------------------------------------------------------
>
>                 Key: HADOOP-612
>                 URL: http://issues.apache.org/jira/browse/HADOOP-612
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1
>            Reporter: Sanjay Dahiya
>            Priority: Blocker
>
> DFS copyFromLocal fails with NullPointerException when copying a single file to DFS. Copying a directory works. 
>   public File getFile(String dirsProp, String path)
>     throws IOException {
>     String[] dirs = getStrings(dirsProp);                     <===== returns null for a single file
>     int hashCode = path.hashCode();
>     for (int i = 0; i < dirs.length; i++) {  // try each local dir                     <==== Throws NullPointerException
>       int index = (hashCode+i & Integer.MAX_VALUE) % dirs.length;
>       File file = new File(dirs[index], path);
>       File dir = file.getParentFile();
>       if (dir.exists() || dir.mkdirs()) {
>         return file;
>       }
>     }
>     throw new IOException("No valid local directories in property: "+dirsProp);
>   }
> Exception in thread "main" java.lang.NullPointerException
>         at org.apache.hadoop.conf.Configuration.getFile(Configuration.java:397)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.newBackupFile(DFSClient.java:913)
>         at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.<init>(DFSClient.java:903)
>         at org.apache.hadoop.dfs.DFSClient.create(DFSClient.java:276)
>         at org.apache.hadoop.dfs.DistributedFileSystem.createRaw(DistributedFileSystem.java:104)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:56)
>         at org.apache.hadoop.fs.FSDataOutputStream$Summer.<init>(FSDataOutputStream.java:45)
>         at org.apache.hadoop.fs.FSDataOutputStream.<init>(FSDataOutputStream.java:146)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:271)
>         at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:178)
>         at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:77)
>         at org.apache.hadoop.dfs.DistributedFileSystem.copyFromLocalFile(DistributedFileSystem.java:186)
>         at org.apache.hadoop.dfs.DFSShell.copyFromLocal(DFSShell.java:45)
>         at org.apache.hadoop.dfs.DFSShell.run(DFSShell.java:516)
>         at org.apache.hadoop.util.ToolBase.doMain(ToolBase.java:187)
>         at org.apache.hadoop.dfs.DFSShell.main(DFSShell.java:570)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 30 12:16:30 2006
Return-Path: 
 <hadoop-dev-return-4635-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44206 invoked from network); 30 Oct 2006 12:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 12:16:30 -0000
Received: (qmail 21158 invoked by uid 500); 30 Oct 2006 12:16:39 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 21084 invoked by uid 500); 30 Oct 2006 12:16:39 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 21063 invoked by uid 99); 30 Oct 2006 12:16:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 04:16:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 04:16:25 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5A3CC7142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 04:15:18 -0800 (PST)
Message-ID: <5859080.1162210518367.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 04:15:18 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538_20061030.tgz

Here's an updated patch incorporating all of Sameer's and Owen's comments... 

... I have also updated TestSequenceFile.java to accept a '-codec' argument and TestCodec.java to automatically test GzipCodec.


> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 30 12:40:30 2006
Return-Path: 
 <hadoop-dev-return-4636-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48806 invoked from network); 30 Oct 2006 12:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 12:40:30 -0000
Received: (qmail 82596 invoked by uid 500); 30 Oct 2006 12:40:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82572 invoked by uid 500); 30 Oct 2006 12:40:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82563 invoked by uid 99); 30 Oct 2006 12:40:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 04:40:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 04:40:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4457F7142E7
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 04:39:19 -0800 (PST)
Message-ID: <8908168.1162211959276.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 04:39:19 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment:     (was: HADOOP-538_20061030.tgz)

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 30 12:40:38 2006
Return-Path: 
 <hadoop-dev-return-4637-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 48923 invoked from network); 30 Oct 2006 12:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 12:40:38 -0000
Received: (qmail 83533 invoked by uid 500); 30 Oct 2006 12:40:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 83502 invoked by uid 500); 30 Oct 2006 12:40:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 83488 invoked by uid 99); 30 Oct 2006 12:40:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 04:40:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 04:40:33 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9EDBA410042
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 04:39:25 -0800 (PST)
Message-ID: <33100881.1162211965647.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 04:39:25 -0800 (PST)
From: "Arun C Murthy (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-538) Implement a nio's 'direct buffer'
 based wrapper over zlib to improve performance of
 java.util.zip.{De|In}flater as a 'custom codec'
In-Reply-To: <12431612.1158299902379.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-538?page=all ]

Arun C Murthy updated HADOOP-538:
---------------------------------

    Attachment: HADOOP-538_20061030.tgz

> Implement a nio's 'direct buffer' based wrapper over zlib to improve performance of java.util.zip.{De|In}flater as a 'custom codec'
> -----------------------------------------------------------------------------------------------------------------------------------
>
>                 Key: HADOOP-538
>                 URL: http://issues.apache.org/jira/browse/HADOOP-538
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.6.1
>            Reporter: Arun C Murthy
>         Assigned To: Arun C Murthy
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-538.patch, HADOOP-538_20061005.tgz, HADOOP-538_20061011.tgz, HADOOP-538_20061026.tgz, HADOOP-538_20061030.tgz, HADOOP-538_benchmarks.tgz
>
>
> There has been more than one instance where java.util.zip's {De|In}flater classes perform unreliably, a simple wrapper over zlib-1.2.3 (latest stable) using java.nio.ByteBuffer (i.e. direct buffers) should go a long way in alleviating these woes.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 30 16:51:26 2006
Return-Path: 
 <hadoop-dev-return-4638-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34421 invoked from network); 30 Oct 2006 16:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 16:51:26 -0000
Received: (qmail 71931 invoked by uid 500); 30 Oct 2006 16:51:36 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 71899 invoked by uid 500); 30 Oct 2006 16:51:36 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 71890 invoked by uid 99); 30 Oct 2006 16:51:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 08:51:36 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 08:51:20 -0800
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout3.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k9UGoWDo089501
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 08:50:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=TXfMFULo0bpBwkJm9KrK+rRccFFpG6GCWkEhEgvivcP9tE/8iRtxVCoqJClrWMsq
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: [jira] Commented: (HADOOP-4) tool to mount dfs on linux
Date: Mon, 30 Oct 2006 08:50:32 -0800
Message-ID: <019601c6fc43$83b407e0$929015ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7959767.1162017858317.JavaMail.root@brutus>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: Acb6XLP4jsYlcTUvR1mm/Ka9XdNhEwB5rOZA
X-Virus-Checked: Checked by ClamAV on apache.org

Let's wait for hadoop-496 to be complete (and commited) before removing
hadoop-4.

> -----Original Message-----
> From: Sami Siren (JIRA) [mailto:jira@apache.org] 
> Sent: Friday, October 27, 2006 11:44 PM
> To: hadoop-dev@lucene.apache.org
> Subject: [jira] Commented: (HADOOP-4) tool to mount dfs on linux
> 
>     [ 
> http://issues.apache.org/jira/browse/HADOOP-4?page=comments#ac
tion_12445345 ] 
>             
> Sami Siren commented on HADOOP-4:
> ---------------------------------
> 
> Has anyone made any comparison (performance or other) of 
> these two different approaches. It lloks like the webdav 
> version (were dfs client is in servlet) introduces one more 
> network hop compared to fuse version (where the dfs client is 
> in machine using the dfs).
> 
> One way or the other I could easily satisfy my mounting needs 
> with any one of these solutions - so hopefully one will be 
> integrated (so it gets maintenance attention).
> 
> 
> > tool to mount dfs on linux
> > --------------------------
> >
> >                 Key: HADOOP-4
> >                 URL: http://issues.apache.org/jira/browse/HADOOP-4
> >             Project: Hadoop
> >          Issue Type: Improvement
> >          Components: fs
> >    Affects Versions: 0.5.0
> >         Environment: linux only
> >            Reporter: John Xing
> >         Attachments: 
> fuse-hadoop-0.1.0_fuse-j.2.2.3_hadoop.0.5.0.tar.gz, 
> fuse-hadoop-0.1.0_fuse-j.2.4_hadoop.0.5.0.tar.gz, 
> fuse-hadoop-0.1.1.tar.gz
> >
> >
> > tool to mount dfs on linux
> 
> -- 
> This message is automatically generated by JIRA.
> -
> If you think it was sent incorrectly contact one of the 
> administrators: 
> http://issues.apache.org/jira/secure/Administrators.jspa
> -
> For more information on JIRA, see: 
> http://www.atlassian.com/software/jira
> 
>         
> 
> 


From MAILER-DAEMON Mon Oct 30 18:24:53 2006
Return-Path: 
 <hadoop-dev-return-4639-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 65468 invoked from network); 30 Oct 2006 18:24:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 18:24:53 -0000
Received: (qmail 87439 invoked by uid 500); 30 Oct 2006 18:25:01 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 87410 invoked by uid 500); 30 Oct 2006 18:25:01 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 87397 invoked by uid 99); 30 Oct 2006 18:25:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 10:25:01 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of james.w.todd@gmail.com
 designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 10:24:47 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1279742ugc
        for <hadoop-dev@lucene.apache.org>;
 Mon, 30 Oct 2006 10:24:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PLNkxpx+uZkXNjkCJdMKwrjdQ4vuD7bIMXSOblRrXc//EutHIAtkqa8BGZ6/6sCERw96ct55GucsXJsqxrnE+cYA0pizcLPoCH3QL9rJ4552PRAarWYZUtnHw8GGdnY9MibHzDGEhJhbJsBk+QAXcZ4qx1GW1v9HYSACDvQkW9M=
Received: by 10.67.121.15 with SMTP id y15mr4623747ugm;
        Mon, 30 Oct 2006 10:24:22 -0800 (PST)
Received: by 10.67.15.3 with HTTP; Mon, 30 Oct 2006 10:24:22 -0800 (PST)
Message-ID: <b0ff1e2d0610301024v68c57375hc6c04f93fba1dab1@mail.gmail.com>
Date: Mon, 30 Oct 2006 10:24:22 -0800
From: "James Todd" <james.w.todd@gmail.com>
To: hadoop-dev@lucene.apache.org
Subject: running dfs standalone
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_Part_54397_8247625.1162232662347"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54397_8247625.1162232662347
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey  Hadoop'sters -

  I wanted to break out the DFS runtime to stand alone in addition to not
requring ssh/rsync for opertions, although those are fine
  choices.

  Here's the results of my cannibalizing the existing scripts, etc (not
perfect):

    http://67.113.25.210/james/projects/hadoop/hadoop.sh

    note: if there is interest and this shell/thread is wiki worthy and
such, i can help w/ the details

  To start w/, the simple nits/issues i encountered earlier are resolved:

    bin/hadoop.sh fails under dash, which is ubuntu's 6.10b /bin/sh
      if [ "$HADOOP_NICENESS" == "" ]; then
    would be nice to add ".txt" suffix to the log and out files so that they
can be viewed w/in the browser

  On the downside, with this script I seem to have lost my log files, which
sucks. I'm pretty sure it is a classpath issue but it eludes
  me thus far.

  Now, the more critical issue. I'm wondering why, if I am understanding
things correctly, why the DataNode *requires* DNS
  resolution vs optionally simply using the specified IP? As a simple case I
created 2 loopback configurations, one specifying
  NameNode and the other specifying the singular DataNode. The two never
connected since Hadoop appears to prefer to
  get the host name and do a lookup on that IP which is not loopback, for my
case, thereby causing the failed to connect problem.

  I can understand why DNS resolution is a good default but why is it
mandatory, unless I am missing something? I can see some
  deployments may which to forego dns and simply map to predetermined IPs.
In the most trivial case, I may want to dev nodes
  on loopback emulating the just mentioned scenario.

  much appreciated,

- james

------=_Part_54397_8247625.1162232662347--

From MAILER-DAEMON Mon Oct 30 18:49:50 2006
Return-Path: 
 <hadoop-dev-return-4640-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84556 invoked from network); 30 Oct 2006 18:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 18:49:50 -0000
Received: (qmail 55710 invoked by uid 500); 30 Oct 2006 18:49:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 55684 invoked by uid 500); 30 Oct 2006 18:49:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 55669 invoked by uid 99); 30 Oct 2006 18:49:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 10:49:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 10:49:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 95F447142F7
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 10:48:16 -0800 (PST)
Message-ID: <12549458.1162234096611.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 10:48:16 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-654) jobs fail with some hardware/system
 failures on a small number of nodes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

jobs fail with some hardware/system failures on a small number of nodes
-----------------------------------------------------------------------

                 Key: HADOOP-654
                 URL: http://issues.apache.org/jira/browse/HADOOP-654
             Project: Hadoop
          Issue Type: Bug
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Yoram Arnon
         Assigned To: Owen O'Malley
            Priority: Minor


occasionally, such as when the OS is out of some resource, a node fails only partly. The node is up and running, the task tracker is running and sending heartbeats, but every task fails because the tasktracker can't fork tasks or something.
In these cases, that task tracker keeps getting assigned tasks to execute, and they all fail.
A couple of nodes like that and jobs start failing badly.

The job tracker should avoid assigning tasks to tasktrackers that are misbehaving.

simple approach: avoid tasktrackers that report many more failures than average (say 3X). Simply use the info sent by the TT.
better but harder: track TT failures over time and:
 1. avoid those that exhibit a high failure *rate*
 2. tell them to shut down

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 30 19:26:13 2006
Return-Path: 
 <hadoop-dev-return-4641-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 6323 invoked from network); 30 Oct 2006 19:26:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 19:26:13 -0000
Received: (qmail 35634 invoked by uid 500); 30 Oct 2006 19:26:21 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 35605 invoked by uid 500); 30 Oct 2006 19:26:21 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 35580 invoked by uid 99); 30 Oct 2006 19:26:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 11:26:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 11:26:06 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E71FB7142F9
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 11:24:58 -0800 (PST)
Message-ID: <7643302.1162236298944.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 11:24:58 -0800 (PST)
From: "eric baldeschwieler (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-654) jobs fail with some hardware/system
 failures on a small number of nodes
In-Reply-To: <12549458.1162234096611.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-654?page=comments#action_12445697 ] 
            
eric baldeschwieler commented on HADOOP-654:
--------------------------------------------

# failures should be visible by node on the job tracker UI.
Nodes that are not getting jobs should be highlighted on the UI.


> jobs fail with some hardware/system failures on a small number of nodes
> -----------------------------------------------------------------------
>
>                 Key: HADOOP-654
>                 URL: http://issues.apache.org/jira/browse/HADOOP-654
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Yoram Arnon
>         Assigned To: Owen O'Malley
>            Priority: Minor
>
> occasionally, such as when the OS is out of some resource, a node fails only partly. The node is up and running, the task tracker is running and sending heartbeats, but every task fails because the tasktracker can't fork tasks or something.
> In these cases, that task tracker keeps getting assigned tasks to execute, and they all fail.
> A couple of nodes like that and jobs start failing badly.
> The job tracker should avoid assigning tasks to tasktrackers that are misbehaving.
> simple approach: avoid tasktrackers that report many more failures than average (say 3X). Simply use the info sent by the TT.
> better but harder: track TT failures over time and:
>  1. avoid those that exhibit a high failure *rate*
>  2. tell them to shut down

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Mon Oct 30 21:38:33 2006
Return-Path: 
 <hadoop-dev-return-4642-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 84597 invoked from network); 30 Oct 2006 21:38:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 21:38:33 -0000
Received: (qmail 70872 invoked by uid 500); 30 Oct 2006 21:38:43 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 70837 invoked by uid 500); 30 Oct 2006 21:38:43 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 70828 invoked by uid 99); 30 Oct 2006 21:38:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 13:38:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 13:38:29 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 27A1D7142EC
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 13:37:21 -0800 (PST)
Message-ID: <13778754.1162244241159.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 13:37:21 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Work started: (HADOOP-331) map outputs should be written to
 a single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Work on HADOOP-331 started by Devaraj Das.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 00:29:22 2006
Return-Path: 
 <hadoop-dev-return-4645-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34572 invoked from network); 31 Oct 2006 00:29:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 00:29:22 -0000
Received: (qmail 5076 invoked by uid 500); 31 Oct 2006 00:29:08 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4863 invoked by uid 500); 31 Oct 2006 00:29:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4755 invoked by uid 99); 31 Oct 2006 00:29:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:29:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:28:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D56E77142EC
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 14:23:18 -0800 (PST)
Message-ID: <9558931.1162246998871.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 14:23:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-553?page=all ]

Raghu Angadi updated HADOOP-553:
--------------------------------

    Attachment: stdout-rotate.patch


This patch rotates and keeps last 5 ".out" files created in hadoop-daemon.sh.




> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-553
>                 URL: http://issues.apache.org/jira/browse/HADOOP-553
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred, dfs
>    Affects Versions: 0.6.1
>            Reporter: Konstantin Shvachko
>         Assigned To: Raghu Angadi
>         Attachments: logging-exceptions.patch, stdout-rotate.patch
>
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and 
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 00:28:53 2006
Return-Path: 
 <hadoop-dev-return-4644-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34296 invoked from network); 31 Oct 2006 00:28:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 00:28:53 -0000
Received: (qmail 4274 invoked by uid 500); 31 Oct 2006 00:29:04 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4244 invoked by uid 500); 31 Oct 2006 00:29:04 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4235 invoked by uid 99); 31 Oct 2006 00:29:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:29:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:28:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 1D8507142D7
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 14:23:21 -0800 (PST)
Message-ID: <585004.1162247001118.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 14:23:21 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-553?page=all ]

Raghu Angadi updated HADOOP-553:
--------------------------------

               Status: Patch Available  (was: Open)
    Affects Version/s: 0.6.1
                           (was: 0.6.2)

> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-553
>                 URL: http://issues.apache.org/jira/browse/HADOOP-553
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred, dfs
>    Affects Versions: 0.6.1
>            Reporter: Konstantin Shvachko
>         Assigned To: Raghu Angadi
>         Attachments: logging-exceptions.patch, stdout-rotate.patch
>
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and 
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 00:29:24 2006
Return-Path: 
 <hadoop-dev-return-4647-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34772 invoked from network); 31 Oct 2006 00:29:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 00:29:24 -0000
Received: (qmail 5619 invoked by uid 500); 31 Oct 2006 00:29:10 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 5006 invoked by uid 500); 31 Oct 2006 00:29:08 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4716 invoked by uid 99); 31 Oct 2006 00:29:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:29:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:28:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 878C871433C
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 16:03:16 -0800 (PST)
Message-ID: <3180020.1162252996552.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 16:03:16 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-655) remove 0.6 deprecations
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

remove 0.6 deprecations
-----------------------

                 Key: HADOOP-655
                 URL: http://issues.apache.org/jira/browse/HADOOP-655
             Project: Hadoop
          Issue Type: Improvement
            Reporter: Doug Cutting
             Fix For: 0.8.0


Code deprecated in the 0.6 release and earlier should be removed before 0.8 is released.

Can folks think of exceptions?  Probably UTF8.  Any others?

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 00:29:24 2006
Return-Path: 
 <hadoop-dev-return-4646-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 34756 invoked from network); 31 Oct 2006 00:29:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 00:29:24 -0000
Received: (qmail 5290 invoked by uid 500); 31 Oct 2006 00:29:09 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 4909 invoked by uid 500); 31 Oct 2006 00:29:07 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 4699 invoked by uid 99); 31 Oct 2006 00:29:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:29:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:28:50 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 71C16410048
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 16:10:20 -0800 (PST)
Message-ID: <24276513.1162253420463.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 16:10:20 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-656) dfs locking doesn't notify the
 application when a lock is lost
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

dfs locking doesn't notify the application when a lock is lost
--------------------------------------------------------------

                 Key: HADOOP-656
                 URL: http://issues.apache.org/jira/browse/HADOOP-656
             Project: Hadoop
          Issue Type: Bug
          Components: dfs
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Sameer Paranjpye


DFS locks may be lost for failing to renew the lease on time, but the application is not notified about the loss of the lock and may therefore perform operations assuming it has the lock, even though the lock has been given to another process. I propose that DFS operations check to see if that client has lost a lock since the last check and if so throw a LostLockException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 00:27:27 2006
Return-Path: 
 <hadoop-dev-return-4643-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 33913 invoked from network); 31 Oct 2006 00:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 00:27:27 -0000
Received: (qmail 1902 invoked by uid 500); 31 Oct 2006 00:27:38 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1715 invoked by uid 500); 31 Oct 2006 00:27:38 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1702 invoked by uid 99); 31 Oct 2006 00:27:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:27:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 16:27:24 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 961D4410049
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 16:26:16 -0800 (PST)
Message-ID: <11001957.1162254376612.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 16:26:16 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-657) Free temporary space should be
 modelled better
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Free temporary space should be modelled better
----------------------------------------------

                 Key: HADOOP-657
                 URL: http://issues.apache.org/jira/browse/HADOOP-657
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


Currently, there is a configurable size that must be free for a task tracker to accept a new task. However, that isn't a very good model of what the task is likely to take. I'd like to propose:

Map tasks:  totalInputSize * conf.getFloat("map.output.growth.factor", 1.0) / numMaps
Reduce tasks: totalInputSize * 2 * conf.getFloat("map.output.growth.factor", 1.0) / numReduces

where totalInputSize is the size of all the maps inputs for the given job.

To start a new task, 
  newTaskAllocation + (sum over running tasks of (1.0 - done) * allocation) >= 
       free disk * conf.getFloat("mapred.max.scratch.allocation", 0.90);

So in English, we will model the expected sizes of tasks and only task tasks that should leave us a 10% margin. With:
map.output.growth.factor -- the relative size of the transient data relative to the map inputs
mapred.max.scratch.allocation -- the maximum amount of our disk we want to allocate to tasks.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 01:23:31 2006
Return-Path: 
 <hadoop-dev-return-4648-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88014 invoked from network); 31 Oct 2006 01:23:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 01:23:31 -0000
Received: (qmail 72768 invoked by uid 500); 31 Oct 2006 01:23:40 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72734 invoked by uid 500); 31 Oct 2006 01:23:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72713 invoked by uid 99); 31 Oct 2006 01:23:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:23:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:23:26 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 501C67142EC
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 17:22:18 -0800 (PST)
Message-ID: <31487220.1162257738325.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 17:22:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-553?page=all ]

Raghu Angadi updated HADOOP-553:
--------------------------------

    Attachment:     (was: logging-exceptions.patch)

> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-553
>                 URL: http://issues.apache.org/jira/browse/HADOOP-553
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred, dfs
>    Affects Versions: 0.6.1
>            Reporter: Konstantin Shvachko
>         Assigned To: Raghu Angadi
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and 
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 01:23:33 2006
Return-Path: 
 <hadoop-dev-return-4649-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88063 invoked from network); 31 Oct 2006 01:23:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 01:23:33 -0000
Received: (qmail 72988 invoked by uid 500); 31 Oct 2006 01:23:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 72955 invoked by uid 500); 31 Oct 2006 01:23:41 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 72869 invoked by uid 99); 31 Oct 2006 01:23:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:23:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:23:28 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 2C5507142F0
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 17:22:20 -0800 (PST)
Message-ID: <25035325.1162257740179.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 17:22:20 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-553?page=all ]

Raghu Angadi updated HADOOP-553:
--------------------------------

    Attachment:     (was: stdout-rotate.patch)

> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-553
>                 URL: http://issues.apache.org/jira/browse/HADOOP-553
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred, dfs
>    Affects Versions: 0.6.1
>            Reporter: Konstantin Shvachko
>         Assigned To: Raghu Angadi
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and 
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 01:26:45 2006
Return-Path: 
 <hadoop-dev-return-4650-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 88418 invoked from network); 31 Oct 2006 01:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 01:26:45 -0000
Received: (qmail 77516 invoked by uid 500); 31 Oct 2006 01:26:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 77351 invoked by uid 500); 31 Oct 2006 01:26:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 77342 invoked by uid 99); 31 Oct 2006 01:26:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:26:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:25:52 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 447177142E7
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 17:24:18 -0800 (PST)
Message-ID: <14201527.1162257858278.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 17:24:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-553?page=all ]

Raghu Angadi updated HADOOP-553:
--------------------------------

    Attachment: logging-exceptions-2.patch


merged two seperate patches into one.

> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-553
>                 URL: http://issues.apache.org/jira/browse/HADOOP-553
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred, dfs
>    Affects Versions: 0.6.1
>            Reporter: Konstantin Shvachko
>         Assigned To: Raghu Angadi
>         Attachments: logging-exceptions-2.patch
>
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and 
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 02:42:19 2006
Return-Path: 
 <hadoop-dev-return-4653-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7684 invoked from network); 31 Oct 2006 02:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 02:42:19 -0000
Received: (qmail 60095 invoked by uid 500); 31 Oct 2006 02:42:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59998 invoked by uid 500); 31 Oct 2006 02:42:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59938 invoked by uid 99); 31 Oct 2006 02:42:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:10 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6A3D8714312
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 18:07:18 -0800 (PST)
Message-ID: <22739129.1162260438432.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 18:07:18 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Assigned: (HADOOP-399) the javadoc currently generates lot
 of warnings about bad fields
In-Reply-To: <23542988.1154118433987.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-399?page=all ]

Nigel Daley reassigned HADOOP-399:
----------------------------------

    Assignee: Nigel Daley  (was: Owen O'Malley)

> the javadoc currently generates lot of warnings about bad fields
> ----------------------------------------------------------------
>
>                 Key: HADOOP-399
>                 URL: http://issues.apache.org/jira/browse/HADOOP-399
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>         Attachments: javadoc-fixes.patch
>
>
> When building the "tar" target, I get the following warnings:
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DFSck.java:475: warning - @return tag has no arguments.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @link: reference not found: DatanodeRegistration
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @see: reference not found: FSNamesystem#registerDatanode(DatanodeRegistration)
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/BytesWritable.java:63: warning - @return tag has no arguments.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:252: warning - Tag @link: can't find Reader(FileSystem,Path,Configuration) in org.apache.hadoop.io.SequenceFile.Reader
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:81: warning - Tag @link: can't find Writer(FileSystem,Path,Class,Class) in org.apache.hadoop.io.SequenceFile.Writer
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:104: warning - @returns is an unknown tag.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:413: warning - @param argument "utf8:" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/WritableUtils.java:338: warning - @param argument "i:" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/mapred/JobConf.java:77: warning - @param argument "conf" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - Tag @author cannot be used in method documentation.  It can only be used in the following types of documentation: overview, package, class/interface.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - @date is an unknown tag.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:62: warning - @param argument "value" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:106: warning - @ is an unknown tag.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 02:42:19 2006
Return-Path: 
 <hadoop-dev-return-4652-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7693 invoked from network); 31 Oct 2006 02:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 02:42:19 -0000
Received: (qmail 60085 invoked by uid 500); 31 Oct 2006 02:42:24 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 59979 invoked by uid 500); 31 Oct 2006 02:42:24 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 59937 invoked by uid 99); 31 Oct 2006 02:42:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:10 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 452A6714313
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 18:07:20 -0800 (PST)
Message-ID: <21758322.1162260440281.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 18:07:20 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-399) the javadoc currently generates lot of
 warnings about bad fields
In-Reply-To: <23542988.1154118433987.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-399?page=all ]

Nigel Daley updated HADOOP-399:
-------------------------------

    Attachment: javadoc-fixes.patch

> the javadoc currently generates lot of warnings about bad fields
> ----------------------------------------------------------------
>
>                 Key: HADOOP-399
>                 URL: http://issues.apache.org/jira/browse/HADOOP-399
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>         Attachments: javadoc-fixes.patch
>
>
> When building the "tar" target, I get the following warnings:
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DFSck.java:475: warning - @return tag has no arguments.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @link: reference not found: DatanodeRegistration
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @see: reference not found: FSNamesystem#registerDatanode(DatanodeRegistration)
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/BytesWritable.java:63: warning - @return tag has no arguments.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:252: warning - Tag @link: can't find Reader(FileSystem,Path,Configuration) in org.apache.hadoop.io.SequenceFile.Reader
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:81: warning - Tag @link: can't find Writer(FileSystem,Path,Class,Class) in org.apache.hadoop.io.SequenceFile.Writer
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:104: warning - @returns is an unknown tag.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:413: warning - @param argument "utf8:" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/WritableUtils.java:338: warning - @param argument "i:" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/mapred/JobConf.java:77: warning - @param argument "conf" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - Tag @author cannot be used in method documentation.  It can only be used in the following types of documentation: overview, package, class/interface.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - @date is an unknown tag.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:62: warning - @param argument "value" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:106: warning - @ is an unknown tag.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 02:42:20 2006
Return-Path: 
 <hadoop-dev-return-4654-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7705 invoked from network); 31 Oct 2006 02:42:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 02:42:20 -0000
Received: (qmail 60896 invoked by uid 500); 31 Oct 2006 02:42:27 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60828 invoked by uid 500); 31 Oct 2006 02:42:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60779 invoked by uid 99); 31 Oct 2006 02:42:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 3F3AE714319
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 18:14:18 -0800 (PST)
Message-ID: <2631464.1162260858256.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 18:14:18 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-399) the javadoc currently generates lot of
 warnings about bad fields
In-Reply-To: <23542988.1154118433987.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-399?page=all ]

Nigel Daley updated HADOOP-399:
-------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.8.0

This patch fixes all the javadoc warnings.  Before committing any new patches, please ensure your patch doesn't generate any javadoc warnings. 

This patch touches a large number of files, specifically these files:

src/examples/org/apache/hadoop/examples/ExampleDriver.java
src/examples/org/apache/hadoop/examples/PiBenchmark.java
src/java/org/apache/hadoop/conf/Configuration.java
src/java/org/apache/hadoop/dfs/DFSShell.java
src/java/org/apache/hadoop/dfs/DFSck.java
src/java/org/apache/hadoop/dfs/DatanodeProtocol.java
src/java/org/apache/hadoop/dfs/DistributedFileSystem.java
src/java/org/apache/hadoop/dfs/NamenodeFsck.java
src/java/org/apache/hadoop/fs/FileSystem.java
src/java/org/apache/hadoop/fs/Path.java
src/java/org/apache/hadoop/io/BytesWritable.java
src/java/org/apache/hadoop/io/SequenceFile.java
src/java/org/apache/hadoop/io/Text.java
src/java/org/apache/hadoop/io/WritableUtils.java
src/java/org/apache/hadoop/io/compress/CompressionInputStream.java
src/java/org/apache/hadoop/mapred/FileSplit.java
src/java/org/apache/hadoop/mapred/JobConf.java
src/java/org/apache/hadoop/mapred/JobHistory.java
src/java/org/apache/hadoop/mapred/SequenceFileInputFilter.java
src/java/org/apache/hadoop/mapred/StatusHttpServer.java
src/java/org/apache/hadoop/mapred/TaskTracker.java
src/java/org/apache/hadoop/util/ReflectionUtils.java
src/java/org/apache/hadoop/util/StringUtils.java
src/java/overview.html
src/test/org/apache/hadoop/mapred/EmptyInputFormat.java


> the javadoc currently generates lot of warnings about bad fields
> ----------------------------------------------------------------
>
>                 Key: HADOOP-399
>                 URL: http://issues.apache.org/jira/browse/HADOOP-399
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>             Fix For: 0.8.0
>
>         Attachments: javadoc-fixes.patch
>
>
> When building the "tar" target, I get the following warnings:
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DFSck.java:475: warning - @return tag has no arguments.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @link: reference not found: DatanodeRegistration
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @see: reference not found: FSNamesystem#registerDatanode(DatanodeRegistration)
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/BytesWritable.java:63: warning - @return tag has no arguments.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:252: warning - Tag @link: can't find Reader(FileSystem,Path,Configuration) in org.apache.hadoop.io.SequenceFile.Reader
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:81: warning - Tag @link: can't find Writer(FileSystem,Path,Class,Class) in org.apache.hadoop.io.SequenceFile.Writer
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:104: warning - @returns is an unknown tag.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:413: warning - @param argument "utf8:" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/WritableUtils.java:338: warning - @param argument "i:" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/mapred/JobConf.java:77: warning - @param argument "conf" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - Tag @author cannot be used in method documentation.  It can only be used in the following types of documentation: overview, package, class/interface.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - @date is an unknown tag.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:62: warning - @param argument "value" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:106: warning - @ is an unknown tag.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 02:42:30 2006
Return-Path: 
 <hadoop-dev-return-4656-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7989 invoked from network); 31 Oct 2006 02:42:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 02:42:30 -0000
Received: (qmail 61104 invoked by uid 500); 31 Oct 2006 02:42:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60982 invoked by uid 500); 31 Oct 2006 02:42:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60782 invoked by uid 99); 31 Oct 2006 02:42:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4D54171431E
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 18:19:18 -0800 (PST)
Message-ID: <15316008.1162261158314.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 18:19:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment:     (was: dfs-report.patch)

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 02:42:33 2006
Return-Path: 
 <hadoop-dev-return-4657-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 8082 invoked from network); 31 Oct 2006 02:42:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 02:42:33 -0000
Received: (qmail 63905 invoked by uid 500); 31 Oct 2006 02:42:44 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 63884 invoked by uid 500); 31 Oct 2006 02:42:44 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 63875 invoked by uid 99); 31 Oct 2006 02:42:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:32 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 5D54D714322
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 18:21:18 -0800 (PST)
Message-ID: <20237480.1162261278369.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 18:21:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment: dfs-report-2.patch


Updated patch with changes to dfshealth.jsp. It looks more pleasing to to eyes now. Note that this patch adds a file hadoop.css in webapps/static/


> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: dfs-report-2.patch
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 02:42:25 2006
Return-Path: 
 <hadoop-dev-return-4655-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 7860 invoked from network); 31 Oct 2006 02:42:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 02:42:25 -0000
Received: (qmail 61072 invoked by uid 500); 31 Oct 2006 02:42:28 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 60951 invoked by uid 500); 31 Oct 2006 02:42:27 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 60774 invoked by uid 99); 31 Oct 2006 02:42:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:42:11 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 30DB3714323
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 18:21:20 -0800 (PST)
Message-ID: <3877376.1162261280197.JavaMail.root@brutus>
Date: Mon, 30 Oct 2006 18:21:20 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Status: Patch Available  (was: Reopened)

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.1, 0.7.0, 0.6.2, 0.6.1, 0.6.0
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: dfs-report-2.patch
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 02:30:34 2006
Return-Path: 
 <hadoop-dev-return-4651-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 5249 invoked from network); 31 Oct 2006 02:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 02:30:34 -0000
Received: (qmail 52504 invoked by uid 500); 31 Oct 2006 02:30:45 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52471 invoked by uid 500); 31 Oct 2006 02:30:45 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52462 invoked by uid 99); 31 Oct 2006 02:30:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:30:45 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of 1004shi@nhncorp.com designates
 220.95.234.208 as permitted sender)
Received: from [220.95.234.208] (HELO ileikr01.nhncorp.com) (220.95.234.208)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 18:30:31 -0800
Received: from mailkr02.nhncorp.com ([220.95.234.209])
          by ileikr01.nhncorp.com (Lotus Domino Release 6.5.4FP1)
          with ESMTP id 2006103111300858-18772 ;
          Tue, 31 Oct 2006 11:30:08 +0900
Received: from [140.211.11.2] ([140.211.11.2])
          by fkiller11.nhncorp.com ([211.218.152.169])
          with ESMTP id 2006103110:26:44:370760.8249.1251044144
          for <1004shi@nhncorp.com>;
          Tue, 31 Oct 2006 10:26:44 +0900 (KST)
Received: (qmail 77351 invoked by uid 500); 31 Oct 2006 01:26:56 -0000
Received: (qmail 77342 invoked by uid 99); 31 Oct 2006 01:26:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:26:56 -0800
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:25:52 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 447177142E7
	for <hadoop-dev@lucene.apache.org>; Mon, 30 Oct 2006 17:24:18 -0800 (PST)
Subject: After NameNode restarts, Can not read a file until Datanodes restart
X-Priority: 3 (Normal)
From: =?EUC-KR?B?vcnFubHm?= <1004shi@nhncorp.com>
To: hadoop-dev@lucene.apache.org
Message-ID: 
 <OF02B318D1.C317B7B4-ON49257218.000D8C69-49257218.000D8C69@nhncorp.com>
Date: Tue, 31 Oct 2006 11:27:59 +0900
X-MIMETrack: Itemize by Notes Server on MAILKR02/NHNCORP(Release 6.5.4FP3
 HF89|May 26, 2006) at
 2006-10-31 =?EUC-KR?B?v8DA/CAxMToyNzo1OA==?=,
	Serialize by Router on MAILKR02/NHNCORP(Release 6.5.4FP3 HF89|May 26,
 2006) at
 2006-10-31 =?EUC-KR?B?v8DA/CAxMTozMDowOA==?=,
	Serialize complete at 2006-10-31 =?EUC-KR?B?v8DA/CAxMTozMDowOA==?=,
	Itemize by SMTP Server on ILEIKR01/NHNCORP(Release 6.5.4FP1|June 19, 2005) at
 2006-10-31 =?EUC-KR?B?v8DA/CAxMTozMDowOA==?=,
	Serialize by Router on ILEIKR01/NHNCORP(Release 6.5.4FP1|June 19, 2005) at
 2006-10-31 =?EUC-KR?B?v8DA/CAxMTozMDozMQ==?=,
	Serialize complete at 2006-10-31 =?EUC-KR?B?v8DA/CAxMTozMDozMQ==?=
MIME-Version: 1.0
X-Mailer: BoraWord ActiveX Control 1.6.5.1020
Content-Type: multipart/alternative;
 	boundary="----=_NextPart_000_7C65_3C397CF3.46FCD27A"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_7C65_3C397CF3.46FCD27A
Content-Transfer-Encoding: base64
Content-Type: text/plain;
	charset="us-ascii"

DQogDQpGb3IgZXhhbXBsZSwgTmV3IGZpbGUgImEudHh0IiBpcyBjcmVhdGVkIG9uIERGUy4NCiAN
CkJlZm9yZSBOYW1lTm9kZSBzaHV0cyBkb3duLCBBIHBhaXIgb2YgQmxvY2sgYW5kIERhdGFOb2Rl
SW5mb1tdIGZvciAiYS50eHQiIGlzIGRpc3BsYXllZCAoVXNpbmcgTG9jYXRlZEJsb2NrIGNsYXNz
KQ0KIA0KQWZ0ZXIgTmFtZU5vZGUgcmVzdGFydHMsIE9ubHkgYSBCbG9jayBJbmZvIHJlbWFpbnMs
IERhdGFOb2RlSW5mbyBkaXNhcHBlYXJzLi4uDQogDQpTbyB3aGVuIHRyeSB0byByZWFkIHRoZSBm
aWxlLCB0aGUgbWVzc2FnZSBsaWtlICJObyBub2RlIGF2YWlsYWJsZSBmb3IgYmxvY2s6IGJsa19Y
WFhYWFhYIC4uLi4uLiBObyBsaXZlIG5vZGVzIGNvbnRhaW4gY3VycmVudCBibG9jayINCiANCmlz
IGRpc3BsYXllZC4gIGFuZCB0aGVuIHdoZW4gRGF0YW5vZGVzIHJlc3RhcnRzLCB0aGUgcHJvYmxl
bSBpcyBzb2x2ZWQgYW5kIENsaWVudCBjYW4gYWNjZXNzIHRvIHRoZSBmaWxlLg0KIA0KRm9yIENs
dXN0ZXIgd2l0aCBzbWFsbCBOb2RlcyBpdCBjb3VsZCBiZSBvayB0byByZXN0YXJ0IGFsbCB0aGUg
TmFtZU5vZGUgYW5kIERhdGFOb2RlcyB0b2dldGhlciwgYnV0IEJpZyBDbHVzdGVyIG1vcmUgdGhh
biBodW5kcmVkcyBvZiBOb2RlcyBpcyBkaWZmZXJlbnQgc3RvcnkuDQogDQpBbnkgQ29tbWVudHMg
d291bGQgYmUgYXBwcmVjaWF0ZWQNCiANCiANCiA=

------=_NextPart_000_7C65_3C397CF3.46FCD27A--

From MAILER-DAEMON Tue Oct 31 17:51:30 2006
Return-Path: 
 <hadoop-dev-return-4658-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 93167 invoked from network); 31 Oct 2006 17:51:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 17:51:30 -0000
Received: (qmail 12581 invoked by uid 500); 31 Oct 2006 17:51:41 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 12553 invoked by uid 500); 31 Oct 2006 17:51:40 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 12537 invoked by uid 99); 31 Oct 2006 17:51:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 09:51:40 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.173] (HELO mrout3.yahoo.com) (216.145.54.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 09:51:24 -0800
Received: from memberfamouslx (memberfamous-lx.corp.yahoo.com [172.21.103.73])
	by mrout3.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k9VHoMXh020481
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 09:50:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
	b=d0hboslRnqaZkYpigDHsm7Nhbn2kFwqTrcjEXeglET4HXTQ2BIB8CuoMmWx5Q8ej
From: "Yoram Arnon" <yarnon@yahoo-inc.com>
To: <hadoop-dev@lucene.apache.org>
Subject: RE: After NameNode restarts,
 Can not read a file until Datanodes restart
Date: Tue, 31 Oct 2006 09:50:22 -0800
Message-ID: <022001c6fd15$09ee98d0$929015ac@ds.corp.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ks_c_5601-1987"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: 
 <OF02B318D1.C317B7B4-ON49257218.000D8C69-49257218.000D8C69@nhncorp.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: Acb8lJAfHf60HKfZQ7CcghbG+r5FzAAf7iuw
X-Virus-Checked: Checked by ClamAV on apache.org

It's sort-of inherent: until the datanodes start and report in, the data =
is
unavailable.

Under normal operation, if a datanode dies its data is replicated and =
all
is well, but during startup, until most of the datanodes start up and
report it the data is not there. As a rule, with a replication factor of =
3,
as long as three or more nodes are missing some data will be missing.

Safe mode makes this both clear and configurable: you configure the
percentage of blocks required to exit safe mode, and the time to wait to
allow the last nodes to report. The default is good for large clusters:
99.9% of the blocks plus 30 seconds and yes, it takes a few minutes for =
a
several hundred node cluster to start. Smaller values may be configured =
for
a small/toy cluster.

Yoram

> -----Original Message-----
> From: =BD=C9=C5=B9=B1=E6 [mailto:1004shi@nhncorp.com]=20
> Sent: Monday, October 30, 2006 6:28 PM
> To: hadoop-dev@lucene.apache.org
> Subject: After NameNode restarts, Can not read a file until=20
> Datanodes restart
>=20
>=20
> =20
> For example, New file "a.txt" is created on DFS.
> =20
> Before NameNode shuts down, A pair of Block and=20
> DataNodeInfo[] for "a.txt" is displayed (Using LocatedBlock class)
> =20
> After NameNode restarts, Only a Block Info remains,=20
> DataNodeInfo disappears...
> =20
> So when try to read the file, the message like "No node=20
> available for block: blk_XXXXXXX ...... No live nodes contain=20
> current block"
> =20
> is displayed.  and then when Datanodes restarts, the problem=20
> is solved and Client can access to the file.
> =20
> For Cluster with small Nodes it could be ok to restart all=20
> the NameNode and DataNodes together, but Big Cluster more=20
> than hundreds of Nodes is different story.
> =20
> Any Comments would be appreciated
> =20
> =20
> =20


From MAILER-DAEMON Tue Oct 31 18:07:40 2006
Return-Path: 
 <hadoop-dev-return-4659-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 98083 invoked from network); 31 Oct 2006 18:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 18:07:40 -0000
Received: (qmail 44031 invoked by uid 500); 31 Oct 2006 18:07:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 44007 invoked by uid 500); 31 Oct 2006 18:07:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 43961 invoked by uid 99); 31 Oct 2006 18:07:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:07:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:07:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A91827142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 10:07:17 -0800 (PST)
Message-ID: <28889817.1162318037690.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 10:07:17 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-648) JobClient waitForCompletion() method
 sometimes throws an NPE
In-Reply-To: <20676975.1161931936803.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-648?page=comments#action_12445980 ] 
            
Owen O'Malley commented on HADOOP-648:
--------------------------------------

I looked at the code and that should only come back null if the job has been retired by the job tracker (24 hours after it finished/failed).

I wonder if there is a race condition on the JobTracker's job map.

> JobClient waitForCompletion() method sometimes throws an NPE
> ------------------------------------------------------------
>
>                 Key: HADOOP-648
>                 URL: http://issues.apache.org/jira/browse/HADOOP-648
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.6.1
>            Reporter: Thomas Friol
>
> java.lang.NullPointerException
>         at org.apache.hadoop.mapred.JobClient$NetworkedJob.isComplete(JobClient.java:113)
>         at org.apache.hadoop.mapred.JobClient$NetworkedJob.waitForCompletion(JobClient.java:128)
> Does someone have an idea why this happens ?
> Thanks for any help.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 18:18:46 2006
Return-Path: 
 <hadoop-dev-return-4660-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1075 invoked from network); 31 Oct 2006 18:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 18:18:46 -0000
Received: (qmail 67009 invoked by uid 500); 31 Oct 2006 18:18:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66984 invoked by uid 500); 31 Oct 2006 18:18:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66975 invoked by uid 99); 31 Oct 2006 18:18:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:18:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:18:42 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 44A357142EC
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 10:18:22 -0800 (PST)
Message-ID: <25326315.1162318702278.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 10:18:22 -0800 (PST)
From: "Devaraj Das (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-331) map outputs should be written to a
 single output file with an index
In-Reply-To: <25178997.1151527889918.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-331?page=all ]

Devaraj Das updated HADOOP-331:
-------------------------------

    Attachment: 331-design.txt

Attaching a revised design spec.

> map outputs should be written to a single output file with an index
> -------------------------------------------------------------------
>
>                 Key: HADOOP-331
>                 URL: http://issues.apache.org/jira/browse/HADOOP-331
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.3.2
>            Reporter: eric baldeschwieler
>         Assigned To: Devaraj Das
>         Attachments: 331-design.txt, 331.txt
>
>
> The current strategy of writing a file per target map is consuming a lot of unused buffer space (causing out of memory crashes) and puts a lot of burden on the FS (many opens, inodes used, etc).  
> I propose that we write a single file containing all output and also write an index file IDing which byte range in the file goes to each reduce.  This will remove the issue of buffer waste, address scaling issues with number of open files and generally set us up better for scaling.  It will also have advantages with very small inputs, since the buffer cache will reduce the number of seeks needed and the data serving node can open a single file and just keep it open rather than needing to do directory and open ops on every request.
> The only issue I see is that in cases where the task output is substantiallyu larger than its input, we may need to spill multiple times.  In this case, we can do a merge after all spills are complete (or during the final spill).

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 18:22:42 2006
Return-Path: 
 <hadoop-dev-return-4661-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 2829 invoked from network); 31 Oct 2006 18:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 18:22:42 -0000
Received: (qmail 75422 invoked by uid 500); 31 Oct 2006 18:22:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75396 invoked by uid 500); 31 Oct 2006 18:22:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75387 invoked by uid 99); 31 Oct 2006 18:22:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:22:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:22:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 791277142F0
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 10:22:19 -0800 (PST)
Message-ID: <32641207.1162318939493.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 10:22:19 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-658) source headers must conform to new
 Apache guidelines
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

source headers must conform to new Apache guidelines
----------------------------------------------------

                 Key: HADOOP-658
                 URL: http://issues.apache.org/jira/browse/HADOOP-658
             Project: Hadoop
          Issue Type: Bug
            Reporter: Doug Cutting
         Assigned To: Doug Cutting
             Fix For: 0.8.0


All Apache releases after November 1st must conform to the new header guidelines, documented at:

http://www.apache.org/legal/src-headers.html


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 18:53:08 2006
Return-Path: 
 <hadoop-dev-return-4662-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 11819 invoked from network); 31 Oct 2006 18:53:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 18:53:08 -0000
Received: (qmail 41908 invoked by uid 500); 31 Oct 2006 18:53:19 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 41701 invoked by uid 500); 31 Oct 2006 18:53:18 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 41691 invoked by uid 99); 31 Oct 2006 18:53:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:53:18 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.145.54.171] (HELO mrout1.yahoo.com) (216.145.54.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:53:02 -0800
Received: from [10.72.104.183] (enoughhot-lx.corp.yahoo.com [10.72.104.183])
	by mrout1.yahoo.com (8.13.6/8.13.6/y.out) with ESMTP id k9VIqJfB015435
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 10:52:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=message-id:date:from:user-agent:x-accept-language:
	mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
	b=Ee4xFDTfej32pvnrM1y2GqJFJIl+cyrnLPlG9DbynhvivoBoJr2e0bHnjR04YQ7Y
Message-ID: <45479B63.4030107@yahoo-inc.com>
Date: Tue, 31 Oct 2006 10:52:19 -0800
From: Konstantin Shvachko <shv@yahoo-inc.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: hadoop-dev@lucene.apache.org
Subject: Re: After NameNode restarts, Can not read a file until Datanodes
 restart
References: 
 <OF02B318D1.C317B7B4-ON49257218.000D8C69-49257218.000D8C69@nhncorp.com>
In-Reply-To: 
 <OF02B318D1.C317B7B4-ON49257218.000D8C69-49257218.000D8C69@nhncorp.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi  심탁길

If you restart the name-node only, the data-nodes will continue sending 
block reports to the name-node
once in an hour, which is the default block-report interval. That means 
all blocks will be reported to the
name-node sooner or later. But you want that sooner of course.
IMO we should request block reports when the name-node restarts.
For now I recommend to wait 10 minutes between shutdown and restart. 
Then all data-nodes
will expire and the name-node will ask them to send block reports asap. 
This works with the
trunk version. HADOOP-641 is scheduled for 0.8.0.

Константин


심탁길 wrote:

> 
>For example, New file "a.txt" is created on DFS.
> 
>Before NameNode shuts down, A pair of Block and DataNodeInfo[] for "a.txt" is displayed (Using LocatedBlock class)
> 
>After NameNode restarts, Only a Block Info remains, DataNodeInfo disappears...
> 
>So when try to read the file, the message like "No node available for block: blk_XXXXXXX ...... No live nodes contain current block"
> 
>is displayed.  and then when Datanodes restarts, the problem is solved and Client can access to the file.
> 
>For Cluster with small Nodes it could be ok to restart all the NameNode and DataNodes together, but Big Cluster more than hundreds of Nodes is different story.
> 
>Any Comments would be appreciated
> 
> 
> 
>


From MAILER-DAEMON Tue Oct 31 18:57:41 2006
Return-Path: 
 <hadoop-dev-return-4663-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 12779 invoked from network); 31 Oct 2006 18:57:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 18:57:41 -0000
Received: (qmail 48684 invoked by uid 500); 31 Oct 2006 18:57:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48660 invoked by uid 500); 31 Oct 2006 18:57:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48651 invoked by uid 99); 31 Oct 2006 18:57:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:57:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:57:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4A5DD7142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 10:57:18 -0800 (PST)
Message-ID: <29447295.1162321038302.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 10:57:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment:     (was: dfs-report-2.patch)

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 18:59:41 2006
Return-Path: 
 <hadoop-dev-return-4664-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 13265 invoked from network); 31 Oct 2006 18:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 18:59:41 -0000
Received: (qmail 52459 invoked by uid 500); 31 Oct 2006 18:59:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 52430 invoked by uid 500); 31 Oct 2006 18:59:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 52421 invoked by uid 99); 31 Oct 2006 18:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:59:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 10:59:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 423817142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 10:59:18 -0800 (PST)
Message-ID: <8153527.1162321158268.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 10:59:18 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment: dfs-report-2.patch


Final version I hope.

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: dfs-report-2.patch
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 19:29:51 2006
Return-Path: 
 <hadoop-dev-return-4665-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23282 invoked from network); 31 Oct 2006 19:29:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 19:29:51 -0000
Received: (qmail 33969 invoked by uid 500); 31 Oct 2006 19:29:56 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 33946 invoked by uid 500); 31 Oct 2006 19:29:56 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 33922 invoked by uid 99); 31 Oct 2006 19:29:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 11:29:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 11:29:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id F2D597142EF
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 11:29:20 -0800 (PST)
Message-ID: <8106967.1162322960992.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 11:29:20 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Resolved: (HADOOP-658) source headers must conform to new
 Apache guidelines
In-Reply-To: <32641207.1162318939493.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-658?page=all ]

Doug Cutting resolved HADOOP-658.
---------------------------------

    Resolution: Fixed

I just fixed this.

> source headers must conform to new Apache guidelines
> ----------------------------------------------------
>
>                 Key: HADOOP-658
>                 URL: http://issues.apache.org/jira/browse/HADOOP-658
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.8.0
>
>
> All Apache releases after November 1st must conform to the new header guidelines, documented at:
> http://www.apache.org/legal/src-headers.html

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 20:00:41 2006
Return-Path: 
 <hadoop-dev-return-4666-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 41173 invoked from network); 31 Oct 2006 20:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 20:00:41 -0000
Received: (qmail 9311 invoked by uid 500); 31 Oct 2006 20:00:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 9287 invoked by uid 500); 31 Oct 2006 20:00:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 9278 invoked by uid 99); 31 Oct 2006 20:00:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:00:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:00:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id C966D7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 12:00:17 -0800 (PST)
Message-ID: <3966605.1162324817822.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 12:00:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-636) MapFile constructor should accept
 Progressible
In-Reply-To: <23627694.1161798016605.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-636?page=all ]

Doug Cutting updated HADOOP-636:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.

> MapFile constructor should accept Progressible
> ----------------------------------------------
>
>                 Key: HADOOP-636
>                 URL: http://issues.apache.org/jira/browse/HADOOP-636
>             Project: Hadoop
>          Issue Type: New Feature
>          Components: io
>            Reporter: Doug Cutting
>         Assigned To: Doug Cutting
>             Fix For: 0.8.0
>
>         Attachments: HADOOP-636.patch
>
>
> MapFile's constructor should accept a Progressible and pass it down to the underlying SequenceFiles.  This permits DFS to signal task progress while writing blocks, and can keep reduce tasks from timing out when block writes are slow.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 20:15:00 2006
Return-Path: 
 <hadoop-dev-return-4667-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 55569 invoked from network); 31 Oct 2006 20:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 20:15:00 -0000
Received: (qmail 38915 invoked by uid 500); 31 Oct 2006 20:14:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 38882 invoked by uid 500); 31 Oct 2006 20:14:55 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 38846 invoked by uid 99); 31 Oct 2006 20:14:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:14:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:14:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 287017142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 12:14:21 -0800 (PST)
Message-ID: <10086324.1162325661163.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 12:14:21 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-576) Enhance streaming to use the new
 caching feature
In-Reply-To: <17355410.1159997959537.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-576?page=all ]

Doug Cutting updated HADOOP-576:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Mahadev!

> Enhance streaming to use the new caching feature
> ------------------------------------------------
>
>                 Key: HADOOP-576
>                 URL: http://issues.apache.org/jira/browse/HADOOP-576
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: contrib/streaming
>            Reporter: Michel Tourn
>         Assigned To: Mahadev konar
>         Attachments: streaming.patch
>
>
> Design proposal to expose filecache access to Hadoop streaming.
> The main difference with the pure-Java filecache code is:
> 1. As part of job launch (in hadoopStreaming client) we validate presence of
> cached archives/files in DFS.
> 2. As part of Task initialization, a symbolic link to cached files/unarchived
> directories is created in the Task working directory.
> C1. New command-line options (example)
> -cachearchive dfs:/user/me/big.zip#big_1 
> -cachefile dfs:/user/other/big.zip#big_2 
> -cachearchive dfs:/user/me/bang.zip
> This maps to API calls to static methods:
> DistributedCache.addCacheArchive(URI uri, Configuration conf)
> DistributedCache.addCacheFile(URI uri, Configuration conf)
> This is done in class StreamJob methods parseArgv() and setJobConf().
> The code should be similar to the way "-file" is handled.
> One difference is that we now require a FileSystem instance to VALIDATE the DFS
> paths in -cachefile and -cachearchive. The FileSystem instance should not be
> accessed before the filesystem is set by this: setUserJobConfProps(true);
> If FileSystem instance is "local" and there are -cachearchive/-cachefile
> options , then fail: this is not supported.
> Else this should return true:
> fs_.isFile(Path) for each -cachearchive/-cachefile option.
> Only in verbose mode: show the isFile status of each option.
> In any verbosity mode: show the first failed isFile() status and abort using
> method StreamJob.fail().
> C2. Task initialization
> The symlinks are called:
> Workingdir/big_1 (points to directory: /cache/user/me/big_zip)
> Workingdir/big_2 (points to file: /cache/user/other/big.zip)
> Workingdir/bang.zip (points to directory /cache/user/me/bang_zip)
> This will require hadoopStreaming to create symbolic links.
> Hadoop should have code to do this in a portable way.
> Although this may not be supported on non-Unix platforms. 
> Cross-platform support is harder than for hard-links. 
> Cygwin soft links are not a solution: they only work for applications compiled with
> cygwin1.dll)
> Symbolic links make JUnit tests less portable.
> So maybe the test should run as part of ant target test-unix. (in contrib/streaming/build.xml)
> The parameters after -cachearchive and -cachefile have the following
> properties:
> A. you can optionally give a name to your symlink (after #)
> B. the default name is the leaf name (big.zip, big.zip, bang.zip)
> C. if the same leaf name appears more than once you MUST give a name. Otherwise
> streaming client aborts and complains. For example with this, Streaming client
> should complain:
> -cachearchive dfs:/user/me/big.zip 
> -cachefile dfs:/user/other/big.zip
> This complains because multiple occurrences of "big.zip" are not disambiguated
> with #big_1, #big_2.
> Ideally the Streaming client error message should then generate an example on
> how to fix the parameters:
> -cachearchive dfs:/user/me/big.zip#1
> -cachefile dfs:/user/other/big.zip#2
> ---------
> hadoop-Client note:
> Currently argv parsing is position-independant. i.e. changing the order of
> arguments never impacts the behaviour of hadoopStreaming. It would be good to
> keep this behaviour.
> URI notes:
> scheme is "dfs:" for consistency with current state of Hadoop code.
> However there is a proposal to change the scheme to "hdfs:"
> Using a URI fragment to give a local name to the resource is unusual. The main
> constraint is that the URI should remain parsable by java.net.URI(String). And
> encoding attributes in the fragment is standard (like CGI parameters in an HTTP
> GET request) (fragment is #big2 in dfs:/user/other/big.zip#big_2)

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 20:16:46 2006
Return-Path: 
 <hadoop-dev-return-4668-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57127 invoked from network); 31 Oct 2006 20:16:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 20:16:46 -0000
Received: (qmail 47934 invoked by uid 500); 31 Oct 2006 20:16:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 47906 invoked by uid 500); 31 Oct 2006 20:16:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 47897 invoked by uid 99); 31 Oct 2006 20:16:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:16:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:16:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id CE7AE7142DC
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 12:16:19 -0800 (PST)
Message-ID: <3674153.1162325779843.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 12:16:19 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment: dfs-report-3.patch


Ver 3 of the patch. Another minor change in jsp.

Please note that this patch adds a file : src/webapps/static/hadoop.css


> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: dfs-report-3.patch
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 20:16:46 2006
Return-Path: 
 <hadoop-dev-return-4669-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 57130 invoked from network); 31 Oct 2006 20:16:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 20:16:46 -0000
Received: (qmail 48154 invoked by uid 500); 31 Oct 2006 20:16:55 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 48123 invoked by uid 500); 31 Oct 2006 20:16:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 48106 invoked by uid 99); 31 Oct 2006 20:16:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:16:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:16:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id BEBBA7142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 12:16:21 -0800 (PST)
Message-ID: <16259606.1162325781778.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 12:16:21 -0800 (PST)
From: "Raghu Angadi (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Raghu Angadi updated HADOOP-599:
--------------------------------

    Attachment:     (was: dfs-report-2.patch)

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>         Attachments: dfs-report-3.patch
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 20:30:38 2006
Return-Path: 
 <hadoop-dev-return-4670-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 73947 invoked from network); 31 Oct 2006 20:30:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 20:30:38 -0000
Received: (qmail 75525 invoked by uid 500); 31 Oct 2006 20:30:49 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75499 invoked by uid 500); 31 Oct 2006 20:30:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75480 invoked by uid 99); 31 Oct 2006 20:30:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:30:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:30:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FA327142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 12:30:16 -0800 (PST)
Message-ID: <25996777.1162326616585.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 12:30:16 -0800 (PST)
From: "Konstantin Shvachko (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-659) Boost the priority of re-replicating
 blocks that are far from their replication target
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Boost the priority of re-replicating blocks that are far from their replication target
--------------------------------------------------------------------------------------

                 Key: HADOOP-659
                 URL: http://issues.apache.org/jira/browse/HADOOP-659
             Project: Hadoop
          Issue Type: Improvement
          Components: dfs
    Affects Versions: 0.7.2
            Reporter: Konstantin Shvachko
         Assigned To: Konstantin Shvachko


I see two types of replications that should be accelerated compared to all others.
1. Blocks that have only one remaining copy (but are required to have higher replication).
2. Blocks that have less than 1/3 of their replicas in place.
The latter occurs when map/reduce sets replication of certain files to 10, and we want
it happen fast to achieve better performance on the tasks.

So I think we should distinguish two major groups of under-replicated blocks:
first-priority (having only 1 copy or less than 1/3 of required replicas), and the rest.
The name-node places first-priority blocks into the beginning of the neededReplication
list, and the rest are placed at the end. That way the first-priority blocks will be replicated
first and then the others.


-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 20:30:41 2006
Return-Path: 
 <hadoop-dev-return-4671-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 74028 invoked from network); 31 Oct 2006 20:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 20:30:41 -0000
Received: (qmail 75776 invoked by uid 500); 31 Oct 2006 20:30:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 75753 invoked by uid 500); 31 Oct 2006 20:30:52 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 75744 invoked by uid 99); 31 Oct 2006 20:30:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:30:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:30:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id DF85D7142EC
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 12:30:17 -0800 (PST)
Message-ID: <18932470.1162326617913.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 12:30:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-482) unit test hangs when a cluster is
 running on the same machine
In-Reply-To: <15387551.1156475228032.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-482?page=all ]

Doug Cutting updated HADOOP-482:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Wendy!

> unit test hangs when a cluster is running on the same machine
> -------------------------------------------------------------
>
>                 Key: HADOOP-482
>                 URL: http://issues.apache.org/jira/browse/HADOOP-482
>             Project: Hadoop
>          Issue Type: Bug
>            Reporter: Wendy Chien
>         Assigned To: Wendy Chien
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: unittest3.patch
>
>
> Instead of hanging, it should report an error.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 20:42:48 2006
Return-Path: 
 <hadoop-dev-return-4672-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 81599 invoked from network); 31 Oct 2006 20:42:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 20:42:48 -0000
Received: (qmail 97520 invoked by uid 500); 31 Oct 2006 20:42:54 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 97489 invoked by uid 500); 31 Oct 2006 20:42:54 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 97435 invoked by uid 99); 31 Oct 2006 20:42:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:42:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:42:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 718977142E7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 12:42:19 -0800 (PST)
Message-ID: <5386693.1162327339461.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 12:42:19 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-647) Map outputs can't have a different
 type of compression from the reduce outputs
In-Reply-To: <5320427.1161928276635.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-647?page=comments#action_12446051 ] 
            
Doug Cutting commented on HADOOP-647:
-------------------------------------

If map.output.compression.type is not specified, shouldn't it default to the job's compression type?

Also, if  we have a codec that's can keep up with disk io (like lzo) then block compression should be faster for sorting and merging, since it will reduce the amount of i/o.

> Map outputs can't have a different type of compression from the reduce outputs
> ------------------------------------------------------------------------------
>
>                 Key: HADOOP-647
>                 URL: http://issues.apache.org/jira/browse/HADOOP-647
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>         Attachments: map-out-compress-type.patch
>
>
> Right now there is only a single knob to control the compression type for sequence files. Sorting and merging is faster with record compression, but the files are smaller with block compression. I'd like to introduce a mapOutputCompressionType that lets the application control how the map outputs are compressed.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 21:22:40 2006
Return-Path: 
 <hadoop-dev-return-4673-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 1331 invoked from network); 31 Oct 2006 21:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 21:22:40 -0000
Received: (qmail 62060 invoked by uid 500); 31 Oct 2006 21:22:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 62029 invoked by uid 500); 31 Oct 2006 21:22:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 62020 invoked by uid 99); 31 Oct 2006 21:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 13:22:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 13:22:37 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id A5C3D7142D7
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 13:22:17 -0800 (PST)
Message-ID: <26845064.1162329737676.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 13:22:17 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-225) tasks are left over when a job fails
In-Reply-To: <14555788.1147888325909.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-225?page=comments#action_12446061 ] 
            
Owen O'Malley commented on HADOOP-225:
--------------------------------------

Has anyone seen this recently or can we close it?

> tasks are left over when a job fails
> ------------------------------------
>
>                 Key: HADOOP-225
>                 URL: http://issues.apache.org/jira/browse/HADOOP-225
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Yoram Arnon
>            Priority: Minor
>
> when jobs are stopped or otherwise fail, tasks are often left around.
> the job tracker shows that there are map or reduce (mostly reduce) tasks running, when no job is running.
> these accumulate over time.
> eventually there are so many of those, that the job tracker can't launch new tasks, requiring a restart of the MR cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 21:43:39 2006
Return-Path: 
 <hadoop-dev-return-4674-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 10067 invoked from network); 31 Oct 2006 21:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 21:43:39 -0000
Received: (qmail 3885 invoked by uid 500); 31 Oct 2006 21:43:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 3867 invoked by uid 500); 31 Oct 2006 21:43:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 3858 invoked by uid 99); 31 Oct 2006 21:43:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 13:43:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 13:43:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id E3F077142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 13:43:17 -0800 (PST)
Message-ID: <14314498.1162330997929.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 13:43:17 -0800 (PST)
From: "Yoram Arnon (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-225) tasks are left over when a job fails
In-Reply-To: <14555788.1147888325909.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-225?page=comments#action_12446067 ] 
            
Yoram Arnon commented on HADOOP-225:
------------------------------------

Not sure:
- I haven't been monitoring this as much lately.
- JT crashes too frequently to get a decent statistic

Let's check in a few days

Yoram 



> tasks are left over when a job fails
> ------------------------------------
>
>                 Key: HADOOP-225
>                 URL: http://issues.apache.org/jira/browse/HADOOP-225
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.2.0
>            Reporter: Yoram Arnon
>            Priority: Minor
>
> when jobs are stopped or otherwise fail, tasks are often left around.
> the job tracker shows that there are map or reduce (mostly reduce) tasks running, when no job is running.
> these accumulate over time.
> eventually there are so many of those, that the job tracker can't launch new tasks, requiring a restart of the MR cluster.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 21:57:40 2006
Return-Path: 
 <hadoop-dev-return-4675-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 15812 invoked from network); 31 Oct 2006 21:57:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 21:57:40 -0000
Received: (qmail 27508 invoked by uid 500); 31 Oct 2006 21:57:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 27279 invoked by uid 500); 31 Oct 2006 21:57:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 27264 invoked by uid 99); 31 Oct 2006 21:57:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 13:57:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 13:57:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 23DB77142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 13:57:19 -0800 (PST)
Message-ID: <28055573.1162331839144.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 13:57:19 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-565) Upgrade Jetty to 6.x
In-Reply-To: <17704060.1159552279561.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-565?page=all ]

Doug Cutting updated HADOOP-565:
--------------------------------

    Status: Open  (was: Patch Available)

Now when I apply this and run the following unit  test:

ant -Dtestcase=TestMiniMRClasspath -Dtest.output=yes test-core

I get an OutOfMemoryError:

    [junit] 2006-10-31 13:38:22,562 WARN  ipc.Server (Server.java:run(246)) - Out of Memory in server select
    [junit] java.lang.OutOfMemoryError: Direct buffer memory
    [junit]     at java.nio.Bits.reserveMemory(Bits.java:632)
    [junit]     at java.nio.DirectByteBuffer.<init>(DirectByteBuffer.java:95)
    [junit]     at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:288)
    [junit]     at org.apache.hadoop.ipc.Server$Connection.readAndProcess(Server.java:422)
    [junit]     at org.apache.hadoop.ipc.Server$Listener.doRead(Server.java:314)
    [junit]     at org.apache.hadoop.ipc.Server$Listener.run(Server.java:235)

Changing the type of allocation (HADOOP-637) does not fix this.  Adding a print statement shows that it is trying to allocate a 1195725856-byte buffer.

> Upgrade Jetty to 6.x
> --------------------
>
>                 Key: HADOOP-565
>                 URL: http://issues.apache.org/jira/browse/HADOOP-565
>             Project: Hadoop
>          Issue Type: Improvement
>          Components: mapred
>            Reporter: Owen O'Malley
>         Assigned To: Sanjay Dahiya
>         Attachments: Hadoop-565.patch, Hadoop-565_1.patch.txt, Hadoop-565_2.patch, Hadoop-565_lib.tar.gz
>
>
> Now that Jetty 6.x has been released as stable, we should upgrade.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:01:40 2006
Return-Path: 
 <hadoop-dev-return-4676-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 16797 invoked from network); 31 Oct 2006 22:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:01:40 -0000
Received: (qmail 32627 invoked by uid 500); 31 Oct 2006 22:01:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 32589 invoked by uid 500); 31 Oct 2006 22:01:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 32580 invoked by uid 99); 31 Oct 2006 22:01:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:01:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:01:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id EE4A47142FA
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:01:18 -0800 (PST)
Message-ID: <6004725.1162332078973.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:01:18 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Commented: (HADOOP-639) task cleanup messages can get lost,
 causing task trackers to keep tasks forever
In-Reply-To: <23380746.1161813796565.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

    [ http://issues.apache.org/jira/browse/HADOOP-639?page=comments#action_12446075 ] 
            
Owen O'Malley commented on HADOOP-639:
--------------------------------------

Ok, I propose that we unify the heartbeats with the messages requesting work:

In InterTrackerProtocol:

TaskTrackerTask[] updateStatus(TaskTrackerStatus status) throws IOException;

replacing emitHeartbeat, pollForNewTask, and pollForTaskWithClosedJob.

The TaskTrackerTask includes:
  new task -- run a new task
  kill task -- stop a currently running task and clean up
  cleanup job -- clean up the map outputs from a given job

The TaskTrackerStatus would gain:
  a counter of the number of TaskTrackerTask lists processed
  amount of free disk space in transient storage

The counter would be used to make sure the last set of commands were received. Thus, it could replace both the init task timeouts and fix this bug.

> task cleanup messages can get lost, causing task trackers to keep tasks forever
> -------------------------------------------------------------------------------
>
>                 Key: HADOOP-639
>                 URL: http://issues.apache.org/jira/browse/HADOOP-639
>             Project: Hadoop
>          Issue Type: Bug
>          Components: mapred
>    Affects Versions: 0.7.2
>            Reporter: Owen O'Malley
>         Assigned To: Owen O'Malley
>             Fix For: 0.8.0
>
>
> If the pollForTaskWithClosedJob call from a job tracker to a task tracker times out when a job completes, the tasks are never cleaned up. This can cause the mini m/r cluster to hang on shutdown, but also is a resource leak.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:03:38 2006
Return-Path: 
 <hadoop-dev-return-4677-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17151 invoked from network); 31 Oct 2006 22:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:03:38 -0000
Received: (qmail 37438 invoked by uid 500); 31 Oct 2006 22:03:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37409 invoked by uid 500); 31 Oct 2006 22:03:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37400 invoked by uid 99); 31 Oct 2006 22:03:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:03:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:03:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id AC6AA7142F8
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:03:16 -0800 (PST)
Message-ID: <2332758.1162332196703.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:03:16 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-660) Format of junit output should be
 configurable
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Format of junit output should be configurable
---------------------------------------------

                 Key: HADOOP-660
                 URL: http://issues.apache.org/jira/browse/HADOOP-660
             Project: Hadoop
          Issue Type: Improvement
    Affects Versions: 0.7.2
            Reporter: Nigel Daley
         Assigned To: Nigel Daley
            Priority: Minor
         Attachments: junitbuild.patch

It would be helpful if the junit output type (text or xml) could be configured by a property. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:03:39 2006
Return-Path: 
 <hadoop-dev-return-4678-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17193 invoked from network); 31 Oct 2006 22:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:03:39 -0000
Received: (qmail 37701 invoked by uid 500); 31 Oct 2006 22:03:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37668 invoked by uid 500); 31 Oct 2006 22:03:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37659 invoked by uid 99); 31 Oct 2006 22:03:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:03:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:03:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 0FF777142F6
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:03:18 -0800 (PST)
Message-ID: <12899491.1162332198063.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:03:18 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-660) Format of junit output should be
 configurable
In-Reply-To: <2332758.1162332196703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-660?page=all ]

Nigel Daley updated HADOOP-660:
-------------------------------

    Attachment: junitbuild.patch

> Format of junit output should be configurable
> ---------------------------------------------
>
>                 Key: HADOOP-660
>                 URL: http://issues.apache.org/jira/browse/HADOOP-660
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: junitbuild.patch
>
>
> It would be helpful if the junit output type (text or xml) could be configured by a property. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:03:41 2006
Return-Path: 
 <hadoop-dev-return-4679-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 17236 invoked from network); 31 Oct 2006 22:03:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:03:41 -0000
Received: (qmail 37989 invoked by uid 500); 31 Oct 2006 22:03:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 37954 invoked by uid 500); 31 Oct 2006 22:03:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 37939 invoked by uid 99); 31 Oct 2006 22:03:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:03:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:03:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4AC6D7142F9
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:03:19 -0800 (PST)
Message-ID: <8113918.1162332199303.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:03:19 -0800 (PST)
From: "Nigel Daley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-660) Format of junit output should be
 configurable
In-Reply-To: <2332758.1162332196703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-660?page=all ]

Nigel Daley updated HADOOP-660:
-------------------------------

           Status: Patch Available  (was: Open)
    Fix Version/s: 0.8.0

Allows the junit output format to be set by the test.junit.output.format property.

> Format of junit output should be configurable
> ---------------------------------------------
>
>                 Key: HADOOP-660
>                 URL: http://issues.apache.org/jira/browse/HADOOP-660
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: junitbuild.patch
>
>
> It would be helpful if the junit output type (text or xml) could be configured by a property. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:15:42 2006
Return-Path: 
 <hadoop-dev-return-4680-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 20739 invoked from network); 31 Oct 2006 22:15:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:15:42 -0000
Received: (qmail 66914 invoked by uid 500); 31 Oct 2006 22:15:53 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 66889 invoked by uid 500); 31 Oct 2006 22:15:53 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 66880 invoked by uid 99); 31 Oct 2006 22:15:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:15:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:15:41 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 933927142F3
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:15:20 -0800 (PST)
Message-ID: <8874483.1162332920600.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:15:20 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-90) DFS is succeptible to data loss in case
 of name node failure
In-Reply-To: <726654166.1142563875329.JavaMail.jira@ajax>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-90?page=all ]

Doug Cutting updated HADOOP-90:
-------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!


> DFS is succeptible to data loss in case of name node failure
> ------------------------------------------------------------
>
>                 Key: HADOOP-90
>                 URL: http://issues.apache.org/jira/browse/HADOOP-90
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Yoram Arnon
>         Assigned To: Konstantin Shvachko
>             Fix For: 0.8.0
>
>         Attachments: backup.patch, multipleEditsDest.patch
>
>
> Currently, DFS name node stores its log and state in local files.
> This has the disadvantage that a hardware failure of the name node causes a total data loss. 
> Several approaches may be used to address this flaw:
> 1. replicate the name server state files using copy or rsync once in a while, either manually or using a cron job.
> 2. set up secondary name servers and a protocol whereby the primary updates the secondaries. In case of failure, a secondary can take over.
> 3. store the state files as distributed, replicated files in the DFS itself. The difficulty is that it becomes a bootstrap problem, where the name node needs some information, typically stored in its state files, in order to read those same state files.
> solution 1 is fine for non critical systems, but for systems that need to guarantee no data loss it's insufficient.
> Solutions 2 and 3 both seem valid; 3 seems more elegant in that it doesn't require an extra protocol, it leverages the DFS and allows any level of replication for robustness. Below is a proposition for  solution 3.
> 1.	The name node, when it starts up, needs some basic information. That information is not large and can easily be stored in a single block of DFS. We hard code the block location, using block id 0. Block 0 will contain the list of blocks that contain the name node metadata - not the metadata itself (file names, servers, blocks etc), just the list of blocks that contain it. With a block identified by 8 bytes, and 32 MB blocks, we can fit 256K block id's in block 0. 256K blocks of 32MB each can hold 8TB of metadata, which can map a large enough file system, so a single block of block_ids is sufficient.
> 2.	The name node writes his state basically the same way as now: log file plus occasional full state. DFS needs to change to commit changes to open files while allowing continued writing to them, or else the log file wouldn't be valid on name server failure, before the file is closed. 
> 3.	The name node will use double buffering for its state, using blocks 0 and 1. Starting with block 0, it writes its state, then a log of changes. When it's time to write a new state it writes it to node 1. The state includes a generation number, a single byte starting at 0, to enable the name server to identify the valid state. A CRC is written at the end of the block to mark its validity and completeness. The log file is identified by the same generation number as the state it relates to. 
> 4.	The log file will be limited to a single block as well. When that block fills up a new state is written. 32MB of transaction logs should suffice. If not, we could set aside a set of blocks, and set aside a few locations in the super-block (block 0/1) to store that set of block ids.
> 5.	The super-block, the log and the metadata blocks may be exposed as read only files in reserved files in the DFS: /.metadata/* or something.
> 6.	When a name nodes starts, it waits for data nodes to connect to it to report their blocks. It waits until it gets a report about blocks 0 and 1, from which it can continue to read its entire state. After that it continues normally.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:19:42 2006
Return-Path: 
 <hadoop-dev-return-4681-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 23072 invoked from network); 31 Oct 2006 22:19:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:19:42 -0000
Received: (qmail 82242 invoked by uid 500); 31 Oct 2006 22:19:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 82217 invoked by uid 500); 31 Oct 2006 22:19:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 82197 invoked by uid 99); 31 Oct 2006 22:19:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:19:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:19:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 6475C7142F6
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:19:19 -0800 (PST)
Message-ID: <14555493.1162333159408.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:19:19 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-651) fsck does not handle arguments -blocks
 and -locations correctly
In-Reply-To: <6883418.1161974596748.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-651?page=all ]

Doug Cutting updated HADOOP-651:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Milind!

> fsck does not handle arguments -blocks and -locations correctly
> ---------------------------------------------------------------
>
>                 Key: HADOOP-651
>                 URL: http://issues.apache.org/jira/browse/HADOOP-651
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.7.2
>            Reporter: Milind Bhandarkar
>         Assigned To: Milind Bhandarkar
>             Fix For: 0.8.0
>
>         Attachments: fsck-bug.patch
>
>
> fsck does not pass arguments correctly to the servlet. As a result, only the last argument (except for the path) is passed to the servlet. Patch is forthcoming.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:24:38 2006
Return-Path: 
 <hadoop-dev-return-4682-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 25980 invoked from network); 31 Oct 2006 22:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:24:38 -0000
Received: (qmail 92909 invoked by uid 500); 31 Oct 2006 22:24:48 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 92889 invoked by uid 500); 31 Oct 2006 22:24:48 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 92880 invoked by uid 99); 31 Oct 2006 22:24:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:24:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:24:36 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 8FD477142F3
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:24:16 -0800 (PST)
Message-ID: <20147831.1162333456586.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:24:16 -0800 (PST)
From: "Owen O'Malley (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Created: (HADOOP-661) JobConf for a job should be viewable
 from the web/ui
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

JobConf for a job should be viewable from the web/ui
----------------------------------------------------

                 Key: HADOOP-661
                 URL: http://issues.apache.org/jira/browse/HADOOP-661
             Project: Hadoop
          Issue Type: Improvement
          Components: mapred
    Affects Versions: 0.7.2
            Reporter: Owen O'Malley
         Assigned To: Owen O'Malley


It would be very useful to be able to see the JobConf for a job from the web/ui. I would add a link from the job detail page to an xml dump of the JobConf which uses a variant of the configuration.xsl, which I would add to the webapps/static directory, to display it.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:32:39 2006
Return-Path: 
 <hadoop-dev-return-4683-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 35458 invoked from network); 31 Oct 2006 22:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:32:39 -0000
Received: (qmail 2011 invoked by uid 500); 31 Oct 2006 22:32:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 1980 invoked by uid 500); 31 Oct 2006 22:32:50 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 1971 invoked by uid 99); 31 Oct 2006 22:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:32:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:32:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 4F9137141D1
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:32:18 -0800 (PST)
Message-ID: <10816895.1162333938323.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:32:18 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-553) DataNode and NameNode main() should
 catch and report exceptions.
In-Reply-To: <20128603.1158791482407.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-553?page=all ]

Doug Cutting updated HADOOP-553:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Raghu!

> DataNode and NameNode main() should catch and report exceptions.
> ----------------------------------------------------------------
>
>                 Key: HADOOP-553
>                 URL: http://issues.apache.org/jira/browse/HADOOP-553
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs, mapred
>    Affects Versions: 0.6.1
>            Reporter: Konstantin Shvachko
>         Assigned To: Raghu Angadi
>             Fix For: 0.8.0
>
>         Attachments: logging-exceptions-2.patch
>
>
> Right now we do not know what happened during startup failure,
> because there no records in the logs.
> I propose to change main() so that it would catch exceptions and 
> log them rather then throwing them into std out.
> May be the same should be done for the JobTracker.
> The TaskTracker.main() catches at least the IOException.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:36:42 2006
Return-Path: 
 <hadoop-dev-return-4684-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 38004 invoked from network); 31 Oct 2006 22:36:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:36:42 -0000
Received: (qmail 8965 invoked by uid 500); 31 Oct 2006 22:36:51 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 8940 invoked by uid 500); 31 Oct 2006 22:36:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 8930 invoked by uid 99); 31 Oct 2006 22:36:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:36:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:36:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 304697141D1
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:36:19 -0800 (PST)
Message-ID: <1613208.1162334179194.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:36:19 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-399) the javadoc currently generates lot of
 warnings about bad fields
In-Reply-To: <23542988.1154118433987.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-399?page=all ]

Doug Cutting updated HADOOP-399:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Nigel!

> the javadoc currently generates lot of warnings about bad fields
> ----------------------------------------------------------------
>
>                 Key: HADOOP-399
>                 URL: http://issues.apache.org/jira/browse/HADOOP-399
>             Project: Hadoop
>          Issue Type: Bug
>    Affects Versions: 0.4.0
>            Reporter: Owen O'Malley
>         Assigned To: Nigel Daley
>            Priority: Trivial
>             Fix For: 0.8.0
>
>         Attachments: javadoc-fixes.patch
>
>
> When building the "tar" target, I get the following warnings:
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DFSck.java:475: warning - @return tag has no arguments.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @link: reference not found: DatanodeRegistration
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/dfs/DatanodeProtocol.java:46: warning - Tag @see: reference not found: FSNamesystem#registerDatanode(DatanodeRegistration)
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/BytesWritable.java:63: warning - @return tag has no arguments.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:252: warning - Tag @link: can't find Reader(FileSystem,Path,Configuration) in org.apache.hadoop.io.SequenceFile.Reader
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/SequenceFile.java:81: warning - Tag @link: can't find Writer(FileSystem,Path,Class,Class) in org.apache.hadoop.io.SequenceFile.Writer
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:104: warning - @returns is an unknown tag.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/Text.java:413: warning - @param argument "utf8:" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/io/WritableUtils.java:338: warning - @param argument "i:" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/java/org/apache/hadoop/mapred/JobConf.java:77: warning - @param argument "conf" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - Tag @author cannot be used in method documentation.  It can only be used in the following types of documentation: overview, package, class/interface.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/ExampleDriver.java:29: warning - @date is an unknown tag.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:62: warning - @param argument "value" is not a parameter name.
>   [javadoc] /home/oom/work/eclipse/hadoop-trunk/src/examples/org/apache/hadoop/examples/PiBenchmark.java:106: warning - @ is an unknown tag.

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:43:41 2006
Return-Path: 
 <hadoop-dev-return-4685-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 44422 invoked from network); 31 Oct 2006 22:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:43:41 -0000
Received: (qmail 22839 invoked by uid 500); 31 Oct 2006 22:43:52 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 22608 invoked by uid 500); 31 Oct 2006 22:43:51 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 22599 invoked by uid 99); 31 Oct 2006 22:43:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:43:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:43:39 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id 9A5477142BF
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:43:19 -0800 (PST)
Message-ID: <23420364.1162334599629.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:43:19 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-599) DFS Always Reports 0 Bytes Used
In-Reply-To: <25432427.1160636554993.JavaMail.jira@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-599?page=all ]

Doug Cutting updated HADOOP-599:
--------------------------------

           Status: Resolved  (was: Patch Available)
    Fix Version/s: 0.8.0
       Resolution: Fixed

I just committed this.  Thanks, Raghu!

> DFS Always Reports 0 Bytes Used
> -------------------------------
>
>                 Key: HADOOP-599
>                 URL: http://issues.apache.org/jira/browse/HADOOP-599
>             Project: Hadoop
>          Issue Type: Bug
>          Components: dfs
>    Affects Versions: 0.6.0, 0.7.0, 0.6.1, 0.6.2, 0.7.1
>         Environment: Ubuntu
>            Reporter: Albert Chern
>         Assigned To: Raghu Angadi
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: dfs-report-3.patch
>
>
> Ever since 0.6 our DFS cluster has been reporting that it is empty, even though it's not.  We seem to have resolved the issue by changing line 296 of org.apache.hadoop.dfs.FSDataset from:
> Long remaining = new Long(volumes[idx].getCapacity();
> to:
> Long remaining = new Long(volumes[idx].getAvailable());

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

From MAILER-DAEMON Tue Oct 31 22:47:39 2006
Return-Path: 
 <hadoop-dev-return-4686-apmail-lucene-hadoop-dev-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-hadoop-dev-archive@locus.apache.org
Received: (qmail 46126 invoked from network); 31 Oct 2006 22:47:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 22:47:39 -0000
Received: (qmail 26598 invoked by uid 500); 31 Oct 2006 22:47:50 -0000
Delivered-To: apmail-lucene-hadoop-dev-archive@lucene.apache.org
Received: (qmail 26574 invoked by uid 500); 31 Oct 2006 22:47:49 -0000
Mailing-List: contact hadoop-dev-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:hadoop-dev-help@lucene.apache.org>
List-Unsubscribe: <mailto:hadoop-dev-unsubscribe@lucene.apache.org>
List-Post: <mailto:hadoop-dev@lucene.apache.org>
List-Id: <hadoop-dev.lucene.apache.org>
Reply-To: hadoop-dev@lucene.apache.org
Delivered-To: mailing list hadoop-dev@lucene.apache.org
Received: (qmail 26563 invoked by uid 99); 31 Oct 2006 22:47:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:47:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.4] (HELO brutus.apache.org) (140.211.11.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 14:47:38 -0800
Received: from brutus (localhost [127.0.0.1])
	by brutus.apache.org (Postfix) with ESMTP id D1C817142C1
	for <hadoop-dev@lucene.apache.org>; Tue, 31 Oct 2006 14:47:17 -0800 (PST)
Message-ID: <4737000.1162334837856.JavaMail.root@brutus>
Date: Tue, 31 Oct 2006 14:47:17 -0800 (PST)
From: "Doug Cutting (JIRA)" <jira@apache.org>
To: hadoop-dev@lucene.apache.org
Subject: [jira] Updated: (HADOOP-660) Format of junit output should be
 configurable
In-Reply-To: <2332758.1162332196703.JavaMail.root@brutus>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

     [ http://issues.apache.org/jira/browse/HADOOP-660?page=all ]

Doug Cutting updated HADOOP-660:
--------------------------------

        Status: Resolved  (was: Patch Available)
    Resolution: Fixed

I just committed this.  Thanks, Nigel!

> Format of junit output should be configurable
> ---------------------------------------------
>
>                 Key: HADOOP-660
>                 URL: http://issues.apache.org/jira/browse/HADOOP-660
>             Project: Hadoop
>          Issue Type: Improvement
>    Affects Versions: 0.7.2
>            Reporter: Nigel Daley
>         Assigned To: Nigel Daley
>            Priority: Minor
>             Fix For: 0.8.0
>
>         Attachments: junitbuild.patch
>
>
> It would be helpful if the junit output type (text or xml) could be configured by a property. 

-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators: http://issues.apache.org/jira/secure/Administrators.jspa
-
For more information on JIRA, see: http://www.atlassian.com/software/jira

        

